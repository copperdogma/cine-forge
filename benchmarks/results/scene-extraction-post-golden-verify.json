{
  "evalId": "eval-7zm-2026-03-02T04:09:00",
  "results": {
    "version": 3,
    "timestamp": "2026-03-02T04:09:00.139Z",
    "prompts": [
      {
        "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "id": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "provider": "GPT-4.1 Nano",
        "metrics": {
          "score": 0.62715,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 1,
          "totalLatencyMs": 14519,
          "tokenUsage": {
            "prompt": 4648,
            "completion": 1601,
            "cached": 0,
            "total": 6249,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2668,
              "prompt": 1831,
              "completion": 837,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.0011052000000000002
        }
      },
      {
        "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "id": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "provider": "GPT-4.1 Mini",
        "metrics": {
          "score": 0.75085,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 1,
          "totalLatencyMs": 28645,
          "tokenUsage": {
            "prompt": 4648,
            "completion": 2036,
            "cached": 0,
            "total": 6684,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 3100,
              "prompt": 2247,
              "completion": 853,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.0051168
        }
      },
      {
        "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "id": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "provider": "GPT-4.1",
        "metrics": {
          "score": 0.7325,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 1,
          "totalLatencyMs": 24023,
          "tokenUsage": {
            "prompt": 4648,
            "completion": 1866,
            "cached": 0,
            "total": 6514,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2996,
              "prompt": 2049,
              "completion": 947,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.024224
        }
      },
      {
        "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "id": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "provider": "Claude Haiku 4.5",
        "metrics": {
          "score": 0.7279,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 1,
          "totalLatencyMs": 17338,
          "tokenUsage": {
            "prompt": 5307,
            "completion": 2674,
            "cached": 0,
            "total": 7981,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 3901,
              "prompt": 3052,
              "completion": 849,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.018677000000000003
        }
      },
      {
        "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "id": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "provider": "Claude Sonnet 4.5",
        "metrics": {
          "score": 0.6308,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 1,
          "totalLatencyMs": 39700,
          "tokenUsage": {
            "prompt": 5307,
            "completion": 2701,
            "cached": 0,
            "total": 8008,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 3912,
              "prompt": 3079,
              "completion": 833,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.056436
        }
      },
      {
        "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "id": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "provider": "Claude Sonnet 4.6",
        "metrics": {
          "score": 0.8085,
          "testPassCount": 1,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 2,
          "assertFailCount": 0,
          "totalLatencyMs": 35527,
          "tokenUsage": {
            "prompt": 5307,
            "completion": 2418,
            "cached": 0,
            "total": 7725,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 3407,
              "prompt": 2796,
              "completion": 611,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0
        }
      },
      {
        "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "id": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "provider": "GPT-5.2",
        "metrics": {
          "score": 0.925,
          "testPassCount": 1,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 2,
          "assertFailCount": 0,
          "totalLatencyMs": 20143,
          "tokenUsage": {
            "prompt": 4647,
            "completion": 1871,
            "cached": 0,
            "total": 6518,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2910,
              "prompt": 2045,
              "completion": 865,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.03432625
        }
      },
      {
        "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "id": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "provider": "Claude Opus 4.6",
        "metrics": {
          "score": 0.85385,
          "testPassCount": 1,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 2,
          "assertFailCount": 0,
          "totalLatencyMs": 37407,
          "tokenUsage": {
            "prompt": 5307,
            "completion": 2439,
            "cached": 0,
            "total": 7746,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 3531,
              "prompt": 2817,
              "completion": 714,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.08751
        }
      }
    ],
    "results": [
      {
        "cost": 0.0011052000000000002,
        "error": "The output identifies a reasonable number of scenes and captures key characters and plot elements. However, there are significant issues: duplicate flashback scenes (5/6 and 9/12), a confused scene 15 that mixes flashback location with present-day characters, an INT/EXT mismatch in scene 15, and some headings that appear approximate or fabricated. Summaries are generally meaningful but occasionally vague. Flashbacks are mostly distinguished but the boundary handling is imprecise with redundancies. Time of day is mostly correct. Character identification is reasonable but potentially incomplete for O.S. characters.",
        "gradingResult": {
          "pass": false,
          "score": 0.62715,
          "reason": "The output identifies a reasonable number of scenes and captures key characters and plot elements. However, there are significant issues: duplicate flashback scenes (5/6 and 9/12), a confused scene 15 that mixes flashback location with present-day characters, an INT/EXT mismatch in scene 15, and some headings that appear approximate or fabricated. Summaries are generally meaningful but occasionally vague. Flashbacks are mostly distinguished but the boundary handling is imprecise with redundancies. Time of day is mostly correct. Character identification is reasonable but potentially incomplete for O.S. characters.",
          "namedScores": {},
          "tokensUsed": {
            "total": 2668,
            "prompt": 1831,
            "completion": 837,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.8543,
              "reason": "character_recall=0.50 | field_completeness=1.00 | heading_match=0.87 | heading_quality=0.91 | json_valid=1.00 | scene_count=0.70 | summary_completeness=1.00 | Count: 16 vs 15 golden (off by 1) | Matched 13/15 headings | Missing chars: CARLOS, MIKEY, THUG 1, THUG 2, THUG 3",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/scene_extraction_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
              },
              "pass": false,
              "score": 0.4,
              "reason": "The output identifies a reasonable number of scenes and captures key characters and plot elements. However, there are significant issues: duplicate flashback scenes (5/6 and 9/12), a confused scene 15 that mixes flashback location with present-day characters, an INT/EXT mismatch in scene 15, and some headings that appear approximate or fabricated. Summaries are generally meaningful but occasionally vague. Flashbacks are mostly distinguished but the boundary handling is imprecise with redundancies. Time of day is mostly correct. Character identification is reasonable but potentially incomplete for O.S. characters.",
              "tokensUsed": {
                "total": 2668,
                "prompt": 1831,
                "completion": 837,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n{\\\"title\\\":\\\"The Mariner\\\",\\\"scene_count\\\":16,\\\"scenes\\\":[{\\\"scene_number\\\":1,\\\"heading\\\":\\\"EXT. CITY CENTRE - NIGHT\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"City Centre\\\",\\\"time_of_day\\\":\\\"NIGHT\\\",\\\"summary\\\":\\\"A ruined cityscape with fires, gunfire, and chaos sets the scene of a post-apocalyptic urban environment.\\\",\\\"characters\\\":[]},{\\\"scene_number\\\":2,\\\"heading\\\":\\\"EXT. RUDDY & GREENE BUILDING - FRONT - NIGHT\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"Ruddy & Greene Building - Front\\\",\\\"time_of_day\\\":\\\"NIGHT\\\",\\\"summary\\\":\\\"A classic sandstone building with high-end SUVs parked outside, now riddled with damage and graffiti.\\\",\\\"characters\\\":[]},{\\\"scene_number\\\":3,\\\"heading\\\":\\\"EXT. RUDDY & GREENE BUILDING - REAR - NIGHT\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"Ruddy & Greene Building - Rear\\\",\\\"time_of_day\\\":\\\"NIGHT\\\",\\\"summary\\\":\\\"A grimy alley where a delivery van arrives; Mariner emerges from shadow and enters the building amidst sounds of violence.\\\",\\\"characters\\\":[\\\"The Mariner\\\"]},{\\\"scene_number\\\":4,\\\"heading\\\":\\\"INT. RUDDY & GREENE BUILDING - ELEVATOR\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"Ruddy & Greene Building - Elevator\\\",\\\"time_of_day\\\":\\\"N/A\\\",\\\"summary\\\":\\\"Rose and Mariner are trapped in an elevator, catching their breath after a violent encounter, with a flashback to childhood.\\\",\\\"characters\\\":[\\\"Rose\\\",\\\"Mariner\\\"]},{\\\"scene_number\\\":5,\\\"heading\\\":\\\"EXT. COASTLINE - DAY - PAST\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"Coastline\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"Young Mariner and his dad enjoy a day on the water, with the dad imparting wisdom about heroism.\\\",\\\"characters\\\":[\\\"Young Mariner\\\",\\\"Dad\\\"]},{\\\"scene_number\\\":6,\\\"heading\\\":\\\"BEGIN FLASHBACK: EXT. COASTLINE - DAY - PAST\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"Coastline\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"Young Mariner and his dad are fishing and sharing a moment of bonding about heroism.\\\",\\\"characters\\\":[\\\"Young Mariner\\\",\\\"Dad\\\"]},{\\\"scene_number\\\":7,\\\"heading\\\":\\\"INT. RUDDY & GREENE BUILDING - ELEVATOR\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"Ruddy & Greene Building - Elevator\\\",\\\"time_of_day\\\":\\\"N/A\\\",\\\"summary\\\":\\\"Rose and Mariner discuss the AirTag and their situation, leading to a confrontation with thugs on the 12th floor.\\\",\\\"characters\\\":[\\\"Rose\\\",\\\"Mariner\\\"]},{\\\"scene_number\\\":8,\\\"heading\\\":\\\"INT. 11TH FLOOR - CONTINUOUS\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"Ruddy & Greene Building - 11th Floor\\\",\\\"time_of_day\\\":\\\"N/A\\\",\\\"summary\\\":\\\"Mariner and Rose hide from thugs, with a flashback to Mariner’s childhood and lessons from his father.\\\",\\\"characters\\\":[\\\"Rose\\\",\\\"Mariner\\\"]},{\\\"scene_number\\\":9,\\\"heading\\\":\\\"BEGIN FLASHBACK: EXT. BACKYARD - DAY - PAST\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"Backyard\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"Mariner’s father teaches him about strength and fighting, emphasizing the importance of standing up for oneself.\\\",\\\"characters\\\":[\\\"Young Mariner\\\",\\\"Dad\\\"]},{\\\"scene_number\\\":10,\\\"heading\\\":\\\"INT. RUDDY & GREENE BUILDING - 12TH FLOOR STAIRWELL\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"Ruddy & Greene Building - 12th Floor Stairwell\\\",\\\"time_of_day\\\":\\\"N/A\\\",\\\"summary\\\":\\\"Mariner and Rose confront Rosco, who is caught off guard and explains blockchain, leading to a fight and Mariner’s injury.\\\",\\\"characters\\\":[\\\"Rose\\\",\\\"Mariner\\\",\\\"Rosco\\\"]},{\\\"scene_number\\\":11,\\\"heading\\\":\\\"INT. 13TH FLOOR\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"Ruddy & Greene Building - 13th Floor\\\",\\\"time_of_day\\\":\\\"N/A\\\",\\\"summary\\\":\\\"Mariner and Rose find a luxurious room, with a flashback to Mariner’s childhood lessons about strength and bravery.\\\",\\\"characters\\\":[\\\"Rose\\\",\\\"Mariner\\\"]},{\\\"scene_number\\\":12,\\\"heading\\\":\\\"BEGIN FLASHBACK: EXT. BACKYARD - DAY - PAST\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"Backyard\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"Mariner’s father encourages him to be a fighter and not run from fights, reinforcing lessons of strength.\\\",\\\"characters\\\":[\\\"Young Mariner\\\",\\\"Dad\\\"]},{\\\"scene_number\\\":13,\\\"heading\\\":\\\"INT. STAIRWELL - (BACK TO PRESENT)\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"Stairwell\\\",\\\"time_of_day\\\":\\\"N/A\\\",\\\"summary\\\":\\\"Salvatori and thugs threaten Mariner and Rose, with flashbacks revealing Mariner’s past and his father’s influence.\\\",\\\"characters\\\":[\\\"Salvatori\\\",\\\"Mariner\\\",\\\"Rose\\\"]},{\\\"scene_number\\\":14,\\\"heading\\\":\\\"EXT. COASTLINE - DAY - (FLASHBACK)\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"Coastline\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"Young Mariner in a boat, with his father teasing him about heroism, illustrating his early lessons in strength and bravery.\\\",\\\"characters\\\":[\\\"Young Mariner\\\",\\\"Dad\\\"]},{\\\"scene_number\\\":15,\\\"heading\\\":\\\"INT. BACKYARD - DAY - (FLASHBACK)\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"Backyard\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"Salvatori questions Mariner about heroism; Mariner admits he is not a hero, as Salvatori prepares to threaten him.\\\",\\\"characters\\\":[\\\"Salvatori\\\",\\\"Mariner\\\"]},{\\\"scene_number\\\":16,\\\"heading\\\":\\\"INT. OFFICE - NIGHT\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"Office\\\",\\\"time_of_day\\\":\\\"NIGHT\\\",\\\"summary\\\":\\\"Salvatori demands the password from Rose, asserting her bravery and honesty, as Mariner prepares to fight back.\\\",\\\"characters\\\":[\\\"Salvatori\\\",\\\"Rose\\\",\\\"Mariner\\\"]}]}\\n</Output>\\n<Rubric>\\nEvaluate the scene extraction output for the screenplay \\\"The Mariner.\\\"\\n\\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\\nKey quality criteria:\\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\\n2. Are scene headings accurate and complete?\\n3. Are INT/EXT designations correct?\\n4. Are character names correctly identified for each scene (including O.S. characters)?\\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\\n7. Are the flashback scenes properly distinguished from present-day scenes?\\n\\nScore strictly: partial credit for close but imperfect extraction.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "56a7c4bc-dd26-4c8f-ba5c-31367ff24a68",
        "latencyMs": 14519,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n==========",
          "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "promptIdx": 0,
        "provider": {
          "id": "openai:gpt-4.1-nano",
          "label": "GPT-4.1 Nano"
        },
        "response": {
          "output": "{\n  \"title\": \"The Mariner\",\n  \"scene_count\": 16,\n  \"scenes\": [\n    {\n      \"scene_number\": 1,\n      \"heading\": \"EXT. CITY CENTRE - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"City Centre\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A ruined cityscape with fires, gunfire, and chaos sets the scene of a post-apocalyptic urban environment.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 2,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING - FRONT - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Ruddy & Greene Building - Front\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A classic sandstone building with high-end SUVs parked outside, now riddled with damage and graffiti.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 3,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING - REAR - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Ruddy & Greene Building - Rear\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A grimy alley where a delivery van arrives; Mariner emerges from shadow and enters the building amidst sounds of violence.\",\n      \"characters\": [\"The Mariner\"]\n    },\n    {\n      \"scene_number\": 4,\n      \"heading\": \"INT. RUDDY & GREENE BUILDING - ELEVATOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"Ruddy & Greene Building - Elevator\",\n      \"time_of_day\": \"N/A\",\n      \"summary\": \"Rose and Mariner are trapped in an elevator, catching their breath after a violent encounter, with a flashback to childhood.\",\n      \"characters\": [\"Rose\", \"Mariner\"]\n    },\n    {\n      \"scene_number\": 5,\n      \"heading\": \"EXT. COASTLINE - DAY - PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Coastline\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Young Mariner and his dad enjoy a day on the water, with the dad imparting wisdom about heroism.\",\n      \"characters\": [\"Young Mariner\", \"Dad\"]\n    },\n    {\n      \"scene_number\": 6,\n      \"heading\": \"BEGIN FLASHBACK: EXT. COASTLINE - DAY - PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Coastline\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Young Mariner and his dad are fishing and sharing a moment of bonding about heroism.\",\n      \"characters\": [\"Young Mariner\", \"Dad\"]\n    },\n    {\n      \"scene_number\": 7,\n      \"heading\": \"INT. RUDDY & GREENE BUILDING - ELEVATOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"Ruddy & Greene Building - Elevator\",\n      \"time_of_day\": \"N/A\",\n      \"summary\": \"Rose and Mariner discuss the AirTag and their situation, leading to a confrontation with thugs on the 12th floor.\",\n      \"characters\": [\"Rose\", \"Mariner\"]\n    },\n    {\n      \"scene_number\": 8,\n      \"heading\": \"INT. 11TH FLOOR - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"Ruddy & Greene Building - 11th Floor\",\n      \"time_of_day\": \"N/A\",\n      \"summary\": \"Mariner and Rose hide from thugs, with a flashback to Mariner’s childhood and lessons from his father.\",\n      \"characters\": [\"Rose\", \"Mariner\"]\n    },\n    {\n      \"scene_number\": 9,\n      \"heading\": \"BEGIN FLASHBACK: EXT. BACKYARD - DAY - PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Backyard\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Mariner’s father teaches him about strength and fighting, emphasizing the importance of standing up for oneself.\",\n      \"characters\": [\"Young Mariner\", \"Dad\"]\n    },\n    {\n      \"scene_number\": 10,\n      \"heading\": \"INT. RUDDY & GREENE BUILDING - 12TH FLOOR STAIRWELL\",\n      \"int_ext\": \"INT\",\n      \"location\": \"Ruddy & Greene Building - 12th Floor Stairwell\",\n      \"time_of_day\": \"N/A\",\n      \"summary\": \"Mariner and Rose confront Rosco, who is caught off guard and explains blockchain, leading to a fight and Mariner’s injury.\",\n      \"characters\": [\"Rose\", \"Mariner\", \"Rosco\"]\n    },\n    {\n      \"scene_number\": 11,\n      \"heading\": \"INT. 13TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"Ruddy & Greene Building - 13th Floor\",\n      \"time_of_day\": \"N/A\",\n      \"summary\": \"Mariner and Rose find a luxurious room, with a flashback to Mariner’s childhood lessons about strength and bravery.\",\n      \"characters\": [\"Rose\", \"Mariner\"]\n    },\n    {\n      \"scene_number\": 12,\n      \"heading\": \"BEGIN FLASHBACK: EXT. BACKYARD - DAY - PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Backyard\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Mariner’s father encourages him to be a fighter and not run from fights, reinforcing lessons of strength.\",\n      \"characters\": [\"Young Mariner\", \"Dad\"]\n    },\n    {\n      \"scene_number\": 13,\n      \"heading\": \"INT. STAIRWELL - (BACK TO PRESENT)\",\n      \"int_ext\": \"INT\",\n      \"location\": \"Stairwell\",\n      \"time_of_day\": \"N/A\",\n      \"summary\": \"Salvatori and thugs threaten Mariner and Rose, with flashbacks revealing Mariner’s past and his father’s influence.\",\n      \"characters\": [\"Salvatori\", \"Mariner\", \"Rose\"]\n    },\n    {\n      \"scene_number\": 14,\n      \"heading\": \"EXT. COASTLINE - DAY - (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Coastline\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Young Mariner in a boat, with his father teasing him about heroism, illustrating his early lessons in strength and bravery.\",\n      \"characters\": [\"Young Mariner\", \"Dad\"]\n    },\n    {\n      \"scene_number\": 15,\n      \"heading\": \"INT. BACKYARD - DAY - (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Backyard\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Salvatori questions Mariner about heroism; Mariner admits he is not a hero, as Salvatori prepares to threaten him.\",\n      \"characters\": [\"Salvatori\", \"Mariner\"]\n    },\n    {\n      \"scene_number\": 16,\n      \"heading\": \"INT. OFFICE - NIGHT\",\n      \"int_ext\": \"INT\",\n      \"location\": \"Office\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Salvatori demands the password from Rose, asserting her bravery and honesty, as Mariner prepares to fight back.\",\n      \"characters\": [\"Salvatori\", \"Rose\", \"Mariner\"]\n    }\n  ]\n}",
          "tokenUsage": {
            "total": 6249,
            "prompt": 4648,
            "completion": 1601,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 14519,
          "finishReason": "stop",
          "cost": 0.0011052000000000002,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9d5d8b218a921812-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Mon, 02 Mar 2026 04:09:14 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "13768",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=v1iFEY5pGBNv5NB7XJdmQwyAp5HY_GI7j_5QXnwYDp0-1772424540.40307-1.0.1.1-yUD1jJfTxBaYK.30_QZAGOmYvRRNib.hJ7FCFD_unsABFx3e_TfCWm9jo6XIPb5QaKv_m9k56ig2Q7ZPy9vnrxrdX0DqjBdEUNKlVISTv8nwzJy7RpV2W5BB.WHdxn0w; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Mon, 02 Mar 2026 04:39:14 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "10000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "9995627",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "26ms",
                "x-request-id": "req_610daa37fbf242a49667cbed5f0cd9ff"
              }
            }
          }
        },
        "score": 0.62715,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-scenes.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/scene_extraction_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-scenes.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9d5d8b218a921812-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Mon, 02 Mar 2026 04:09:14 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "13768",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=v1iFEY5pGBNv5NB7XJdmQwyAp5HY_GI7j_5QXnwYDp0-1772424540.40307-1.0.1.1-yUD1jJfTxBaYK.30_QZAGOmYvRRNib.hJ7FCFD_unsABFx3e_TfCWm9jo6XIPb5QaKv_m9k56ig2Q7ZPy9vnrxrdX0DqjBdEUNKlVISTv8nwzJy7RpV2W5BB.WHdxn0w; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Mon, 02 Mar 2026 04:39:14 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "10000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "9995627",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "26ms",
              "x-request-id": "req_610daa37fbf242a49667cbed5f0cd9ff"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.024224,
        "error": "The extraction captures the major narrative arc well with meaningful summaries, proper flashback identification (scenes 6, 11, 13, 15), correct INT/EXT designations, and good character tracking including O.S. characters. However, there are notable issues: (1) 17 scenes vs expected 13-15, suggesting some over-splitting; (2) Scene 16 conflates flashback and present-day content incorrectly; (3) Many present-day scenes have empty time_of_day fields when they should be NIGHT or CONTINUOUS; (4) Minor typo in scene 4 heading ('GREEN' vs 'GREENE'); (5) Scene 16's heading/summary mismatch is a significant error. Overall, a solid but imperfect extraction.",
        "gradingResult": {
          "pass": false,
          "score": 0.7325,
          "reason": "The extraction captures the major narrative arc well with meaningful summaries, proper flashback identification (scenes 6, 11, 13, 15), correct INT/EXT designations, and good character tracking including O.S. characters. However, there are notable issues: (1) 17 scenes vs expected 13-15, suggesting some over-splitting; (2) Scene 16 conflates flashback and present-day content incorrectly; (3) Many present-day scenes have empty time_of_day fields when they should be NIGHT or CONTINUOUS; (4) Minor typo in scene 4 heading ('GREEN' vs 'GREENE'); (5) Scene 16's heading/summary mismatch is a significant error. Overall, a solid but imperfect extraction.",
          "namedScores": {},
          "tokensUsed": {
            "total": 2996,
            "prompt": 2049,
            "completion": 947,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.915,
              "reason": "character_recall=0.75 | field_completeness=1.00 | heading_match=1.00 | heading_quality=1.00 | json_valid=1.00 | scene_count=0.70 | summary_completeness=1.00 | Count: 17 vs 15 golden (off by 2) | Missing chars: THUG 1, THUG 2, THUG 3",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/scene_extraction_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
              },
              "pass": false,
              "score": 0.55,
              "reason": "The extraction captures the major narrative arc well with meaningful summaries, proper flashback identification (scenes 6, 11, 13, 15), correct INT/EXT designations, and good character tracking including O.S. characters. However, there are notable issues: (1) 17 scenes vs expected 13-15, suggesting some over-splitting; (2) Scene 16 conflates flashback and present-day content incorrectly; (3) Many present-day scenes have empty time_of_day fields when they should be NIGHT or CONTINUOUS; (4) Minor typo in scene 4 heading ('GREEN' vs 'GREENE'); (5) Scene 16's heading/summary mismatch is a significant error. Overall, a solid but imperfect extraction.",
              "tokensUsed": {
                "total": 2996,
                "prompt": 2049,
                "completion": 947,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n{\\\"title\\\":\\\"The Mariner\\\",\\\"scene_count\\\":17,\\\"scenes\\\":[{\\\"scene_number\\\":1,\\\"heading\\\":\\\"EXT. CITY CENTRE - NIGHT\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"CITY CENTRE\\\",\\\"time_of_day\\\":\\\"NIGHT\\\",\\\"summary\\\":\\\"A ruined city is depicted, with fires, rubble, and chaos. The setting is established as a post-pandemic, post-economic collapse urban wasteland.\\\",\\\"characters\\\":[]},{\\\"scene_number\\\":2,\\\"heading\\\":\\\"EXT. RUDDY & GREENE BUILDING - FRONT - NIGHT\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"RUDDY & GREENE BUILDING - FRONT\\\",\\\"time_of_day\\\":\\\"NIGHT\\\",\\\"summary\\\":\\\"The front of a once-beautiful building is shown, now damaged and guarded by luxury SUVs.\\\",\\\"characters\\\":[]},{\\\"scene_number\\\":3,\\\"heading\\\":\\\"EXT. RUDDY & GREENE BUILDING - REAR - NIGHT\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"RUDDY & GREENE BUILDING - REAR\\\",\\\"time_of_day\\\":\\\"NIGHT\\\",\\\"summary\\\":\\\"The Mariner arrives in a disguised van, enters the building, and a violent confrontation ensues inside, heard but not seen.\\\",\\\"characters\\\":[\\\"THE MARINER\\\",\\\"ROSE (O.S.)\\\",\\\"MARINER (O.S.)\\\",\\\"THUGS (O.S.)\\\"]},{\\\"scene_number\\\":4,\\\"heading\\\":\\\"INT. RUDDY & GREEN BUILDING - ELEVATOR\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"RUDDY & GREEN BUILDING - ELEVATOR\\\",\\\"time_of_day\\\":\\\"\\\",\\\"summary\\\":\\\"Rose and Mariner, both bloodied, catch their breath in the elevator. They discuss how Mariner found her and the AirTag he hid in her purse.\\\",\\\"characters\\\":[\\\"ROSE\\\",\\\"MARINER\\\"]},{\\\"scene_number\\\":5,\\\"heading\\\":\\\"INT. 11TH FLOOR - CONTINUOUS\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"11TH FLOOR\\\",\\\"time_of_day\\\":\\\"CONTINUOUS\\\",\\\"summary\\\":\\\"Rose and Mariner search for a stairwell, hide from danger, and Mariner is reminded of his father by his tattoo.\\\",\\\"characters\\\":[\\\"ROSE\\\",\\\"MARINER\\\",\\\"THUGS (O.S.)\\\"]},{\\\"scene_number\\\":6,\\\"heading\\\":\\\"BEGIN FLASHBACK: EXT. COASTLINE - DAY - PAST\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"COASTLINE\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"Young Mariner and his dad enjoy a day fishing on a sailboat. His dad imparts wisdom about being a hero.\\\",\\\"characters\\\":[\\\"YOUNG MARINER\\\",\\\"DAD\\\"]},{\\\"scene_number\\\":7,\\\"heading\\\":\\\"INT. STAIRWELL - CONTINUOUS\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"STAIRWELL\\\",\\\"time_of_day\\\":\\\"CONTINUOUS\\\",\\\"summary\\\":\\\"Rose and Mariner argue about the importance of her purse, revealing it contains a blockchain password. She insists on retrieving it.\\\",\\\"characters\\\":[\\\"ROSE\\\",\\\"MARINER\\\"]},{\\\"scene_number\\\":8,\\\"heading\\\":\\\"INT. 12TH FLOOR STAIRWELL - CONTINUOUS\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"12TH FLOOR STAIRWELL\\\",\\\"time_of_day\\\":\\\"CONTINUOUS\\\",\\\"summary\\\":\\\"A thug named Rosco confronts them. Rose forces him to explain blockchain at gunpoint before Mariner knocks him out. Rose admits she stole gang money.\\\",\\\"characters\\\":[\\\"ROSE\\\",\\\"MARINER\\\",\\\"ROSCO\\\"]},{\\\"scene_number\\\":9,\\\"heading\\\":\\\"INT. 13TH FLOOR\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"13TH FLOOR\\\",\\\"time_of_day\\\":\\\"\\\",\\\"summary\\\":\\\"Thugs Vinnie, Mikey, and Carlos patrol the floor, discussing cryptocurrency. They confront Rose and Mariner, leading to a violent fight where Mariner defeats them.\\\",\\\"characters\\\":[\\\"VINNIE\\\",\\\"MIKEY\\\",\\\"CARLOS\\\",\\\"ROSE (O.S.)\\\",\\\"MARINER (O.S.)\\\",\\\"ROSE\\\",\\\"MARINER\\\"]},{\\\"scene_number\\\":10,\\\"heading\\\":\\\"INT. 15TH FLOOR\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"15TH FLOOR\\\",\\\"time_of_day\\\":\\\"\\\",\\\"summary\\\":\\\"Rose and Mariner reach a luxurious office, retrieve Rose's purse, and discuss their father. Mariner's memories are challenged by Rose.\\\",\\\"characters\\\":[\\\"ROSE\\\",\\\"MARINER\\\"]},{\\\"scene_number\\\":11,\\\"heading\\\":\\\"BEGIN FLASHBACK: EXT. BACKYARD - DAY - PAST\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"BACKYARD\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"Young Mariner's dad teaches him weightlifting and insists on never running from a fight. Mariner is encouraged despite having a black eye.\\\",\\\"characters\\\":[\\\"YOUNG MARINER\\\",\\\"DAD\\\"]},{\\\"scene_number\\\":12,\\\"heading\\\":\\\"INT. 15TH FLOOR (CONTINUED)\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"15TH FLOOR\\\",\\\"time_of_day\\\":\\\"\\\",\\\"summary\\\":\\\"Rose reveals the truth about their father, shattering Mariner's heroic image of him. Salvatori and his thugs enter, taking control.\\\",\\\"characters\\\":[\\\"ROSE\\\",\\\"MARINER\\\",\\\"SALVATORI (O.S.)\\\",\\\"THUGS\\\",\\\"SALVATORI\\\"]},{\\\"scene_number\\\":13,\\\"heading\\\":\\\"EXT. BACKYARD - DAY - (FLASHBACK)\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"BACKYARD\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"Young Mariner's dad violently trains him, berating him for weakness and sending him to lift weights after hitting him.\\\",\\\"characters\\\":[\\\"YOUNG MARINER\\\",\\\"DAD\\\"]},{\\\"scene_number\\\":14,\\\"heading\\\":\\\"INT. STAIRWELL - (BACK TO PRESENT)\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"STAIRWELL\\\",\\\"time_of_day\\\":\\\"\\\",\\\"summary\\\":\\\"Salvatori interrogates Mariner, mocking his heroic appearance. Mariner quietly denies being a hero.\\\",\\\"characters\\\":[\\\"SALVATORI\\\",\\\"MARINER\\\"]},{\\\"scene_number\\\":15,\\\"heading\\\":\\\"EXT. COASTLINE - DAY - (FLASHBACK)\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"COASTLINE\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"Young Mariner is in a boat with his dad, who is drunk and dismissive, further undermining the heroic image Mariner held.\\\",\\\"characters\\\":[\\\"YOUNG MARINER\\\",\\\"DAD\\\"]},{\\\"scene_number\\\":16,\\\"heading\\\":\\\"EXT. BACKYARD - DAY - (FLASHBACK)\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"BACKYARD\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"Salvatori continues to taunt Mariner, asking if he's a hero. Mariner, kneeling and disarmed, quietly denies it.\\\",\\\"characters\\\":[\\\"SALVATORI\\\",\\\"MARINER\\\",\\\"THUGS\\\"]},{\\\"scene_number\\\":17,\\\"heading\\\":\\\"INT. 15TH FLOOR (CONTINUED)\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"15TH FLOOR\\\",\\\"time_of_day\\\":\\\"\\\",\\\"summary\\\":\\\"Salvatori threatens Rose for the password. Rose defends Mariner, describing his true heroism, as Mariner regains his resolve.\\\",\\\"characters\\\":[\\\"SALVATORI\\\",\\\"ROSE\\\",\\\"MARINER\\\",\\\"THUGS\\\"]}]}\\n</Output>\\n<Rubric>\\nEvaluate the scene extraction output for the screenplay \\\"The Mariner.\\\"\\n\\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\\nKey quality criteria:\\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\\n2. Are scene headings accurate and complete?\\n3. Are INT/EXT designations correct?\\n4. Are character names correctly identified for each scene (including O.S. characters)?\\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\\n7. Are the flashback scenes properly distinguished from present-day scenes?\\n\\nScore strictly: partial credit for close but imperfect extraction.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "9bfab8eb-a3d3-45cd-ab97-940c447c7860",
        "latencyMs": 24023,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n==========",
          "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "promptIdx": 2,
        "provider": {
          "id": "openai:gpt-4.1",
          "label": "GPT-4.1"
        },
        "response": {
          "output": "{\n  \"title\": \"The Mariner\",\n  \"scene_count\": 17,\n  \"scenes\": [\n    {\n      \"scene_number\": 1,\n      \"heading\": \"EXT. CITY CENTRE - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"CITY CENTRE\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A ruined city is depicted, with fires, rubble, and chaos. The setting is established as a post-pandemic, post-economic collapse urban wasteland.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 2,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING - FRONT - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"RUDDY & GREENE BUILDING - FRONT\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"The front of a once-beautiful building is shown, now damaged and guarded by luxury SUVs.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 3,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING - REAR - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"RUDDY & GREENE BUILDING - REAR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"The Mariner arrives in a disguised van, enters the building, and a violent confrontation ensues inside, heard but not seen.\",\n      \"characters\": [\"THE MARINER\", \"ROSE (O.S.)\", \"MARINER (O.S.)\", \"THUGS (O.S.)\"]\n    },\n    {\n      \"scene_number\": 4,\n      \"heading\": \"INT. RUDDY & GREEN BUILDING - ELEVATOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"RUDDY & GREEN BUILDING - ELEVATOR\",\n      \"time_of_day\": \"\",\n      \"summary\": \"Rose and Mariner, both bloodied, catch their breath in the elevator. They discuss how Mariner found her and the AirTag he hid in her purse.\",\n      \"characters\": [\"ROSE\", \"MARINER\"]\n    },\n    {\n      \"scene_number\": 5,\n      \"heading\": \"INT. 11TH FLOOR - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"11TH FLOOR\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose and Mariner search for a stairwell, hide from danger, and Mariner is reminded of his father by his tattoo.\",\n      \"characters\": [\"ROSE\", \"MARINER\", \"THUGS (O.S.)\"]\n    },\n    {\n      \"scene_number\": 6,\n      \"heading\": \"BEGIN FLASHBACK: EXT. COASTLINE - DAY - PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"COASTLINE\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Young Mariner and his dad enjoy a day fishing on a sailboat. His dad imparts wisdom about being a hero.\",\n      \"characters\": [\"YOUNG MARINER\", \"DAD\"]\n    },\n    {\n      \"scene_number\": 7,\n      \"heading\": \"INT. STAIRWELL - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"STAIRWELL\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose and Mariner argue about the importance of her purse, revealing it contains a blockchain password. She insists on retrieving it.\",\n      \"characters\": [\"ROSE\", \"MARINER\"]\n    },\n    {\n      \"scene_number\": 8,\n      \"heading\": \"INT. 12TH FLOOR STAIRWELL - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"12TH FLOOR STAIRWELL\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"A thug named Rosco confronts them. Rose forces him to explain blockchain at gunpoint before Mariner knocks him out. Rose admits she stole gang money.\",\n      \"characters\": [\"ROSE\", \"MARINER\", \"ROSCO\"]\n    },\n    {\n      \"scene_number\": 9,\n      \"heading\": \"INT. 13TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"13TH FLOOR\",\n      \"time_of_day\": \"\",\n      \"summary\": \"Thugs Vinnie, Mikey, and Carlos patrol the floor, discussing cryptocurrency. They confront Rose and Mariner, leading to a violent fight where Mariner defeats them.\",\n      \"characters\": [\"VINNIE\", \"MIKEY\", \"CARLOS\", \"ROSE (O.S.)\", \"MARINER (O.S.)\", \"ROSE\", \"MARINER\"]\n    },\n    {\n      \"scene_number\": 10,\n      \"heading\": \"INT. 15TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15TH FLOOR\",\n      \"time_of_day\": \"\",\n      \"summary\": \"Rose and Mariner reach a luxurious office, retrieve Rose's purse, and discuss their father. Mariner's memories are challenged by Rose.\",\n      \"characters\": [\"ROSE\", \"MARINER\"]\n    },\n    {\n      \"scene_number\": 11,\n      \"heading\": \"BEGIN FLASHBACK: EXT. BACKYARD - DAY - PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Young Mariner's dad teaches him weightlifting and insists on never running from a fight. Mariner is encouraged despite having a black eye.\",\n      \"characters\": [\"YOUNG MARINER\", \"DAD\"]\n    },\n    {\n      \"scene_number\": 12,\n      \"heading\": \"INT. 15TH FLOOR (CONTINUED)\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15TH FLOOR\",\n      \"time_of_day\": \"\",\n      \"summary\": \"Rose reveals the truth about their father, shattering Mariner's heroic image of him. Salvatori and his thugs enter, taking control.\",\n      \"characters\": [\"ROSE\", \"MARINER\", \"SALVATORI (O.S.)\", \"THUGS\", \"SALVATORI\"]\n    },\n    {\n      \"scene_number\": 13,\n      \"heading\": \"EXT. BACKYARD - DAY - (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Young Mariner's dad violently trains him, berating him for weakness and sending him to lift weights after hitting him.\",\n      \"characters\": [\"YOUNG MARINER\", \"DAD\"]\n    },\n    {\n      \"scene_number\": 14,\n      \"heading\": \"INT. STAIRWELL - (BACK TO PRESENT)\",\n      \"int_ext\": \"INT\",\n      \"location\": \"STAIRWELL\",\n      \"time_of_day\": \"\",\n      \"summary\": \"Salvatori interrogates Mariner, mocking his heroic appearance. Mariner quietly denies being a hero.\",\n      \"characters\": [\"SALVATORI\", \"MARINER\"]\n    },\n    {\n      \"scene_number\": 15,\n      \"heading\": \"EXT. COASTLINE - DAY - (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"COASTLINE\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Young Mariner is in a boat with his dad, who is drunk and dismissive, further undermining the heroic image Mariner held.\",\n      \"characters\": [\"YOUNG MARINER\", \"DAD\"]\n    },\n    {\n      \"scene_number\": 16,\n      \"heading\": \"EXT. BACKYARD - DAY - (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Salvatori continues to taunt Mariner, asking if he's a hero. Mariner, kneeling and disarmed, quietly denies it.\",\n      \"characters\": [\"SALVATORI\", \"MARINER\", \"THUGS\"]\n    },\n    {\n      \"scene_number\": 17,\n      \"heading\": \"INT. 15TH FLOOR (CONTINUED)\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15TH FLOOR\",\n      \"time_of_day\": \"\",\n      \"summary\": \"Salvatori threatens Rose for the password. Rose defends Mariner, describing his true heroism, as Mariner regains his resolve.\",\n      \"characters\": [\"SALVATORI\", \"ROSE\", \"MARINER\", \"THUGS\"]\n    }\n  ]\n}",
          "tokenUsage": {
            "total": 6514,
            "prompt": 4648,
            "completion": 1866,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 24023,
          "finishReason": "stop",
          "cost": 0.024224,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9d5d8b217995efcd-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Mon, 02 Mar 2026 04:09:24 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "23403",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=999YF9JdV1ieHRmnBHbma10URSVaaBUxItpGMOeP1TQ-1772424540.3985677-1.0.1.1-1hz_QoPFK4xiV1tERqjoQH_WIkWe7LZ.M07ffXbZ..NeONYAqGKAw0LkDUY6ym0rATRrSWkI.OYpMvEv1hGMxgdxHbGzv6Y92gb_G_oMSDqZnozvZi._1L6cwQ1HTu9b; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Mon, 02 Mar 2026 04:39:24 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "2000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "1995627",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "131ms",
                "x-request-id": "req_3e423251eaeb4d5a8503e3e9518f5304"
              }
            }
          }
        },
        "score": 0.7325,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-scenes.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/scene_extraction_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-scenes.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9d5d8b217995efcd-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Mon, 02 Mar 2026 04:09:24 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "23403",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=999YF9JdV1ieHRmnBHbma10URSVaaBUxItpGMOeP1TQ-1772424540.3985677-1.0.1.1-1hz_QoPFK4xiV1tERqjoQH_WIkWe7LZ.M07ffXbZ..NeONYAqGKAw0LkDUY6ym0rATRrSWkI.OYpMvEv1hGMxgdxHbGzv6Y92gb_G_oMSDqZnozvZi._1L6cwQ1HTu9b; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Mon, 02 Mar 2026 04:39:24 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "2000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "1995627",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "131ms",
              "x-request-id": "req_3e423251eaeb4d5a8503e3e9518f5304"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.0051168,
        "error": "The extraction captures the overall structure well with meaningful summaries, correct INT/EXT designations, proper time_of_day assignments, and good character identification including O.S. characters. However, there are significant issues: (1) 18 scenes identified vs. the expected 13-15, suggesting over-segmentation; (2) Scene 17 appears to conflate flashback and present-day content (Salvatori in a backyard flashback); (3) Minor heading typo ('GREEN' vs 'GREENE' in scene 4); (4) Some 15th floor scenes may be unnecessarily split. Flashbacks are generally well-distinguished, and summaries are substantive. The output is solid but imperfect.",
        "gradingResult": {
          "pass": false,
          "score": 0.75085,
          "reason": "The extraction captures the overall structure well with meaningful summaries, correct INT/EXT designations, proper time_of_day assignments, and good character identification including O.S. characters. However, there are significant issues: (1) 18 scenes identified vs. the expected 13-15, suggesting over-segmentation; (2) Scene 17 appears to conflate flashback and present-day content (Salvatori in a backyard flashback); (3) Minor heading typo ('GREEN' vs 'GREENE' in scene 4); (4) Some 15th floor scenes may be unnecessarily split. Flashbacks are generally well-distinguished, and summaries are substantive. The output is solid but imperfect.",
          "namedScores": {},
          "tokensUsed": {
            "total": 3100,
            "prompt": 2247,
            "completion": 853,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.9517,
              "reason": "character_recall=0.92 | field_completeness=1.00 | heading_match=1.00 | heading_quality=1.00 | json_valid=1.00 | scene_count=0.80 | summary_completeness=1.00 | Count: 18 vs 15 golden (off by 3) | Missing chars: THE MARINER",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/scene_extraction_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
              },
              "pass": false,
              "score": 0.55,
              "reason": "The extraction captures the overall structure well with meaningful summaries, correct INT/EXT designations, proper time_of_day assignments, and good character identification including O.S. characters. However, there are significant issues: (1) 18 scenes identified vs. the expected 13-15, suggesting over-segmentation; (2) Scene 17 appears to conflate flashback and present-day content (Salvatori in a backyard flashback); (3) Minor heading typo ('GREEN' vs 'GREENE' in scene 4); (4) Some 15th floor scenes may be unnecessarily split. Flashbacks are generally well-distinguished, and summaries are substantive. The output is solid but imperfect.",
              "tokensUsed": {
                "total": 3100,
                "prompt": 2247,
                "completion": 853,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n{\\\"title\\\":\\\"The Mariner\\\",\\\"scene_count\\\":18,\\\"scenes\\\":[{\\\"scene_number\\\":1,\\\"heading\\\":\\\"EXT. CITY CENTRE \\\\\\\\- NIGHT\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"CITY CENTRE\\\",\\\"time_of_day\\\":\\\"NIGHT\\\",\\\"summary\\\":\\\"A ruined city is shown with fires burning, rubble filling an intersection, and distant sirens. Gunshots and screams are heard, setting a chaotic atmosphere.\\\",\\\"characters\\\":[]},{\\\"scene_number\\\":2,\\\"heading\\\":\\\"EXT. RUDDY & GREENE BUILDING \\\\\\\\- FRONT \\\\\\\\- NIGHT\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"RUDDY & GREENE BUILDING - FRONT\\\",\\\"time_of_day\\\":\\\"NIGHT\\\",\\\"summary\\\":\\\"The battered sandstone building is shown with bullet holes and graffiti, with rows of high-end SUVs parked outside.\\\",\\\"characters\\\":[]},{\\\"scene_number\\\":3,\\\"heading\\\":\\\"EXT. RUDDY & GREENE BUILDING \\\\\\\\- REAR \\\\\\\\- NIGHT\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"RUDDY & GREENE BUILDING - REAR\\\",\\\"time_of_day\\\":\\\"NIGHT\\\",\\\"summary\\\":\\\"Mariner, hidden in shadow, exits a delivery van and forcefully enters the building’s back door. Sounds of fighting and gunfire are heard as he moves inside.\\\",\\\"characters\\\":[\\\"MARINER\\\",\\\"ROSE (O.S.)\\\"]},{\\\"scene_number\\\":4,\\\"heading\\\":\\\"INT. RUDDY & GREEN BUILDING \\\\\\\\- ELEVATOR\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"RUDDY & GREEN BUILDING - ELEVATOR\\\",\\\"time_of_day\\\":\\\"NIGHT\\\",\\\"summary\\\":\\\"Rose, bloodied and panting in a Tim Hortons uniform, and Mariner, covered in blood and holding a bloody oar, share tense dialogue while the elevator plays muzak. They prepare to escape as thugs wait outside.\\\",\\\"characters\\\":[\\\"ROSE\\\",\\\"MARINER\\\",\\\"THUG 1\\\",\\\"THUG 2\\\",\\\"THUG 3\\\"]},{\\\"scene_number\\\":5,\\\"heading\\\":\\\"INT. 11TH FLOOR \\\\\\\\- CONTINUOUS\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"11TH FLOOR\\\",\\\"time_of_day\\\":\\\"CONTINUOUS\\\",\\\"summary\\\":\\\"Mariner and Rose hide behind a filing cabinet in a dim corridor, catching their breath and listening for enemies. Mariner reflects on his 'Dad' tattoo.\\\",\\\"characters\\\":[\\\"MARINER\\\",\\\"ROSE\\\"]},{\\\"scene_number\\\":6,\\\"heading\\\":\\\"BEGIN FLASHBACK: EXT. COASTLINE \\\\\\\\- DAY \\\\\\\\- PAST\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"COASTLINE\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"Young Mariner and his fisherman dad enjoy a sunny day sailing. Dad teaches him about bravery and heroism, encouraging him to fetch another beer.\\\",\\\"characters\\\":[\\\"Young Mariner\\\",\\\"DAD\\\"]},{\\\"scene_number\\\":7,\\\"heading\\\":\\\"INT. STAIRWELL \\\\\\\\- CONTINUOUS\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"STAIRWELL\\\",\\\"time_of_day\\\":\\\"CONTINUOUS\\\",\\\"summary\\\":\\\"Rose and Mariner split directions in the stairwell; Rose goes up, Mariner down. They argue about a stolen blockchain password hidden in Rose’s purse.\\\",\\\"characters\\\":[\\\"ROSE\\\",\\\"MARINER\\\"]},{\\\"scene_number\\\":8,\\\"heading\\\":\\\"INT. 12TH FLOOR STAIRWELL \\\\\\\\- CONTINUOUS\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"12TH FLOOR STAIRWELL\\\",\\\"time_of_day\\\":\\\"CONTINUOUS\\\",\\\"summary\\\":\\\"Thug Rosco ambushes Rose and Mariner. Mariner overpowers Rosco, and Rose interrogates him about blockchain and stolen gang money.\\\",\\\"characters\\\":[\\\"ROSE\\\",\\\"MARINER\\\",\\\"ROSCO\\\"]},{\\\"scene_number\\\":9,\\\"heading\\\":\\\"INT. 13TH FLOOR\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"13TH FLOOR\\\",\\\"time_of_day\\\":\\\"NIGHT\\\",\\\"summary\\\":\\\"Thugs Vinnie, Mikey, and Carlos patrol the corridor. Mariner and Rose confront them, leading to a violent fight where Mariner uses a flare gun to incapacitate Vinnie and defeats the others.\\\",\\\"characters\\\":[\\\"MARINER\\\",\\\"ROSE\\\",\\\"VINNIE\\\",\\\"MIKEY\\\",\\\"CARLOS\\\"]},{\\\"scene_number\\\":10,\\\"heading\\\":\\\"INT. 15TH FLOOR\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"15TH FLOOR\\\",\\\"time_of_day\\\":\\\"NIGHT\\\",\\\"summary\\\":\\\"Mariner and Rose enter a luxurious, dimly lit floor resembling an old nightclub. Mariner breaks down a locked door revealing an office with Rose’s purse on the desk.\\\",\\\"characters\\\":[\\\"MARINER\\\",\\\"ROSE\\\"]},{\\\"scene_number\\\":11,\\\"heading\\\":\\\"BEGIN FLASHBACK: EXT. BACKYARD \\\\\\\\- DAY \\\\\\\\- PAST\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"BACKYARD\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"Young Mariner struggles to bench press while his dad encourages him, teaching him to be a scrapper and never run from a fight.\\\",\\\"characters\\\":[\\\"Young Mariner\\\",\\\"DAD\\\"]},{\\\"scene_number\\\":12,\\\"heading\\\":\\\"INT. 15TH FLOOR (CONTINUOUS)\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"15TH FLOOR\\\",\\\"time_of_day\\\":\\\"NIGHT\\\",\\\"summary\\\":\\\"Mariner and Rose discuss his dedication to his father’s teachings. Rose reveals that Mariner’s father is alive and living elsewhere, shattering Mariner’s beliefs.\\\",\\\"characters\\\":[\\\"MARINER\\\",\\\"ROSE\\\"]},{\\\"scene_number\\\":13,\\\"heading\\\":\\\"INT. 15TH FLOOR (CONTINUOUS)\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"15TH FLOOR\\\",\\\"time_of_day\\\":\\\"NIGHT\\\",\\\"summary\\\":\\\"They notice a still-burning cigar and hear Salvatori’s voice as he and two thugs enter, guns raised, confronting Rose and Mariner.\\\",\\\"characters\\\":[\\\"MARINER\\\",\\\"ROSE\\\",\\\"SALVATORI\\\",\\\"THUGS\\\"]},{\\\"scene_number\\\":14,\\\"heading\\\":\\\"EXT. BACKYARD \\\\\\\\- DAY \\\\\\\\- (FLASHBACK)\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"BACKYARD\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"Young Mariner’s dad punches him in the face, teaching him to stand up for himself and never run from a fight, then leaves in disgust.\\\",\\\"characters\\\":[\\\"Young Mariner\\\",\\\"DAD\\\"]},{\\\"scene_number\\\":15,\\\"heading\\\":\\\"INT. STAIRWELL \\\\\\\\- (BACK TO PRESENT)\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"STAIRWELL\\\",\\\"time_of_day\\\":\\\"NIGHT\\\",\\\"summary\\\":\\\"Salvatori confronts Mariner, mocking his attempts to be a hero. Mariner remains quiet and stoic.\\\",\\\"characters\\\":[\\\"MARINER\\\",\\\"SALVATORI\\\"]},{\\\"scene_number\\\":16,\\\"heading\\\":\\\"EXT. COASTLINE \\\\\\\\- DAY \\\\\\\\- (FLASHBACK)\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"COASTLINE\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"Young Mariner shivers in a boat while his dad urinates off the side, teasing him about what a hero is and ordering him to fetch another beer.\\\",\\\"characters\\\":[\\\"Young Mariner\\\",\\\"DAD\\\"]},{\\\"scene_number\\\":17,\\\"heading\\\":\\\"EXT. BACKYARD \\\\\\\\- DAY \\\\\\\\- (FLASHBACK)\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"BACKYARD\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"Salvatori questions Mariner about being a hero. Mariner denies it quietly. Thugs take Mariner’s oar and kneel him down.\\\",\\\"characters\\\":[\\\"MARINER\\\",\\\"SALVATORI\\\",\\\"THUGS\\\"]},{\\\"scene_number\\\":18,\\\"heading\\\":\\\"INT. 15TH FLOOR (CONTINUOUS)\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"15TH FLOOR\\\",\\\"time_of_day\\\":\\\"NIGHT\\\",\\\"summary\\\":\\\"Salvatori demands Rose’s password at gunpoint. Rose defends Mariner’s character, describing his transformation from a troubled past to a true hero. Mariner smiles as he prepares to fight.\\\",\\\"characters\\\":[\\\"MARINER\\\",\\\"ROSE\\\",\\\"SALVATORI\\\"]}]}\\n</Output>\\n<Rubric>\\nEvaluate the scene extraction output for the screenplay \\\"The Mariner.\\\"\\n\\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\\nKey quality criteria:\\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\\n2. Are scene headings accurate and complete?\\n3. Are INT/EXT designations correct?\\n4. Are character names correctly identified for each scene (including O.S. characters)?\\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\\n7. Are the flashback scenes properly distinguished from present-day scenes?\\n\\nScore strictly: partial credit for close but imperfect extraction.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "c723239a-fed2-4cab-ac86-e370541d758f",
        "latencyMs": 28645,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n==========",
          "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "promptIdx": 1,
        "provider": {
          "id": "openai:gpt-4.1-mini",
          "label": "GPT-4.1 Mini"
        },
        "response": {
          "output": "{\n  \"title\": \"The Mariner\",\n  \"scene_count\": 18,\n  \"scenes\": [\n    {\n      \"scene_number\": 1,\n      \"heading\": \"EXT. CITY CENTRE \\\\- NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"CITY CENTRE\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A ruined city is shown with fires burning, rubble filling an intersection, and distant sirens. Gunshots and screams are heard, setting a chaotic atmosphere.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 2,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING \\\\- FRONT \\\\- NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"RUDDY & GREENE BUILDING - FRONT\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"The battered sandstone building is shown with bullet holes and graffiti, with rows of high-end SUVs parked outside.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 3,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING \\\\- REAR \\\\- NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"RUDDY & GREENE BUILDING - REAR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Mariner, hidden in shadow, exits a delivery van and forcefully enters the building’s back door. Sounds of fighting and gunfire are heard as he moves inside.\",\n      \"characters\": [\"MARINER\", \"ROSE (O.S.)\"]\n    },\n    {\n      \"scene_number\": 4,\n      \"heading\": \"INT. RUDDY & GREEN BUILDING \\\\- ELEVATOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"RUDDY & GREEN BUILDING - ELEVATOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Rose, bloodied and panting in a Tim Hortons uniform, and Mariner, covered in blood and holding a bloody oar, share tense dialogue while the elevator plays muzak. They prepare to escape as thugs wait outside.\",\n      \"characters\": [\"ROSE\", \"MARINER\", \"THUG 1\", \"THUG 2\", \"THUG 3\"]\n    },\n    {\n      \"scene_number\": 5,\n      \"heading\": \"INT. 11TH FLOOR \\\\- CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"11TH FLOOR\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Mariner and Rose hide behind a filing cabinet in a dim corridor, catching their breath and listening for enemies. Mariner reflects on his 'Dad' tattoo.\",\n      \"characters\": [\"MARINER\", \"ROSE\"]\n    },\n    {\n      \"scene_number\": 6,\n      \"heading\": \"BEGIN FLASHBACK: EXT. COASTLINE \\\\- DAY \\\\- PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"COASTLINE\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Young Mariner and his fisherman dad enjoy a sunny day sailing. Dad teaches him about bravery and heroism, encouraging him to fetch another beer.\",\n      \"characters\": [\"Young Mariner\", \"DAD\"]\n    },\n    {\n      \"scene_number\": 7,\n      \"heading\": \"INT. STAIRWELL \\\\- CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"STAIRWELL\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose and Mariner split directions in the stairwell; Rose goes up, Mariner down. They argue about a stolen blockchain password hidden in Rose’s purse.\",\n      \"characters\": [\"ROSE\", \"MARINER\"]\n    },\n    {\n      \"scene_number\": 8,\n      \"heading\": \"INT. 12TH FLOOR STAIRWELL \\\\- CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"12TH FLOOR STAIRWELL\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Thug Rosco ambushes Rose and Mariner. Mariner overpowers Rosco, and Rose interrogates him about blockchain and stolen gang money.\",\n      \"characters\": [\"ROSE\", \"MARINER\", \"ROSCO\"]\n    },\n    {\n      \"scene_number\": 9,\n      \"heading\": \"INT. 13TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"13TH FLOOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Thugs Vinnie, Mikey, and Carlos patrol the corridor. Mariner and Rose confront them, leading to a violent fight where Mariner uses a flare gun to incapacitate Vinnie and defeats the others.\",\n      \"characters\": [\"MARINER\", \"ROSE\", \"VINNIE\", \"MIKEY\", \"CARLOS\"]\n    },\n    {\n      \"scene_number\": 10,\n      \"heading\": \"INT. 15TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15TH FLOOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Mariner and Rose enter a luxurious, dimly lit floor resembling an old nightclub. Mariner breaks down a locked door revealing an office with Rose’s purse on the desk.\",\n      \"characters\": [\"MARINER\", \"ROSE\"]\n    },\n    {\n      \"scene_number\": 11,\n      \"heading\": \"BEGIN FLASHBACK: EXT. BACKYARD \\\\- DAY \\\\- PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Young Mariner struggles to bench press while his dad encourages him, teaching him to be a scrapper and never run from a fight.\",\n      \"characters\": [\"Young Mariner\", \"DAD\"]\n    },\n    {\n      \"scene_number\": 12,\n      \"heading\": \"INT. 15TH FLOOR (CONTINUOUS)\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15TH FLOOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Mariner and Rose discuss his dedication to his father’s teachings. Rose reveals that Mariner’s father is alive and living elsewhere, shattering Mariner’s beliefs.\",\n      \"characters\": [\"MARINER\", \"ROSE\"]\n    },\n    {\n      \"scene_number\": 13,\n      \"heading\": \"INT. 15TH FLOOR (CONTINUOUS)\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15TH FLOOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"They notice a still-burning cigar and hear Salvatori’s voice as he and two thugs enter, guns raised, confronting Rose and Mariner.\",\n      \"characters\": [\"MARINER\", \"ROSE\", \"SALVATORI\", \"THUGS\"]\n    },\n    {\n      \"scene_number\": 14,\n      \"heading\": \"EXT. BACKYARD \\\\- DAY \\\\- (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Young Mariner’s dad punches him in the face, teaching him to stand up for himself and never run from a fight, then leaves in disgust.\",\n      \"characters\": [\"Young Mariner\", \"DAD\"]\n    },\n    {\n      \"scene_number\": 15,\n      \"heading\": \"INT. STAIRWELL \\\\- (BACK TO PRESENT)\",\n      \"int_ext\": \"INT\",\n      \"location\": \"STAIRWELL\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Salvatori confronts Mariner, mocking his attempts to be a hero. Mariner remains quiet and stoic.\",\n      \"characters\": [\"MARINER\", \"SALVATORI\"]\n    },\n    {\n      \"scene_number\": 16,\n      \"heading\": \"EXT. COASTLINE \\\\- DAY \\\\- (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"COASTLINE\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Young Mariner shivers in a boat while his dad urinates off the side, teasing him about what a hero is and ordering him to fetch another beer.\",\n      \"characters\": [\"Young Mariner\", \"DAD\"]\n    },\n    {\n      \"scene_number\": 17,\n      \"heading\": \"EXT. BACKYARD \\\\- DAY \\\\- (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Salvatori questions Mariner about being a hero. Mariner denies it quietly. Thugs take Mariner’s oar and kneel him down.\",\n      \"characters\": [\"MARINER\", \"SALVATORI\", \"THUGS\"]\n    },\n    {\n      \"scene_number\": 18,\n      \"heading\": \"INT. 15TH FLOOR (CONTINUOUS)\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15TH FLOOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Salvatori demands Rose’s password at gunpoint. Rose defends Mariner’s character, describing his transformation from a troubled past to a true hero. Mariner smiles as he prepares to fight.\",\n      \"characters\": [\"MARINER\", \"ROSE\", \"SALVATORI\"]\n    }\n  ]\n}",
          "tokenUsage": {
            "total": 6684,
            "prompt": 4648,
            "completion": 2036,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 28645,
          "finishReason": "stop",
          "cost": 0.0051168,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9d5d8b2178dc2c2e-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Mon, 02 Mar 2026 04:09:28 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "28017",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=YE93mbodQcjfuRu8wdCUn5vHJTtNXLhn7h233NA69Os-1772424540.392279-1.0.1.1-eSptevSexQnfoqiQk7pU6DhqgaAAqfqapDX0WElvbTcFIvBsX6FVviiCQ0Zeo32m77kQ1HC6TmDYtyzusRy_C6cxLctspAnifYkca9NvrEN78kOdgWNCZjI56sPdYYTB; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Mon, 02 Mar 2026 04:39:28 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "10000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "9995627",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "26ms",
                "x-request-id": "req_25737e3d2fd545e0ab33e52a64afff8c"
              }
            }
          }
        },
        "score": 0.75085,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-scenes.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/scene_extraction_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-scenes.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9d5d8b2178dc2c2e-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Mon, 02 Mar 2026 04:09:28 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "28017",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=YE93mbodQcjfuRu8wdCUn5vHJTtNXLhn7h233NA69Os-1772424540.392279-1.0.1.1-eSptevSexQnfoqiQk7pU6DhqgaAAqfqapDX0WElvbTcFIvBsX6FVviiCQ0Zeo32m77kQ1HC6TmDYtyzusRy_C6cxLctspAnifYkca9NvrEN78kOdgWNCZjI56sPdYYTB; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Mon, 02 Mar 2026 04:39:28 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "10000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "9995627",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "26ms",
              "x-request-id": "req_25737e3d2fd545e0ab33e52a64afff8c"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.018677000000000003,
        "error": "The extraction captures the major scenes, flashbacks, characters, and narrative arc well. Summaries are meaningful and time_of_day is generally correct. Flashbacks are properly distinguished. However, there are notable issues: the scene count (20) significantly exceeds the expected 13-15, suggesting over-splitting of scenes (e.g., 'CUT TO BLACK' as scene 20 is not a real scene, and some continuous sequences may be over-divided). There's a typo in scene 4 ('GREEN' vs 'GREENE'). Character identification is mostly good but may miss some O.S. characters. INT/EXT designations are generally correct. Overall it's a decent but imperfect extraction.",
        "gradingResult": {
          "pass": false,
          "score": 0.7279,
          "reason": "The extraction captures the major scenes, flashbacks, characters, and narrative arc well. Summaries are meaningful and time_of_day is generally correct. Flashbacks are properly distinguished. However, there are notable issues: the scene count (20) significantly exceeds the expected 13-15, suggesting over-splitting of scenes (e.g., 'CUT TO BLACK' as scene 20 is not a real scene, and some continuous sequences may be over-divided). There's a typo in scene 4 ('GREEN' vs 'GREENE'). Character identification is mostly good but may miss some O.S. characters. INT/EXT designations are generally correct. Overall it's a decent but imperfect extraction.",
          "namedScores": {},
          "tokensUsed": {
            "total": 3901,
            "prompt": 3052,
            "completion": 849,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.9058,
              "reason": "character_recall=0.92 | field_completeness=1.00 | heading_match=1.00 | heading_quality=0.96 | json_valid=0.90 | scene_count=0.67 | summary_completeness=1.00 | JSON extracted from code block | Count: 20 vs 15 golden (off by 5) | Missing chars: THE MARINER",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/scene_extraction_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
              },
              "pass": false,
              "score": 0.55,
              "reason": "The extraction captures the major scenes, flashbacks, characters, and narrative arc well. Summaries are meaningful and time_of_day is generally correct. Flashbacks are properly distinguished. However, there are notable issues: the scene count (20) significantly exceeds the expected 13-15, suggesting over-splitting of scenes (e.g., 'CUT TO BLACK' as scene 20 is not a real scene, and some continuous sequences may be over-divided). There's a typo in scene 4 ('GREEN' vs 'GREENE'). Character identification is mostly good but may miss some O.S. characters. INT/EXT designations are generally correct. Overall it's a decent but imperfect extraction.",
              "tokensUsed": {
                "total": 3901,
                "prompt": 3052,
                "completion": 849,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n```json\\n{\\n  \\\"title\\\": \\\"The Mariner\\\",\\n  \\\"scene_count\\\": 20,\\n  \\\"scenes\\\": [\\n    {\\n      \\\"scene_number\\\": 1,\\n      \\\"heading\\\": \\\"EXT. CITY CENTRE - NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"City Centre\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"A ruined city with fires, rubble, and violence. Opening title card explains the economic collapse of 2025 that created no-go zones and vigilantes.\\\",\\n      \\\"characters\\\": []\\n    },\\n    {\\n      \\\"scene_number\\\": 2,\\n      \\\"heading\\\": \\\"EXT. RUDDY & GREENE BUILDING - FRONT - NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"Ruddy & Greene Building - Front\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"A damaged 15-story sandstone building with bullet holes and graffiti, surrounded by high-end European SUVs.\\\",\\n      \\\"characters\\\": []\\n    },\\n    {\\n      \\\"scene_number\\\": 3,\\n      \\\"heading\\\": \\\"EXT. RUDDY & GREENE BUILDING - REAR - NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"Ruddy & Greene Building - Rear\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"The Mariner emerges from a delivery van and charges into the building, with sounds of violence and an elevator ride to the top floor.\\\",\\n      \\\"characters\\\": [\\n        \\\"Mariner\\\",\\n        \\\"Rose\\\"\\n      ]\\n    },\\n    {\\n      \\\"scene_number\\\": 4,\\n      \\\"heading\\\": \\\"INT. RUDDY & GREEN BUILDING - ELEVATOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"Ruddy & Green Building - Elevator\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner escape in an elevator after a violent confrontation. Rose is covered in blood and discovers a bloody scrap, while Mariner reveals he tracked her with an AirTag.\\\",\\n      \\\"characters\\\": [\\n        \\\"Rose\\\",\\n        \\\"Mariner\\\"\\n      ]\\n    },\\n    {\\n      \\\"scene_number\\\": 5,\\n      \\\"heading\\\": \\\"INT. 12TH FLOOR - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"12th Floor\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Three thugs ambush Rose and Mariner on the 12th floor. Mariner fights them off with his oar while Rose closes the elevator doors.\\\",\\n      \\\"characters\\\": [\\n        \\\"Rose\\\",\\n        \\\"Mariner\\\",\\n        \\\"Thug 1\\\",\\n        \\\"Thug 2\\\",\\n        \\\"Thug 3\\\"\\n      ]\\n    },\\n    {\\n      \\\"scene_number\\\": 6,\\n      \\\"heading\\\": \\\"INT. 11TH FLOOR - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"11th Floor\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner navigate through dim corridors searching for a stairwell. Mariner hides with Rose and reflects on his father while someone walks by.\\\",\\n      \\\"characters\\\": [\\n        \\\"Rose\\\",\\n        \\\"Mariner\\\"\\n      ]\\n    },\\n    {\\n      \\\"scene_number\\\": 7,\\n      \\\"heading\\\": \\\"BEGIN FLASHBACK: EXT. COASTLINE - DAY - PAST\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"Coastline\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Young Mariner and his father fish together in a sailboat. His father teaches him about heroism and bravery.\\\",\\n      \\\"characters\\\": [\\n        \\\"Young Mariner\\\",\\n        \\\"Dad\\\"\\n      ]\\n    },\\n    {\\n      \\\"scene_number\\\": 8,\\n      \\\"heading\\\": \\\"INT. STAIRWELL - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"Stairwell\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Rose reveals she stole 20 million in gang money and needs to retrieve a blockchain password from her purse. Mariner is conflicted about being involved in theft.\\\",\\n      \\\"characters\\\": [\\n        \\\"Rose\\\",\\n        \\\"Mariner\\\"\\n      ]\\n    },\\n    {\\n      \\\"scene_number\\\": 9,\\n      \\\"heading\\\": \\\"INT. 12TH FLOOR STAIRWELL - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"12th Floor Stairwell\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Mariner and Rose encounter thug Rosco. Rose holds him at gunpoint and learns the money is worth 20 million. Mariner knocks Rosco unconscious.\\\",\\n      \\\"characters\\\": [\\n        \\\"Rose\\\",\\n        \\\"Mariner\\\",\\n        \\\"Rosco\\\"\\n      ]\\n    },\\n    {\\n      \\\"scene_number\\\": 10,\\n      \\\"heading\\\": \\\"INT. 13TH FLOOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"13th Floor\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Vinnie, Mikey, and Carlos patrol the floor discussing cryptocurrency scams. They encounter Mariner and Rose, leading to a violent confrontation where Mariner uses a flare gun.\\\",\\n      \\\"characters\\\": [\\n        \\\"Vinnie\\\",\\n        \\\"Mikey\\\",\\n        \\\"Carlos\\\",\\n        \\\"Rose\\\",\\n        \\\"Mariner\\\"\\n      ]\\n    },\\n    {\\n      \\\"scene_number\\\": 11,\\n      \\\"heading\\\": \\\"INT. 15TH FLOOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"15th Floor\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner navigate the luxurious top floor and find her purse in an office. Rose questions whether Mariner's strength comes from steroids.\\\",\\n      \\\"characters\\\": [\\n        \\\"Rose\\\",\\n        \\\"Mariner\\\"\\n      ]\\n    },\\n    {\\n      \\\"scene_number\\\": 12,\\n      \\\"heading\\\": \\\"BEGIN FLASHBACK: EXT. BACKYARD - DAY - PAST\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"Backyard\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Young Mariner's father teaches him weightlifting and fighting, emphasizing that a man never runs from a fight. Mariner has a black eye.\\\",\\n      \\\"characters\\\": [\\n        \\\"Young Mariner\\\",\\n        \\\"Dad\\\"\\n      ]\\n    },\\n    {\\n      \\\"scene_number\\\": 13,\\n      \\\"heading\\\": \\\"INT. 15TH FLOOR (CONTINUED)\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"15th Floor\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Mariner reveals his father taught him everything. Rose reveals the truth: his father is alive, living in Chimney Bay, and abandoned him as a child.\\\",\\n      \\\"characters\\\": [\\n        \\\"Rose\\\",\\n        \\\"Mariner\\\"\\n      ]\\n    },\\n    {\\n      \\\"scene_number\\\": 14,\\n      \\\"heading\\\": \\\"INT. 15TH FLOOR (OFFICE)\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"15th Floor - Office\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Salvatori enters with thugs, holding Rose at gunpoint and demanding the password. Mariner is forced to his knees.\\\",\\n      \\\"characters\\\": [\\n        \\\"Rose\\\",\\n        \\\"Mariner\\\",\\n        \\\"Salvatori\\\",\\n        \\\"Thug 1\\\",\\n        \\\"Thug 2\\\"\\n      ]\\n    },\\n    {\\n      \\\"scene_number\\\": 15,\\n      \\\"heading\\\": \\\"EXT. BACKYARD - DAY - (FLASHBACK)\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"Backyard\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Young Mariner's father brutally punches him for not standing up for himself, demanding he become a man through weightlifting.\\\",\\n      \\\"characters\\\": [\\n        \\\"Young Mariner\\\",\\n        \\\"Dad\\\"\\n      ]\\n    },\\n    {\\n      \\\"scene_number\\\": 16,\\n      \\\"heading\\\": \\\"INT. STAIRWELL - (BACK TO PRESENT)\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"Stairwell\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Salvatori interrogates Mariner about being a hero. Mariner denies it. Salvatori fires a shot and demands the password.\\\",\\n      \\\"characters\\\": [\\n        \\\"Salvatori\\\",\\n        \\\"Mariner\\\",\\n        \\\"Rose\\\"\\n      ]\\n    },\\n    {\\n      \\\"scene_number\\\": 17,\\n      \\\"heading\\\": \\\"EXT. COASTLINE - DAY - (FLASHBACK)\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"Coastline\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Young Mariner is in a boat with his drunk father who urinates off the side and redefines heroism as himself.\\\",\\n      \\\"characters\\\": [\\n        \\\"Young Mariner\\\",\\n        \\\"Dad\\\"\\n      ]\\n    },\\n    {\\n      \\\"scene_number\\\": 18,\\n      \\\"heading\\\": \\\"EXT. BACKYARD - DAY - (FLASHBACK)\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"Backyard\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Continuation of the father's brutal treatment of young Mariner.\\\",\\n      \\\"characters\\\": [\\n        \\\"Young Mariner\\\",\\n        \\\"Dad\\\"\\n      ]\\n    },\\n    {\\n      \\\"scene_number\\\": 19,\\n      \\\"heading\\\": \\\"INT. 15TH FLOOR - OFFICE (CONTINUED)\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"15th Floor - Office\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Rose delivers a speech defending Mariner as a true hero who overcame his father's abuse and forged his own path. Mariner smiles and clenches his fists.\\\",\\n      \\\"characters\\\": [\\n        \\\"Rose\\\",\\n        \\\"Mariner\\\",\\n        \\\"Salvatori\\\"\\n      ]\\n    },\\n    {\\n      \\\"scene_number\\\": 20,\\n      \\\"heading\\\": \\\"CUT TO BLACK\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"15th Floor - Office\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"The scene cuts to black as Mariner prepares to fight back.\\\",\\n      \\\"characters\\\": [\\n        \\\"Mariner\\\"\\n      ]\\n    }\\n  ]\\n}\\n```\\n</Output>\\n<Rubric>\\nEvaluate the scene extraction output for the screenplay \\\"The Mariner.\\\"\\n\\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\\nKey quality criteria:\\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\\n2. Are scene headings accurate and complete?\\n3. Are INT/EXT designations correct?\\n4. Are character names correctly identified for each scene (including O.S. characters)?\\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\\n7. Are the flashback scenes properly distinguished from present-day scenes?\\n\\nScore strictly: partial credit for close but imperfect extraction.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "6e6bacc4-55db-4468-9d99-e758057323c5",
        "latencyMs": 17338,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n==========",
          "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "promptIdx": 3,
        "provider": {
          "id": "anthropic:messages:claude-haiku-4-5-20251001",
          "label": "Claude Haiku 4.5"
        },
        "response": {
          "output": "```json\n{\n  \"title\": \"The Mariner\",\n  \"scene_count\": 20,\n  \"scenes\": [\n    {\n      \"scene_number\": 1,\n      \"heading\": \"EXT. CITY CENTRE - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"City Centre\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A ruined city with fires, rubble, and violence. Opening title card explains the economic collapse of 2025 that created no-go zones and vigilantes.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 2,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING - FRONT - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Ruddy & Greene Building - Front\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A damaged 15-story sandstone building with bullet holes and graffiti, surrounded by high-end European SUVs.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 3,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING - REAR - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Ruddy & Greene Building - Rear\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"The Mariner emerges from a delivery van and charges into the building, with sounds of violence and an elevator ride to the top floor.\",\n      \"characters\": [\n        \"Mariner\",\n        \"Rose\"\n      ]\n    },\n    {\n      \"scene_number\": 4,\n      \"heading\": \"INT. RUDDY & GREEN BUILDING - ELEVATOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"Ruddy & Green Building - Elevator\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose and Mariner escape in an elevator after a violent confrontation. Rose is covered in blood and discovers a bloody scrap, while Mariner reveals he tracked her with an AirTag.\",\n      \"characters\": [\n        \"Rose\",\n        \"Mariner\"\n      ]\n    },\n    {\n      \"scene_number\": 5,\n      \"heading\": \"INT. 12TH FLOOR - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"12th Floor\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Three thugs ambush Rose and Mariner on the 12th floor. Mariner fights them off with his oar while Rose closes the elevator doors.\",\n      \"characters\": [\n        \"Rose\",\n        \"Mariner\",\n        \"Thug 1\",\n        \"Thug 2\",\n        \"Thug 3\"\n      ]\n    },\n    {\n      \"scene_number\": 6,\n      \"heading\": \"INT. 11TH FLOOR - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"11th Floor\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose and Mariner navigate through dim corridors searching for a stairwell. Mariner hides with Rose and reflects on his father while someone walks by.\",\n      \"characters\": [\n        \"Rose\",\n        \"Mariner\"\n      ]\n    },\n    {\n      \"scene_number\": 7,\n      \"heading\": \"BEGIN FLASHBACK: EXT. COASTLINE - DAY - PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Coastline\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Young Mariner and his father fish together in a sailboat. His father teaches him about heroism and bravery.\",\n      \"characters\": [\n        \"Young Mariner\",\n        \"Dad\"\n      ]\n    },\n    {\n      \"scene_number\": 8,\n      \"heading\": \"INT. STAIRWELL - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"Stairwell\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose reveals she stole 20 million in gang money and needs to retrieve a blockchain password from her purse. Mariner is conflicted about being involved in theft.\",\n      \"characters\": [\n        \"Rose\",\n        \"Mariner\"\n      ]\n    },\n    {\n      \"scene_number\": 9,\n      \"heading\": \"INT. 12TH FLOOR STAIRWELL - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"12th Floor Stairwell\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Mariner and Rose encounter thug Rosco. Rose holds him at gunpoint and learns the money is worth 20 million. Mariner knocks Rosco unconscious.\",\n      \"characters\": [\n        \"Rose\",\n        \"Mariner\",\n        \"Rosco\"\n      ]\n    },\n    {\n      \"scene_number\": 10,\n      \"heading\": \"INT. 13TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"13th Floor\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Vinnie, Mikey, and Carlos patrol the floor discussing cryptocurrency scams. They encounter Mariner and Rose, leading to a violent confrontation where Mariner uses a flare gun.\",\n      \"characters\": [\n        \"Vinnie\",\n        \"Mikey\",\n        \"Carlos\",\n        \"Rose\",\n        \"Mariner\"\n      ]\n    },\n    {\n      \"scene_number\": 11,\n      \"heading\": \"INT. 15TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15th Floor\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose and Mariner navigate the luxurious top floor and find her purse in an office. Rose questions whether Mariner's strength comes from steroids.\",\n      \"characters\": [\n        \"Rose\",\n        \"Mariner\"\n      ]\n    },\n    {\n      \"scene_number\": 12,\n      \"heading\": \"BEGIN FLASHBACK: EXT. BACKYARD - DAY - PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Backyard\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Young Mariner's father teaches him weightlifting and fighting, emphasizing that a man never runs from a fight. Mariner has a black eye.\",\n      \"characters\": [\n        \"Young Mariner\",\n        \"Dad\"\n      ]\n    },\n    {\n      \"scene_number\": 13,\n      \"heading\": \"INT. 15TH FLOOR (CONTINUED)\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15th Floor\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Mariner reveals his father taught him everything. Rose reveals the truth: his father is alive, living in Chimney Bay, and abandoned him as a child.\",\n      \"characters\": [\n        \"Rose\",\n        \"Mariner\"\n      ]\n    },\n    {\n      \"scene_number\": 14,\n      \"heading\": \"INT. 15TH FLOOR (OFFICE)\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15th Floor - Office\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Salvatori enters with thugs, holding Rose at gunpoint and demanding the password. Mariner is forced to his knees.\",\n      \"characters\": [\n        \"Rose\",\n        \"Mariner\",\n        \"Salvatori\",\n        \"Thug 1\",\n        \"Thug 2\"\n      ]\n    },\n    {\n      \"scene_number\": 15,\n      \"heading\": \"EXT. BACKYARD - DAY - (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Backyard\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Young Mariner's father brutally punches him for not standing up for himself, demanding he become a man through weightlifting.\",\n      \"characters\": [\n        \"Young Mariner\",\n        \"Dad\"\n      ]\n    },\n    {\n      \"scene_number\": 16,\n      \"heading\": \"INT. STAIRWELL - (BACK TO PRESENT)\",\n      \"int_ext\": \"INT\",\n      \"location\": \"Stairwell\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Salvatori interrogates Mariner about being a hero. Mariner denies it. Salvatori fires a shot and demands the password.\",\n      \"characters\": [\n        \"Salvatori\",\n        \"Mariner\",\n        \"Rose\"\n      ]\n    },\n    {\n      \"scene_number\": 17,\n      \"heading\": \"EXT. COASTLINE - DAY - (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Coastline\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Young Mariner is in a boat with his drunk father who urinates off the side and redefines heroism as himself.\",\n      \"characters\": [\n        \"Young Mariner\",\n        \"Dad\"\n      ]\n    },\n    {\n      \"scene_number\": 18,\n      \"heading\": \"EXT. BACKYARD - DAY - (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Backyard\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Continuation of the father's brutal treatment of young Mariner.\",\n      \"characters\": [\n        \"Young Mariner\",\n        \"Dad\"\n      ]\n    },\n    {\n      \"scene_number\": 19,\n      \"heading\": \"INT. 15TH FLOOR - OFFICE (CONTINUED)\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15th Floor - Office\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose delivers a speech defending Mariner as a true hero who overcame his father's abuse and forged his own path. Mariner smiles and clenches his fists.\",\n      \"characters\": [\n        \"Rose\",\n        \"Mariner\",\n        \"Salvatori\"\n      ]\n    },\n    {\n      \"scene_number\": 20,\n      \"heading\": \"CUT TO BLACK\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15th Floor - Office\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"The scene cuts to black as Mariner prepares to fight back.\",\n      \"characters\": [\n        \"Mariner\"\n      ]\n    }\n  ]\n}\n```",
          "tokenUsage": {
            "total": 7981,
            "prompt": 5307,
            "completion": 2674
          },
          "finishReason": "stop",
          "cost": 0.018677000000000003
        },
        "score": 0.7279,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-scenes.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/scene_extraction_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-scenes.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.056436,
        "error": "The output identifies 20 scenes when the screenplay has approximately 13-15. There are clear duplications: the elevator scene appears twice (scenes 4 and 16), the 13th floor twice (scenes 8 and 17), the 15th floor twice (scenes 10 and 18), and the stairwell/Salvatori confrontation twice (scenes 12 and 19), with very similar content in each pair. This suggests the extractor processed the screenplay incorrectly, possibly double-counting scenes. While INT/EXT designations are generally correct, time_of_day is appropriate (NIGHT for present, DAY for flashbacks), character identification is reasonable, and summaries are meaningful, the fundamental structural accuracy is compromised by the ~33% inflation in scene count and clear duplication of content. Flashbacks are properly distinguished from present-day scenes.",
        "gradingResult": {
          "pass": false,
          "score": 0.6308,
          "reason": "The output identifies 20 scenes when the screenplay has approximately 13-15. There are clear duplications: the elevator scene appears twice (scenes 4 and 16), the 13th floor twice (scenes 8 and 17), the 15th floor twice (scenes 10 and 18), and the stairwell/Salvatori confrontation twice (scenes 12 and 19), with very similar content in each pair. This suggests the extractor processed the screenplay incorrectly, possibly double-counting scenes. While INT/EXT designations are generally correct, time_of_day is appropriate (NIGHT for present, DAY for flashbacks), character identification is reasonable, and summaries are meaningful, the fundamental structural accuracy is compromised by the ~33% inflation in scene count and clear duplication of content. Flashbacks are properly distinguished from present-day scenes.",
          "namedScores": {},
          "tokensUsed": {
            "total": 3912,
            "prompt": 3079,
            "completion": 833,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.9116,
              "reason": "character_recall=1.00 | field_completeness=1.00 | heading_match=1.00 | heading_quality=0.93 | json_valid=0.90 | scene_count=0.67 | summary_completeness=1.00 | JSON extracted from code block | Count: 20 vs 15 golden (off by 5)",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/scene_extraction_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
              },
              "pass": false,
              "score": 0.35,
              "reason": "The output identifies 20 scenes when the screenplay has approximately 13-15. There are clear duplications: the elevator scene appears twice (scenes 4 and 16), the 13th floor twice (scenes 8 and 17), the 15th floor twice (scenes 10 and 18), and the stairwell/Salvatori confrontation twice (scenes 12 and 19), with very similar content in each pair. This suggests the extractor processed the screenplay incorrectly, possibly double-counting scenes. While INT/EXT designations are generally correct, time_of_day is appropriate (NIGHT for present, DAY for flashbacks), character identification is reasonable, and summaries are meaningful, the fundamental structural accuracy is compromised by the ~33% inflation in scene count and clear duplication of content. Flashbacks are properly distinguished from present-day scenes.",
              "tokensUsed": {
                "total": 3912,
                "prompt": 3079,
                "completion": 833,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n```json\\n{\\n  \\\"title\\\": \\\"The Mariner\\\",\\n  \\\"scene_count\\\": 20,\\n  \\\"scenes\\\": [\\n    {\\n      \\\"scene_number\\\": 1,\\n      \\\"heading\\\": \\\"EXT. CITY CENTRE - NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"CITY CENTRE\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"A ruined city in 2020s aftermath shows destruction with fires, rubble, and distant sirens. Opening titles explain how the pandemic and economic collapse turned urban centers into no-go zones where vigilantes operate.\\\",\\n      \\\"characters\\\": []\\n    },\\n    {\\n      \\\"scene_number\\\": 2,\\n      \\\"heading\\\": \\\"EXT. RUDDY & GREENE BUILDING - FRONT - NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"RUDDY & GREENE BUILDING - FRONT\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"A classic 15-story sandstone building, now damaged with bullet holes and graffiti, has rows of high-end European SUVs parked outside.\\\",\\n      \\\"characters\\\": []\\n    },\\n    {\\n      \\\"scene_number\\\": 3,\\n      \\\"heading\\\": \\\"EXT. RUDDY & GREENE BUILDING - REAR - NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"RUDDY & GREENE BUILDING - REAR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"The Mariner arrives in a delivery van and charges into the building, fighting his way through thugs and up the elevator to rescue someone. Sounds of violence, gunfire, and fighting are heard as he ascends floor by floor.\\\",\\n      \\\"characters\\\": [\\\"THE MARINER\\\", \\\"ROSE\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 4,\\n      \\\"heading\\\": \\\"INT. RUDDY & GREEN BUILDING - ELEVATOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"RUDDY & GREEN BUILDING - ELEVATOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Rose and the Mariner descend in an elevator after the rescue. Rose discovers skull fragments and questions how Mariner found her, learning he planted an AirTag in her purse, which she left behind and wants to retrieve.\\\",\\n      \\\"characters\\\": [\\\"ROSE\\\", \\\"MARINER\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 5,\\n      \\\"heading\\\": \\\"EXT. COASTLINE - DAY - PAST\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"COASTLINE\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Flashback shows young Mariner and his father fishing happily in a sailboat. Dad teaches him about heroes being brave and true while young Mariner fetches him a beer.\\\",\\n      \\\"characters\\\": [\\\"Young Mariner\\\", \\\"DAD\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 6,\\n      \\\"heading\\\": \\\"INT. STAIRWELL - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"STAIRWELL\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Rose insists on going back up for her purse, revealing it contains a blockchain password to her life savings worth millions. Mariner reluctantly follows her up the stairs.\\\",\\n      \\\"characters\\\": [\\\"MARINER\\\", \\\"ROSE\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 7,\\n      \\\"heading\\\": \\\"INT. 12TH FLOOR STAIRWELL - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"12TH FLOOR STAIRWELL\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Mariner and Rose encounter Rosco in the stairwell. After subduing him, they learn Rose stole 20 million from gang boss Mr. Salvatori, causing tension between the siblings.\\\",\\n      \\\"characters\\\": [\\\"MARINER\\\", \\\"ROSE\\\", \\\"ROSCO\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 8,\\n      \\\"heading\\\": \\\"INT. 13TH FLOOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"13TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Three thugs (Vinnie, Mikey, and Carlos) patrol the corridor and hear Rose and Mariner arguing about stealing from criminals and Mariner's code of honor. The thugs corner them at gunpoint.\\\",\\n      \\\"characters\\\": [\\\"VINNIE\\\", \\\"MIKEY\\\", \\\"CARLOS\\\", \\\"MARINER\\\", \\\"ROSE\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 9,\\n      \\\"heading\\\": \\\"EXT. BACKYARD - DAY - PAST\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"BACKYARD\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Flashback shows young Mariner's father teaching him weightlifting in an idyllic setting. Dad encourages him never to run from a fight, noting his black eye.\\\",\\n      \\\"characters\\\": [\\\"Young Mariner\\\", \\\"DAD\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 10,\\n      \\\"heading\\\": \\\"INT. 15TH FLOOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"15TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner reach the luxurious 15th floor office. Rose retrieves her purse while revealing the truth about their father being alive and a deadbeat, shattering Mariner's idealized memories.\\\",\\n      \\\"characters\\\": [\\\"ROSE\\\", \\\"MARINER\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 11,\\n      \\\"heading\\\": \\\"EXT. BACKYARD - DAY - (FLASHBACK)\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"BACKYARD\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Flashback reveals the harsh reality: Dad punches young Mariner in the face while berating him for not standing up for himself, then kicks a bottle in disgust.\\\",\\n      \\\"characters\\\": [\\\"Young Mariner\\\", \\\"DAD\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 12,\\n      \\\"heading\\\": \\\"INT. STAIRWELL - (BACK TO PRESENT)\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"STAIRWELL\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Salvatori confronts Mariner, asking if he's a hero. Mariner, still processing the truth about his father, quietly responds that he's nobody.\\\",\\n      \\\"characters\\\": [\\\"SALVATORI\\\", \\\"MARINER\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 13,\\n      \\\"heading\\\": \\\"EXT. COASTLINE - DAY - (FLASHBACK)\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"COASTLINE\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Another flashback shows the reality of the fishing trip: Dad drunkenly pisses off the boat while young Mariner shivers, surrounded by empty beer bottles.\\\",\\n      \\\"characters\\\": [\\\"Young Mariner\\\", \\\"DAD\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 14,\\n      \\\"heading\\\": \\\"EXT. BACKYARD - DAY - (FLASHBACK)\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"BACKYARD\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Brief flashback moment showing the neglected, overgrown backyard with rusty weights and discarded bottles.\\\",\\n      \\\"characters\\\": []\\n    },\\n    {\\n      \\\"scene_number\\\": 15,\\n      \\\"heading\\\": \\\"INT. 11TH FLOOR - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"11TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner navigate the dim corridors looking for a stairwell. They hide from a passing thug, during which Mariner has a brief flashback about his father.\\\",\\n      \\\"characters\\\": [\\\"ROSE\\\", \\\"MARINER\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 16,\\n      \\\"heading\\\": \\\"INT. RUDDY & GREEN BUILDING - ELEVATOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"RUDDY & GREEN BUILDING - ELEVATOR\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Three thugs ambush Rose and Mariner when the elevator opens on floor 12. Mariner fights them off with his oar, and Rose frantically closes the doors as they escape.\\\",\\n      \\\"characters\\\": [\\\"MARINER\\\", \\\"ROSE\\\", \\\"THUG 1\\\", \\\"THUG 2\\\", \\\"THUG 3\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 17,\\n      \\\"heading\\\": \\\"INT. 13TH FLOOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"13TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Mariner shoots Vinnie with a flare gun and brutally defeats the three thugs. Rose kicks Vinnie's body and tends to Mariner's gunshot wound, explaining Vinnie was her ex-boyfriend.\\\",\\n      \\\"characters\\\": [\\\"MARINER\\\", \\\"ROSE\\\", \\\"VINNIE\\\", \\\"MIKEY\\\", \\\"CARLOS\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 18,\\n      \\\"heading\\\": \\\"INT. 15TH FLOOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"15TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Mariner breaks into the locked office where Rose retrieves her purse. They discuss his strength and father, with Rose revealing the painful truth about their dad still being alive.\\\",\\n      \\\"characters\\\": [\\\"ROSE\\\", \\\"MARINER\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 19,\\n      \\\"heading\\\": \\\"INT. STAIRWELL - (BACK TO PRESENT)\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"STAIRWELL\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Salvatori and his thugs capture Mariner and Rose. Rose delivers a speech about what a real hero is, describing Mariner's journey from abuse to becoming his own person, inspiring him to fight back.\\\",\\n      \\\"characters\\\": [\\\"SALVATORI\\\", \\\"MARINER\\\", \\\"ROSE\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 20,\\n      \\\"heading\\\": \\\"EXT. BACKYARD - DAY - (FLASHBACK)\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"BACKYARD\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Final flashback intercut with present action, showing the contrast between Mariner's idealized memories and the harsh reality of his abusive childhood.\\\",\\n      \\\"characters\\\": [\\\"Young Mariner\\\", \\\"DAD\\\"]\\n    }\\n  ]\\n}\\n```\\n</Output>\\n<Rubric>\\nEvaluate the scene extraction output for the screenplay \\\"The Mariner.\\\"\\n\\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\\nKey quality criteria:\\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\\n2. Are scene headings accurate and complete?\\n3. Are INT/EXT designations correct?\\n4. Are character names correctly identified for each scene (including O.S. characters)?\\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\\n7. Are the flashback scenes properly distinguished from present-day scenes?\\n\\nScore strictly: partial credit for close but imperfect extraction.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "0a32dd64-abdb-47a9-9e43-afcbe7e8fb2c",
        "latencyMs": 39700,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n==========",
          "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "promptIdx": 4,
        "provider": {
          "id": "anthropic:messages:claude-sonnet-4-5-20250929",
          "label": "Claude Sonnet 4.5"
        },
        "response": {
          "output": "```json\n{\n  \"title\": \"The Mariner\",\n  \"scene_count\": 20,\n  \"scenes\": [\n    {\n      \"scene_number\": 1,\n      \"heading\": \"EXT. CITY CENTRE - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"CITY CENTRE\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A ruined city in 2020s aftermath shows destruction with fires, rubble, and distant sirens. Opening titles explain how the pandemic and economic collapse turned urban centers into no-go zones where vigilantes operate.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 2,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING - FRONT - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"RUDDY & GREENE BUILDING - FRONT\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A classic 15-story sandstone building, now damaged with bullet holes and graffiti, has rows of high-end European SUVs parked outside.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 3,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING - REAR - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"RUDDY & GREENE BUILDING - REAR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"The Mariner arrives in a delivery van and charges into the building, fighting his way through thugs and up the elevator to rescue someone. Sounds of violence, gunfire, and fighting are heard as he ascends floor by floor.\",\n      \"characters\": [\"THE MARINER\", \"ROSE\"]\n    },\n    {\n      \"scene_number\": 4,\n      \"heading\": \"INT. RUDDY & GREEN BUILDING - ELEVATOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"RUDDY & GREEN BUILDING - ELEVATOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Rose and the Mariner descend in an elevator after the rescue. Rose discovers skull fragments and questions how Mariner found her, learning he planted an AirTag in her purse, which she left behind and wants to retrieve.\",\n      \"characters\": [\"ROSE\", \"MARINER\"]\n    },\n    {\n      \"scene_number\": 5,\n      \"heading\": \"EXT. COASTLINE - DAY - PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"COASTLINE\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Flashback shows young Mariner and his father fishing happily in a sailboat. Dad teaches him about heroes being brave and true while young Mariner fetches him a beer.\",\n      \"characters\": [\"Young Mariner\", \"DAD\"]\n    },\n    {\n      \"scene_number\": 6,\n      \"heading\": \"INT. STAIRWELL - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"STAIRWELL\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose insists on going back up for her purse, revealing it contains a blockchain password to her life savings worth millions. Mariner reluctantly follows her up the stairs.\",\n      \"characters\": [\"MARINER\", \"ROSE\"]\n    },\n    {\n      \"scene_number\": 7,\n      \"heading\": \"INT. 12TH FLOOR STAIRWELL - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"12TH FLOOR STAIRWELL\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Mariner and Rose encounter Rosco in the stairwell. After subduing him, they learn Rose stole 20 million from gang boss Mr. Salvatori, causing tension between the siblings.\",\n      \"characters\": [\"MARINER\", \"ROSE\", \"ROSCO\"]\n    },\n    {\n      \"scene_number\": 8,\n      \"heading\": \"INT. 13TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"13TH FLOOR\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Three thugs (Vinnie, Mikey, and Carlos) patrol the corridor and hear Rose and Mariner arguing about stealing from criminals and Mariner's code of honor. The thugs corner them at gunpoint.\",\n      \"characters\": [\"VINNIE\", \"MIKEY\", \"CARLOS\", \"MARINER\", \"ROSE\"]\n    },\n    {\n      \"scene_number\": 9,\n      \"heading\": \"EXT. BACKYARD - DAY - PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Flashback shows young Mariner's father teaching him weightlifting in an idyllic setting. Dad encourages him never to run from a fight, noting his black eye.\",\n      \"characters\": [\"Young Mariner\", \"DAD\"]\n    },\n    {\n      \"scene_number\": 10,\n      \"heading\": \"INT. 15TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15TH FLOOR\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose and Mariner reach the luxurious 15th floor office. Rose retrieves her purse while revealing the truth about their father being alive and a deadbeat, shattering Mariner's idealized memories.\",\n      \"characters\": [\"ROSE\", \"MARINER\"]\n    },\n    {\n      \"scene_number\": 11,\n      \"heading\": \"EXT. BACKYARD - DAY - (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Flashback reveals the harsh reality: Dad punches young Mariner in the face while berating him for not standing up for himself, then kicks a bottle in disgust.\",\n      \"characters\": [\"Young Mariner\", \"DAD\"]\n    },\n    {\n      \"scene_number\": 12,\n      \"heading\": \"INT. STAIRWELL - (BACK TO PRESENT)\",\n      \"int_ext\": \"INT\",\n      \"location\": \"STAIRWELL\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Salvatori confronts Mariner, asking if he's a hero. Mariner, still processing the truth about his father, quietly responds that he's nobody.\",\n      \"characters\": [\"SALVATORI\", \"MARINER\"]\n    },\n    {\n      \"scene_number\": 13,\n      \"heading\": \"EXT. COASTLINE - DAY - (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"COASTLINE\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Another flashback shows the reality of the fishing trip: Dad drunkenly pisses off the boat while young Mariner shivers, surrounded by empty beer bottles.\",\n      \"characters\": [\"Young Mariner\", \"DAD\"]\n    },\n    {\n      \"scene_number\": 14,\n      \"heading\": \"EXT. BACKYARD - DAY - (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Brief flashback moment showing the neglected, overgrown backyard with rusty weights and discarded bottles.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 15,\n      \"heading\": \"INT. 11TH FLOOR - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"11TH FLOOR\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose and Mariner navigate the dim corridors looking for a stairwell. They hide from a passing thug, during which Mariner has a brief flashback about his father.\",\n      \"characters\": [\"ROSE\", \"MARINER\"]\n    },\n    {\n      \"scene_number\": 16,\n      \"heading\": \"INT. RUDDY & GREEN BUILDING - ELEVATOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"RUDDY & GREEN BUILDING - ELEVATOR\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Three thugs ambush Rose and Mariner when the elevator opens on floor 12. Mariner fights them off with his oar, and Rose frantically closes the doors as they escape.\",\n      \"characters\": [\"MARINER\", \"ROSE\", \"THUG 1\", \"THUG 2\", \"THUG 3\"]\n    },\n    {\n      \"scene_number\": 17,\n      \"heading\": \"INT. 13TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"13TH FLOOR\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Mariner shoots Vinnie with a flare gun and brutally defeats the three thugs. Rose kicks Vinnie's body and tends to Mariner's gunshot wound, explaining Vinnie was her ex-boyfriend.\",\n      \"characters\": [\"MARINER\", \"ROSE\", \"VINNIE\", \"MIKEY\", \"CARLOS\"]\n    },\n    {\n      \"scene_number\": 18,\n      \"heading\": \"INT. 15TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15TH FLOOR\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Mariner breaks into the locked office where Rose retrieves her purse. They discuss his strength and father, with Rose revealing the painful truth about their dad still being alive.\",\n      \"characters\": [\"ROSE\", \"MARINER\"]\n    },\n    {\n      \"scene_number\": 19,\n      \"heading\": \"INT. STAIRWELL - (BACK TO PRESENT)\",\n      \"int_ext\": \"INT\",\n      \"location\": \"STAIRWELL\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Salvatori and his thugs capture Mariner and Rose. Rose delivers a speech about what a real hero is, describing Mariner's journey from abuse to becoming his own person, inspiring him to fight back.\",\n      \"characters\": [\"SALVATORI\", \"MARINER\", \"ROSE\"]\n    },\n    {\n      \"scene_number\": 20,\n      \"heading\": \"EXT. BACKYARD - DAY - (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Final flashback intercut with present action, showing the contrast between Mariner's idealized memories and the harsh reality of his abusive childhood.\",\n      \"characters\": [\"Young Mariner\", \"DAD\"]\n    }\n  ]\n}\n```",
          "tokenUsage": {
            "total": 8008,
            "prompt": 5307,
            "completion": 2701
          },
          "finishReason": "stop",
          "cost": 0.056436
        },
        "score": 0.6308,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-scenes.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/scene_extraction_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-scenes.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 0.8085,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 3407,
            "prompt": 2796,
            "completion": 611,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.897,
              "reason": "character_recall=0.92 | field_completeness=1.00 | heading_match=0.93 | heading_quality=0.94 | json_valid=0.90 | scene_count=0.70 | summary_completeness=1.00 | JSON extracted from code block | Count: 16 vs 15 golden (off by 1) | Matched 14/15 headings | Missing chars: THE MARINER",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/scene_extraction_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
              },
              "pass": true,
              "score": 0.72,
              "reason": "The output identifies 16 scenes, which is within the approximate range of 13-15 (slightly over, but the screenplay likely has ambiguity around the final CUT TO BLACK and some transitional moments). Let me evaluate each criterion:\n\n1. **All scenes identified including flashbacks**: The output captures the main present-day scenes and the embedded flashbacks (scenes 6, 11, 13, 14). The flashbacks are properly separated from the main narrative. This is well done.\n\n2. **Scene headings**: Generally accurate. Minor issues: Scene 4 has 'RUDDY & GREEN' instead of possibly 'RUDDY & GREENE' (inconsistent spelling). Scene 12 heading says 'STAIRWELL' but the summary describes action in Salvatori's office on the 15th floor - this is a significant error. Scene 16 'CUT TO BLACK' is not really a scene heading but a transition.\n\n3. **INT/EXT designations**: Generally correct. EXT for outdoor/city scenes, INT for indoor scenes, EXT for flashback coastline scenes. Scene 12 is labeled INT/STAIRWELL but describes office action - this is wrong.\n\n4. **Character names**: Characters are reasonably identified. The thugs (Vinnie, Mikey, Carlos, Rosco) are captured. YOUNG MARINER and DAD are properly identified in flashbacks. Scene 14 mixing flashback characters (YOUNG MARINER, DAD) with present-day characters (SALVATORI, MARINER) is questionable but reflects the intercut nature. Some O.S. characters may be missed.\n\n5. **Summaries**: Generally meaningful and capture key action, plot points, and character dynamics well. They go beyond just restating headings. The revelation about the father, the blockchain password subplot, and Rose's speech are all captured.\n\n6. **Time of day**: Correctly NIGHT for present-day scenes and DAY for flashbacks. Scene 5 uses CONTINUOUS which is appropriate. Some scenes infer NIGHT where the heading might say something else.\n\n7. **Flashback distinction**: Flashbacks are clearly distinguished with DAY/PAST or FLASHBACK labels and are properly separated from present-day scenes.\n\nMain issues: Scene 12's heading/location mismatch with its content is a notable error. Scene 16 treating CUT TO BLACK as a scene is questionable. The slight over-count (16 vs 13-15) suggests some scenes may be split unnecessarily. Overall, this is a solid extraction with a few meaningful errors.",
              "tokensUsed": {
                "total": 3407,
                "prompt": 2796,
                "completion": 611,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n```json\\n{\\n  \\\"title\\\": \\\"The Mariner\\\",\\n  \\\"scene_count\\\": 16,\\n  \\\"scenes\\\": [\\n    {\\n      \\\"scene_number\\\": 1,\\n      \\\"heading\\\": \\\"EXT. CITY CENTRE \\\\\\\\- NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"CITY CENTRE\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"A ruined, post-collapse city is established: fires burn, a fallen skyscraper fills an intersection with rubble, and distant sirens and gunshots fill the air. An opening title card explains the societal collapse that led to vigilantes rising.\\\",\\n      \\\"characters\\\": []\\n    },\\n    {\\n      \\\"scene_number\\\": 2,\\n      \\\"heading\\\": \\\"EXT. RUDDY & GREENE BUILDING \\\\\\\\- FRONT \\\\\\\\- NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"RUDDY & GREENE BUILDING - FRONT\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"A classic sandstone building, now bullet-riddled and graffitied, is shown with rows of high-end European SUVs parked outside, suggesting a criminal operation within.\\\",\\n      \\\"characters\\\": []\\n    },\\n    {\\n      \\\"scene_number\\\": 3,\\n      \\\"heading\\\": \\\"EXT. RUDDY & GREENE BUILDING \\\\\\\\- REAR \\\\\\\\- NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"RUDDY & GREENE BUILDING - REAR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"The Mariner arrives in a fish delivery van, charges into the building through the back door, and fights his way through multiple floors — heard but not seen — before the elevator rises floor by floor.\\\",\\n      \\\"characters\\\": [\\\"MARINER\\\", \\\"ROSE\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 4,\\n      \\\"heading\\\": \\\"INT. RUDDY & GREEN BUILDING \\\\\\\\- ELEVATOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"RUDDY & GREEN BUILDING - ELEVATOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Rose and the Mariner catch their breath in the elevator, covered in blood. Rose discovers an AirTag Mariner hid in her purse, and they bicker about why she was targeted before thugs ambush them when the doors open on the 12th floor.\\\",\\n      \\\"characters\\\": [\\\"ROSE\\\", \\\"MARINER\\\", \\\"THUG 1\\\", \\\"THUG 2\\\", \\\"THUG 3\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 5,\\n      \\\"heading\\\": \\\"INT. 11TH FLOOR \\\\\\\\- CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"11TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner sneak through the dim, debris-strewn corridor hunting for a stairwell. Rose begins to ask about Mariner's costume being an homage to their dad before they hide from a passing guard, triggering Mariner's first flashback.\\\",\\n      \\\"characters\\\": [\\\"ROSE\\\", \\\"MARINER\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 6,\\n      \\\"heading\\\": \\\"EXT. COASTLINE \\\\\\\\- DAY \\\\\\\\- PAST\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"COASTLINE\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"In a warm flashback, young Mariner and his father fish happily from a sailboat. Dad teaches him to cast and offers an idealized speech about what makes a hero, sending the boy to fetch him a beer.\\\",\\n      \\\"characters\\\": [\\\"YOUNG MARINER\\\", \\\"DAD\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 7,\\n      \\\"heading\\\": \\\"INT. STAIRWELL \\\\\\\\- CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"STAIRWELL\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner argue about whether to retrieve her purse, which contains a blockchain password to her life savings — $20 million stolen from the gang. Mariner reluctantly follows her upstairs.\\\",\\n      \\\"characters\\\": [\\\"ROSE\\\", \\\"MARINER\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 8,\\n      \\\"heading\\\": \\\"INT. 12TH FLOOR STAIRWELL \\\\\\\\- CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"12TH FLOOR STAIRWELL\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Thug Rosco bursts through the stairwell door and is quickly subdued by Mariner and Rose. Under duress, Rosco explains blockchain and reveals that Salvatori is after Rose for 20 million dollars before Mariner knocks him out.\\\",\\n      \\\"characters\\\": [\\\"ROSE\\\", \\\"MARINER\\\", \\\"ROSCO\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 9,\\n      \\\"heading\\\": \\\"INT. 13TH FLOOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"13TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Three patrolling thugs — Vinnie, Mikey, and Carlos — hear Rose and Mariner arguing about his code of honor and close in on them. Mariner uses his flare gun to take down Vinnie, then physically overpowers Mikey and Carlos.\\\",\\n      \\\"characters\\\": [\\\"VINNIE\\\", \\\"MIKEY\\\", \\\"CARLOS\\\", \\\"MARINER\\\", \\\"ROSE\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 10,\\n      \\\"heading\\\": \\\"INT. 15TH FLOOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"15TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner reach the luxurious top floor, break into Salvatori's office, and retrieve Rose's purse. Rose challenges Mariner's idealized memory of their father, revealing he is actually alive and was an abusive, neglectful drunk.\\\",\\n      \\\"characters\\\": [\\\"ROSE\\\", \\\"MARINER\\\", \\\"SALVATORI\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 11,\\n      \\\"heading\\\": \\\"EXT. BACKYARD \\\\\\\\- DAY \\\\\\\\- PAST\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"BACKYARD\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"A flashback reveals the true nature of Mariner's upbringing: an overgrown, bottle-strewn yard where his father punches him in the face, berates him for being weak, and orders him to lift weights — a stark contrast to the earlier idealized memory.\\\",\\n      \\\"characters\\\": [\\\"YOUNG MARINER\\\", \\\"DAD\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 12,\\n      \\\"heading\\\": \\\"INT. STAIRWELL \\\\\\\\- (BACK TO PRESENT)\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"STAIRWELL\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Salvatori confronts Mariner and Rose in the office, demanding the blockchain password at gunpoint. He taunts Mariner about whether he is a hero, prompting further fragmented flashbacks of his father.\\\",\\n      \\\"characters\\\": [\\\"SALVATORI\\\", \\\"MARINER\\\", \\\"ROSE\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 13,\\n      \\\"heading\\\": \\\"EXT. COASTLINE \\\\\\\\- DAY \\\\\\\\- (FLASHBACK)\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"COASTLINE\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"A second coastline flashback shows the reality of the fishing trip: the boat is littered with empty beer bottles, young Mariner is cold and under-dressed, and his father drunkenly mocks the concept of heroism while demanding another beer.\\\",\\n      \\\"characters\\\": [\\\"YOUNG MARINER\\\", \\\"DAD\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 14,\\n      \\\"heading\\\": \\\"EXT. BACKYARD \\\\\\\\- DAY \\\\\\\\- (FLASHBACK)\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"BACKYARD\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Salvatori continues to taunt Mariner, asking if he is a hero. This brief flashback label accompanies Mariner's silent, defeated response as the thugs force him to his knees.\\\",\\n      \\\"characters\\\": [\\\"YOUNG MARINER\\\", \\\"DAD\\\", \\\"SALVATORI\\\", \\\"MARINER\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 15,\\n      \\\"heading\\\": \\\"INT. 15TH FLOOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"15TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"With Mariner kneeling and defeated, Rose delivers a passionate speech reframing his identity: he is a true hero not because of his father's lessons, but despite his father's abuse and abandonment. Her words reignite Mariner's resolve as Salvatori demands the password at gunpoint.\\\",\\n      \\\"characters\\\": [\\\"ROSE\\\", \\\"MARINER\\\", \\\"SALVATORI\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 16,\\n      \\\"heading\\\": \\\"CUT TO BLACK\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"15TH FLOOR OFFICE\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Mariner smiles and clenches his fists as Rose declares he never backs down from a fight, setting up a final confrontation with Salvatori before cutting to black.\\\",\\n      \\\"characters\\\": [\\\"MARINER\\\", \\\"ROSE\\\", \\\"SALVATORI\\\"]\\n    }\\n  ]\\n}\\n```\\n</Output>\\n<Rubric>\\nEvaluate the scene extraction output for the screenplay \\\"The Mariner.\\\"\\n\\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\\nKey quality criteria:\\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\\n2. Are scene headings accurate and complete?\\n3. Are INT/EXT designations correct?\\n4. Are character names correctly identified for each scene (including O.S. characters)?\\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\\n7. Are the flashback scenes properly distinguished from present-day scenes?\\n\\nScore strictly: partial credit for close but imperfect extraction.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "013fb4ef-8b09-4108-b196-f1a2aa77cdf7",
        "latencyMs": 35527,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n==========",
          "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "promptIdx": 5,
        "provider": {
          "id": "anthropic:messages:claude-sonnet-4-6",
          "label": "Claude Sonnet 4.6"
        },
        "response": {
          "output": "```json\n{\n  \"title\": \"The Mariner\",\n  \"scene_count\": 16,\n  \"scenes\": [\n    {\n      \"scene_number\": 1,\n      \"heading\": \"EXT. CITY CENTRE \\\\- NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"CITY CENTRE\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A ruined, post-collapse city is established: fires burn, a fallen skyscraper fills an intersection with rubble, and distant sirens and gunshots fill the air. An opening title card explains the societal collapse that led to vigilantes rising.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 2,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING \\\\- FRONT \\\\- NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"RUDDY & GREENE BUILDING - FRONT\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A classic sandstone building, now bullet-riddled and graffitied, is shown with rows of high-end European SUVs parked outside, suggesting a criminal operation within.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 3,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING \\\\- REAR \\\\- NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"RUDDY & GREENE BUILDING - REAR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"The Mariner arrives in a fish delivery van, charges into the building through the back door, and fights his way through multiple floors — heard but not seen — before the elevator rises floor by floor.\",\n      \"characters\": [\"MARINER\", \"ROSE\"]\n    },\n    {\n      \"scene_number\": 4,\n      \"heading\": \"INT. RUDDY & GREEN BUILDING \\\\- ELEVATOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"RUDDY & GREEN BUILDING - ELEVATOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Rose and the Mariner catch their breath in the elevator, covered in blood. Rose discovers an AirTag Mariner hid in her purse, and they bicker about why she was targeted before thugs ambush them when the doors open on the 12th floor.\",\n      \"characters\": [\"ROSE\", \"MARINER\", \"THUG 1\", \"THUG 2\", \"THUG 3\"]\n    },\n    {\n      \"scene_number\": 5,\n      \"heading\": \"INT. 11TH FLOOR \\\\- CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"11TH FLOOR\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose and Mariner sneak through the dim, debris-strewn corridor hunting for a stairwell. Rose begins to ask about Mariner's costume being an homage to their dad before they hide from a passing guard, triggering Mariner's first flashback.\",\n      \"characters\": [\"ROSE\", \"MARINER\"]\n    },\n    {\n      \"scene_number\": 6,\n      \"heading\": \"EXT. COASTLINE \\\\- DAY \\\\- PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"COASTLINE\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"In a warm flashback, young Mariner and his father fish happily from a sailboat. Dad teaches him to cast and offers an idealized speech about what makes a hero, sending the boy to fetch him a beer.\",\n      \"characters\": [\"YOUNG MARINER\", \"DAD\"]\n    },\n    {\n      \"scene_number\": 7,\n      \"heading\": \"INT. STAIRWELL \\\\- CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"STAIRWELL\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose and Mariner argue about whether to retrieve her purse, which contains a blockchain password to her life savings — $20 million stolen from the gang. Mariner reluctantly follows her upstairs.\",\n      \"characters\": [\"ROSE\", \"MARINER\"]\n    },\n    {\n      \"scene_number\": 8,\n      \"heading\": \"INT. 12TH FLOOR STAIRWELL \\\\- CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"12TH FLOOR STAIRWELL\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Thug Rosco bursts through the stairwell door and is quickly subdued by Mariner and Rose. Under duress, Rosco explains blockchain and reveals that Salvatori is after Rose for 20 million dollars before Mariner knocks him out.\",\n      \"characters\": [\"ROSE\", \"MARINER\", \"ROSCO\"]\n    },\n    {\n      \"scene_number\": 9,\n      \"heading\": \"INT. 13TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"13TH FLOOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Three patrolling thugs — Vinnie, Mikey, and Carlos — hear Rose and Mariner arguing about his code of honor and close in on them. Mariner uses his flare gun to take down Vinnie, then physically overpowers Mikey and Carlos.\",\n      \"characters\": [\"VINNIE\", \"MIKEY\", \"CARLOS\", \"MARINER\", \"ROSE\"]\n    },\n    {\n      \"scene_number\": 10,\n      \"heading\": \"INT. 15TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15TH FLOOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Rose and Mariner reach the luxurious top floor, break into Salvatori's office, and retrieve Rose's purse. Rose challenges Mariner's idealized memory of their father, revealing he is actually alive and was an abusive, neglectful drunk.\",\n      \"characters\": [\"ROSE\", \"MARINER\", \"SALVATORI\"]\n    },\n    {\n      \"scene_number\": 11,\n      \"heading\": \"EXT. BACKYARD \\\\- DAY \\\\- PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"A flashback reveals the true nature of Mariner's upbringing: an overgrown, bottle-strewn yard where his father punches him in the face, berates him for being weak, and orders him to lift weights — a stark contrast to the earlier idealized memory.\",\n      \"characters\": [\"YOUNG MARINER\", \"DAD\"]\n    },\n    {\n      \"scene_number\": 12,\n      \"heading\": \"INT. STAIRWELL \\\\- (BACK TO PRESENT)\",\n      \"int_ext\": \"INT\",\n      \"location\": \"STAIRWELL\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Salvatori confronts Mariner and Rose in the office, demanding the blockchain password at gunpoint. He taunts Mariner about whether he is a hero, prompting further fragmented flashbacks of his father.\",\n      \"characters\": [\"SALVATORI\", \"MARINER\", \"ROSE\"]\n    },\n    {\n      \"scene_number\": 13,\n      \"heading\": \"EXT. COASTLINE \\\\- DAY \\\\- (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"COASTLINE\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"A second coastline flashback shows the reality of the fishing trip: the boat is littered with empty beer bottles, young Mariner is cold and under-dressed, and his father drunkenly mocks the concept of heroism while demanding another beer.\",\n      \"characters\": [\"YOUNG MARINER\", \"DAD\"]\n    },\n    {\n      \"scene_number\": 14,\n      \"heading\": \"EXT. BACKYARD \\\\- DAY \\\\- (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Salvatori continues to taunt Mariner, asking if he is a hero. This brief flashback label accompanies Mariner's silent, defeated response as the thugs force him to his knees.\",\n      \"characters\": [\"YOUNG MARINER\", \"DAD\", \"SALVATORI\", \"MARINER\"]\n    },\n    {\n      \"scene_number\": 15,\n      \"heading\": \"INT. 15TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15TH FLOOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"With Mariner kneeling and defeated, Rose delivers a passionate speech reframing his identity: he is a true hero not because of his father's lessons, but despite his father's abuse and abandonment. Her words reignite Mariner's resolve as Salvatori demands the password at gunpoint.\",\n      \"characters\": [\"ROSE\", \"MARINER\", \"SALVATORI\"]\n    },\n    {\n      \"scene_number\": 16,\n      \"heading\": \"CUT TO BLACK\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15TH FLOOR OFFICE\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Mariner smiles and clenches his fists as Rose declares he never backs down from a fight, setting up a final confrontation with Salvatori before cutting to black.\",\n      \"characters\": [\"MARINER\", \"ROSE\", \"SALVATORI\"]\n    }\n  ]\n}\n```",
          "tokenUsage": {
            "total": 7725,
            "prompt": 5307,
            "completion": 2418
          },
          "finishReason": "stop"
        },
        "score": 0.8085,
        "success": true,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-scenes.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/scene_extraction_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-scenes.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0.03432625,
        "gradingResult": {
          "pass": true,
          "score": 0.925,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 2910,
            "prompt": 2045,
            "completion": 865,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "character_recall=1.00 | field_completeness=1.00 | heading_match=1.00 | heading_quality=1.00 | json_valid=1.00 | scene_count=1.00 | summary_completeness=1.00",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/scene_extraction_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
              },
              "pass": true,
              "score": 0.85,
              "reason": "The extraction is thorough and high-quality. All 15 scenes including flashbacks are identified. INT/EXT designations are correct. Character identification is detailed and granular (including minor thugs by name). Summaries are rich and capture key plot developments. Flashbacks are properly distinguished. Minor issues: a typo in scene 4 ('GREEN' vs 'GREENE'), some empty time_of_day fields for mid-sequence present-day scenes, and scene 15's heading doesn't fully capture the intercutting nature described in its summary. Overall, this is a strong extraction with only minor imperfections.",
              "tokensUsed": {
                "total": 2910,
                "prompt": 2045,
                "completion": 865,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n{\\\"title\\\":\\\"The Mariner\\\",\\\"scene_count\\\":15,\\\"scenes\\\":[{\\\"scene_number\\\":1,\\\"heading\\\":\\\"EXT. CITY CENTRE \\\\\\\\- NIGHT\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"CITY CENTRE\\\",\\\"time_of_day\\\":\\\"NIGHT\\\",\\\"summary\\\":\\\"A devastated downtown no-go zone burns and echoes with distant sirens, gunshots, and screams as text sets the post-pandemic collapse backdrop and rise of vigilantes.\\\",\\\"characters\\\":[]},{\\\"scene_number\\\":2,\\\"heading\\\":\\\"EXT. RUDDY & GREENE BUILDING \\\\\\\\- FRONT \\\\\\\\- NIGHT\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"RUDDY & GREENE BUILDING - FRONT\\\",\\\"time_of_day\\\":\\\"NIGHT\\\",\\\"summary\\\":\\\"The once-elegant Ruddy & Greene building is shown battered by bullets and graffiti, with expensive SUVs parked outside suggesting a criminal presence.\\\",\\\"characters\\\":[]},{\\\"scene_number\\\":3,\\\"heading\\\":\\\"EXT. RUDDY & GREENE BUILDING \\\\\\\\- REAR \\\\\\\\- NIGHT\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"RUDDY & GREENE BUILDING - REAR\\\",\\\"time_of_day\\\":\\\"NIGHT\\\",\\\"summary\\\":\\\"The Mariner arrives in a delivery van, storms in through the back, and a violent off-screen rampage is heard culminating in him reaching Rose and getting her to the elevator.\\\",\\\"characters\\\":[\\\"THE MARINER\\\",\\\"ROSE\\\"]},{\\\"scene_number\\\":4,\\\"heading\\\":\\\"INT. RUDDY & GREEN BUILDING \\\\\\\\- ELEVATOR\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"RUDDY & GREEN BUILDING - ELEVATOR\\\",\\\"time_of_day\\\":\\\"\\\",\\\"summary\\\":\\\"Rose and the blood-soaked Mariner catch their breath; he reveals he tracked her with an AirTag, then they’re ambushed on the 12th floor and fight their way back into the elevator to escape upward via stairs.\\\",\\\"characters\\\":[\\\"ROSE\\\",\\\"MARINER\\\",\\\"THUG 1\\\",\\\"THUG 2\\\",\\\"THUG 3\\\"]},{\\\"scene_number\\\":5,\\\"heading\\\":\\\"INT. 11TH FLOOR \\\\\\\\- CONTINUOUS\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"11TH FLOOR\\\",\\\"time_of_day\\\":\\\"CONTINUOUS\\\",\\\"summary\\\":\\\"They creep through dark corridors and hide as someone passes; Mariner’s gaze lingers on his “Dad” tattoo, triggering a childhood memory.\\\",\\\"characters\\\":[\\\"ROSE\\\",\\\"MARINER\\\"]},{\\\"scene_number\\\":6,\\\"heading\\\":\\\"BEGIN FLASHBACK: EXT. COASTLINE \\\\\\\\- DAY \\\\\\\\- PAST\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"COASTLINE\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"Young Mariner and his fisherman dad enjoy a warm day sailing as Dad teaches him to cast and defines what a hero is, sending him to fetch another beer.\\\",\\\"characters\\\":[\\\"YOUNG MARINER\\\",\\\"DAD\\\"]},{\\\"scene_number\\\":7,\\\"heading\\\":\\\"INT. STAIRWELL \\\\\\\\- CONTINUOUS\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"STAIRWELL\\\",\\\"time_of_day\\\":\\\"CONTINUOUS\\\",\\\"summary\\\":\\\"Rose insists they must retrieve her purse because it contains a chip with a blockchain password to her life savings; Mariner argues but follows her upward.\\\",\\\"characters\\\":[\\\"ROSE\\\",\\\"MARINER\\\"]},{\\\"scene_number\\\":8,\\\"heading\\\":\\\"INT. 12TH FLOOR STAIRWELL \\\\\\\\- CONTINUOUS\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"12TH FLOOR STAIRWELL\\\",\\\"time_of_day\\\":\\\"CONTINUOUS\\\",\\\"summary\\\":\\\"A thug named Rosco ambushes them; Mariner subdues him while Rose interrogates him about blockchain and learns Salvatori is coming, then admits she stole gang money.\\\",\\\"characters\\\":[\\\"MARINER\\\",\\\"ROSE\\\",\\\"ROSCO\\\"]},{\\\"scene_number\\\":9,\\\"heading\\\":\\\"INT. 13TH FLOOR\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"13TH FLOOR\\\",\\\"time_of_day\\\":\\\"\\\",\\\"summary\\\":\\\"Three thugs (Vinnie, Mikey, Carlos) patrol and overhear Rose and Mariner arguing about his “Mariner’s code,” then confront them; Mariner uses a flare gun and brute strength to defeat them while protecting Rose.\\\",\\\"characters\\\":[\\\"VINNIE\\\",\\\"MIKEY\\\",\\\"CARLOS\\\",\\\"MARINER\\\",\\\"ROSE\\\"]},{\\\"scene_number\\\":10,\\\"heading\\\":\\\"INT. 15TH FLOOR\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"15TH FLOOR\\\",\\\"time_of_day\\\":\\\"\\\",\\\"summary\\\":\\\"They reach a luxurious top-floor suite, force open a locked office, and Rose recovers her purse; their conversation about Mariner’s strength triggers another memory of Dad’s training.\\\",\\\"characters\\\":[\\\"MARINER\\\",\\\"ROSE\\\"]},{\\\"scene_number\\\":11,\\\"heading\\\":\\\"BEGIN FLASHBACK: EXT. BACKYARD \\\\\\\\- DAY \\\\\\\\- PAST\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"BACKYARD\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"In a sunny idyllic yard, Dad teaches Young Mariner weightlifting, urging him not to run from fights; Young Mariner, sporting a black eye, resolves to be tougher.\\\",\\\"characters\\\":[\\\"YOUNG MARINER\\\",\\\"DAD\\\"]},{\\\"scene_number\\\":12,\\\"heading\\\":\\\"EXT. BACKYARD \\\\\\\\- DAY \\\\\\\\- (FLASHBACK)\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"BACKYARD\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"The truth darkens: the yard is neglected and Dad violently punches Young Mariner while berating him to fight and “lift tin,” revealing abuse and degradation.\\\",\\\"characters\\\":[\\\"YOUNG MARINER\\\",\\\"DAD\\\"]},{\\\"scene_number\\\":13,\\\"heading\\\":\\\"INT. STAIRWELL \\\\\\\\- (BACK TO PRESENT)\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"STAIRWELL\\\",\\\"time_of_day\\\":\\\"\\\",\\\"summary\\\":\\\"Back in the present confrontation, Salvatori and his thugs seize control; Mariner, shaken by Rose’s revelation that his father is alive and abandoned him, is forced to kneel as Salvatori mocks his hero act and demands the memory stick/password.\\\",\\\"characters\\\":[\\\"SALVATORI\\\",\\\"ROSE\\\",\\\"MARINER\\\",\\\"THUGS\\\"]},{\\\"scene_number\\\":14,\\\"heading\\\":\\\"EXT. COASTLINE \\\\\\\\- DAY \\\\\\\\- (FLASHBACK)\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"COASTLINE\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"Another memory: the boat is strewn with empty bottles as Dad urinates over the side, crudely redefining heroism as self-serving and ordering Young Mariner to fetch another beer.\\\",\\\"characters\\\":[\\\"YOUNG MARINER\\\",\\\"DAD\\\"]},{\\\"scene_number\\\":15,\\\"heading\\\":\\\"EXT. BACKYARD \\\\\\\\- DAY \\\\\\\\- (FLASHBACK)\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"BACKYARD\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"Intercutting with the present standoff, Rose reframes Mariner as the true hero despite his father’s abuse and abandonment; inspired, Mariner smiles and clenches his fists as Salvatori screams for the password and aims at Rose’s head.\\\",\\\"characters\\\":[\\\"ROSE\\\",\\\"MARINER\\\",\\\"SALVATORI\\\",\\\"THUGS\\\"]}]}\\n</Output>\\n<Rubric>\\nEvaluate the scene extraction output for the screenplay \\\"The Mariner.\\\"\\n\\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\\nKey quality criteria:\\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\\n2. Are scene headings accurate and complete?\\n3. Are INT/EXT designations correct?\\n4. Are character names correctly identified for each scene (including O.S. characters)?\\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\\n7. Are the flashback scenes properly distinguished from present-day scenes?\\n\\nScore strictly: partial credit for close but imperfect extraction.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "5f1d79da-6649-45d1-8b29-ecf4c767f485",
        "latencyMs": 20143,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n==========",
          "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "promptIdx": 6,
        "provider": {
          "id": "openai:gpt-5.2",
          "label": "GPT-5.2"
        },
        "response": {
          "output": "{\n  \"title\": \"The Mariner\",\n  \"scene_count\": 15,\n  \"scenes\": [\n    {\n      \"scene_number\": 1,\n      \"heading\": \"EXT. CITY CENTRE \\\\- NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"CITY CENTRE\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A devastated downtown no-go zone burns and echoes with distant sirens, gunshots, and screams as text sets the post-pandemic collapse backdrop and rise of vigilantes.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 2,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING \\\\- FRONT \\\\- NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"RUDDY & GREENE BUILDING - FRONT\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"The once-elegant Ruddy & Greene building is shown battered by bullets and graffiti, with expensive SUVs parked outside suggesting a criminal presence.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 3,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING \\\\- REAR \\\\- NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"RUDDY & GREENE BUILDING - REAR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"The Mariner arrives in a delivery van, storms in through the back, and a violent off-screen rampage is heard culminating in him reaching Rose and getting her to the elevator.\",\n      \"characters\": [\n        \"THE MARINER\",\n        \"ROSE\"\n      ]\n    },\n    {\n      \"scene_number\": 4,\n      \"heading\": \"INT. RUDDY & GREEN BUILDING \\\\- ELEVATOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"RUDDY & GREEN BUILDING - ELEVATOR\",\n      \"time_of_day\": \"\",\n      \"summary\": \"Rose and the blood-soaked Mariner catch their breath; he reveals he tracked her with an AirTag, then they’re ambushed on the 12th floor and fight their way back into the elevator to escape upward via stairs.\",\n      \"characters\": [\n        \"ROSE\",\n        \"MARINER\",\n        \"THUG 1\",\n        \"THUG 2\",\n        \"THUG 3\"\n      ]\n    },\n    {\n      \"scene_number\": 5,\n      \"heading\": \"INT. 11TH FLOOR \\\\- CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"11TH FLOOR\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"They creep through dark corridors and hide as someone passes; Mariner’s gaze lingers on his “Dad” tattoo, triggering a childhood memory.\",\n      \"characters\": [\n        \"ROSE\",\n        \"MARINER\"\n      ]\n    },\n    {\n      \"scene_number\": 6,\n      \"heading\": \"BEGIN FLASHBACK: EXT. COASTLINE \\\\- DAY \\\\- PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"COASTLINE\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Young Mariner and his fisherman dad enjoy a warm day sailing as Dad teaches him to cast and defines what a hero is, sending him to fetch another beer.\",\n      \"characters\": [\n        \"YOUNG MARINER\",\n        \"DAD\"\n      ]\n    },\n    {\n      \"scene_number\": 7,\n      \"heading\": \"INT. STAIRWELL \\\\- CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"STAIRWELL\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose insists they must retrieve her purse because it contains a chip with a blockchain password to her life savings; Mariner argues but follows her upward.\",\n      \"characters\": [\n        \"ROSE\",\n        \"MARINER\"\n      ]\n    },\n    {\n      \"scene_number\": 8,\n      \"heading\": \"INT. 12TH FLOOR STAIRWELL \\\\- CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"12TH FLOOR STAIRWELL\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"A thug named Rosco ambushes them; Mariner subdues him while Rose interrogates him about blockchain and learns Salvatori is coming, then admits she stole gang money.\",\n      \"characters\": [\n        \"MARINER\",\n        \"ROSE\",\n        \"ROSCO\"\n      ]\n    },\n    {\n      \"scene_number\": 9,\n      \"heading\": \"INT. 13TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"13TH FLOOR\",\n      \"time_of_day\": \"\",\n      \"summary\": \"Three thugs (Vinnie, Mikey, Carlos) patrol and overhear Rose and Mariner arguing about his “Mariner’s code,” then confront them; Mariner uses a flare gun and brute strength to defeat them while protecting Rose.\",\n      \"characters\": [\n        \"VINNIE\",\n        \"MIKEY\",\n        \"CARLOS\",\n        \"MARINER\",\n        \"ROSE\"\n      ]\n    },\n    {\n      \"scene_number\": 10,\n      \"heading\": \"INT. 15TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15TH FLOOR\",\n      \"time_of_day\": \"\",\n      \"summary\": \"They reach a luxurious top-floor suite, force open a locked office, and Rose recovers her purse; their conversation about Mariner’s strength triggers another memory of Dad’s training.\",\n      \"characters\": [\n        \"MARINER\",\n        \"ROSE\"\n      ]\n    },\n    {\n      \"scene_number\": 11,\n      \"heading\": \"BEGIN FLASHBACK: EXT. BACKYARD \\\\- DAY \\\\- PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"In a sunny idyllic yard, Dad teaches Young Mariner weightlifting, urging him not to run from fights; Young Mariner, sporting a black eye, resolves to be tougher.\",\n      \"characters\": [\n        \"YOUNG MARINER\",\n        \"DAD\"\n      ]\n    },\n    {\n      \"scene_number\": 12,\n      \"heading\": \"EXT. BACKYARD \\\\- DAY \\\\- (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"The truth darkens: the yard is neglected and Dad violently punches Young Mariner while berating him to fight and “lift tin,” revealing abuse and degradation.\",\n      \"characters\": [\n        \"YOUNG MARINER\",\n        \"DAD\"\n      ]\n    },\n    {\n      \"scene_number\": 13,\n      \"heading\": \"INT. STAIRWELL \\\\- (BACK TO PRESENT)\",\n      \"int_ext\": \"INT\",\n      \"location\": \"STAIRWELL\",\n      \"time_of_day\": \"\",\n      \"summary\": \"Back in the present confrontation, Salvatori and his thugs seize control; Mariner, shaken by Rose’s revelation that his father is alive and abandoned him, is forced to kneel as Salvatori mocks his hero act and demands the memory stick/password.\",\n      \"characters\": [\n        \"SALVATORI\",\n        \"ROSE\",\n        \"MARINER\",\n        \"THUGS\"\n      ]\n    },\n    {\n      \"scene_number\": 14,\n      \"heading\": \"EXT. COASTLINE \\\\- DAY \\\\- (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"COASTLINE\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Another memory: the boat is strewn with empty bottles as Dad urinates over the side, crudely redefining heroism as self-serving and ordering Young Mariner to fetch another beer.\",\n      \"characters\": [\n        \"YOUNG MARINER\",\n        \"DAD\"\n      ]\n    },\n    {\n      \"scene_number\": 15,\n      \"heading\": \"EXT. BACKYARD \\\\- DAY \\\\- (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Intercutting with the present standoff, Rose reframes Mariner as the true hero despite his father’s abuse and abandonment; inspired, Mariner smiles and clenches his fists as Salvatori screams for the password and aims at Rose’s head.\",\n      \"characters\": [\n        \"ROSE\",\n        \"MARINER\",\n        \"SALVATORI\",\n        \"THUGS\"\n      ]\n    }\n  ]\n}",
          "tokenUsage": {
            "total": 6518,
            "prompt": 4647,
            "completion": 1871,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 20143,
          "finishReason": "stop",
          "cost": 0.03432625,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9d5d8ce03f855fdd-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Mon, 02 Mar 2026 04:10:31 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "19898",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=KB24U2jEH_VkKDjw8x5oLGY3b9_1ZqjEWO5m4cwAFGY-1772424611.8768258-1.0.1.1-gkzcuzjKsWKnm_LzPIZuZzAGgHBVe.Fi3WChWLfx0.hD5QKszE4iq.wrq8_sKesaSWufdes185rtDaBH1ZW3KXfiYMieRNgtzDydnES7cLq1iTubmEQ3GqC47jeySTsU; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Mon, 02 Mar 2026 04:40:31 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "4000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "3995627",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "65ms",
                "x-request-id": "req_07dc856d36714927a675494e08b5682b"
              }
            }
          }
        },
        "score": 0.925,
        "success": true,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-scenes.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/scene_extraction_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-scenes.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9d5d8ce03f855fdd-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Mon, 02 Mar 2026 04:10:31 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "19898",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=KB24U2jEH_VkKDjw8x5oLGY3b9_1ZqjEWO5m4cwAFGY-1772424611.8768258-1.0.1.1-gkzcuzjKsWKnm_LzPIZuZzAGgHBVe.Fi3WChWLfx0.hD5QKszE4iq.wrq8_sKesaSWufdes185rtDaBH1ZW3KXfiYMieRNgtzDydnES7cLq1iTubmEQ3GqC47jeySTsU; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Mon, 02 Mar 2026 04:40:31 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "4000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "3995627",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "65ms",
              "x-request-id": "req_07dc856d36714927a675494e08b5682b"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0.08751,
        "gradingResult": {
          "pass": true,
          "score": 0.85385,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 3531,
            "prompt": 2817,
            "completion": 714,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.8877,
              "reason": "character_recall=0.83 | field_completeness=1.00 | heading_match=0.93 | heading_quality=0.93 | json_valid=0.90 | scene_count=0.70 | summary_completeness=1.00 | JSON extracted from code block | Count: 16 vs 15 golden (off by 1) | Matched 14/15 headings | Missing chars: THE MARINER, YOUNG MARINER",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/scene_extraction_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
              },
              "pass": true,
              "score": 0.82,
              "reason": "The output identifies 16 scenes, which is within a reasonable range for a screenplay with 13-15 scenes plus embedded flashbacks. Let me evaluate each criterion:\n\n1. **Scene identification including flashbacks**: The output identifies both present-day scenes and flashback scenes (scenes 6, 11, 13, 14, 15). The flashbacks are properly separated as distinct scenes. This appears comprehensive. However, scene 15 seems like it might be a continuation/overlap rather than a fully distinct scene, and some scenes (like 5 and 7) might be parts of the same continuous sequence that could be debated. Overall good coverage.\n\n2. **Scene headings**: The headings are generally accurate and detailed. Minor note: Scene 4 has \"RUDDY & GREEN\" instead of \"RUDDY & GREENE\" (missing the 'e'), which could be a transcription issue from the original screenplay. Scene 12 and 16 have parenthetical additions that may not match exact screenplay headings but are reasonable organizational choices.\n\n3. **INT/EXT designations**: These appear correct throughout - exterior scenes for city, building exteriors, coastline, and backyard; interior scenes for elevator, floors, and stairwell.\n\n4. **Character identification**: Characters are identified for each scene. Scene 1 and 2 have no characters which makes sense for establishing shots. Scene 9 correctly identifies Vinnie, Mikey, and Carlos. Scene 4 identifies the three thugs. Scene 8 identifies Rosco. Scene 15 includes Salvatori's voice overlapping, which is good for O.S. characters. However, in scene 12, Salvatori arrives with \"armed thugs\" but only Salvatori is named - the thugs aren't individually named which may be correct if they aren't named in the script.\n\n5. **Summary quality**: Summaries are detailed and meaningful, capturing key plot points, dialogue references, character motivations, and action beats. They go well beyond restating headings. The summary for scene 16 captures Rose's speech and the emotional arc. Scene 4's summary about the AirTag and purse is specific and useful.\n\n6. **Time of day**: Present-day scenes are correctly marked as NIGHT, flashbacks as DAY. Scene 5 uses CONTINUOUS which is appropriate. This is handled well throughout.\n\n7. **Flashback distinction**: Flashbacks are clearly distinguished with \"PAST\" or \"(FLASHBACK)\" in headings, and the summaries explain the idealized vs. true versions of memories (scenes 6/14 for coastline, 11/13 for backyard). This is a strong aspect of the extraction.\n\nMinor issues: The spelling inconsistency in scene 4 (\"GREEN\" vs \"GREENE\"), some scenes might be over-split or under-merged compared to the actual screenplay structure, and the fabricated headings for continued scenes (12, 16) may not match the original exactly. Overall this is a high-quality extraction with good attention to detail.",
              "tokensUsed": {
                "total": 3531,
                "prompt": 2817,
                "completion": 714,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n```json\\n{\\n  \\\"title\\\": \\\"The Mariner\\\",\\n  \\\"scene_count\\\": 16,\\n  \\\"scenes\\\": [\\n    {\\n      \\\"scene_number\\\": 1,\\n      \\\"heading\\\": \\\"EXT. CITY CENTRE - NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"CITY CENTRE\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"A ruined city is shown with fires, rubble from a fallen skyscraper, gunshots, screams, and sirens. An opening title card explains the pandemic, economic collapse, and rise of vigilantes.\\\",\\n      \\\"characters\\\": []\\n    },\\n    {\\n      \\\"scene_number\\\": 2,\\n      \\\"heading\\\": \\\"EXT. RUDDY & GREENE BUILDING - FRONT - NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"RUDDY & GREENE BUILDING - FRONT\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"A once-beautiful 15-story sandstone building, now damaged with bullet holes and graffiti, is shown with rows of high-end European SUVs parked outside.\\\",\\n      \\\"characters\\\": []\\n    },\\n    {\\n      \\\"scene_number\\\": 3,\\n      \\\"heading\\\": \\\"EXT. RUDDY & GREENE BUILDING - REAR - NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"RUDDY & GREENE BUILDING - REAR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"The Mariner arrives in a fish delivery van, charges into the building's back door, and fights his way through the building floor by floor. He rescues Rose, and they head to the elevator amid gunfire and fighting.\\\",\\n      \\\"characters\\\": [\\\"Mariner\\\", \\\"Rose\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 4,\\n      \\\"heading\\\": \\\"INT. RUDDY & GREEN BUILDING - ELEVATOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"RUDDY & GREEN BUILDING - ELEVATOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner ride the elevator, both bloodied and panting. Rose discovers a piece of skull on herself. Mariner reveals he tracked her via an AirTag in her purse. Rose insists they go back for her purse, but they are interrupted when the elevator opens on the 12th floor and three thugs attack. After a brief fight, Rose presses 11 and they escape.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\", \\\"Thug 1\\\", \\\"Thug 2\\\", \\\"Thug 3\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 5,\\n      \\\"heading\\\": \\\"INT. 11TH FLOOR - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"11TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner search for a stairwell through dim, littered corridors. They hide behind a filing cabinet as someone walks by. Mariner looks at his 'Dad' tattoo, triggering a flashback.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 6,\\n      \\\"heading\\\": \\\"EXT. COASTLINE - DAY - PAST\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"COASTLINE\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"In a warm flashback, young Mariner and his dad enjoy a day of fishing in a wooden sailboat. Dad teaches him to cast and tells him what a hero is: someone brave and true.\\\",\\n      \\\"characters\\\": [\\\"Mariner\\\", \\\"Dad\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 7,\\n      \\\"heading\\\": \\\"INT. STAIRWELL - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"STAIRWELL\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Rose heads upstairs while Mariner wants to go down. Rose reveals her purse contains a blockchain password to her $20 million life savings. Mariner reluctantly follows her up.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 8,\\n      \\\"heading\\\": \\\"INT. 12TH FLOOR STAIRWELL - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"12TH FLOOR STAIRWELL\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"A thug named Rosco bursts through the stairwell door. Mariner subdues him while Rose holds him at gunpoint. Rosco explains blockchain and reveals Rose stole $20 million from Mr. Salvatori. Rose admits she stole gang money, and they argue as they continue upstairs.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\", \\\"Rosco\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 9,\\n      \\\"heading\\\": \\\"INT. 13TH FLOOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"13TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Thugs Vinnie, Mikey, and Carlos patrol the corridor discussing cryptocurrency. They hear Rose and Mariner arguing about the Mariner's code and confront them. Mariner fires a flare gun at Vinnie, then fights and defeats all three thugs. Rose reveals Vinnie was her ex-boyfriend who convinced her to rob the gang.\\\",\\n      \\\"characters\\\": [\\\"Vinnie\\\", \\\"Mikey\\\", \\\"Carlos\\\", \\\"Mariner\\\", \\\"Rose\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 10,\\n      \\\"heading\\\": \\\"INT. 15TH FLOOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"15TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner enter a clean, luxurious floor showing evidence of Mariner's earlier fight. They pass various rooms and Mariner breaks open a sturdy door with his oar. Rose retrieves her purse from a desk in a lavish office. Rose questions Mariner about his strength, triggering a flashback.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 11,\\n      \\\"heading\\\": \\\"EXT. BACKYARD - DAY - PAST\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"BACKYARD\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"In an idealized flashback, young Mariner's dad patiently teaches him weightlifting in a sunny, idyllic backyard. Dad encourages him to be a scrapper and never run from a fight.\\\",\\n      \\\"characters\\\": [\\\"Mariner\\\", \\\"Dad\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 12,\\n      \\\"heading\\\": \\\"INT. 15TH FLOOR (CONTINUED)\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"15TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Back in the present, Rose confronts Mariner about their father, revealing he's not dead but living with another woman. She tells him their mother hid the truth to protect him. They notice a still-burning cigar and melting ice, and Salvatori arrives with armed thugs.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\", \\\"Salvatori\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 13,\\n      \\\"heading\\\": \\\"EXT. BACKYARD - DAY - (FLASHBACK)\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"BACKYARD\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"The true version of the backyard is revealed: overgrown with weeds and littered with bottles. Dad punches young Mariner in the face, berating him for not standing up for himself, then sends him to lift weights in disgust.\\\",\\n      \\\"characters\\\": [\\\"Mariner\\\", \\\"Dad\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 14,\\n      \\\"heading\\\": \\\"EXT. COASTLINE - DAY - (FLASHBACK)\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"COASTLINE\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"The true version of the fishing trip is revealed: the boat is littered with empty beer bottles, dad is pissing off the side, and young Mariner is shivering. Dad drunkenly defines a hero as himself and demands another beer.\\\",\\n      \\\"characters\\\": [\\\"Mariner\\\", \\\"Dad\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 15,\\n      \\\"heading\\\": \\\"EXT. BACKYARD - DAY - (FLASHBACK)\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"BACKYARD\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Continuation of the darker flashback as Salvatori's voice overlaps, asking Mariner if he's a hero. Mariner quietly says no.\\\",\\n      \\\"characters\\\": [\\\"Mariner\\\", \\\"Salvatori\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 16,\\n      \\\"heading\\\": \\\"INT. 15TH FLOOR (CONTINUED - FINAL CONFRONTATION)\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"15TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Salvatori's thugs force Mariner to his knees and Salvatori demands the password from Rose at gunpoint. Rose delivers an impassioned speech about how Mariner turned a terrible childhood into a heroic life, calling him a true model of honesty, bravery, and grit. She declares he never backs down from a fight, and Mariner smiles and clenches his fists, ready to act.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\", \\\"Salvatori\\\"]\\n    }\\n  ]\\n}\\n```\\n</Output>\\n<Rubric>\\nEvaluate the scene extraction output for the screenplay \\\"The Mariner.\\\"\\n\\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\\nKey quality criteria:\\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\\n2. Are scene headings accurate and complete?\\n3. Are INT/EXT designations correct?\\n4. Are character names correctly identified for each scene (including O.S. characters)?\\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\\n7. Are the flashback scenes properly distinguished from present-day scenes?\\n\\nScore strictly: partial credit for close but imperfect extraction.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "ed293804-1969-473c-8d3c-9d75eb3a0c63",
        "latencyMs": 37407,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n==========",
          "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "promptIdx": 7,
        "provider": {
          "id": "anthropic:messages:claude-opus-4-6",
          "label": "Claude Opus 4.6"
        },
        "response": {
          "output": "```json\n{\n  \"title\": \"The Mariner\",\n  \"scene_count\": 16,\n  \"scenes\": [\n    {\n      \"scene_number\": 1,\n      \"heading\": \"EXT. CITY CENTRE - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"CITY CENTRE\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A ruined city is shown with fires, rubble from a fallen skyscraper, gunshots, screams, and sirens. An opening title card explains the pandemic, economic collapse, and rise of vigilantes.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 2,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING - FRONT - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"RUDDY & GREENE BUILDING - FRONT\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A once-beautiful 15-story sandstone building, now damaged with bullet holes and graffiti, is shown with rows of high-end European SUVs parked outside.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 3,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING - REAR - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"RUDDY & GREENE BUILDING - REAR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"The Mariner arrives in a fish delivery van, charges into the building's back door, and fights his way through the building floor by floor. He rescues Rose, and they head to the elevator amid gunfire and fighting.\",\n      \"characters\": [\"Mariner\", \"Rose\"]\n    },\n    {\n      \"scene_number\": 4,\n      \"heading\": \"INT. RUDDY & GREEN BUILDING - ELEVATOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"RUDDY & GREEN BUILDING - ELEVATOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Rose and Mariner ride the elevator, both bloodied and panting. Rose discovers a piece of skull on herself. Mariner reveals he tracked her via an AirTag in her purse. Rose insists they go back for her purse, but they are interrupted when the elevator opens on the 12th floor and three thugs attack. After a brief fight, Rose presses 11 and they escape.\",\n      \"characters\": [\"Rose\", \"Mariner\", \"Thug 1\", \"Thug 2\", \"Thug 3\"]\n    },\n    {\n      \"scene_number\": 5,\n      \"heading\": \"INT. 11TH FLOOR - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"11TH FLOOR\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose and Mariner search for a stairwell through dim, littered corridors. They hide behind a filing cabinet as someone walks by. Mariner looks at his 'Dad' tattoo, triggering a flashback.\",\n      \"characters\": [\"Rose\", \"Mariner\"]\n    },\n    {\n      \"scene_number\": 6,\n      \"heading\": \"EXT. COASTLINE - DAY - PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"COASTLINE\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"In a warm flashback, young Mariner and his dad enjoy a day of fishing in a wooden sailboat. Dad teaches him to cast and tells him what a hero is: someone brave and true.\",\n      \"characters\": [\"Mariner\", \"Dad\"]\n    },\n    {\n      \"scene_number\": 7,\n      \"heading\": \"INT. STAIRWELL - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"STAIRWELL\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose heads upstairs while Mariner wants to go down. Rose reveals her purse contains a blockchain password to her $20 million life savings. Mariner reluctantly follows her up.\",\n      \"characters\": [\"Rose\", \"Mariner\"]\n    },\n    {\n      \"scene_number\": 8,\n      \"heading\": \"INT. 12TH FLOOR STAIRWELL - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"12TH FLOOR STAIRWELL\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"A thug named Rosco bursts through the stairwell door. Mariner subdues him while Rose holds him at gunpoint. Rosco explains blockchain and reveals Rose stole $20 million from Mr. Salvatori. Rose admits she stole gang money, and they argue as they continue upstairs.\",\n      \"characters\": [\"Rose\", \"Mariner\", \"Rosco\"]\n    },\n    {\n      \"scene_number\": 9,\n      \"heading\": \"INT. 13TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"13TH FLOOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Thugs Vinnie, Mikey, and Carlos patrol the corridor discussing cryptocurrency. They hear Rose and Mariner arguing about the Mariner's code and confront them. Mariner fires a flare gun at Vinnie, then fights and defeats all three thugs. Rose reveals Vinnie was her ex-boyfriend who convinced her to rob the gang.\",\n      \"characters\": [\"Vinnie\", \"Mikey\", \"Carlos\", \"Mariner\", \"Rose\"]\n    },\n    {\n      \"scene_number\": 10,\n      \"heading\": \"INT. 15TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15TH FLOOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Rose and Mariner enter a clean, luxurious floor showing evidence of Mariner's earlier fight. They pass various rooms and Mariner breaks open a sturdy door with his oar. Rose retrieves her purse from a desk in a lavish office. Rose questions Mariner about his strength, triggering a flashback.\",\n      \"characters\": [\"Rose\", \"Mariner\"]\n    },\n    {\n      \"scene_number\": 11,\n      \"heading\": \"EXT. BACKYARD - DAY - PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"In an idealized flashback, young Mariner's dad patiently teaches him weightlifting in a sunny, idyllic backyard. Dad encourages him to be a scrapper and never run from a fight.\",\n      \"characters\": [\"Mariner\", \"Dad\"]\n    },\n    {\n      \"scene_number\": 12,\n      \"heading\": \"INT. 15TH FLOOR (CONTINUED)\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15TH FLOOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Back in the present, Rose confronts Mariner about their father, revealing he's not dead but living with another woman. She tells him their mother hid the truth to protect him. They notice a still-burning cigar and melting ice, and Salvatori arrives with armed thugs.\",\n      \"characters\": [\"Rose\", \"Mariner\", \"Salvatori\"]\n    },\n    {\n      \"scene_number\": 13,\n      \"heading\": \"EXT. BACKYARD - DAY - (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"The true version of the backyard is revealed: overgrown with weeds and littered with bottles. Dad punches young Mariner in the face, berating him for not standing up for himself, then sends him to lift weights in disgust.\",\n      \"characters\": [\"Mariner\", \"Dad\"]\n    },\n    {\n      \"scene_number\": 14,\n      \"heading\": \"EXT. COASTLINE - DAY - (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"COASTLINE\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"The true version of the fishing trip is revealed: the boat is littered with empty beer bottles, dad is pissing off the side, and young Mariner is shivering. Dad drunkenly defines a hero as himself and demands another beer.\",\n      \"characters\": [\"Mariner\", \"Dad\"]\n    },\n    {\n      \"scene_number\": 15,\n      \"heading\": \"EXT. BACKYARD - DAY - (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Continuation of the darker flashback as Salvatori's voice overlaps, asking Mariner if he's a hero. Mariner quietly says no.\",\n      \"characters\": [\"Mariner\", \"Salvatori\"]\n    },\n    {\n      \"scene_number\": 16,\n      \"heading\": \"INT. 15TH FLOOR (CONTINUED - FINAL CONFRONTATION)\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15TH FLOOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Salvatori's thugs force Mariner to his knees and Salvatori demands the password from Rose at gunpoint. Rose delivers an impassioned speech about how Mariner turned a terrible childhood into a heroic life, calling him a true model of honesty, bravery, and grit. She declares he never backs down from a fight, and Mariner smiles and clenches his fists, ready to act.\",\n      \"characters\": [\"Rose\", \"Mariner\", \"Salvatori\"]\n    }\n  ]\n}\n```",
          "tokenUsage": {
            "total": 7746,
            "prompt": 5307,
            "completion": 2439
          },
          "finishReason": "stop",
          "cost": 0.08751
        },
        "score": 0.85385,
        "success": true,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-scenes.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/scene_extraction_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-scenes.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      }
    ],
    "stats": {
      "successes": 3,
      "failures": 5,
      "errors": 0,
      "tokenUsage": {
        "prompt": 39819,
        "completion": 17606,
        "cached": 0,
        "total": 57425,
        "numRequests": 8,
        "completionDetails": {
          "reasoning": 0,
          "acceptedPrediction": 0,
          "rejectedPrediction": 0
        },
        "assertions": {
          "total": 26425,
          "prompt": 19916,
          "completion": 6509,
          "cached": 0,
          "numRequests": 0,
          "completionDetails": {
            "reasoning": 0,
            "acceptedPrediction": 0,
            "rejectedPrediction": 0
          }
        }
      },
      "durationMs": 153665
    }
  },
  "config": {
    "tags": {},
    "description": "Scene extraction from screenplay — The Mariner",
    "prompts": [
      "file:///Users/cam/Documents/Projects/cine-forge/benchmarks/prompts/scene-extraction.txt"
    ],
    "providers": [
      {
        "id": "openai:gpt-4.1-nano",
        "label": "GPT-4.1 Nano",
        "config": {
          "temperature": 0,
          "max_tokens": 8192,
          "response_format": {
            "type": "json_object"
          }
        }
      },
      {
        "id": "openai:gpt-4.1-mini",
        "label": "GPT-4.1 Mini",
        "config": {
          "temperature": 0,
          "max_tokens": 8192,
          "response_format": {
            "type": "json_object"
          }
        }
      },
      {
        "id": "openai:gpt-4.1",
        "label": "GPT-4.1",
        "config": {
          "temperature": 0,
          "max_tokens": 8192,
          "response_format": {
            "type": "json_object"
          }
        }
      },
      {
        "id": "anthropic:messages:claude-haiku-4-5-20251001",
        "label": "Claude Haiku 4.5",
        "config": {
          "temperature": 0,
          "max_tokens": 8192
        }
      },
      {
        "id": "anthropic:messages:claude-sonnet-4-5-20250929",
        "label": "Claude Sonnet 4.5",
        "config": {
          "temperature": 0,
          "max_tokens": 8192
        }
      },
      {
        "id": "anthropic:messages:claude-sonnet-4-6",
        "label": "Claude Sonnet 4.6",
        "config": {
          "temperature": 0,
          "max_tokens": 8192
        }
      },
      {
        "id": "openai:gpt-5.2",
        "label": "GPT-5.2",
        "config": {
          "temperature": 0,
          "max_tokens": 8192,
          "response_format": {
            "type": "json_object"
          }
        }
      },
      {
        "id": "anthropic:messages:claude-opus-4-6",
        "label": "Claude Opus 4.6",
        "config": {
          "temperature": 0,
          "max_tokens": 8192
        }
      }
    ],
    "tests": [
      {
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-scenes.json"
        },
        "assert": [
          {
            "type": "python",
            "value": "file://../scorers/scene_extraction_scorer.py"
          },
          {
            "type": "llm-rubric",
            "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
          }
        ]
      }
    ],
    "scenarios": [],
    "env": {},
    "defaultTest": {
      "options": {
        "provider": "anthropic:messages:claude-opus-4-6"
      },
      "vars": {},
      "assert": [],
      "metadata": {}
    },
    "outputPath": [
      "results/scene-extraction-post-golden-verify.json"
    ],
    "extensions": [],
    "metadata": {},
    "evaluateOptions": {}
  },
  "shareableUrl": null,
  "metadata": {
    "promptfooVersion": "0.120.24",
    "nodeVersion": "v24.13.1",
    "platform": "darwin",
    "arch": "arm64",
    "exportedAt": "2026-03-02T04:11:34.386Z",
    "evaluationCreatedAt": "2026-03-02T04:09:00.139Z"
  }
}