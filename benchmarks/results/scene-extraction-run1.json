{
  "evalId": "eval-p4p-2026-02-15T23:16:42",
  "results": {
    "version": 3,
    "timestamp": "2026-02-15T23:16:42.967Z",
    "prompts": [
      {
        "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "id": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "provider": "GPT-4.1 Nano",
        "metrics": {
          "score": 0.175,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 0,
          "assertFailCount": 2,
          "totalLatencyMs": 6915,
          "tokenUsage": {
            "prompt": 4648,
            "completion": 1024,
            "cached": 0,
            "total": 5672,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2978,
              "prompt": 1354,
              "completion": 1624,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.0008744
        }
      },
      {
        "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "id": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "provider": "GPT-4.1 Mini",
        "metrics": {
          "score": 0.2,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 0,
          "assertFailCount": 2,
          "totalLatencyMs": 13130,
          "tokenUsage": {
            "prompt": 4648,
            "completion": 1024,
            "cached": 0,
            "total": 5672,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 4265,
              "prompt": 1353,
              "completion": 2912,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.0034976
        }
      },
      {
        "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "id": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "provider": "GPT-4.1",
        "metrics": {
          "score": 0.15,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 0,
          "assertFailCount": 2,
          "totalLatencyMs": 8537,
          "tokenUsage": {
            "prompt": 4648,
            "completion": 1024,
            "cached": 0,
            "total": 5672,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 3190,
              "prompt": 1354,
              "completion": 1836,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.017488
        }
      },
      {
        "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "id": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "provider": "Claude Haiku 4.5",
        "metrics": {
          "score": 0.7805,
          "testPassCount": 1,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 2,
          "assertFailCount": 0,
          "totalLatencyMs": 16104,
          "tokenUsage": {
            "prompt": 5307,
            "completion": 2341,
            "cached": 0,
            "total": 7648,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 5278,
              "prompt": 2278,
              "completion": 3000,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.017012
        }
      },
      {
        "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "id": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "provider": "Claude Sonnet 4.5",
        "metrics": {
          "score": 0.7558499999999999,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 1,
          "totalLatencyMs": 38660,
          "tokenUsage": {
            "prompt": 5307,
            "completion": 2675,
            "cached": 0,
            "total": 7982,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 5059,
              "prompt": 2581,
              "completion": 2478,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.056046
        }
      },
      {
        "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "id": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "provider": "GPT-5.2",
        "metrics": {
          "score": 0.80265,
          "testPassCount": 1,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 2,
          "assertFailCount": 0,
          "totalLatencyMs": 19812,
          "tokenUsage": {
            "prompt": 4647,
            "completion": 1525,
            "cached": 0,
            "total": 6172,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 4305,
              "prompt": 1511,
              "completion": 2794,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.02948225
        }
      },
      {
        "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
        "id": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "provider": "Claude Opus 4.6",
        "metrics": {
          "score": 0.72585,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 1,
          "totalLatencyMs": 40202,
          "tokenUsage": {
            "prompt": 5307,
            "completion": 2466,
            "cached": 0,
            "total": 7773,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 5079,
              "prompt": 2396,
              "completion": 2683,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.08818500000000001
        }
      }
    ],
    "results": [
      {
        "cost": 0.0008744,
        "error": "Partial, inconsistent, and truncated extraction. Positives: flashback is clearly marked (BEGIN/END) with DAY; summaries capture key action; INT/EXT mostly correct; scene headings are generally reasonable. Major issues: output truncates at scene 11 and is incomplete/invalid; stated scene_count (20) conflicts with the screenplay’s ~13–15; present-day time_of_day often set to CONTINUOUS instead of NIGHT as required; character naming inconsistent (\"The Mariner\" vs \"Mariner\") and no indication of O.S.; some headings/time details are missing or incomplete. These issues prevent full credit.",
        "gradingResult": {
          "pass": false,
          "score": 0.175,
          "reason": "Partial, inconsistent, and truncated extraction. Positives: flashback is clearly marked (BEGIN/END) with DAY; summaries capture key action; INT/EXT mostly correct; scene headings are generally reasonable. Major issues: output truncates at scene 11 and is incomplete/invalid; stated scene_count (20) conflicts with the screenplay’s ~13–15; present-day time_of_day often set to CONTINUOUS instead of NIGHT as required; character naming inconsistent (\"The Mariner\" vs \"Mariner\") and no indication of O.S.; some headings/time details are missing or incomplete. These issues prevent full credit.",
          "namedScores": {},
          "tokensUsed": {
            "total": 2978,
            "prompt": 1354,
            "completion": 1624,
            "cached": 0,
            "numRequests": 1
          },
          "componentResults": [
            {
              "pass": false,
              "score": 0,
              "reason": "Invalid JSON output",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/scene_extraction_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
              },
              "pass": false,
              "score": 0.35,
              "reason": "Partial, inconsistent, and truncated extraction. Positives: flashback is clearly marked (BEGIN/END) with DAY; summaries capture key action; INT/EXT mostly correct; scene headings are generally reasonable. Major issues: output truncates at scene 11 and is incomplete/invalid; stated scene_count (20) conflicts with the screenplay’s ~13–15; present-day time_of_day often set to CONTINUOUS instead of NIGHT as required; character naming inconsistent (\"The Mariner\" vs \"Mariner\") and no indication of O.S.; some headings/time details are missing or incomplete. These issues prevent full credit.",
              "tokensUsed": {
                "total": 2978,
                "prompt": 1354,
                "completion": 1624,
                "cached": 0,
                "numRequests": 1,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n{\\n  \\\"title\\\": \\\"The Mariner\\\",\\n  \\\"scene_count\\\": 20,\\n  \\\"scenes\\\": [\\n    {\\n      \\\"scene_number\\\": 1,\\n      \\\"heading\\\": \\\"EXT. CITY CENTRE - NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"City Centre\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"A ruined cityscape with fires, gunfire, and sirens sets a post-apocalyptic tone, illustrating chaos and destruction.\\\",\\n      \\\"characters\\\": []\\n    },\\n    {\\n      \\\"scene_number\\\": 2,\\n      \\\"heading\\\": \\\"EXT. RUDDY & GREENE BUILDING - FRONT - NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"Ruddy & Greene Building - Front\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"A classic sandstone building with bullet holes and graffiti stands abandoned, with high-end SUVs parked outside.\\\",\\n      \\\"characters\\\": []\\n    },\\n    {\\n      \\\"scene_number\\\": 3,\\n      \\\"heading\\\": \\\"EXT. RUDDY & GREENE BUILDING - REAR - NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"Ruddy & Greene Building - Rear\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"A delivery van arrives at the alley; Mariner emerges from shadow and enters the building amidst sounds of chaos.\\\",\\n      \\\"characters\\\": [\\\"The Mariner\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 4,\\n      \\\"heading\\\": \\\"INT. RUDDY & GREENE BUILDING - ELEVATOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"Ruddy & Greene Building - Elevator\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner are trapped in an elevator, injured and exhausted, as they reflect on their situation and Mariner's AirTag tracking device.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 5,\\n      \\\"heading\\\": \\\"INT. 12TH FLOOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"12th Floor\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"They encounter armed thugs; Mariner fights them off with his oar, and they escape the elevator amidst gunfire and chaos.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\", \\\"Thug 1\\\", \\\"Thug 2\\\", \\\"Thug 3\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 6,\\n      \\\"heading\\\": \\\"INT. 11TH FLOOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"11th Floor\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Mariner and Rose hide in an empty room, and Mariner recalls a flashback of his childhood with his father.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 7,\\n      \\\"heading\\\": \\\"BEGIN FLASHBACK: EXT. COASTLINE - DAY - PAST\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"Coastline\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Young Mariner and his father enjoy a day on the water, with the father imparting wisdom about heroism.\\\",\\n      \\\"characters\\\": [\\\"Young Mariner\\\", \\\"Dad\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 8,\\n      \\\"heading\\\": \\\"END FLASHBACK\\\",\\n      \\\"int_ext\\\": null,\\n      \\\"location\\\": null,\\n      \\\"time_of_day\\\": null,\\n      \\\"summary\\\": \\\"The flashback concludes, returning to the present as Mariner is lost in thought.\\\",\\n      \\\"characters\\\": []\\n    },\\n    {\\n      \\\"scene_number\\\": 9,\\n      \\\"heading\\\": \\\"INT. STAIRWELL\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"Stairwell\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner split up to ascend and descend the stairs; Mariner follows Rose up, emphasizing the importance of her hidden blockchain password.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 10,\\n      \\\"heading\\\": \\\"INT. 12TH FLOOR STAIRWELL\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"12th Floor Stairwell\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Thugs ambush Rose and Mariner; Mariner fights Rosco, and Rose retrieves a gun, revealing her involvement in stealing gang money.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\", \\\"Rosco\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 11,\\n      \\\"heading\\\": \\\"INT. 13TH FLOOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"13th Floor\\n</Output>\\n<Rubric>\\nEvaluate the scene extraction output for the screenplay \\\"The Mariner.\\\"\\n\\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\\nKey quality criteria:\\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\\n2. Are scene headings accurate and complete?\\n3. Are INT/EXT designations correct?\\n4. Are character names correctly identified for each scene (including O.S. characters)?\\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\\n7. Are the flashback scenes properly distinguished from present-day scenes?\\n\\nScore strictly: partial credit for close but imperfect extraction.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "b3a31100-0346-439d-90c7-19673edf002f",
        "latencyMs": 6915,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n==========",
          "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
          "config": {}
        },
        "promptId": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "promptIdx": 0,
        "provider": {
          "id": "openai:gpt-4.1-nano",
          "label": "GPT-4.1 Nano"
        },
        "response": {
          "output": "{\n  \"title\": \"The Mariner\",\n  \"scene_count\": 20,\n  \"scenes\": [\n    {\n      \"scene_number\": 1,\n      \"heading\": \"EXT. CITY CENTRE - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"City Centre\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A ruined cityscape with fires, gunfire, and sirens sets a post-apocalyptic tone, illustrating chaos and destruction.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 2,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING - FRONT - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Ruddy & Greene Building - Front\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A classic sandstone building with bullet holes and graffiti stands abandoned, with high-end SUVs parked outside.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 3,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING - REAR - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Ruddy & Greene Building - Rear\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A delivery van arrives at the alley; Mariner emerges from shadow and enters the building amidst sounds of chaos.\",\n      \"characters\": [\"The Mariner\"]\n    },\n    {\n      \"scene_number\": 4,\n      \"heading\": \"INT. RUDDY & GREENE BUILDING - ELEVATOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"Ruddy & Greene Building - Elevator\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose and Mariner are trapped in an elevator, injured and exhausted, as they reflect on their situation and Mariner's AirTag tracking device.\",\n      \"characters\": [\"Rose\", \"Mariner\"]\n    },\n    {\n      \"scene_number\": 5,\n      \"heading\": \"INT. 12TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"12th Floor\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"They encounter armed thugs; Mariner fights them off with his oar, and they escape the elevator amidst gunfire and chaos.\",\n      \"characters\": [\"Rose\", \"Mariner\", \"Thug 1\", \"Thug 2\", \"Thug 3\"]\n    },\n    {\n      \"scene_number\": 6,\n      \"heading\": \"INT. 11TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"11th Floor\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Mariner and Rose hide in an empty room, and Mariner recalls a flashback of his childhood with his father.\",\n      \"characters\": [\"Rose\", \"Mariner\"]\n    },\n    {\n      \"scene_number\": 7,\n      \"heading\": \"BEGIN FLASHBACK: EXT. COASTLINE - DAY - PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Coastline\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Young Mariner and his father enjoy a day on the water, with the father imparting wisdom about heroism.\",\n      \"characters\": [\"Young Mariner\", \"Dad\"]\n    },\n    {\n      \"scene_number\": 8,\n      \"heading\": \"END FLASHBACK\",\n      \"int_ext\": null,\n      \"location\": null,\n      \"time_of_day\": null,\n      \"summary\": \"The flashback concludes, returning to the present as Mariner is lost in thought.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 9,\n      \"heading\": \"INT. STAIRWELL\",\n      \"int_ext\": \"INT\",\n      \"location\": \"Stairwell\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose and Mariner split up to ascend and descend the stairs; Mariner follows Rose up, emphasizing the importance of her hidden blockchain password.\",\n      \"characters\": [\"Rose\", \"Mariner\"]\n    },\n    {\n      \"scene_number\": 10,\n      \"heading\": \"INT. 12TH FLOOR STAIRWELL\",\n      \"int_ext\": \"INT\",\n      \"location\": \"12th Floor Stairwell\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Thugs ambush Rose and Mariner; Mariner fights Rosco, and Rose retrieves a gun, revealing her involvement in stealing gang money.\",\n      \"characters\": [\"Rose\", \"Mariner\", \"Rosco\"]\n    },\n    {\n      \"scene_number\": 11,\n      \"heading\": \"INT. 13TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"13th Floor",
          "tokenUsage": {
            "total": 5672,
            "prompt": 4648,
            "completion": 1024,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 6915,
          "finishReason": "length",
          "cost": 0.0008744,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9ce883ba0c6f1e19-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Sun, 15 Feb 2026 23:16:49 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "6629",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=C_kb9KiPQdWuxc0xtfzWKCsaiYKGL4o1HXv_b7CSOO4-1771197403.2028427-1.0.1.1-WzOZ3EL0aTlNO7HILASKyZb8K6deevfhTK7L7aqhJM3aFdAIG4_ixNwctqcnl2ZZ7HLLzFqo9HYM38sjxlRlbCa3VqH.sL79BcxJ3uOfIi656Px5p8oTBvLwhVoXmtME; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Sun, 15 Feb 2026 23:46:49 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "10000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "9995627",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "26ms",
                "x-request-id": "req_99a66a616adf4bc99c3e303e2fadd3c5"
              }
            }
          }
        },
        "score": 0.175,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-scenes.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/scene_extraction_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-scenes.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9ce883ba0c6f1e19-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Sun, 15 Feb 2026 23:16:49 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "6629",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=C_kb9KiPQdWuxc0xtfzWKCsaiYKGL4o1HXv_b7CSOO4-1771197403.2028427-1.0.1.1-WzOZ3EL0aTlNO7HILASKyZb8K6deevfhTK7L7aqhJM3aFdAIG4_ixNwctqcnl2ZZ7HLLzFqo9HYM38sjxlRlbCa3VqH.sL79BcxJ3uOfIi656Px5p8oTBvLwhVoXmtME; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Sun, 15 Feb 2026 23:46:49 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "10000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "9995627",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "26ms",
              "x-request-id": "req_99a66a616adf4bc99c3e303e2fadd3c5"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.0034976,
        "error": "Significant issues against the rubric: (1) Scene coverage/count is wrong—screenplay expected ~13–15 scenes but output claims 20 and only lists 9 (with scene 9 truncated), so not all scenes are identified; also no END FLASHBACK is captured. (2) Headings are inconsistent/incomplete (e.g., “RUDDY & GREENE” vs “RUDDY & GREEN”; mixed inclusion of “- NIGHT” and “CONTINUOUS”). (3) INT/EXT designations appear correct. (4) Character identification is mostly good (including O.S.), but scene 9’s character list is cut off, indicating incompleteness. (5) Summaries are generally meaningful. (6) time_of_day is incorrect on multiple present-day scenes marked “CONTINUOUS” instead of NIGHT. (7) Flashback is begun and labeled DAY, but not properly closed/distinguished with an END FLASHBACK. Overall, too many key criteria are unmet.",
        "gradingResult": {
          "pass": false,
          "score": 0.2,
          "reason": "Significant issues against the rubric: (1) Scene coverage/count is wrong—screenplay expected ~13–15 scenes but output claims 20 and only lists 9 (with scene 9 truncated), so not all scenes are identified; also no END FLASHBACK is captured. (2) Headings are inconsistent/incomplete (e.g., “RUDDY & GREENE” vs “RUDDY & GREEN”; mixed inclusion of “- NIGHT” and “CONTINUOUS”). (3) INT/EXT designations appear correct. (4) Character identification is mostly good (including O.S.), but scene 9’s character list is cut off, indicating incompleteness. (5) Summaries are generally meaningful. (6) time_of_day is incorrect on multiple present-day scenes marked “CONTINUOUS” instead of NIGHT. (7) Flashback is begun and labeled DAY, but not properly closed/distinguished with an END FLASHBACK. Overall, too many key criteria are unmet.",
          "namedScores": {},
          "tokensUsed": {
            "total": 4265,
            "prompt": 1353,
            "completion": 2912,
            "cached": 0,
            "numRequests": 1
          },
          "componentResults": [
            {
              "pass": false,
              "score": 0,
              "reason": "Invalid JSON output",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/scene_extraction_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
              },
              "pass": false,
              "score": 0.4,
              "reason": "Significant issues against the rubric: (1) Scene coverage/count is wrong—screenplay expected ~13–15 scenes but output claims 20 and only lists 9 (with scene 9 truncated), so not all scenes are identified; also no END FLASHBACK is captured. (2) Headings are inconsistent/incomplete (e.g., “RUDDY & GREENE” vs “RUDDY & GREEN”; mixed inclusion of “- NIGHT” and “CONTINUOUS”). (3) INT/EXT designations appear correct. (4) Character identification is mostly good (including O.S.), but scene 9’s character list is cut off, indicating incompleteness. (5) Summaries are generally meaningful. (6) time_of_day is incorrect on multiple present-day scenes marked “CONTINUOUS” instead of NIGHT. (7) Flashback is begun and labeled DAY, but not properly closed/distinguished with an END FLASHBACK. Overall, too many key criteria are unmet.",
              "tokensUsed": {
                "total": 4265,
                "prompt": 1353,
                "completion": 2912,
                "cached": 0,
                "numRequests": 1,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n{\\n  \\\"title\\\": \\\"The Mariner\\\",\\n  \\\"scene_count\\\": 20,\\n  \\\"scenes\\\": [\\n    {\\n      \\\"scene_number\\\": 1,\\n      \\\"heading\\\": \\\"EXT. CITY CENTRE \\\\\\\\- NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"CITY CENTRE\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"A ruined city is shown with fires burning, rubble from a fallen skyscraper, and distant sirens. Gunshots and screams are heard, setting a chaotic atmosphere.\\\",\\n      \\\"characters\\\": []\\n    },\\n    {\\n      \\\"scene_number\\\": 2,\\n      \\\"heading\\\": \\\"EXT. RUDDY & GREENE BUILDING \\\\\\\\- FRONT \\\\\\\\- NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"RUDDY & GREENE BUILDING - FRONT\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"The battered sandstone building is shown with bullet holes and graffiti, with rows of high-end SUVs parked outside.\\\",\\n      \\\"characters\\\": []\\n    },\\n    {\\n      \\\"scene_number\\\": 3,\\n      \\\"heading\\\": \\\"EXT. RUDDY & GREENE BUILDING \\\\\\\\- REAR \\\\\\\\- NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"RUDDY & GREENE BUILDING - REAR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Mariner, hidden in shadow, exits a delivery van and enters the building’s back door. Sounds of fighting and gunfire are heard as he moves inside.\\\",\\n      \\\"characters\\\": [\\\"MARINER\\\", \\\"ROSE (O.S.)\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 4,\\n      \\\"heading\\\": \\\"INT. RUDDY & GREEN BUILDING \\\\\\\\- ELEVATOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"RUDDY & GREEN BUILDING - ELEVATOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner, both panting and bloodied, ride the elevator while discussing how Mariner found her. They are ambushed by thugs when the elevator doors open on the 12th floor.\\\",\\n      \\\"characters\\\": [\\\"ROSE\\\", \\\"MARINER\\\", \\\"THUG 1\\\", \\\"THUG 2\\\", \\\"THUG 3\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 5,\\n      \\\"heading\\\": \\\"INT. 11TH FLOOR \\\\\\\\- CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"11TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner hide behind a filing cabinet to avoid pursuers. Mariner reflects on his father’s teachings, leading into a flashback.\\\",\\n      \\\"characters\\\": [\\\"ROSE\\\", \\\"MARINER\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 6,\\n      \\\"heading\\\": \\\"BEGIN FLASHBACK: EXT. COASTLINE \\\\\\\\- DAY \\\\\\\\- PAST\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"COASTLINE\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Young Mariner and his fisherman father enjoy a day sailing. The father teaches Mariner about bravery and heroism.\\\",\\n      \\\"characters\\\": [\\\"Young Mariner\\\", \\\"DAD\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 7,\\n      \\\"heading\\\": \\\"INT. STAIRWELL \\\\\\\\- CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"STAIRWELL\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner split directions in the stairwell. Rose explains the importance of her stolen blockchain password, and Mariner reluctantly follows her upstairs.\\\",\\n      \\\"characters\\\": [\\\"ROSE\\\", \\\"MARINER\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 8,\\n      \\\"heading\\\": \\\"INT. 12TH FLOOR STAIRWELL \\\\\\\\- CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"12TH FLOOR STAIRWELL\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Thug Rosco ambushes Rose and Mariner. Mariner overpowers Rosco, and Rose interrogates him about the blockchain password and gang money.\\\",\\n      \\\"characters\\\": [\\\"ROSE\\\", \\\"MARINER\\\", \\\"ROSCO\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 9,\\n      \\\"heading\\\": \\\"INT. 13TH FLOOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"13TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Thugs Vinnie, Mikey, and Carlos patrol the corridor. They confront Rose and Mariner, leading to a violent fight where Mariner uses a flare gun to incapacitate Vinnie and defeats the others.\\\",\\n      \\\"characters\\\": [\\\"VINNIE\\\", \\\"\\n</Output>\\n<Rubric>\\nEvaluate the scene extraction output for the screenplay \\\"The Mariner.\\\"\\n\\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\\nKey quality criteria:\\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\\n2. Are scene headings accurate and complete?\\n3. Are INT/EXT designations correct?\\n4. Are character names correctly identified for each scene (including O.S. characters)?\\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\\n7. Are the flashback scenes properly distinguished from present-day scenes?\\n\\nScore strictly: partial credit for close but imperfect extraction.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "e7ceb7c0-83a3-4170-a586-b1a417ac2f9a",
        "latencyMs": 13130,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n==========",
          "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
          "config": {}
        },
        "promptId": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "promptIdx": 1,
        "provider": {
          "id": "openai:gpt-4.1-mini",
          "label": "GPT-4.1 Mini"
        },
        "response": {
          "output": "{\n  \"title\": \"The Mariner\",\n  \"scene_count\": 20,\n  \"scenes\": [\n    {\n      \"scene_number\": 1,\n      \"heading\": \"EXT. CITY CENTRE \\\\- NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"CITY CENTRE\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A ruined city is shown with fires burning, rubble from a fallen skyscraper, and distant sirens. Gunshots and screams are heard, setting a chaotic atmosphere.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 2,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING \\\\- FRONT \\\\- NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"RUDDY & GREENE BUILDING - FRONT\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"The battered sandstone building is shown with bullet holes and graffiti, with rows of high-end SUVs parked outside.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 3,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING \\\\- REAR \\\\- NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"RUDDY & GREENE BUILDING - REAR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Mariner, hidden in shadow, exits a delivery van and enters the building’s back door. Sounds of fighting and gunfire are heard as he moves inside.\",\n      \"characters\": [\"MARINER\", \"ROSE (O.S.)\"]\n    },\n    {\n      \"scene_number\": 4,\n      \"heading\": \"INT. RUDDY & GREEN BUILDING \\\\- ELEVATOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"RUDDY & GREEN BUILDING - ELEVATOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Rose and Mariner, both panting and bloodied, ride the elevator while discussing how Mariner found her. They are ambushed by thugs when the elevator doors open on the 12th floor.\",\n      \"characters\": [\"ROSE\", \"MARINER\", \"THUG 1\", \"THUG 2\", \"THUG 3\"]\n    },\n    {\n      \"scene_number\": 5,\n      \"heading\": \"INT. 11TH FLOOR \\\\- CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"11TH FLOOR\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose and Mariner hide behind a filing cabinet to avoid pursuers. Mariner reflects on his father’s teachings, leading into a flashback.\",\n      \"characters\": [\"ROSE\", \"MARINER\"]\n    },\n    {\n      \"scene_number\": 6,\n      \"heading\": \"BEGIN FLASHBACK: EXT. COASTLINE \\\\- DAY \\\\- PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"COASTLINE\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Young Mariner and his fisherman father enjoy a day sailing. The father teaches Mariner about bravery and heroism.\",\n      \"characters\": [\"Young Mariner\", \"DAD\"]\n    },\n    {\n      \"scene_number\": 7,\n      \"heading\": \"INT. STAIRWELL \\\\- CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"STAIRWELL\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose and Mariner split directions in the stairwell. Rose explains the importance of her stolen blockchain password, and Mariner reluctantly follows her upstairs.\",\n      \"characters\": [\"ROSE\", \"MARINER\"]\n    },\n    {\n      \"scene_number\": 8,\n      \"heading\": \"INT. 12TH FLOOR STAIRWELL \\\\- CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"12TH FLOOR STAIRWELL\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Thug Rosco ambushes Rose and Mariner. Mariner overpowers Rosco, and Rose interrogates him about the blockchain password and gang money.\",\n      \"characters\": [\"ROSE\", \"MARINER\", \"ROSCO\"]\n    },\n    {\n      \"scene_number\": 9,\n      \"heading\": \"INT. 13TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"13TH FLOOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Thugs Vinnie, Mikey, and Carlos patrol the corridor. They confront Rose and Mariner, leading to a violent fight where Mariner uses a flare gun to incapacitate Vinnie and defeats the others.\",\n      \"characters\": [\"VINNIE\", \"",
          "tokenUsage": {
            "total": 5672,
            "prompt": 4648,
            "completion": 1024,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 13130,
          "finishReason": "length",
          "cost": 0.0034976,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9ce883b9fc4fb160-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Sun, 15 Feb 2026 23:16:56 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "12857",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=11MFTPGSizRG8L_D5GyetnZ_426AqEK8OeyqvBa5Onk-1771197403.191974-1.0.1.1-Zlg1zXVFBmHJT_uaArauo0jucpqrCSS_CLB5ukKBLlfn5MciWmoA9wsiE3VvVa_yXU_LlMG3Q1S0Cn8GE7Avgl06.GIKJVYlcECrgg5xoMycTjrxFJp.bPNPbfHc7RmW; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Sun, 15 Feb 2026 23:46:56 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "10000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "9995627",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "26ms",
                "x-request-id": "req_5a61fabd495a4c86b744163fabbca3b7"
              }
            }
          }
        },
        "score": 0.2,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-scenes.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/scene_extraction_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-scenes.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9ce883b9fc4fb160-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Sun, 15 Feb 2026 23:16:56 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "12857",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=11MFTPGSizRG8L_D5GyetnZ_426AqEK8OeyqvBa5Onk-1771197403.191974-1.0.1.1-Zlg1zXVFBmHJT_uaArauo0jucpqrCSS_CLB5ukKBLlfn5MciWmoA9wsiE3VvVa_yXU_LlMG3Q1S0Cn8GE7Avgl06.GIKJVYlcECrgg5xoMycTjrxFJp.bPNPbfHc7RmW; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Sun, 15 Feb 2026 23:46:56 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "10000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "9995627",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "26ms",
              "x-request-id": "req_5a61fabd495a4c86b744163fabbca3b7"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.017488,
        "error": "Extraction is incomplete and inconsistent. The output claims 16 scenes but only lists 9 complete scenes plus a truncated Scene 10, so not all scenes are identified. Flashback handling is partial (BEGIN FLASHBACK present, but no END FLASHBACK or clear return marker). Several headings are inaccurate or incomplete: Scene 4 misspells the location (“RUDDY & GREEN” vs. “RUDDY & GREENE”) and omits time of day; Scene 9 lacks time of day; Scene 10 is truncated (“INT. 15TH”). INT/EXT designations are mostly plausible, but Scene 3 remains EXT while action moves inside. Character lists are generally reasonable for included scenes, but completeness can’t be verified and no O.S. notation is present. Summaries are meaningful for the scenes provided. Time_of_day is inconsistent: present-day scenes should be NIGHT but multiple scenes use CONTINUOUS or are blank. Flashbacks are distinguished as DAY and marked BEGIN, but not properly closed. Overall, significant gaps and errors prevent a pass.",
        "gradingResult": {
          "pass": false,
          "score": 0.15,
          "reason": "Extraction is incomplete and inconsistent. The output claims 16 scenes but only lists 9 complete scenes plus a truncated Scene 10, so not all scenes are identified. Flashback handling is partial (BEGIN FLASHBACK present, but no END FLASHBACK or clear return marker). Several headings are inaccurate or incomplete: Scene 4 misspells the location (“RUDDY & GREEN” vs. “RUDDY & GREENE”) and omits time of day; Scene 9 lacks time of day; Scene 10 is truncated (“INT. 15TH”). INT/EXT designations are mostly plausible, but Scene 3 remains EXT while action moves inside. Character lists are generally reasonable for included scenes, but completeness can’t be verified and no O.S. notation is present. Summaries are meaningful for the scenes provided. Time_of_day is inconsistent: present-day scenes should be NIGHT but multiple scenes use CONTINUOUS or are blank. Flashbacks are distinguished as DAY and marked BEGIN, but not properly closed. Overall, significant gaps and errors prevent a pass.",
          "namedScores": {},
          "tokensUsed": {
            "total": 3190,
            "prompt": 1354,
            "completion": 1836,
            "cached": 0,
            "numRequests": 1
          },
          "componentResults": [
            {
              "pass": false,
              "score": 0,
              "reason": "Invalid JSON output",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/scene_extraction_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
              },
              "pass": false,
              "score": 0.3,
              "reason": "Extraction is incomplete and inconsistent. The output claims 16 scenes but only lists 9 complete scenes plus a truncated Scene 10, so not all scenes are identified. Flashback handling is partial (BEGIN FLASHBACK present, but no END FLASHBACK or clear return marker). Several headings are inaccurate or incomplete: Scene 4 misspells the location (“RUDDY & GREEN” vs. “RUDDY & GREENE”) and omits time of day; Scene 9 lacks time of day; Scene 10 is truncated (“INT. 15TH”). INT/EXT designations are mostly plausible, but Scene 3 remains EXT while action moves inside. Character lists are generally reasonable for included scenes, but completeness can’t be verified and no O.S. notation is present. Summaries are meaningful for the scenes provided. Time_of_day is inconsistent: present-day scenes should be NIGHT but multiple scenes use CONTINUOUS or are blank. Flashbacks are distinguished as DAY and marked BEGIN, but not properly closed. Overall, significant gaps and errors prevent a pass.",
              "tokensUsed": {
                "total": 3190,
                "prompt": 1354,
                "completion": 1836,
                "cached": 0,
                "numRequests": 1,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n{\\n  \\\"title\\\": \\\"The Mariner\\\",\\n  \\\"scene_count\\\": 16,\\n  \\\"scenes\\\": [\\n    {\\n      \\\"scene_number\\\": 1,\\n      \\\"heading\\\": \\\"EXT. CITY CENTRE - NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"CITY CENTRE\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"A ruined city is depicted, with fires, rubble, and chaos. Gunshots, screams, and distant sirens set the tone for a lawless urban wasteland.\\\",\\n      \\\"characters\\\": []\\n    },\\n    {\\n      \\\"scene_number\\\": 2,\\n      \\\"heading\\\": \\\"EXT. RUDDY & GREENE BUILDING - FRONT - NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"RUDDY & GREENE BUILDING - FRONT\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"The once-beautiful Ruddy & Greene building is now battered and bullet-riddled, with luxury SUVs parked outside.\\\",\\n      \\\"characters\\\": []\\n    },\\n    {\\n      \\\"scene_number\\\": 3,\\n      \\\"heading\\\": \\\"EXT. RUDDY & GREENE BUILDING - REAR - NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"RUDDY & GREENE BUILDING - REAR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"The Mariner arrives in a disguised van, enters the building, and a violent confrontation ensues inside, heard but not seen. He rescues Rose, and they escape via elevator.\\\",\\n      \\\"characters\\\": [\\\"MARINER\\\", \\\"ROSE\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 4,\\n      \\\"heading\\\": \\\"INT. RUDDY & GREEN BUILDING - ELEVATOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"RUDDY & GREEN BUILDING - ELEVATOR\\\",\\n      \\\"time_of_day\\\": \\\"\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner, both bloodied, catch their breath in the elevator. They discuss how Mariner found her, revealing he tracked her with an AirTag.\\\",\\n      \\\"characters\\\": [\\\"MARINER\\\", \\\"ROSE\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 5,\\n      \\\"heading\\\": \\\"INT. 11TH FLOOR - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"11TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner search for a stairwell, hide from pursuers, and Mariner reflects on his 'Dad' tattoo, leading into a flashback.\\\",\\n      \\\"characters\\\": [\\\"MARINER\\\", \\\"ROSE\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 6,\\n      \\\"heading\\\": \\\"BEGIN FLASHBACK: EXT. COASTLINE - DAY - PAST\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"COASTLINE\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"A young Mariner and his dad enjoy a day fishing, with Dad imparting wisdom about being a hero.\\\",\\n      \\\"characters\\\": [\\\"DAD\\\", \\\"YOUNG MARINER\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 7,\\n      \\\"heading\\\": \\\"INT. STAIRWELL - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"STAIRWELL\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner argue about the importance of her purse, revealing it contains a blockchain password. They decide to go after it.\\\",\\n      \\\"characters\\\": [\\\"MARINER\\\", \\\"ROSE\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 8,\\n      \\\"heading\\\": \\\"INT. 12TH FLOOR STAIRWELL - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"12TH FLOOR STAIRWELL\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"A thug named Rosco confronts them; Mariner subdues him while Rose interrogates him about blockchain. Rose reveals she stole gang money.\\\",\\n      \\\"characters\\\": [\\\"MARINER\\\", \\\"ROSE\\\", \\\"ROSCO\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 9,\\n      \\\"heading\\\": \\\"INT. 13TH FLOOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"13TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"\\\",\\n      \\\"summary\\\": \\\"Thugs Vinnie, Mikey, and Carlos patrol the floor, overhear Mariner and Rose, and confront them. Mariner uses a flare gun in the ensuing fight, and Rose tends to his wounds.\\\",\\n      \\\"characters\\\": [\\\"MARINER\\\", \\\"ROSE\\\", \\\"VINNIE\\\", \\\"MIKEY\\\", \\\"CARLOS\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 10,\\n      \\\"heading\\\": \\\"INT. 15TH\\n</Output>\\n<Rubric>\\nEvaluate the scene extraction output for the screenplay \\\"The Mariner.\\\"\\n\\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\\nKey quality criteria:\\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\\n2. Are scene headings accurate and complete?\\n3. Are INT/EXT designations correct?\\n4. Are character names correctly identified for each scene (including O.S. characters)?\\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\\n7. Are the flashback scenes properly distinguished from present-day scenes?\\n\\nScore strictly: partial credit for close but imperfect extraction.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "872eabcc-9cd6-41d7-9761-9f6b9d9f7b1a",
        "latencyMs": 8537,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n==========",
          "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
          "config": {}
        },
        "promptId": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "promptIdx": 2,
        "provider": {
          "id": "openai:gpt-4.1",
          "label": "GPT-4.1"
        },
        "response": {
          "output": "{\n  \"title\": \"The Mariner\",\n  \"scene_count\": 16,\n  \"scenes\": [\n    {\n      \"scene_number\": 1,\n      \"heading\": \"EXT. CITY CENTRE - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"CITY CENTRE\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A ruined city is depicted, with fires, rubble, and chaos. Gunshots, screams, and distant sirens set the tone for a lawless urban wasteland.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 2,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING - FRONT - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"RUDDY & GREENE BUILDING - FRONT\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"The once-beautiful Ruddy & Greene building is now battered and bullet-riddled, with luxury SUVs parked outside.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 3,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING - REAR - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"RUDDY & GREENE BUILDING - REAR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"The Mariner arrives in a disguised van, enters the building, and a violent confrontation ensues inside, heard but not seen. He rescues Rose, and they escape via elevator.\",\n      \"characters\": [\"MARINER\", \"ROSE\"]\n    },\n    {\n      \"scene_number\": 4,\n      \"heading\": \"INT. RUDDY & GREEN BUILDING - ELEVATOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"RUDDY & GREEN BUILDING - ELEVATOR\",\n      \"time_of_day\": \"\",\n      \"summary\": \"Rose and Mariner, both bloodied, catch their breath in the elevator. They discuss how Mariner found her, revealing he tracked her with an AirTag.\",\n      \"characters\": [\"MARINER\", \"ROSE\"]\n    },\n    {\n      \"scene_number\": 5,\n      \"heading\": \"INT. 11TH FLOOR - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"11TH FLOOR\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose and Mariner search for a stairwell, hide from pursuers, and Mariner reflects on his 'Dad' tattoo, leading into a flashback.\",\n      \"characters\": [\"MARINER\", \"ROSE\"]\n    },\n    {\n      \"scene_number\": 6,\n      \"heading\": \"BEGIN FLASHBACK: EXT. COASTLINE - DAY - PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"COASTLINE\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"A young Mariner and his dad enjoy a day fishing, with Dad imparting wisdom about being a hero.\",\n      \"characters\": [\"DAD\", \"YOUNG MARINER\"]\n    },\n    {\n      \"scene_number\": 7,\n      \"heading\": \"INT. STAIRWELL - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"STAIRWELL\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose and Mariner argue about the importance of her purse, revealing it contains a blockchain password. They decide to go after it.\",\n      \"characters\": [\"MARINER\", \"ROSE\"]\n    },\n    {\n      \"scene_number\": 8,\n      \"heading\": \"INT. 12TH FLOOR STAIRWELL - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"12TH FLOOR STAIRWELL\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"A thug named Rosco confronts them; Mariner subdues him while Rose interrogates him about blockchain. Rose reveals she stole gang money.\",\n      \"characters\": [\"MARINER\", \"ROSE\", \"ROSCO\"]\n    },\n    {\n      \"scene_number\": 9,\n      \"heading\": \"INT. 13TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"13TH FLOOR\",\n      \"time_of_day\": \"\",\n      \"summary\": \"Thugs Vinnie, Mikey, and Carlos patrol the floor, overhear Mariner and Rose, and confront them. Mariner uses a flare gun in the ensuing fight, and Rose tends to his wounds.\",\n      \"characters\": [\"MARINER\", \"ROSE\", \"VINNIE\", \"MIKEY\", \"CARLOS\"]\n    },\n    {\n      \"scene_number\": 10,\n      \"heading\": \"INT. 15TH",
          "tokenUsage": {
            "total": 5672,
            "prompt": 4648,
            "completion": 1024,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 8537,
          "finishReason": "length",
          "cost": 0.017488,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9ce88490ca9b1e19-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Sun, 15 Feb 2026 23:17:26 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "8409",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=jfLd4fD0wu4hlgZvyA.KHwlSrrc0c5AHT3VR7pfChkg-1771197437.5646002-1.0.1.1-2O_CkcwEWQQ9q065orkFVbUkqp.N3ATeIjO5gl.GXTrPcv6du3KvsYwzowRah5R1eZ_6RRLoMY1dIoC3XGYu8ewkVM49jDnjiaPM7cWg_.VlvuB9nASMqbvz5iiRxl70; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Sun, 15 Feb 2026 23:47:26 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "2000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "1995627",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "131ms",
                "x-request-id": "req_4b30ebca308647a8937f21e109aa0808"
              }
            }
          }
        },
        "score": 0.15,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-scenes.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/scene_extraction_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-scenes.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9ce88490ca9b1e19-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Sun, 15 Feb 2026 23:17:26 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "8409",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=jfLd4fD0wu4hlgZvyA.KHwlSrrc0c5AHT3VR7pfChkg-1771197437.5646002-1.0.1.1-2O_CkcwEWQQ9q065orkFVbUkqp.N3ATeIjO5gl.GXTrPcv6du3KvsYwzowRah5R1eZ_6RRLoMY1dIoC3XGYu8ewkVM49jDnjiaPM7cWg_.VlvuB9nASMqbvz5iiRxl70; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Sun, 15 Feb 2026 23:47:26 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "2000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "1995627",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "131ms",
              "x-request-id": "req_4b30ebca308647a8937f21e109aa0808"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.056046,
        "error": "Over-segmented and inconsistent. The screenplay is ~13–15 scenes, but 20 were extracted, with apparent duplication/temporal jumbling (e.g., elevator/11th floor beats recur in 19–20 after earlier occurrences). Several sluglines are inconsistent or misspelled (RUDDY & GREENE vs RUDDY & GREEN), and flashback labels mix PAST/(FLASHBACK)/(BACK TO PRESENT). INT/EXT and time_of_day are mostly correct, and summaries are generally meaningful. Characters are mostly right but inconsistently named (“THE MARINER” vs “MARINER”) and no O.S. notations. Flashbacks are distinguished but somewhat over-fragmented (e.g., brief backyard insert).",
        "gradingResult": {
          "pass": false,
          "score": 0.7558499999999999,
          "reason": "Over-segmented and inconsistent. The screenplay is ~13–15 scenes, but 20 were extracted, with apparent duplication/temporal jumbling (e.g., elevator/11th floor beats recur in 19–20 after earlier occurrences). Several sluglines are inconsistent or misspelled (RUDDY & GREENE vs RUDDY & GREEN), and flashback labels mix PAST/(FLASHBACK)/(BACK TO PRESENT). INT/EXT and time_of_day are mostly correct, and summaries are generally meaningful. Characters are mostly right but inconsistently named (“THE MARINER” vs “MARINER”) and no O.S. notations. Flashbacks are distinguished but somewhat over-fragmented (e.g., brief backyard insert).",
          "namedScores": {},
          "tokensUsed": {
            "total": 5059,
            "prompt": 2581,
            "completion": 2478,
            "cached": 0,
            "numRequests": 1
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.9117,
              "reason": "character_recall=1.00 | field_completeness=1.00 | heading_match=1.00 | heading_quality=0.93 | json_valid=0.90 | scene_count=0.67 | summary_completeness=1.00 | JSON extracted from code block | Count: 20 vs 15 golden (off by 5)",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/scene_extraction_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
              },
              "pass": false,
              "score": 0.6,
              "reason": "Over-segmented and inconsistent. The screenplay is ~13–15 scenes, but 20 were extracted, with apparent duplication/temporal jumbling (e.g., elevator/11th floor beats recur in 19–20 after earlier occurrences). Several sluglines are inconsistent or misspelled (RUDDY & GREENE vs RUDDY & GREEN), and flashback labels mix PAST/(FLASHBACK)/(BACK TO PRESENT). INT/EXT and time_of_day are mostly correct, and summaries are generally meaningful. Characters are mostly right but inconsistently named (“THE MARINER” vs “MARINER”) and no O.S. notations. Flashbacks are distinguished but somewhat over-fragmented (e.g., brief backyard insert).",
              "tokensUsed": {
                "total": 5059,
                "prompt": 2581,
                "completion": 2478,
                "cached": 0,
                "numRequests": 1,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n```json\\n{\\n  \\\"title\\\": \\\"The Mariner\\\",\\n  \\\"scene_count\\\": 20,\\n  \\\"scenes\\\": [\\n    {\\n      \\\"scene_number\\\": 1,\\n      \\\"heading\\\": \\\"EXT. CITY CENTRE - NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"CITY CENTRE\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"A ruined city in 2020s aftermath shows destruction with fires, rubble, and distant sirens. Opening titles explain how the pandemic and economic collapse turned urban centers into no-go zones where vigilantes operate.\\\",\\n      \\\"characters\\\": []\\n    },\\n    {\\n      \\\"scene_number\\\": 2,\\n      \\\"heading\\\": \\\"EXT. RUDDY & GREENE BUILDING - FRONT - NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"RUDDY & GREENE BUILDING - FRONT\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"A classic 15-story sandstone building, now damaged with bullet holes and graffiti, has rows of high-end European SUVs parked outside.\\\",\\n      \\\"characters\\\": []\\n    },\\n    {\\n      \\\"scene_number\\\": 3,\\n      \\\"heading\\\": \\\"EXT. RUDDY & GREENE BUILDING - REAR - NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"RUDDY & GREENE BUILDING - REAR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"The Mariner arrives in a delivery van and charges into the building, fighting his way through thugs and up the elevator to rescue someone. Sounds of violence, elevator muzak, and a rescue are heard from outside.\\\",\\n      \\\"characters\\\": [\\\"THE MARINER\\\", \\\"ROSE\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 4,\\n      \\\"heading\\\": \\\"INT. RUDDY & GREEN BUILDING - ELEVATOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"RUDDY & GREEN BUILDING - ELEVATOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner catch their breath in the elevator after the rescue, both covered in blood. Mariner is revealed in full costume with his oar weapon, and Rose discovers he tracked her with an AirTag.\\\",\\n      \\\"characters\\\": [\\\"ROSE\\\", \\\"MARINER\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 5,\\n      \\\"heading\\\": \\\"EXT. COASTLINE - DAY - PAST\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"COASTLINE\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Flashback shows young Mariner (age 8) fishing with his father in a sailboat. Dad teaches him about heroes being brave and true while young Mariner fetches him a beer.\\\",\\n      \\\"characters\\\": [\\\"Young Mariner\\\", \\\"DAD\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 6,\\n      \\\"heading\\\": \\\"INT. STAIRWELL - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"STAIRWELL\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Rose insists on going back up for her purse which contains a blockchain password to her life savings. Mariner reluctantly follows her up the stairs.\\\",\\n      \\\"characters\\\": [\\\"MARINER\\\", \\\"ROSE\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 7,\\n      \\\"heading\\\": \\\"INT. 12TH FLOOR STAIRWELL - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"12TH FLOOR STAIRWELL\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Mariner and Rose encounter Rosco in the stairwell. Rose interrogates him about blockchain at gunpoint, learning that Salvatori is after her for stealing 20 million dollars in gang money.\\\",\\n      \\\"characters\\\": [\\\"MARINER\\\", \\\"ROSE\\\", \\\"ROSCO\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 8,\\n      \\\"heading\\\": \\\"INT. 11TH FLOOR - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"11TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner navigate the dim corridors looking for a stairwell. They hide in an empty room while someone passes by.\\\",\\n      \\\"characters\\\": [\\\"ROSE\\\", \\\"MARINER\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 9,\\n      \\\"heading\\\": \\\"INT. 13TH FLOOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"13TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Three thugs (Vinnie, Mikey, Carlos) patrol the floor and hear Rose and Mariner arguing. Mariner fights them off with his flare gun and oar after they confront the pair, killing all three.\\\",\\n      \\\"characters\\\": [\\\"VINNIE\\\", \\\"MIKEY\\\", \\\"CARLOS\\\", \\\"MARINER\\\", \\\"ROSE\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 10,\\n      \\\"heading\\\": \\\"INT. 15TH FLOOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"15TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Mariner and Rose reach the luxurious 15th floor and break into an office where Rose retrieves her purse. Rose reveals that Mariner's father isn't dead but abandoned him and lives in Chimney Bay.\\\",\\n      \\\"characters\\\": [\\\"MARINER\\\", \\\"ROSE\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 11,\\n      \\\"heading\\\": \\\"EXT. BACKYARD - DAY - PAST\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"BACKYARD\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Flashback shows young Mariner's father teaching him to lift weights in an idyllic backyard. Dad encourages him not to run from fights and they do a training round together.\\\",\\n      \\\"characters\\\": [\\\"Young Mariner\\\", \\\"DAD\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 12,\\n      \\\"heading\\\": \\\"EXT. BACKYARD - DAY - (FLASHBACK)\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"BACKYARD\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Flashback reveals the truth: the yard is actually overgrown and trashy. Dad punches young Mariner in the face while berating him for getting beaten up and running from a fight.\\\",\\n      \\\"characters\\\": [\\\"Young Mariner\\\", \\\"DAD\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 13,\\n      \\\"heading\\\": \\\"INT. STAIRWELL - (BACK TO PRESENT)\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"STAIRWELL\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Salvatori confronts Mariner with a submachine gun, asking if he's a hero. Mariner quietly responds that he's nobody.\\\",\\n      \\\"characters\\\": [\\\"SALVATORI\\\", \\\"MARINER\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 14,\\n      \\\"heading\\\": \\\"EXT. COASTLINE - DAY - (FLASHBACK)\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"COASTLINE\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Flashback reveals the truth about the fishing trip: the boat is littered with beer bottles, dad is urinating off the side, and young Mariner is cold and neglected while being ordered to fetch more beer.\\\",\\n      \\\"characters\\\": [\\\"Young Mariner\\\", \\\"DAD\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 15,\\n      \\\"heading\\\": \\\"EXT. BACKYARD - DAY - (FLASHBACK)\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"BACKYARD\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Brief flashback moment showing the neglectful backyard setting.\\\",\\n      \\\"characters\\\": []\\n    },\\n    {\\n      \\\"scene_number\\\": 16,\\n      \\\"heading\\\": \\\"INT. 15TH FLOOR - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"15TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Salvatori's thugs force Mariner to his knees. Rose calls Mariner out as gullible but then praises him as a true hero who overcame his abusive father.\\\",\\n      \\\"characters\\\": [\\\"SALVATORI\\\", \\\"MARINER\\\", \\\"ROSE\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 17,\\n      \\\"heading\\\": \\\"INT. 15TH FLOOR - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"15TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Rose continues her speech about Mariner being a real hero who embodies honesty, bravery, and grit. Salvatori demands the password while pointing his gun at Rose's head.\\\",\\n      \\\"characters\\\": [\\\"SALVATORI\\\", \\\"MARINER\\\", \\\"ROSE\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 18,\\n      \\\"heading\\\": \\\"INT. 15TH FLOOR - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"15TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Rose declares that Mariner never backs down from a fight. Mariner smiles and clenches his fists, ready to fight back.\\\",\\n      \\\"characters\\\": [\\\"SALVATORI\\\", \\\"MARINER\\\", \\\"ROSE\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 19,\\n      \\\"heading\\\": \\\"INT. RUDDY & GREEN BUILDING - ELEVATOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"RUDDY & GREEN BUILDING - ELEVATOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"The elevator stops on floor 12 where three thugs are waiting. Mariner fights them off with his oar, and Rose frantically presses the close door button as they escape.\\\",\\n      \\\"characters\\\": [\\\"MARINER\\\", \\\"ROSE\\\", \\\"THUG 1\\\", \\\"THUG 2\\\", \\\"THUG 3\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 20,\\n      \\\"heading\\\": \\\"INT. 11TH FLOOR - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"11TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Rose exits the elevator on floor 11 against Mariner's wishes. Mariner reluctantly follows her out as the doors begin to close.\\\",\\n      \\\"characters\\\": [\\\"ROSE\\\", \\\"MARINER\\\"]\\n    }\\n  ]\\n}\\n```\\n</Output>\\n<Rubric>\\nEvaluate the scene extraction output for the screenplay \\\"The Mariner.\\\"\\n\\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\\nKey quality criteria:\\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\\n2. Are scene headings accurate and complete?\\n3. Are INT/EXT designations correct?\\n4. Are character names correctly identified for each scene (including O.S. characters)?\\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\\n7. Are the flashback scenes properly distinguished from present-day scenes?\\n\\nScore strictly: partial credit for close but imperfect extraction.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "51495190-95d8-42f3-96d9-34137fa70942",
        "latencyMs": 38660,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n==========",
          "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
          "config": {}
        },
        "promptId": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "promptIdx": 4,
        "provider": {
          "id": "anthropic:messages:claude-sonnet-4-5-20250929",
          "label": "Claude Sonnet 4.5"
        },
        "response": {
          "output": "```json\n{\n  \"title\": \"The Mariner\",\n  \"scene_count\": 20,\n  \"scenes\": [\n    {\n      \"scene_number\": 1,\n      \"heading\": \"EXT. CITY CENTRE - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"CITY CENTRE\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A ruined city in 2020s aftermath shows destruction with fires, rubble, and distant sirens. Opening titles explain how the pandemic and economic collapse turned urban centers into no-go zones where vigilantes operate.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 2,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING - FRONT - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"RUDDY & GREENE BUILDING - FRONT\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A classic 15-story sandstone building, now damaged with bullet holes and graffiti, has rows of high-end European SUVs parked outside.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 3,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING - REAR - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"RUDDY & GREENE BUILDING - REAR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"The Mariner arrives in a delivery van and charges into the building, fighting his way through thugs and up the elevator to rescue someone. Sounds of violence, elevator muzak, and a rescue are heard from outside.\",\n      \"characters\": [\"THE MARINER\", \"ROSE\"]\n    },\n    {\n      \"scene_number\": 4,\n      \"heading\": \"INT. RUDDY & GREEN BUILDING - ELEVATOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"RUDDY & GREEN BUILDING - ELEVATOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Rose and Mariner catch their breath in the elevator after the rescue, both covered in blood. Mariner is revealed in full costume with his oar weapon, and Rose discovers he tracked her with an AirTag.\",\n      \"characters\": [\"ROSE\", \"MARINER\"]\n    },\n    {\n      \"scene_number\": 5,\n      \"heading\": \"EXT. COASTLINE - DAY - PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"COASTLINE\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Flashback shows young Mariner (age 8) fishing with his father in a sailboat. Dad teaches him about heroes being brave and true while young Mariner fetches him a beer.\",\n      \"characters\": [\"Young Mariner\", \"DAD\"]\n    },\n    {\n      \"scene_number\": 6,\n      \"heading\": \"INT. STAIRWELL - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"STAIRWELL\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Rose insists on going back up for her purse which contains a blockchain password to her life savings. Mariner reluctantly follows her up the stairs.\",\n      \"characters\": [\"MARINER\", \"ROSE\"]\n    },\n    {\n      \"scene_number\": 7,\n      \"heading\": \"INT. 12TH FLOOR STAIRWELL - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"12TH FLOOR STAIRWELL\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Mariner and Rose encounter Rosco in the stairwell. Rose interrogates him about blockchain at gunpoint, learning that Salvatori is after her for stealing 20 million dollars in gang money.\",\n      \"characters\": [\"MARINER\", \"ROSE\", \"ROSCO\"]\n    },\n    {\n      \"scene_number\": 8,\n      \"heading\": \"INT. 11TH FLOOR - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"11TH FLOOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Rose and Mariner navigate the dim corridors looking for a stairwell. They hide in an empty room while someone passes by.\",\n      \"characters\": [\"ROSE\", \"MARINER\"]\n    },\n    {\n      \"scene_number\": 9,\n      \"heading\": \"INT. 13TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"13TH FLOOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Three thugs (Vinnie, Mikey, Carlos) patrol the floor and hear Rose and Mariner arguing. Mariner fights them off with his flare gun and oar after they confront the pair, killing all three.\",\n      \"characters\": [\"VINNIE\", \"MIKEY\", \"CARLOS\", \"MARINER\", \"ROSE\"]\n    },\n    {\n      \"scene_number\": 10,\n      \"heading\": \"INT. 15TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15TH FLOOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Mariner and Rose reach the luxurious 15th floor and break into an office where Rose retrieves her purse. Rose reveals that Mariner's father isn't dead but abandoned him and lives in Chimney Bay.\",\n      \"characters\": [\"MARINER\", \"ROSE\"]\n    },\n    {\n      \"scene_number\": 11,\n      \"heading\": \"EXT. BACKYARD - DAY - PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Flashback shows young Mariner's father teaching him to lift weights in an idyllic backyard. Dad encourages him not to run from fights and they do a training round together.\",\n      \"characters\": [\"Young Mariner\", \"DAD\"]\n    },\n    {\n      \"scene_number\": 12,\n      \"heading\": \"EXT. BACKYARD - DAY - (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Flashback reveals the truth: the yard is actually overgrown and trashy. Dad punches young Mariner in the face while berating him for getting beaten up and running from a fight.\",\n      \"characters\": [\"Young Mariner\", \"DAD\"]\n    },\n    {\n      \"scene_number\": 13,\n      \"heading\": \"INT. STAIRWELL - (BACK TO PRESENT)\",\n      \"int_ext\": \"INT\",\n      \"location\": \"STAIRWELL\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Salvatori confronts Mariner with a submachine gun, asking if he's a hero. Mariner quietly responds that he's nobody.\",\n      \"characters\": [\"SALVATORI\", \"MARINER\"]\n    },\n    {\n      \"scene_number\": 14,\n      \"heading\": \"EXT. COASTLINE - DAY - (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"COASTLINE\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Flashback reveals the truth about the fishing trip: the boat is littered with beer bottles, dad is urinating off the side, and young Mariner is cold and neglected while being ordered to fetch more beer.\",\n      \"characters\": [\"Young Mariner\", \"DAD\"]\n    },\n    {\n      \"scene_number\": 15,\n      \"heading\": \"EXT. BACKYARD - DAY - (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Brief flashback moment showing the neglectful backyard setting.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 16,\n      \"heading\": \"INT. 15TH FLOOR - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15TH FLOOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Salvatori's thugs force Mariner to his knees. Rose calls Mariner out as gullible but then praises him as a true hero who overcame his abusive father.\",\n      \"characters\": [\"SALVATORI\", \"MARINER\", \"ROSE\"]\n    },\n    {\n      \"scene_number\": 17,\n      \"heading\": \"INT. 15TH FLOOR - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15TH FLOOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Rose continues her speech about Mariner being a real hero who embodies honesty, bravery, and grit. Salvatori demands the password while pointing his gun at Rose's head.\",\n      \"characters\": [\"SALVATORI\", \"MARINER\", \"ROSE\"]\n    },\n    {\n      \"scene_number\": 18,\n      \"heading\": \"INT. 15TH FLOOR - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15TH FLOOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Rose declares that Mariner never backs down from a fight. Mariner smiles and clenches his fists, ready to fight back.\",\n      \"characters\": [\"SALVATORI\", \"MARINER\", \"ROSE\"]\n    },\n    {\n      \"scene_number\": 19,\n      \"heading\": \"INT. RUDDY & GREEN BUILDING - ELEVATOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"RUDDY & GREEN BUILDING - ELEVATOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"The elevator stops on floor 12 where three thugs are waiting. Mariner fights them off with his oar, and Rose frantically presses the close door button as they escape.\",\n      \"characters\": [\"MARINER\", \"ROSE\", \"THUG 1\", \"THUG 2\", \"THUG 3\"]\n    },\n    {\n      \"scene_number\": 20,\n      \"heading\": \"INT. 11TH FLOOR - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"11TH FLOOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Rose exits the elevator on floor 11 against Mariner's wishes. Mariner reluctantly follows her out as the doors begin to close.\",\n      \"characters\": [\"ROSE\", \"MARINER\"]\n    }\n  ]\n}\n```",
          "tokenUsage": {
            "total": 7982,
            "prompt": 5307,
            "completion": 2675
          },
          "finishReason": "stop",
          "cost": 0.056046
        },
        "score": 0.7558499999999999,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-scenes.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/scene_extraction_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-scenes.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.08818500000000001,
        "error": "Mixed quality: Flashbacks are identified and mostly distinguished from present day, summaries capture key action, and INT/EXT designations look correct. However, there are notable issues: scene count is 16 vs the screenplay’s ~13–15 (over-segmentation); several present-day scenes use time_of_day \"CONTINUOUS\" instead of NIGHT (e.g., scenes 5, 7, 8); scene 16 is labeled as a flashback but its summary mixes in present-day action; headings are inconsistent and contain a naming error (\"RUDDY & GREEN\" vs \"RUDDY & GREENE\"); some headings omit time info. Character lists are generally appropriate, but no explicit handling of O.S. is shown. Overall, partial compliance with significant errors in time_of_day and headings.",
        "gradingResult": {
          "pass": false,
          "score": 0.72585,
          "reason": "Mixed quality: Flashbacks are identified and mostly distinguished from present day, summaries capture key action, and INT/EXT designations look correct. However, there are notable issues: scene count is 16 vs the screenplay’s ~13–15 (over-segmentation); several present-day scenes use time_of_day \"CONTINUOUS\" instead of NIGHT (e.g., scenes 5, 7, 8); scene 16 is labeled as a flashback but its summary mixes in present-day action; headings are inconsistent and contain a naming error (\"RUDDY & GREEN\" vs \"RUDDY & GREENE\"); some headings omit time info. Character lists are generally appropriate, but no explicit handling of O.S. is shown. Overall, partial compliance with significant errors in time_of_day and headings.",
          "namedScores": {},
          "tokensUsed": {
            "total": 5079,
            "prompt": 2396,
            "completion": 2683,
            "cached": 0,
            "numRequests": 1
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.9017,
              "reason": "character_recall=0.83 | field_completeness=1.00 | heading_match=1.00 | heading_quality=0.93 | json_valid=0.90 | scene_count=0.70 | summary_completeness=1.00 | JSON extracted from code block | Count: 16 vs 15 golden (off by 1) | Missing chars: THE MARINER, YOUNG MARINER",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/scene_extraction_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
              },
              "pass": false,
              "score": 0.55,
              "reason": "Mixed quality: Flashbacks are identified and mostly distinguished from present day, summaries capture key action, and INT/EXT designations look correct. However, there are notable issues: scene count is 16 vs the screenplay’s ~13–15 (over-segmentation); several present-day scenes use time_of_day \"CONTINUOUS\" instead of NIGHT (e.g., scenes 5, 7, 8); scene 16 is labeled as a flashback but its summary mixes in present-day action; headings are inconsistent and contain a naming error (\"RUDDY & GREEN\" vs \"RUDDY & GREENE\"); some headings omit time info. Character lists are generally appropriate, but no explicit handling of O.S. is shown. Overall, partial compliance with significant errors in time_of_day and headings.",
              "tokensUsed": {
                "total": 5079,
                "prompt": 2396,
                "completion": 2683,
                "cached": 0,
                "numRequests": 1,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n\\n\\n```json\\n{\\n  \\\"title\\\": \\\"The Mariner\\\",\\n  \\\"scene_count\\\": 16,\\n  \\\"scenes\\\": [\\n    {\\n      \\\"scene_number\\\": 1,\\n      \\\"heading\\\": \\\"EXT. CITY CENTRE - NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"CITY CENTRE\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"A ruined city is shown with fires, rubble from a fallen skyscraper, gunshots, screams, and sirens. An opening title card explains the pandemic, economic collapse, and rise of vigilantes.\\\",\\n      \\\"characters\\\": []\\n    },\\n    {\\n      \\\"scene_number\\\": 2,\\n      \\\"heading\\\": \\\"EXT. RUDDY & GREENE BUILDING - FRONT - NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"RUDDY & GREENE BUILDING - FRONT\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"A once-beautiful 15-story sandstone building, now damaged with bullet holes and graffiti, is shown with rows of high-end European SUVs parked outside.\\\",\\n      \\\"characters\\\": []\\n    },\\n    {\\n      \\\"scene_number\\\": 3,\\n      \\\"heading\\\": \\\"EXT. RUDDY & GREENE BUILDING - REAR - NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"RUDDY & GREENE BUILDING - REAR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"The Mariner arrives in a fish delivery van, storms into the building's back entrance, and fights his way through multiple floors. He rescues Rose, and they head to the elevator amid gunfire and violence.\\\",\\n      \\\"characters\\\": [\\\"Mariner\\\", \\\"Rose\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 4,\\n      \\\"heading\\\": \\\"INT. RUDDY & GREEN BUILDING - ELEVATOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"RUDDY & GREEN BUILDING - ELEVATOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner ride the elevator, both bloodied and panting. Rose discovers a piece of skull on herself. Mariner reveals he tracked her via an AirTag hidden in her purse, and Rose insists they go back for the purse. The elevator stops on the 12th floor where three thugs ambush them; Mariner fights them off and Rose presses the button for the 11th floor.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\", \\\"Thug 1\\\", \\\"Thug 2\\\", \\\"Thug 3\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 5,\\n      \\\"heading\\\": \\\"INT. 11TH FLOOR - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"11TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner search for a stairwell through dim, littered corridors. They hide behind a filing cabinet as someone walks by, and Mariner looks at his 'Dad' tattoo, triggering a flashback.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 6,\\n      \\\"heading\\\": \\\"EXT. COASTLINE - DAY - PAST\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"COASTLINE\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"In a warm flashback, young Mariner and his dad enjoy a day of fishing in a wooden sailboat. Dad teaches him to cast and tells him what a hero is: someone brave and true.\\\",\\n      \\\"characters\\\": [\\\"Mariner\\\", \\\"Dad\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 7,\\n      \\\"heading\\\": \\\"INT. STAIRWELL - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"STAIRWELL\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Rose heads upstairs while Mariner wants to go down. Rose reveals she has a blockchain password to her life savings hidden in her purse's lining, convincing Mariner to follow her up.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 8,\\n      \\\"heading\\\": \\\"INT. 12TH FLOOR STAIRWELL - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"12TH FLOOR STAIRWELL\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"A thug named Rosco bursts through the stairwell door. Mariner subdues him while Rose holds him at gunpoint, forcing him to explain blockchain. Rosco reveals Rose stole 20 million from Mr. Salvatori. Rose admits she stole gang money, and she and Mariner argue as they continue upstairs.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\", \\\"Rosco\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 9,\\n      \\\"heading\\\": \\\"INT. 13TH FLOOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"13TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Thugs Vinnie, Mikey, and Carlos patrol the corridor discussing cryptocurrency. They hear Rose and Mariner arguing about the Mariner's code and confront them. Vinnie taunts Rose about being his booty call. Mariner fires a flare gun at Vinnie, then fights and defeats all three thugs. Rose tends to Mariner's wounds.\\\",\\n      \\\"characters\\\": [\\\"Vinnie\\\", \\\"Mikey\\\", \\\"Carlos\\\", \\\"Rose\\\", \\\"Mariner\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 10,\\n      \\\"heading\\\": \\\"INT. 15TH FLOOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"15TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner reach the luxurious 15th floor, passing evidence of Mariner's earlier fight. Mariner breaks open a sturdy door with his oar, and Rose retrieves her purse from a large office. Rose questions if Mariner uses steroids.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 11,\\n      \\\"heading\\\": \\\"EXT. BACKYARD - DAY - PAST\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"BACKYARD\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"In an idealized flashback, young Mariner's dad patiently teaches him weightlifting in a sunny, idyllic backyard. Dad encourages him and tells him never to run from a fight.\\\",\\n      \\\"characters\\\": [\\\"Mariner\\\", \\\"Dad\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 12,\\n      \\\"heading\\\": \\\"INT. 15TH FLOOR (CONTINUED)\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"15TH FLOOR\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Back in the present, Mariner credits his dad for teaching him everything. Rose shatters his illusions by revealing their father isn't dead but living with another woman, and that he was a neglectful drunk who ditched young Mariner at a friend's place all summer. They notice a still-burning cigar and Salvatori arrives with armed thugs.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\", \\\"Salvatori\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 13,\\n      \\\"heading\\\": \\\"EXT. BACKYARD - DAY - (FLASHBACK)\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"BACKYARD\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"The true version of the backyard flashback is revealed: the yard is overgrown and littered with bottles. Dad punches young Mariner in the face, berating him for not standing up for himself, then storms off in disgust. Mariner goes to the bench press alone.\\\",\\n      \\\"characters\\\": [\\\"Mariner\\\", \\\"Dad\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 14,\\n      \\\"heading\\\": \\\"INT. STAIRWELL - (BACK TO PRESENT)\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"STAIRWELL\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"Salvatori confronts Mariner, asking who he is. Mariner, broken by the truth about his father, says he's nobody. Salvatori mocks him about trying to be a hero.\\\",\\n      \\\"characters\\\": [\\\"Salvatori\\\", \\\"Mariner\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 15,\\n      \\\"heading\\\": \\\"EXT. COASTLINE - DAY - (FLASHBACK)\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"COASTLINE\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"The true version of the fishing flashback: the boat is littered with empty beer bottles, dad is urinating off the side, and young Mariner shivers. Dad drunkenly and selfishly defines a hero as himself and demands another beer.\\\",\\n      \\\"characters\\\": [\\\"Mariner\\\", \\\"Dad\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 16,\\n      \\\"heading\\\": \\\"EXT. BACKYARD - DAY - (FLASHBACK)\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"BACKYARD\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Intercut with the present: Salvatori's thugs force Mariner to his knees and disarm him. Salvatori fires a warning shot and demands the password from Rose. Rose delivers a speech about how Mariner is the true hero—someone who turned a terrible upbringing into something noble. Mariner is inspired, clenches his fists, and prepares to fight back.\\\",\\n      \\\"characters\\\": [\\\"Salvatori\\\", \\\"Mariner\\\", \\\"Rose\\\"]\\n    }\\n  ]\\n}\\n```\\n</Output>\\n<Rubric>\\nEvaluate the scene extraction output for the screenplay \\\"The Mariner.\\\"\\n\\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\\nKey quality criteria:\\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\\n2. Are scene headings accurate and complete?\\n3. Are INT/EXT designations correct?\\n4. Are character names correctly identified for each scene (including O.S. characters)?\\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\\n7. Are the flashback scenes properly distinguished from present-day scenes?\\n\\nScore strictly: partial credit for close but imperfect extraction.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "e77beee9-166a-40e0-a032-460cd3f2b0e3",
        "latencyMs": 40202,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n==========",
          "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
          "config": {}
        },
        "promptId": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "promptIdx": 6,
        "provider": {
          "id": "anthropic:messages:claude-opus-4-6",
          "label": "Claude Opus 4.6"
        },
        "response": {
          "output": "\n\n```json\n{\n  \"title\": \"The Mariner\",\n  \"scene_count\": 16,\n  \"scenes\": [\n    {\n      \"scene_number\": 1,\n      \"heading\": \"EXT. CITY CENTRE - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"CITY CENTRE\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A ruined city is shown with fires, rubble from a fallen skyscraper, gunshots, screams, and sirens. An opening title card explains the pandemic, economic collapse, and rise of vigilantes.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 2,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING - FRONT - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"RUDDY & GREENE BUILDING - FRONT\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A once-beautiful 15-story sandstone building, now damaged with bullet holes and graffiti, is shown with rows of high-end European SUVs parked outside.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 3,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING - REAR - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"RUDDY & GREENE BUILDING - REAR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"The Mariner arrives in a fish delivery van, storms into the building's back entrance, and fights his way through multiple floors. He rescues Rose, and they head to the elevator amid gunfire and violence.\",\n      \"characters\": [\"Mariner\", \"Rose\"]\n    },\n    {\n      \"scene_number\": 4,\n      \"heading\": \"INT. RUDDY & GREEN BUILDING - ELEVATOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"RUDDY & GREEN BUILDING - ELEVATOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Rose and Mariner ride the elevator, both bloodied and panting. Rose discovers a piece of skull on herself. Mariner reveals he tracked her via an AirTag hidden in her purse, and Rose insists they go back for the purse. The elevator stops on the 12th floor where three thugs ambush them; Mariner fights them off and Rose presses the button for the 11th floor.\",\n      \"characters\": [\"Rose\", \"Mariner\", \"Thug 1\", \"Thug 2\", \"Thug 3\"]\n    },\n    {\n      \"scene_number\": 5,\n      \"heading\": \"INT. 11TH FLOOR - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"11TH FLOOR\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose and Mariner search for a stairwell through dim, littered corridors. They hide behind a filing cabinet as someone walks by, and Mariner looks at his 'Dad' tattoo, triggering a flashback.\",\n      \"characters\": [\"Rose\", \"Mariner\"]\n    },\n    {\n      \"scene_number\": 6,\n      \"heading\": \"EXT. COASTLINE - DAY - PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"COASTLINE\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"In a warm flashback, young Mariner and his dad enjoy a day of fishing in a wooden sailboat. Dad teaches him to cast and tells him what a hero is: someone brave and true.\",\n      \"characters\": [\"Mariner\", \"Dad\"]\n    },\n    {\n      \"scene_number\": 7,\n      \"heading\": \"INT. STAIRWELL - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"STAIRWELL\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose heads upstairs while Mariner wants to go down. Rose reveals she has a blockchain password to her life savings hidden in her purse's lining, convincing Mariner to follow her up.\",\n      \"characters\": [\"Rose\", \"Mariner\"]\n    },\n    {\n      \"scene_number\": 8,\n      \"heading\": \"INT. 12TH FLOOR STAIRWELL - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"12TH FLOOR STAIRWELL\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"A thug named Rosco bursts through the stairwell door. Mariner subdues him while Rose holds him at gunpoint, forcing him to explain blockchain. Rosco reveals Rose stole 20 million from Mr. Salvatori. Rose admits she stole gang money, and she and Mariner argue as they continue upstairs.\",\n      \"characters\": [\"Rose\", \"Mariner\", \"Rosco\"]\n    },\n    {\n      \"scene_number\": 9,\n      \"heading\": \"INT. 13TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"13TH FLOOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Thugs Vinnie, Mikey, and Carlos patrol the corridor discussing cryptocurrency. They hear Rose and Mariner arguing about the Mariner's code and confront them. Vinnie taunts Rose about being his booty call. Mariner fires a flare gun at Vinnie, then fights and defeats all three thugs. Rose tends to Mariner's wounds.\",\n      \"characters\": [\"Vinnie\", \"Mikey\", \"Carlos\", \"Rose\", \"Mariner\"]\n    },\n    {\n      \"scene_number\": 10,\n      \"heading\": \"INT. 15TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15TH FLOOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Rose and Mariner reach the luxurious 15th floor, passing evidence of Mariner's earlier fight. Mariner breaks open a sturdy door with his oar, and Rose retrieves her purse from a large office. Rose questions if Mariner uses steroids.\",\n      \"characters\": [\"Rose\", \"Mariner\"]\n    },\n    {\n      \"scene_number\": 11,\n      \"heading\": \"EXT. BACKYARD - DAY - PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"In an idealized flashback, young Mariner's dad patiently teaches him weightlifting in a sunny, idyllic backyard. Dad encourages him and tells him never to run from a fight.\",\n      \"characters\": [\"Mariner\", \"Dad\"]\n    },\n    {\n      \"scene_number\": 12,\n      \"heading\": \"INT. 15TH FLOOR (CONTINUED)\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15TH FLOOR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Back in the present, Mariner credits his dad for teaching him everything. Rose shatters his illusions by revealing their father isn't dead but living with another woman, and that he was a neglectful drunk who ditched young Mariner at a friend's place all summer. They notice a still-burning cigar and Salvatori arrives with armed thugs.\",\n      \"characters\": [\"Rose\", \"Mariner\", \"Salvatori\"]\n    },\n    {\n      \"scene_number\": 13,\n      \"heading\": \"EXT. BACKYARD - DAY - (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"The true version of the backyard flashback is revealed: the yard is overgrown and littered with bottles. Dad punches young Mariner in the face, berating him for not standing up for himself, then storms off in disgust. Mariner goes to the bench press alone.\",\n      \"characters\": [\"Mariner\", \"Dad\"]\n    },\n    {\n      \"scene_number\": 14,\n      \"heading\": \"INT. STAIRWELL - (BACK TO PRESENT)\",\n      \"int_ext\": \"INT\",\n      \"location\": \"STAIRWELL\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"Salvatori confronts Mariner, asking who he is. Mariner, broken by the truth about his father, says he's nobody. Salvatori mocks him about trying to be a hero.\",\n      \"characters\": [\"Salvatori\", \"Mariner\"]\n    },\n    {\n      \"scene_number\": 15,\n      \"heading\": \"EXT. COASTLINE - DAY - (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"COASTLINE\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"The true version of the fishing flashback: the boat is littered with empty beer bottles, dad is urinating off the side, and young Mariner shivers. Dad drunkenly and selfishly defines a hero as himself and demands another beer.\",\n      \"characters\": [\"Mariner\", \"Dad\"]\n    },\n    {\n      \"scene_number\": 16,\n      \"heading\": \"EXT. BACKYARD - DAY - (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Intercut with the present: Salvatori's thugs force Mariner to his knees and disarm him. Salvatori fires a warning shot and demands the password from Rose. Rose delivers a speech about how Mariner is the true hero—someone who turned a terrible upbringing into something noble. Mariner is inspired, clenches his fists, and prepares to fight back.\",\n      \"characters\": [\"Salvatori\", \"Mariner\", \"Rose\"]\n    }\n  ]\n}\n```",
          "tokenUsage": {
            "total": 7773,
            "prompt": 5307,
            "completion": 2466
          },
          "finishReason": "stop",
          "cost": 0.08818500000000001
        },
        "score": 0.72585,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-scenes.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/scene_extraction_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-scenes.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.017012,
        "gradingResult": {
          "pass": true,
          "score": 0.7805,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 5278,
            "prompt": 2278,
            "completion": 3000,
            "cached": 0,
            "numRequests": 1
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.881,
              "reason": "character_recall=0.75 | field_completeness=1.00 | heading_match=0.87 | heading_quality=0.88 | json_valid=0.90 | scene_count=0.80 | summary_completeness=1.00 | JSON extracted from code block | Count: 18 vs 15 golden (off by 3) | Matched 13/15 headings | Missing chars: THUG 1, THUG 2, THUG 3",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/scene_extraction_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
              },
              "pass": true,
              "score": 0.68,
              "reason": "Partial but solid extraction. Strengths: flashbacks are clearly marked (BEGIN FLASHBACK) and distinguished from present with DAY vs NIGHT context; INT/EXT designations are largely correct; summaries capture key action and character beats. Issues: scene count is inflated (18 listed, scene_count claims 20) versus the screenplay’s ~13–15; several present‑day scenes use time_of_day='CONTINUOUS' instead of NIGHT; inconsistent headings and naming (e.g., 'Ruddy & Green' vs 'Ruddy & Greene', and 'The Mariner' vs 'Mariner'); some headings include '(CONTINUED)/(FINAL)' and omit time-of-day; possible omissions of O.S. characters if present. Overall, good coverage with notable accuracy/consistency errors.",
              "tokensUsed": {
                "total": 5278,
                "prompt": 2278,
                "completion": 3000,
                "cached": 0,
                "numRequests": 1,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n```json\\n{\\n  \\\"title\\\": \\\"The Mariner\\\",\\n  \\\"scene_count\\\": 20,\\n  \\\"scenes\\\": [\\n    {\\n      \\\"scene_number\\\": 1,\\n      \\\"heading\\\": \\\"EXT. CITY CENTRE - NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"City Centre\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"A ruined cityscape with fires, homeless people, and sounds of violence. Opening title card explains the economic collapse that created no-go zones and vigilantes.\\\",\\n      \\\"characters\\\": []\\n    },\\n    {\\n      \\\"scene_number\\\": 2,\\n      \\\"heading\\\": \\\"EXT. RUDDY & GREENE BUILDING - FRONT - NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"Ruddy & Greene Building - Front\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"A damaged 15-story sandstone building with bullet holes and graffiti, surrounded by high-end European SUVs.\\\",\\n      \\\"characters\\\": []\\n    },\\n    {\\n      \\\"scene_number\\\": 3,\\n      \\\"heading\\\": \\\"EXT. RUDDY & GREENE BUILDING - REAR - NIGHT\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"Ruddy & Greene Building - Rear\\\",\\n      \\\"time_of_day\\\": \\\"NIGHT\\\",\\n      \\\"summary\\\": \\\"A delivery van arrives in a grimy alley. The Mariner emerges and enters the building, with sounds of violence heard as he moves through it.\\\",\\n      \\\"characters\\\": [\\\"The Mariner\\\", \\\"Rose\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 4,\\n      \\\"heading\\\": \\\"INT. RUDDY & GREEN BUILDING - ELEVATOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"Ruddy & Green Building - Elevator\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner escape in an elevator, both bloodied. Rose discovers a bloody piece of skull and questions Mariner about how he found her, learning he planted an AirTag in her purse.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 5,\\n      \\\"heading\\\": \\\"INT. 11TH FLOOR - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"11th Floor\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner navigate through dim corridors searching for a stairwell. Mariner pulls Rose into an empty room to hide from someone passing by.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 6,\\n      \\\"heading\\\": \\\"BEGIN FLASHBACK: EXT. COASTLINE - DAY - PAST\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"Coastline\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Young Mariner and his father fish together in a sailboat. His father teaches him about casting and defines what a hero is.\\\",\\n      \\\"characters\\\": [\\\"Young Mariner\\\", \\\"Dad\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 7,\\n      \\\"heading\\\": \\\"INT. STAIRWELL - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"Stairwell\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner argue about retrieving her purse, which contains a blockchain password to her life savings. Rose reveals she stole gang money and heads up the stairs.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 8,\\n      \\\"heading\\\": \\\"INT. 12TH FLOOR STAIRWELL - CONTINUOUS\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"12th Floor Stairwell\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"A thug named Rosco bursts through the stairwell door. Mariner subdues him while Rose holds a gun on him. Rosco reveals the stolen amount is 20 million before being knocked unconscious.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\", \\\"Rosco\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 9,\\n      \\\"heading\\\": \\\"INT. 13TH FLOOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"13th Floor\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Three thugs (Vinnie, Mikey, Carlos) confront Rose and Mariner. Mariner uses a flare gun to incapacitate Vinnie while fighting off the others. Rose reveals Vinnie was her ex-boyfriend.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\", \\\"Vinnie\\\", \\\"Mikey\\\", \\\"Carlos\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 10,\\n      \\\"heading\\\": \\\"INT. 15TH FLOOR\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"15th Floor\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Rose and Mariner reach the luxurious top floor office. Mariner breaks down the door to a locked office where Rose retrieves her purse.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 11,\\n      \\\"heading\\\": \\\"BEGIN FLASHBACK: EXT. BACKYARD - DAY - PAST\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"Backyard\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Young Mariner's father teaches him weightlifting and emphasizes never running from a fight. The father is encouraging but also has a black eye on young Mariner.\\\",\\n      \\\"characters\\\": [\\\"Young Mariner\\\", \\\"Dad\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 12,\\n      \\\"heading\\\": \\\"INT. 15TH FLOOR (CONTINUED)\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"15th Floor\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Mariner reveals his father taught him everything. Rose shocks him by revealing their father is alive and living in Chimney Bay, having abandoned Mariner as a child.\\\",\\n      \\\"characters\\\": [\\\"Rose\\\", \\\"Mariner\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 13,\\n      \\\"heading\\\": \\\"BEGIN FLASHBACK: EXT. BACKYARD - DAY - PAST\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"Backyard\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Young Mariner's father punches him repeatedly, telling him to stand up for himself and become a man. The father is abusive and dismissive.\\\",\\n      \\\"characters\\\": [\\\"Young Mariner\\\", \\\"Dad\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 14,\\n      \\\"heading\\\": \\\"INT. 15TH FLOOR OFFICE\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"15th Floor Office\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Salvatori, a man dressed entirely in white, enters with thugs and confronts Rose and Mariner at gunpoint, demanding the memory stick with the password.\\\",\\n      \\\"characters\\\": [\\\"Salvatori\\\", \\\"Rose\\\", \\\"Mariner\\\", \\\"Thugs\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 15,\\n      \\\"heading\\\": \\\"BEGIN FLASHBACK: EXT. COASTLINE - DAY - PAST\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"Coastline\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Young Mariner is in a boat with his drunk father who urinates off the side and defines a hero as himself. The father is neglectful and crude.\\\",\\n      \\\"characters\\\": [\\\"Young Mariner\\\", \\\"Dad\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 16,\\n      \\\"heading\\\": \\\"INT. 15TH FLOOR OFFICE (CONTINUED)\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"15th Floor Office\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Salvatori forces Mariner to his knees and fires a warning shot. Rose passionately defends Mariner, describing him as a true hero who overcame his father's failures.\\\",\\n      \\\"characters\\\": [\\\"Salvatori\\\", \\\"Rose\\\", \\\"Mariner\\\", \\\"Thugs\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 17,\\n      \\\"heading\\\": \\\"BEGIN FLASHBACK: EXT. BACKYARD - DAY - PAST\\\",\\n      \\\"int_ext\\\": \\\"EXT\\\",\\n      \\\"location\\\": \\\"Backyard\\\",\\n      \\\"time_of_day\\\": \\\"DAY\\\",\\n      \\\"summary\\\": \\\"Young Mariner's father continues to be abusive and dismissive in the overgrown backyard.\\\",\\n      \\\"characters\\\": [\\\"Young Mariner\\\", \\\"Dad\\\"]\\n    },\\n    {\\n      \\\"scene_number\\\": 18,\\n      \\\"heading\\\": \\\"INT. 15TH FLOOR OFFICE (FINAL)\\\",\\n      \\\"int_ext\\\": \\\"INT\\\",\\n      \\\"location\\\": \\\"15th Floor Office\\\",\\n      \\\"time_of_day\\\": \\\"CONTINUOUS\\\",\\n      \\\"summary\\\": \\\"Salvatori demands the password while pointing his gun at Rose. Mariner clenches his fists as a smile crosses his face, suggesting he is about to fight back.\\\",\\n      \\\"characters\\\": [\\\"Salvatori\\\", \\\"Rose\\\", \\\"Mariner\\\"]\\n    }\\n  ]\\n}\\n```\\n</Output>\\n<Rubric>\\nEvaluate the scene extraction output for the screenplay \\\"The Mariner.\\\"\\n\\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\\nKey quality criteria:\\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\\n2. Are scene headings accurate and complete?\\n3. Are INT/EXT designations correct?\\n4. Are character names correctly identified for each scene (including O.S. characters)?\\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\\n7. Are the flashback scenes properly distinguished from present-day scenes?\\n\\nScore strictly: partial credit for close but imperfect extraction.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "67aca99c-986e-4f91-bec0-7b1721bf8da4",
        "latencyMs": 16104,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n==========",
          "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
          "config": {}
        },
        "promptId": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "promptIdx": 3,
        "provider": {
          "id": "anthropic:messages:claude-haiku-4-5-20251001",
          "label": "Claude Haiku 4.5"
        },
        "response": {
          "output": "```json\n{\n  \"title\": \"The Mariner\",\n  \"scene_count\": 20,\n  \"scenes\": [\n    {\n      \"scene_number\": 1,\n      \"heading\": \"EXT. CITY CENTRE - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"City Centre\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A ruined cityscape with fires, homeless people, and sounds of violence. Opening title card explains the economic collapse that created no-go zones and vigilantes.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 2,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING - FRONT - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Ruddy & Greene Building - Front\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A damaged 15-story sandstone building with bullet holes and graffiti, surrounded by high-end European SUVs.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 3,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING - REAR - NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Ruddy & Greene Building - Rear\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A delivery van arrives in a grimy alley. The Mariner emerges and enters the building, with sounds of violence heard as he moves through it.\",\n      \"characters\": [\"The Mariner\", \"Rose\"]\n    },\n    {\n      \"scene_number\": 4,\n      \"heading\": \"INT. RUDDY & GREEN BUILDING - ELEVATOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"Ruddy & Green Building - Elevator\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose and Mariner escape in an elevator, both bloodied. Rose discovers a bloody piece of skull and questions Mariner about how he found her, learning he planted an AirTag in her purse.\",\n      \"characters\": [\"Rose\", \"Mariner\"]\n    },\n    {\n      \"scene_number\": 5,\n      \"heading\": \"INT. 11TH FLOOR - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"11th Floor\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose and Mariner navigate through dim corridors searching for a stairwell. Mariner pulls Rose into an empty room to hide from someone passing by.\",\n      \"characters\": [\"Rose\", \"Mariner\"]\n    },\n    {\n      \"scene_number\": 6,\n      \"heading\": \"BEGIN FLASHBACK: EXT. COASTLINE - DAY - PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Coastline\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Young Mariner and his father fish together in a sailboat. His father teaches him about casting and defines what a hero is.\",\n      \"characters\": [\"Young Mariner\", \"Dad\"]\n    },\n    {\n      \"scene_number\": 7,\n      \"heading\": \"INT. STAIRWELL - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"Stairwell\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose and Mariner argue about retrieving her purse, which contains a blockchain password to her life savings. Rose reveals she stole gang money and heads up the stairs.\",\n      \"characters\": [\"Rose\", \"Mariner\"]\n    },\n    {\n      \"scene_number\": 8,\n      \"heading\": \"INT. 12TH FLOOR STAIRWELL - CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"12th Floor Stairwell\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"A thug named Rosco bursts through the stairwell door. Mariner subdues him while Rose holds a gun on him. Rosco reveals the stolen amount is 20 million before being knocked unconscious.\",\n      \"characters\": [\"Rose\", \"Mariner\", \"Rosco\"]\n    },\n    {\n      \"scene_number\": 9,\n      \"heading\": \"INT. 13TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"13th Floor\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Three thugs (Vinnie, Mikey, Carlos) confront Rose and Mariner. Mariner uses a flare gun to incapacitate Vinnie while fighting off the others. Rose reveals Vinnie was her ex-boyfriend.\",\n      \"characters\": [\"Rose\", \"Mariner\", \"Vinnie\", \"Mikey\", \"Carlos\"]\n    },\n    {\n      \"scene_number\": 10,\n      \"heading\": \"INT. 15TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15th Floor\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose and Mariner reach the luxurious top floor office. Mariner breaks down the door to a locked office where Rose retrieves her purse.\",\n      \"characters\": [\"Rose\", \"Mariner\"]\n    },\n    {\n      \"scene_number\": 11,\n      \"heading\": \"BEGIN FLASHBACK: EXT. BACKYARD - DAY - PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Backyard\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Young Mariner's father teaches him weightlifting and emphasizes never running from a fight. The father is encouraging but also has a black eye on young Mariner.\",\n      \"characters\": [\"Young Mariner\", \"Dad\"]\n    },\n    {\n      \"scene_number\": 12,\n      \"heading\": \"INT. 15TH FLOOR (CONTINUED)\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15th Floor\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Mariner reveals his father taught him everything. Rose shocks him by revealing their father is alive and living in Chimney Bay, having abandoned Mariner as a child.\",\n      \"characters\": [\"Rose\", \"Mariner\"]\n    },\n    {\n      \"scene_number\": 13,\n      \"heading\": \"BEGIN FLASHBACK: EXT. BACKYARD - DAY - PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Backyard\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Young Mariner's father punches him repeatedly, telling him to stand up for himself and become a man. The father is abusive and dismissive.\",\n      \"characters\": [\"Young Mariner\", \"Dad\"]\n    },\n    {\n      \"scene_number\": 14,\n      \"heading\": \"INT. 15TH FLOOR OFFICE\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15th Floor Office\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Salvatori, a man dressed entirely in white, enters with thugs and confronts Rose and Mariner at gunpoint, demanding the memory stick with the password.\",\n      \"characters\": [\"Salvatori\", \"Rose\", \"Mariner\", \"Thugs\"]\n    },\n    {\n      \"scene_number\": 15,\n      \"heading\": \"BEGIN FLASHBACK: EXT. COASTLINE - DAY - PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Coastline\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Young Mariner is in a boat with his drunk father who urinates off the side and defines a hero as himself. The father is neglectful and crude.\",\n      \"characters\": [\"Young Mariner\", \"Dad\"]\n    },\n    {\n      \"scene_number\": 16,\n      \"heading\": \"INT. 15TH FLOOR OFFICE (CONTINUED)\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15th Floor Office\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Salvatori forces Mariner to his knees and fires a warning shot. Rose passionately defends Mariner, describing him as a true hero who overcame his father's failures.\",\n      \"characters\": [\"Salvatori\", \"Rose\", \"Mariner\", \"Thugs\"]\n    },\n    {\n      \"scene_number\": 17,\n      \"heading\": \"BEGIN FLASHBACK: EXT. BACKYARD - DAY - PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"Backyard\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Young Mariner's father continues to be abusive and dismissive in the overgrown backyard.\",\n      \"characters\": [\"Young Mariner\", \"Dad\"]\n    },\n    {\n      \"scene_number\": 18,\n      \"heading\": \"INT. 15TH FLOOR OFFICE (FINAL)\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15th Floor Office\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Salvatori demands the password while pointing his gun at Rose. Mariner clenches his fists as a smile crosses his face, suggesting he is about to fight back.\",\n      \"characters\": [\"Salvatori\", \"Rose\", \"Mariner\"]\n    }\n  ]\n}\n```",
          "tokenUsage": {
            "total": 7648,
            "prompt": 5307,
            "completion": 2341
          },
          "finishReason": "stop",
          "cost": 0.017012
        },
        "score": 0.7805,
        "success": true,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-scenes.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/scene_extraction_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-scenes.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0.02948225,
        "gradingResult": {
          "pass": true,
          "score": 0.80265,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 4305,
            "prompt": 1511,
            "completion": 2794,
            "cached": 0,
            "numRequests": 1
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.9053,
              "reason": "character_recall=1.00 | field_completeness=1.00 | heading_match=0.87 | heading_quality=0.92 | json_valid=1.00 | scene_count=0.70 | summary_completeness=1.00 | Count: 13 vs 15 golden (off by 2) | Matched 13/15 headings",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/scene_extraction_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
              },
              "pass": true,
              "score": 0.7,
              "reason": "Overall solid extraction: 13 scenes (within 13–15) including multiple flashbacks that are clearly distinguished. INT/EXT designations are correct, and summaries capture key action well. However, several issues reduce accuracy/completeness: some scene headings are inconsistent or incomplete (e.g., building name spelled both “Ruddy & Greene” and “Ruddy & Green”; headings missing time-of-day), the time_of_day field is often blank or marked CONTINUOUS instead of NIGHT for present-day scenes, and flashbacks don’t include explicit END FLASHBACK markers. Character lists are mostly correct but inconsistent naming appears (“THE MARINER” vs “MARINER”), and one scene uses a generic “THUGS.”",
              "tokensUsed": {
                "total": 4305,
                "prompt": 1511,
                "completion": 2794,
                "cached": 0,
                "numRequests": 1,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n{\\\"title\\\":\\\"The Mariner\\\",\\\"scene_count\\\":13,\\\"scenes\\\":[{\\\"scene_number\\\":1,\\\"heading\\\":\\\"EXT. CITY CENTRE \\\\\\\\- NIGHT\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"CITY CENTRE\\\",\\\"time_of_day\\\":\\\"NIGHT\\\",\\\"summary\\\":\\\"A devastated city is shown with fires, rubble, and distant sirens as gunshots and screams echo, setting a lawless tone for the story.\\\",\\\"characters\\\":[]},{\\\"scene_number\\\":2,\\\"heading\\\":\\\"EXT. RUDDY & GREENE BUILDING \\\\\\\\- FRONT \\\\\\\\- NIGHT\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"RUDDY & GREENE BUILDING - FRONT\\\",\\\"time_of_day\\\":\\\"NIGHT\\\",\\\"summary\\\":\\\"The once-elegant Ruddy & Greene building is revealed, now riddled with damage and graffiti, with luxury SUVs parked outside suggesting criminal activity inside.\\\",\\\"characters\\\":[]},{\\\"scene_number\\\":3,\\\"heading\\\":\\\"EXT. RUDDY & GREENE BUILDING \\\\\\\\- REAR \\\\\\\\- NIGHT\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"RUDDY & GREENE BUILDING - REAR\\\",\\\"time_of_day\\\":\\\"NIGHT\\\",\\\"summary\\\":\\\"A delivery van arrives in the alley and The Mariner storms into the building; the action is heard as a series of fights and elevator stops culminating in Rose and Mariner running for their lives.\\\",\\\"characters\\\":[\\\"THE MARINER\\\",\\\"ROSE\\\"]},{\\\"scene_number\\\":4,\\\"heading\\\":\\\"INT. RUDDY & GREEN BUILDING \\\\\\\\- ELEVATOR\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"RUDDY & GREEN BUILDING - ELEVATOR\\\",\\\"time_of_day\\\":\\\"\\\",\\\"summary\\\":\\\"Rose and the bloodied Mariner catch their breath, argue about how he found her (an AirTag), and are confronted by thugs on the 12th floor before escaping by elevator and deciding to take stairs upward.\\\",\\\"characters\\\":[\\\"ROSE\\\",\\\"MARINER\\\",\\\"THUG 1\\\",\\\"THUG 2\\\",\\\"THUG 3\\\"]},{\\\"scene_number\\\":5,\\\"heading\\\":\\\"INT. 11TH FLOOR \\\\\\\\- CONTINUOUS\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"11TH FLOOR\\\",\\\"time_of_day\\\":\\\"CONTINUOUS\\\",\\\"summary\\\":\\\"Rose and Mariner search dim corridors for the stairwell and hide in an empty room as someone passes; Mariner’s tattoo triggers a memory of his father.\\\",\\\"characters\\\":[\\\"ROSE\\\",\\\"MARINER\\\"]},{\\\"scene_number\\\":6,\\\"heading\\\":\\\"BEGIN FLASHBACK: EXT. COASTLINE \\\\\\\\- DAY \\\\\\\\- PAST\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"COASTLINE\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"Young Mariner enjoys a sunny day sailing with his father, who teaches him a romanticized idea of heroism and sends him to fetch another beer.\\\",\\\"characters\\\":[\\\"Young Mariner\\\",\\\"DAD\\\"]},{\\\"scene_number\\\":7,\\\"heading\\\":\\\"INT. STAIRWELL \\\\\\\\- CONTINUOUS\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"STAIRWELL\\\",\\\"time_of_day\\\":\\\"CONTINUOUS\\\",\\\"summary\\\":\\\"Rose insists they must recover her purse because it contains a hidden chip with her life savings password, and Mariner reluctantly follows her upward.\\\",\\\"characters\\\":[\\\"ROSE\\\",\\\"MARINER\\\"]},{\\\"scene_number\\\":8,\\\"heading\\\":\\\"INT. 12TH FLOOR STAIRWELL \\\\\\\\- CONTINUOUS\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"12TH FLOOR STAIRWELL\\\",\\\"time_of_day\\\":\\\"CONTINUOUS\\\",\\\"summary\\\":\\\"Rosco ambushes them; Mariner overpowers him while Rose interrogates him about blockchain and learns Salvatori wants her and the stolen money, then Mariner knocks Rosco out as Rose admits she stole gang money.\\\",\\\"characters\\\":[\\\"MARINER\\\",\\\"ROSE\\\",\\\"ROSCO\\\"]},{\\\"scene_number\\\":9,\\\"heading\\\":\\\"INT. 13TH FLOOR\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"13TH FLOOR\\\",\\\"time_of_day\\\":\\\"\\\",\\\"summary\\\":\\\"Three thugs patrol and overhear Mariner and Rose arguing about his “Mariner’s code”; they confront the pair, but Mariner uses a flare gun and brutal strength to defeat them while Rose tends to his wounds.\\\",\\\"characters\\\":[\\\"VINNIE\\\",\\\"MIKEY\\\",\\\"CARLOS\\\",\\\"MARINER\\\",\\\"ROSE\\\"]},{\\\"scene_number\\\":10,\\\"heading\\\":\\\"INT. 15TH FLOOR\\\",\\\"int_ext\\\":\\\"INT\\\",\\\"location\\\":\\\"15TH FLOOR\\\",\\\"time_of_day\\\":\\\"\\\",\\\"summary\\\":\\\"In a luxurious top-floor suite, Mariner forces open a locked office door and Rose recovers her purse; their conversation about Mariner’s father is interrupted as Salvatori and armed thugs arrive and take control.\\\",\\\"characters\\\":[\\\"MARINER\\\",\\\"ROSE\\\",\\\"SALVATORI\\\",\\\"THUGS\\\"]},{\\\"scene_number\\\":11,\\\"heading\\\":\\\"BEGIN FLASHBACK: EXT. BACKYARD \\\\\\\\- DAY \\\\\\\\- PAST\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"BACKYARD\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"In an idyllic yard, Mariner’s father encourages him through weightlifting, reinforcing the lesson that a MacAngus should never run from a fight.\\\",\\\"characters\\\":[\\\"Young Mariner\\\",\\\"DAD\\\"]},{\\\"scene_number\\\":12,\\\"heading\\\":\\\"EXT. BACKYARD \\\\\\\\- DAY \\\\\\\\- (FLASHBACK)\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"BACKYARD\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"The memory darkens: an unkempt yard and a cruel father who punches Young Mariner and berates him, ordering him to lift weights until he becomes “a man.”\\\",\\\"characters\\\":[\\\"Young Mariner\\\",\\\"DAD\\\"]},{\\\"scene_number\\\":13,\\\"heading\\\":\\\"EXT. COASTLINE \\\\\\\\- DAY \\\\\\\\- (FLASHBACK)\\\",\\\"int_ext\\\":\\\"EXT\\\",\\\"location\\\":\\\"COASTLINE\\\",\\\"time_of_day\\\":\\\"DAY\\\",\\\"summary\\\":\\\"Another grim boating flashback reveals Dad drinking and demeaning Young Mariner, twisting the idea of heroism into selfish mockery as he demands more beer.\\\",\\\"characters\\\":[\\\"Young Mariner\\\",\\\"DAD\\\"]}]}\\n</Output>\\n<Rubric>\\nEvaluate the scene extraction output for the screenplay \\\"The Mariner.\\\"\\n\\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\\nKey quality criteria:\\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\\n2. Are scene headings accurate and complete?\\n3. Are INT/EXT designations correct?\\n4. Are character names correctly identified for each scene (including O.S. characters)?\\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\\n7. Are the flashback scenes properly distinguished from present-day scenes?\\n\\nScore strictly: partial credit for close but imperfect extraction.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "9fd67f66-3fa6-425f-87cc-5495d23e2de2",
        "latencyMs": 19812,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n==========",
          "label": "prompts/scene-extraction.txt: You are a professional screenplay analyst. Extract all scenes from the following screenplay.\n\nFor each scene, provide:\n- scene_number: Sequential integer starting from 1\n- heading: The scene heading exactly as written (e.g., \"INT. OFFICE - DAY\")\n- int_ext: One of \"INT\", \"EXT\", or \"INT/EXT\"\n- location: The location name (without INT/EXT and time of day)\n- time_of_day: e.g., \"DAY\", \"NIGHT\", \"DAWN\", \"CONTINUOUS\"\n- summary: A 1-2 sentence summary of what happens in the scene\n- characters: Array of character names present or heard in the scene\n\nImportant:\n- Include embedded flashbacks (marked with \"BEGIN FLASHBACK\" / \"END FLASHBACK\") as separate scenes\n- Include scenes that intercut between flashback and present\n- Scene headings may use backslash-escaped characters like \\- for hyphens\n- Characters heard off-screen (O.S.) should be included\n\nReturn ONLY valid JSON in this exact format:\n{\n  \"title\": \"...\",\n  \"scene_count\": <number>,\n  \"scenes\": [ { \"scene_number\": ..., \"heading\": ..., \"int_ext\": ..., \"location\": ..., \"time_of_day\": ..., \"summary\": ..., \"characters\": [...] } ]\n}\n\nSCREENPLAY:\n==========\n{{screenplay}}\n==========",
          "config": {}
        },
        "promptId": "332009e096b0dfefb5bb46af9f9f4fb89af96655c95efb5b0e13f831e2d655c0",
        "promptIdx": 5,
        "provider": {
          "id": "openai:gpt-5.2",
          "label": "GPT-5.2"
        },
        "response": {
          "output": "{\n  \"title\": \"The Mariner\",\n  \"scene_count\": 13,\n  \"scenes\": [\n    {\n      \"scene_number\": 1,\n      \"heading\": \"EXT. CITY CENTRE \\\\- NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"CITY CENTRE\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A devastated city is shown with fires, rubble, and distant sirens as gunshots and screams echo, setting a lawless tone for the story.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 2,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING \\\\- FRONT \\\\- NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"RUDDY & GREENE BUILDING - FRONT\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"The once-elegant Ruddy & Greene building is revealed, now riddled with damage and graffiti, with luxury SUVs parked outside suggesting criminal activity inside.\",\n      \"characters\": []\n    },\n    {\n      \"scene_number\": 3,\n      \"heading\": \"EXT. RUDDY & GREENE BUILDING \\\\- REAR \\\\- NIGHT\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"RUDDY & GREENE BUILDING - REAR\",\n      \"time_of_day\": \"NIGHT\",\n      \"summary\": \"A delivery van arrives in the alley and The Mariner storms into the building; the action is heard as a series of fights and elevator stops culminating in Rose and Mariner running for their lives.\",\n      \"characters\": [\"THE MARINER\", \"ROSE\"]\n    },\n    {\n      \"scene_number\": 4,\n      \"heading\": \"INT. RUDDY & GREEN BUILDING \\\\- ELEVATOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"RUDDY & GREEN BUILDING - ELEVATOR\",\n      \"time_of_day\": \"\",\n      \"summary\": \"Rose and the bloodied Mariner catch their breath, argue about how he found her (an AirTag), and are confronted by thugs on the 12th floor before escaping by elevator and deciding to take stairs upward.\",\n      \"characters\": [\"ROSE\", \"MARINER\", \"THUG 1\", \"THUG 2\", \"THUG 3\"]\n    },\n    {\n      \"scene_number\": 5,\n      \"heading\": \"INT. 11TH FLOOR \\\\- CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"11TH FLOOR\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose and Mariner search dim corridors for the stairwell and hide in an empty room as someone passes; Mariner’s tattoo triggers a memory of his father.\",\n      \"characters\": [\"ROSE\", \"MARINER\"]\n    },\n    {\n      \"scene_number\": 6,\n      \"heading\": \"BEGIN FLASHBACK: EXT. COASTLINE \\\\- DAY \\\\- PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"COASTLINE\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Young Mariner enjoys a sunny day sailing with his father, who teaches him a romanticized idea of heroism and sends him to fetch another beer.\",\n      \"characters\": [\"Young Mariner\", \"DAD\"]\n    },\n    {\n      \"scene_number\": 7,\n      \"heading\": \"INT. STAIRWELL \\\\- CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"STAIRWELL\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rose insists they must recover her purse because it contains a hidden chip with her life savings password, and Mariner reluctantly follows her upward.\",\n      \"characters\": [\"ROSE\", \"MARINER\"]\n    },\n    {\n      \"scene_number\": 8,\n      \"heading\": \"INT. 12TH FLOOR STAIRWELL \\\\- CONTINUOUS\",\n      \"int_ext\": \"INT\",\n      \"location\": \"12TH FLOOR STAIRWELL\",\n      \"time_of_day\": \"CONTINUOUS\",\n      \"summary\": \"Rosco ambushes them; Mariner overpowers him while Rose interrogates him about blockchain and learns Salvatori wants her and the stolen money, then Mariner knocks Rosco out as Rose admits she stole gang money.\",\n      \"characters\": [\"MARINER\", \"ROSE\", \"ROSCO\"]\n    },\n    {\n      \"scene_number\": 9,\n      \"heading\": \"INT. 13TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"13TH FLOOR\",\n      \"time_of_day\": \"\",\n      \"summary\": \"Three thugs patrol and overhear Mariner and Rose arguing about his “Mariner’s code”; they confront the pair, but Mariner uses a flare gun and brutal strength to defeat them while Rose tends to his wounds.\",\n      \"characters\": [\"VINNIE\", \"MIKEY\", \"CARLOS\", \"MARINER\", \"ROSE\"]\n    },\n    {\n      \"scene_number\": 10,\n      \"heading\": \"INT. 15TH FLOOR\",\n      \"int_ext\": \"INT\",\n      \"location\": \"15TH FLOOR\",\n      \"time_of_day\": \"\",\n      \"summary\": \"In a luxurious top-floor suite, Mariner forces open a locked office door and Rose recovers her purse; their conversation about Mariner’s father is interrupted as Salvatori and armed thugs arrive and take control.\",\n      \"characters\": [\"MARINER\", \"ROSE\", \"SALVATORI\", \"THUGS\"]\n    },\n    {\n      \"scene_number\": 11,\n      \"heading\": \"BEGIN FLASHBACK: EXT. BACKYARD \\\\- DAY \\\\- PAST\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"In an idyllic yard, Mariner’s father encourages him through weightlifting, reinforcing the lesson that a MacAngus should never run from a fight.\",\n      \"characters\": [\"Young Mariner\", \"DAD\"]\n    },\n    {\n      \"scene_number\": 12,\n      \"heading\": \"EXT. BACKYARD \\\\- DAY \\\\- (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"BACKYARD\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"The memory darkens: an unkempt yard and a cruel father who punches Young Mariner and berates him, ordering him to lift weights until he becomes “a man.”\",\n      \"characters\": [\"Young Mariner\", \"DAD\"]\n    },\n    {\n      \"scene_number\": 13,\n      \"heading\": \"EXT. COASTLINE \\\\- DAY \\\\- (FLASHBACK)\",\n      \"int_ext\": \"EXT\",\n      \"location\": \"COASTLINE\",\n      \"time_of_day\": \"DAY\",\n      \"summary\": \"Another grim boating flashback reveals Dad drinking and demeaning Young Mariner, twisting the idea of heroism into selfish mockery as he demands more beer.\",\n      \"characters\": [\"Young Mariner\", \"DAD\"]\n    }\n  ]\n}",
          "tokenUsage": {
            "total": 6172,
            "prompt": 4647,
            "completion": 1525,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 19812,
          "finishReason": "stop",
          "cost": 0.02948225,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9ce887cdba6f1e19-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Sun, 15 Feb 2026 23:19:49 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "19675",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=r3vJYJmKZWF1QEjOzuIIWCVBvH0pCmflRDa279FI.sY-1771197570.198163-1.0.1.1-_q7DiLZXeIMu4V68xRv6jaGWF3aNXrd6aJxbrMpnnovAsOl_0FacMJmSjpxHWv1_2IEILElpMkDKm8xqgQy_50YeFH3OcyJ_kMiLC3ndX5erY_5ddzSV12sJeSaNmZLf; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Sun, 15 Feb 2026 23:49:49 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "4000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "3995627",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "65ms",
                "x-request-id": "req_3c7f113b25694f738a7ae2db472fa808"
              }
            }
          }
        },
        "score": 0.80265,
        "success": true,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-scenes.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/scene_extraction_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-scenes.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9ce887cdba6f1e19-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Sun, 15 Feb 2026 23:19:49 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "19675",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=r3vJYJmKZWF1QEjOzuIIWCVBvH0pCmflRDa279FI.sY-1771197570.198163-1.0.1.1-_q7DiLZXeIMu4V68xRv6jaGWF3aNXrd6aJxbrMpnnovAsOl_0FacMJmSjpxHWv1_2IEILElpMkDKm8xqgQy_50YeFH3OcyJ_kMiLC3ndX5erY_5ddzSV12sJeSaNmZLf; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Sun, 15 Feb 2026 23:49:49 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "4000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "3995627",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "65ms",
              "x-request-id": "req_3c7f113b25694f738a7ae2db472fa808"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      }
    ],
    "stats": {
      "successes": 2,
      "failures": 5,
      "errors": 0,
      "tokenUsage": {
        "prompt": 34512,
        "completion": 12079,
        "cached": 0,
        "total": 46591,
        "numRequests": 7,
        "completionDetails": {
          "reasoning": 0,
          "acceptedPrediction": 0,
          "rejectedPrediction": 0
        },
        "assertions": {
          "total": 30154,
          "prompt": 12827,
          "completion": 17327,
          "cached": 0,
          "numRequests": 0,
          "completionDetails": {
            "reasoning": 0,
            "acceptedPrediction": 0,
            "rejectedPrediction": 0
          }
        }
      },
      "durationMs": 268158
    }
  },
  "config": {
    "tags": {},
    "description": "Scene extraction from screenplay — The Mariner",
    "prompts": [
      "file:///Users/cam/Documents/Projects/cine-forge-sidequests/benchmarks/prompts/scene-extraction.txt"
    ],
    "providers": [
      {
        "id": "openai:gpt-4.1-nano",
        "label": "GPT-4.1 Nano",
        "config": {
          "temperature": 0,
          "response_format": {
            "type": "json_object"
          }
        }
      },
      {
        "id": "openai:gpt-4.1-mini",
        "label": "GPT-4.1 Mini",
        "config": {
          "temperature": 0,
          "response_format": {
            "type": "json_object"
          }
        }
      },
      {
        "id": "openai:gpt-4.1",
        "label": "GPT-4.1",
        "config": {
          "temperature": 0,
          "response_format": {
            "type": "json_object"
          }
        }
      },
      {
        "id": "anthropic:messages:claude-haiku-4-5-20251001",
        "label": "Claude Haiku 4.5",
        "config": {
          "temperature": 0,
          "max_tokens": 8192
        }
      },
      {
        "id": "anthropic:messages:claude-sonnet-4-5-20250929",
        "label": "Claude Sonnet 4.5",
        "config": {
          "temperature": 0,
          "max_tokens": 8192
        }
      },
      {
        "id": "openai:gpt-5.2",
        "label": "GPT-5.2",
        "config": {
          "temperature": 0,
          "response_format": {
            "type": "json_object"
          }
        }
      },
      {
        "id": "anthropic:messages:claude-opus-4-6",
        "label": "Claude Opus 4.6",
        "config": {
          "temperature": 0,
          "max_tokens": 8192
        }
      }
    ],
    "tests": [
      {
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-scenes.json"
        },
        "assert": [
          {
            "type": "python",
            "value": "file://../scorers/scene_extraction_scorer.py"
          },
          {
            "type": "llm-rubric",
            "value": "Evaluate the scene extraction output for the screenplay \"The Mariner.\"\n\nThe screenplay has approximately 13-15 scenes including embedded flashbacks.\nKey quality criteria:\n1. Are all scenes identified, including embedded flashbacks (BEGIN FLASHBACK / END FLASHBACK)?\n2. Are scene headings accurate and complete?\n3. Are INT/EXT designations correct?\n4. Are character names correctly identified for each scene (including O.S. characters)?\n5. Are summaries meaningful — capturing the key action, not just restating the heading?\n6. Is the time_of_day correct (NIGHT for present-day scenes, DAY for flashbacks)?\n7. Are the flashback scenes properly distinguished from present-day scenes?\n\nScore strictly: partial credit for close but imperfect extraction.\n"
          }
        ]
      }
    ],
    "scenarios": [],
    "env": {},
    "outputPath": [
      "results/scene-extraction-run1.json"
    ],
    "extensions": [],
    "metadata": {},
    "evaluateOptions": {}
  },
  "shareableUrl": null,
  "metadata": {
    "promptfooVersion": "0.120.24",
    "nodeVersion": "v24.13.1",
    "platform": "darwin",
    "arch": "arm64",
    "exportedAt": "2026-02-15T23:21:11.583Z",
    "evaluationCreatedAt": "2026-02-15T23:16:42.967Z"
  }
}