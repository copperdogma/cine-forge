{
  "evalId": "eval-2VZ-2026-03-01T22:07:24",
  "results": {
    "version": 3,
    "timestamp": "2026-03-01T22:07:24.994Z",
    "prompts": [
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "provider": "GPT-4.1 Nano",
        "metrics": {
          "score": 0.845,
          "testPassCount": 1,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 2,
          "assertFailCount": 0,
          "totalLatencyMs": 6618,
          "tokenUsage": {
            "prompt": 4854,
            "completion": 697,
            "cached": 0,
            "total": 5551,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 1819,
              "prompt": 1112,
              "completion": 707,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.0007642
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "provider": "GPT-4.1 Mini",
        "metrics": {
          "score": 0.79,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 1,
          "totalLatencyMs": 10952,
          "tokenUsage": {
            "prompt": 4854,
            "completion": 814,
            "cached": 0,
            "total": 5668,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 1876,
              "prompt": 1236,
              "completion": 640,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.0032440000000000004
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "provider": "GPT-5 Nano",
        "metrics": {
          "score": 0.905,
          "testPassCount": 1,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 2,
          "assertFailCount": 0,
          "totalLatencyMs": 42495,
          "tokenUsage": {
            "prompt": 4853,
            "completion": 4179,
            "cached": 0,
            "total": 9032,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 3456,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 1768,
              "prompt": 1130,
              "completion": 638,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.0019142500000000002
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "provider": "GPT-5 Mini",
        "metrics": {
          "score": 0.955,
          "testPassCount": 1,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 2,
          "assertFailCount": 0,
          "totalLatencyMs": 26102,
          "tokenUsage": {
            "prompt": 4853,
            "completion": 2125,
            "cached": 0,
            "total": 6978,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 1088,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2029,
              "prompt": 1454,
              "completion": 575,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.005463249999999999
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "provider": "Gemini 2.5 Flash Lite",
        "metrics": {
          "score": 0.895,
          "testPassCount": 1,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 2,
          "assertFailCount": 0,
          "totalLatencyMs": 3890,
          "tokenUsage": {
            "prompt": 5016,
            "completion": 1090,
            "cached": 0,
            "total": 6106,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2361,
              "prompt": 1658,
              "completion": 703,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.0009376
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "provider": "GPT-4.1",
        "metrics": {
          "score": 0.965,
          "testPassCount": 1,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 2,
          "assertFailCount": 0,
          "totalLatencyMs": 12407,
          "tokenUsage": {
            "prompt": 4854,
            "completion": 899,
            "cached": 0,
            "total": 5753,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 1999,
              "prompt": 1326,
              "completion": 673,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.0169
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "provider": "Claude Haiku 4.5",
        "metrics": {
          "score": 0.75125,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 1,
          "totalLatencyMs": 13642,
          "tokenUsage": {
            "prompt": 5518,
            "completion": 1287,
            "cached": 0,
            "total": 6805,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2560,
              "prompt": 1781,
              "completion": 779,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.011953
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "provider": "Claude Sonnet 4.5",
        "metrics": {
          "score": 0.725,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 1,
          "totalLatencyMs": 25966,
          "tokenUsage": {
            "prompt": 5518,
            "completion": 1164,
            "cached": 0,
            "total": 6682,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2349,
              "prompt": 1658,
              "completion": 691,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.034014
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "provider": "Claude Sonnet 4.6",
        "metrics": {
          "score": 0.85625,
          "testPassCount": 1,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 2,
          "assertFailCount": 0,
          "totalLatencyMs": 28630,
          "tokenUsage": {
            "prompt": 5518,
            "completion": 1353,
            "cached": 0,
            "total": 6871,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2608,
              "prompt": 1847,
              "completion": 761,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "provider": "Gemini 2.5 Flash",
        "metrics": {
          "score": 0.69005,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 1,
          "totalLatencyMs": 15192,
          "tokenUsage": {
            "prompt": 5016,
            "completion": 1065,
            "cached": 0,
            "total": 8685,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 2604,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2294,
              "prompt": 1626,
              "completion": 668,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.0106773
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "provider": "Gemini 3 Flash",
        "metrics": {
          "score": 0.7150000000000001,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 1,
          "totalLatencyMs": 13596,
          "tokenUsage": {
            "prompt": 5016,
            "completion": 1039,
            "cached": 0,
            "total": 7162,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 1107,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2316,
              "prompt": 1602,
              "completion": 714,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.008945999999999999
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "provider": "GPT-5.2",
        "metrics": {
          "score": 0.88,
          "testPassCount": 1,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 2,
          "assertFailCount": 0,
          "totalLatencyMs": 15422,
          "tokenUsage": {
            "prompt": 4853,
            "completion": 1013,
            "cached": 0,
            "total": 5866,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2203,
              "prompt": 1436,
              "completion": 767,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.02267475
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "provider": "Claude Opus 4.6",
        "metrics": {
          "score": 0.73125,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 1,
          "totalLatencyMs": 28556,
          "tokenUsage": {
            "prompt": 5518,
            "completion": 1306,
            "cached": 0,
            "total": 6824,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2507,
              "prompt": 1800,
              "completion": 707,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.06024
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "provider": "Gemini 2.5 Pro",
        "metrics": {
          "score": 0.75,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 1,
          "totalLatencyMs": 38234,
          "tokenUsage": {
            "prompt": 5016,
            "completion": 1110,
            "cached": 0,
            "total": 9464,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 3338,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2502,
              "prompt": 1688,
              "completion": 814,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.05075
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "provider": "Gemini 3 Pro",
        "metrics": {
          "score": 0.68125,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 1,
          "totalLatencyMs": 38015,
          "tokenUsage": {
            "prompt": 5016,
            "completion": 1020,
            "cached": 0,
            "total": 7538,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 1502,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2207,
              "prompt": 1600,
              "completion": 607,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.040296
        }
      }
    ],
    "results": [
      {
        "cost": 0.0032440000000000004,
        "error": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. ✅\n\n2. **Format**: Identified as 'feature film' with confidence 0.9. This is reasonable. ✅\n\n3. **Genre**: Includes action, crime, drama, thriller. Captures the vigilante crime-action nature well. ✅\n\n4. **Tone**: Captures dark, gritty, violent, intense, bleak, suspenseful, fast-paced. Excellent coverage. ✅\n\n5. **Duration**: Estimated at 30 minutes with confidence 0.8. The rubric states the screenplay is ~430 lines and expects 85-130 minutes. An estimate of 30 minutes is significantly too low. The model seems to have underestimated the page count. This is a notable error. ❌\n\n6. **Primary characters**: Lists Mariner, Rose, and Salvatori. The rubric expects Mariner and Rose as leads. Salvatori could arguably be primary as the main antagonist, but the rubric suggests Salvatori might be better as supporting. Still, identifying Mariner and Rose is correct. Partially ✅\n\n7. **Supporting characters**: Lists Vinnie, Mikey, Carlos, Rosco, Dad. The rubric expects Dad, Salvatori, Vinnie among supporting. Dad and Vinnie are included. Salvatori is listed as primary instead of supporting, which is debatable. Mostly ✅\n\n8. **Location count**: Estimated at 6 with confidence 0.85. The rubric says 5-20 is reasonable. 6 is within range. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, along with flashback locations. ✅\n\n10. **Target audience**: Identified as 'R' for mature content. ✅\n\n11. **Confidence calibration**: Generally reasonable. The duration confidence of 0.8 is too high given the significant underestimate. Other confidences seem well-calibrated. Mostly ✅\n\n12. **Rationale quality**: Rationales are grounded in screenplay evidence, citing specific elements like gang money, fight scenes, building names, etc. ✅\n\nThe major flaw is the duration estimate of 30 minutes, which is far below the expected 85-130 minutes. This is a significant factual error. The character classification (Salvatori as primary vs. supporting) is a minor issue. Everything else is well done.",
        "gradingResult": {
          "pass": false,
          "score": 0.79,
          "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. ✅\n\n2. **Format**: Identified as 'feature film' with confidence 0.9. This is reasonable. ✅\n\n3. **Genre**: Includes action, crime, drama, thriller. Captures the vigilante crime-action nature well. ✅\n\n4. **Tone**: Captures dark, gritty, violent, intense, bleak, suspenseful, fast-paced. Excellent coverage. ✅\n\n5. **Duration**: Estimated at 30 minutes with confidence 0.8. The rubric states the screenplay is ~430 lines and expects 85-130 minutes. An estimate of 30 minutes is significantly too low. The model seems to have underestimated the page count. This is a notable error. ❌\n\n6. **Primary characters**: Lists Mariner, Rose, and Salvatori. The rubric expects Mariner and Rose as leads. Salvatori could arguably be primary as the main antagonist, but the rubric suggests Salvatori might be better as supporting. Still, identifying Mariner and Rose is correct. Partially ✅\n\n7. **Supporting characters**: Lists Vinnie, Mikey, Carlos, Rosco, Dad. The rubric expects Dad, Salvatori, Vinnie among supporting. Dad and Vinnie are included. Salvatori is listed as primary instead of supporting, which is debatable. Mostly ✅\n\n8. **Location count**: Estimated at 6 with confidence 0.85. The rubric says 5-20 is reasonable. 6 is within range. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, along with flashback locations. ✅\n\n10. **Target audience**: Identified as 'R' for mature content. ✅\n\n11. **Confidence calibration**: Generally reasonable. The duration confidence of 0.8 is too high given the significant underestimate. Other confidences seem well-calibrated. Mostly ✅\n\n12. **Rationale quality**: Rationales are grounded in screenplay evidence, citing specific elements like gang money, fight scenes, building names, etc. ✅\n\nThe major flaw is the duration estimate of 30 minutes, which is far below the expected 85-130 minutes. This is a significant factual error. The character classification (Salvatori as primary vs. supporting) is a minor issue. Everything else is well done.",
          "namedScores": {},
          "tokensUsed": {
            "total": 1876,
            "prompt": 1236,
            "completion": 640,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.98,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=1.00, format_accuracy=1.00, genre_accuracy=1.00, json_valid=1.00, location_accuracy=1.00, title_accuracy=1.00, tone_accuracy=0.80",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": false,
              "score": 0.6,
              "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. ✅\n\n2. **Format**: Identified as 'feature film' with confidence 0.9. This is reasonable. ✅\n\n3. **Genre**: Includes action, crime, drama, thriller. Captures the vigilante crime-action nature well. ✅\n\n4. **Tone**: Captures dark, gritty, violent, intense, bleak, suspenseful, fast-paced. Excellent coverage. ✅\n\n5. **Duration**: Estimated at 30 minutes with confidence 0.8. The rubric states the screenplay is ~430 lines and expects 85-130 minutes. An estimate of 30 minutes is significantly too low. The model seems to have underestimated the page count. This is a notable error. ❌\n\n6. **Primary characters**: Lists Mariner, Rose, and Salvatori. The rubric expects Mariner and Rose as leads. Salvatori could arguably be primary as the main antagonist, but the rubric suggests Salvatori might be better as supporting. Still, identifying Mariner and Rose is correct. Partially ✅\n\n7. **Supporting characters**: Lists Vinnie, Mikey, Carlos, Rosco, Dad. The rubric expects Dad, Salvatori, Vinnie among supporting. Dad and Vinnie are included. Salvatori is listed as primary instead of supporting, which is debatable. Mostly ✅\n\n8. **Location count**: Estimated at 6 with confidence 0.85. The rubric says 5-20 is reasonable. 6 is within range. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, along with flashback locations. ✅\n\n10. **Target audience**: Identified as 'R' for mature content. ✅\n\n11. **Confidence calibration**: Generally reasonable. The duration confidence of 0.8 is too high given the significant underestimate. Other confidences seem well-calibrated. Mostly ✅\n\n12. **Rationale quality**: Rationales are grounded in screenplay evidence, citing specific elements like gang money, fight scenes, building names, etc. ✅\n\nThe major flaw is the duration estimate of 30 minutes, which is far below the expected 85-130 minutes. This is a significant factual error. The character classification (Salvatori as primary vs. supporting) is a minor issue. Everything else is well done.",
              "tokensUsed": {
                "total": 1876,
                "prompt": 1236,
                "completion": 640,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n{\\\"title\\\":{\\\"value\\\":\\\"The Mariner\\\",\\\"confidence\\\":1,\\\"rationale\\\":\\\"The title is explicitly given at the very beginning and again as a full-screen superimposed title card.\\\"},\\\"format\\\":{\\\"value\\\":\\\"feature film\\\",\\\"confidence\\\":0.9,\\\"rationale\\\":\\\"The screenplay shows a continuous narrative with multiple locations, complex character development, flashbacks, and a structured three-act style typical of feature films. The formatting and scene headings are consistent with feature film scripts.\\\"},\\\"genre\\\":{\\\"value\\\":[\\\"action\\\",\\\"crime\\\",\\\"drama\\\",\\\"thriller\\\"],\\\"confidence\\\":0.95,\\\"rationale\\\":\\\"The screenplay contains intense fight scenes and gunfire (action), involves gang money and criminal elements (crime), explores deep character backstory and emotional conflict (drama), and has suspenseful, tense sequences with life-threatening stakes (thriller). There is no evidence of fantasy, sci-fi, romance, or other genres.\\\"},\\\"tone\\\":{\\\"value\\\":[\\\"dark\\\",\\\"gritty\\\",\\\"violent\\\",\\\"intense\\\",\\\"bleak\\\",\\\"suspenseful\\\",\\\"fast-paced\\\"],\\\"confidence\\\":0.95,\\\"rationale\\\":\\\"The setting is a ruined, dystopian city with violence and bloodshed (dark, gritty, violent, bleak). The narrative is tense with gunfights and chases (intense, suspenseful). The pacing is brisk with continuous action and little downtime (fast-paced).\\\"},\\\"estimated_duration_minutes\\\":{\\\"value\\\":30,\\\"confidence\\\":0.8,\\\"rationale\\\":\\\"The screenplay excerpt is approximately 30 pages long (estimated from length and detail), and the standard rule of thumb is about 1 page per minute for screenplays.\\\"},\\\"primary_characters\\\":{\\\"value\\\":[\\\"Mariner\\\",\\\"Rose\\\",\\\"Salvatori\\\"],\\\"confidence\\\":0.95,\\\"rationale\\\":\\\"Mariner and Rose are the protagonists, central to the narrative and dialogue. Salvatori is the main antagonist, introduced as the gang leader confronting them.\\\"},\\\"supporting_characters\\\":{\\\"value\\\":[\\\"Vinnie\\\",\\\"Mikey\\\",\\\"Carlos\\\",\\\"Rosco\\\",\\\"Dad (flashback)\\\"],\\\"confidence\\\":0.9,\\\"rationale\\\":\\\"These characters appear in supporting roles, mostly as thugs or in flashbacks, contributing to the story but with limited focus.\\\"},\\\"location_count\\\":{\\\"value\\\":6,\\\"confidence\\\":0.85,\\\"rationale\\\":\\\"Distinct locations include: 1) City centre (ruined urban environment), 2) Ruddy & Greene Building exterior front, 3) Ruddy & Greene Building rear alley, 4) Ruddy & Greene Building interior (elevator, floors 11-15, stairwells), 5) Coastline (flashbacks), 6) Backyard (flashbacks).\\\"},\\\"locations_summary\\\":{\\\"value\\\":\\\"A dystopian ruined city center dominated by the Ruddy & Greene Building, including its grimy alleys, elevator, and multiple floors; flashbacks to a coastal area and a backyard representing the protagonist's past.\\\",\\\"confidence\\\":0.9,\\\"rationale\\\":\\\"The screenplay repeatedly returns to the Ruddy & Greene Building and its environs, with flashbacks to outdoor coastal and backyard settings.\\\"},\\\"target_audience\\\":{\\\"value\\\":\\\"R\\\",\\\"confidence\\\":0.9,\\\"rationale\\\":\\\"The screenplay contains graphic violence, blood, gunfire, strong language, and mature themes such as gang crime and family trauma, indicating a mature audience rating.\\\"}}\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "0da99e91-01be-4add-a359-9b4274557b52",
        "latencyMs": 10952,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "promptIdx": 1,
        "provider": {
          "id": "openai:gpt-4.1-mini",
          "label": "GPT-4.1 Mini"
        },
        "response": {
          "output": "{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The title is explicitly given at the very beginning and again as a full-screen superimposed title card.\"\n  },\n  \"format\": {\n    \"value\": \"feature film\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay shows a continuous narrative with multiple locations, complex character development, flashbacks, and a structured three-act style typical of feature films. The formatting and scene headings are consistent with feature film scripts.\"\n  },\n  \"genre\": {\n    \"value\": [\"action\", \"crime\", \"drama\", \"thriller\"],\n    \"confidence\": 0.95,\n    \"rationale\": \"The screenplay contains intense fight scenes and gunfire (action), involves gang money and criminal elements (crime), explores deep character backstory and emotional conflict (drama), and has suspenseful, tense sequences with life-threatening stakes (thriller). There is no evidence of fantasy, sci-fi, romance, or other genres.\"\n  },\n  \"tone\": {\n    \"value\": [\"dark\", \"gritty\", \"violent\", \"intense\", \"bleak\", \"suspenseful\", \"fast-paced\"],\n    \"confidence\": 0.95,\n    \"rationale\": \"The setting is a ruined, dystopian city with violence and bloodshed (dark, gritty, violent, bleak). The narrative is tense with gunfights and chases (intense, suspenseful). The pacing is brisk with continuous action and little downtime (fast-paced).\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 30,\n    \"confidence\": 0.8,\n    \"rationale\": \"The screenplay excerpt is approximately 30 pages long (estimated from length and detail), and the standard rule of thumb is about 1 page per minute for screenplays.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\"Mariner\", \"Rose\", \"Salvatori\"],\n    \"confidence\": 0.95,\n    \"rationale\": \"Mariner and Rose are the protagonists, central to the narrative and dialogue. Salvatori is the main antagonist, introduced as the gang leader confronting them.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\"Vinnie\", \"Mikey\", \"Carlos\", \"Rosco\", \"Dad (flashback)\"],\n    \"confidence\": 0.9,\n    \"rationale\": \"These characters appear in supporting roles, mostly as thugs or in flashbacks, contributing to the story but with limited focus.\"\n  },\n  \"location_count\": {\n    \"value\": 6,\n    \"confidence\": 0.85,\n    \"rationale\": \"Distinct locations include: 1) City centre (ruined urban environment), 2) Ruddy & Greene Building exterior front, 3) Ruddy & Greene Building rear alley, 4) Ruddy & Greene Building interior (elevator, floors 11-15, stairwells), 5) Coastline (flashbacks), 6) Backyard (flashbacks).\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A dystopian ruined city center dominated by the Ruddy & Greene Building, including its grimy alleys, elevator, and multiple floors; flashbacks to a coastal area and a backyard representing the protagonist's past.\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay repeatedly returns to the Ruddy & Greene Building and its environs, with flashbacks to outdoor coastal and backyard settings.\"\n  },\n  \"target_audience\": {\n    \"value\": \"R\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay contains graphic violence, blood, gunfire, strong language, and mature themes such as gang crime and family trauma, indicating a mature audience rating.\"\n  }\n}",
          "tokenUsage": {
            "total": 5668,
            "prompt": 4854,
            "completion": 814,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 10952,
          "finishReason": "stop",
          "cost": 0.0032440000000000004,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9d5b79776bfd5fbe-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Sun, 01 Mar 2026 22:07:36 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "10454",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=if_lhkcpqGGqKVa0Fwook2KnnB.KNzjJEWqRTRX3DGs-1772402845.3483088-1.0.1.1-Sw5UNxED6994_CyLEoY_iOtr0GqnMOvjsL8lshSxXNSPlkWwMPZdDSJ3K0dzjyyXAZrE0a94UusrQHXCRfqhw4UROVyEie6ElkSH89YNuuFw6HkBqIr06bFbrj6DGGSS; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Sun, 01 Mar 2026 22:37:36 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "10000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "9995359",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "27ms",
                "x-request-id": "req_cecd71e64f1340fa8da52f357d516b3b"
              }
            }
          }
        },
        "score": 0.79,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9d5b79776bfd5fbe-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Sun, 01 Mar 2026 22:07:36 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "10454",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=if_lhkcpqGGqKVa0Fwook2KnnB.KNzjJEWqRTRX3DGs-1772402845.3483088-1.0.1.1-Sw5UNxED6994_CyLEoY_iOtr0GqnMOvjsL8lshSxXNSPlkWwMPZdDSJ3K0dzjyyXAZrE0a94UusrQHXCRfqhw4UROVyEie6ElkSH89YNuuFw6HkBqIr06bFbrj6DGGSS; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Sun, 01 Mar 2026 22:37:36 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "10000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "9995359",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "27ms",
              "x-request-id": "req_cecd71e64f1340fa8da52f357d516b3b"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.011953,
        "error": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with 0.99 confidence. ✅\n\n2. **Format**: Identified as 'feature film' with 0.85 confidence. However, the estimated duration is only 28 minutes, which contradicts the feature film classification. The rubric suggests 85-130 minutes for a ~430-line screenplay, meaning the model significantly underestimated the duration. The format identification itself is reasonable but internally inconsistent with the duration estimate. Partial ✅\n\n3. **Genre**: Includes action, crime, drama, and superhero. Action and crime are correctly identified per the rubric. The superhero/vigilante element is reasonable. Thriller is not explicitly listed but crime/action covers similar ground. ✅\n\n4. **Tone**: Captures dark, gritty, violent, intense, noir, tragicomic, bleak. This thoroughly covers the dark/gritty/violent qualities mentioned in the rubric. ✅\n\n5. **Duration**: Estimated at 28 minutes. The rubric says 85-130 minutes for a ~430-line screenplay. The model estimated only ~28 pages/minutes, which is drastically low. This is a significant error - the model appears to have miscounted the screenplay length. ❌\n\n6. **Primary characters**: Identifies Mariner (Billy/Will), Rose, and Salvatori. The rubric wants Mariner and Rose as leads - both are included. Salvatori is listed as primary rather than supporting, which is debatable but not unreasonable as the main antagonist. ✅\n\n7. **Supporting characters**: Lists Dad, Thug 1-3, Rosco, Vinnie, Mikey, Carlos. The rubric wants Dad, Salvatori, and Vinnie among supporting. Dad and Vinnie are listed. Salvatori is placed as primary instead of supporting - this is a classification choice. Mostly ✅\n\n8. **Location count**: Estimated at 9. The rubric says 5-20 is reasonable. 9 falls within range. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, describes the post-collapse urban environment, multiple floors, flashback locations. ✅\n\n10. **Target audience**: Correctly identifies as mature/adult content (R-rated/15+) with appropriate evidence. ✅\n\n11. **Confidence calibration**: Most confidence scores are reasonable. However, the format confidence of 0.85 for 'feature film' is poorly calibrated given the 28-minute duration estimate - these are contradictory. The duration confidence of 0.75 is too high for such an inaccurate estimate.\n\n12. **Rationale quality**: Rationales are generally well-grounded in screenplay evidence with specific references to scenes, characters, and descriptions. The duration rationale is problematic as it severely underestimates the screenplay length.\n\nThe major failing is the duration estimate (28 min vs expected 85-130 min), which also creates an internal contradiction with the 'feature film' format classification. Most other fields are accurate and well-evidenced.",
        "gradingResult": {
          "pass": false,
          "score": 0.75125,
          "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with 0.99 confidence. ✅\n\n2. **Format**: Identified as 'feature film' with 0.85 confidence. However, the estimated duration is only 28 minutes, which contradicts the feature film classification. The rubric suggests 85-130 minutes for a ~430-line screenplay, meaning the model significantly underestimated the duration. The format identification itself is reasonable but internally inconsistent with the duration estimate. Partial ✅\n\n3. **Genre**: Includes action, crime, drama, and superhero. Action and crime are correctly identified per the rubric. The superhero/vigilante element is reasonable. Thriller is not explicitly listed but crime/action covers similar ground. ✅\n\n4. **Tone**: Captures dark, gritty, violent, intense, noir, tragicomic, bleak. This thoroughly covers the dark/gritty/violent qualities mentioned in the rubric. ✅\n\n5. **Duration**: Estimated at 28 minutes. The rubric says 85-130 minutes for a ~430-line screenplay. The model estimated only ~28 pages/minutes, which is drastically low. This is a significant error - the model appears to have miscounted the screenplay length. ❌\n\n6. **Primary characters**: Identifies Mariner (Billy/Will), Rose, and Salvatori. The rubric wants Mariner and Rose as leads - both are included. Salvatori is listed as primary rather than supporting, which is debatable but not unreasonable as the main antagonist. ✅\n\n7. **Supporting characters**: Lists Dad, Thug 1-3, Rosco, Vinnie, Mikey, Carlos. The rubric wants Dad, Salvatori, and Vinnie among supporting. Dad and Vinnie are listed. Salvatori is placed as primary instead of supporting - this is a classification choice. Mostly ✅\n\n8. **Location count**: Estimated at 9. The rubric says 5-20 is reasonable. 9 falls within range. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, describes the post-collapse urban environment, multiple floors, flashback locations. ✅\n\n10. **Target audience**: Correctly identifies as mature/adult content (R-rated/15+) with appropriate evidence. ✅\n\n11. **Confidence calibration**: Most confidence scores are reasonable. However, the format confidence of 0.85 for 'feature film' is poorly calibrated given the 28-minute duration estimate - these are contradictory. The duration confidence of 0.75 is too high for such an inaccurate estimate.\n\n12. **Rationale quality**: Rationales are generally well-grounded in screenplay evidence with specific references to scenes, characters, and descriptions. The duration rationale is problematic as it severely underestimates the screenplay length.\n\nThe major failing is the duration estimate (28 min vs expected 85-130 min), which also creates an internal contradiction with the 'feature film' format classification. Most other fields are accurate and well-evidenced.",
          "namedScores": {},
          "tokensUsed": {
            "total": 2560,
            "prompt": 1781,
            "completion": 779,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.9525,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=1.00, format_accuracy=1.00, genre_accuracy=0.75, json_valid=0.90, location_accuracy=1.00, title_accuracy=1.00, tone_accuracy=1.00",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": false,
              "score": 0.55,
              "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with 0.99 confidence. ✅\n\n2. **Format**: Identified as 'feature film' with 0.85 confidence. However, the estimated duration is only 28 minutes, which contradicts the feature film classification. The rubric suggests 85-130 minutes for a ~430-line screenplay, meaning the model significantly underestimated the duration. The format identification itself is reasonable but internally inconsistent with the duration estimate. Partial ✅\n\n3. **Genre**: Includes action, crime, drama, and superhero. Action and crime are correctly identified per the rubric. The superhero/vigilante element is reasonable. Thriller is not explicitly listed but crime/action covers similar ground. ✅\n\n4. **Tone**: Captures dark, gritty, violent, intense, noir, tragicomic, bleak. This thoroughly covers the dark/gritty/violent qualities mentioned in the rubric. ✅\n\n5. **Duration**: Estimated at 28 minutes. The rubric says 85-130 minutes for a ~430-line screenplay. The model estimated only ~28 pages/minutes, which is drastically low. This is a significant error - the model appears to have miscounted the screenplay length. ❌\n\n6. **Primary characters**: Identifies Mariner (Billy/Will), Rose, and Salvatori. The rubric wants Mariner and Rose as leads - both are included. Salvatori is listed as primary rather than supporting, which is debatable but not unreasonable as the main antagonist. ✅\n\n7. **Supporting characters**: Lists Dad, Thug 1-3, Rosco, Vinnie, Mikey, Carlos. The rubric wants Dad, Salvatori, and Vinnie among supporting. Dad and Vinnie are listed. Salvatori is placed as primary instead of supporting - this is a classification choice. Mostly ✅\n\n8. **Location count**: Estimated at 9. The rubric says 5-20 is reasonable. 9 falls within range. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, describes the post-collapse urban environment, multiple floors, flashback locations. ✅\n\n10. **Target audience**: Correctly identifies as mature/adult content (R-rated/15+) with appropriate evidence. ✅\n\n11. **Confidence calibration**: Most confidence scores are reasonable. However, the format confidence of 0.85 for 'feature film' is poorly calibrated given the 28-minute duration estimate - these are contradictory. The duration confidence of 0.75 is too high for such an inaccurate estimate.\n\n12. **Rationale quality**: Rationales are generally well-grounded in screenplay evidence with specific references to scenes, characters, and descriptions. The duration rationale is problematic as it severely underestimates the screenplay length.\n\nThe major failing is the duration estimate (28 min vs expected 85-130 min), which also creates an internal contradiction with the 'feature film' format classification. Most other fields are accurate and well-evidenced.",
              "tokensUsed": {
                "total": 2560,
                "prompt": 1781,
                "completion": 779,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n```json\\n{\\n  \\\"title\\\": {\\n    \\\"value\\\": \\\"The Mariner\\\",\\n    \\\"confidence\\\": 0.99,\\n    \\\"rationale\\\": \\\"Explicitly stated as the opening title card and full-screen superimposed title in the screenplay.\\\"\\n  },\\n  \\\"format\\\": {\\n    \\\"value\\\": \\\"feature film\\\",\\n    \\\"confidence\\\": 0.85,\\n    \\\"rationale\\\": \\\"Screenplay demonstrates feature-length narrative structure with complex character development, multiple flashback sequences, substantial dialogue, and a complete three-act arc. Estimated page count (~25-30 pages) and narrative scope suggest feature rather than short film. No episodic structure or pilot conventions present.\\\"\\n  },\\n  \\\"genre\\\": {\\n    \\\"value\\\": [\\n      \\\"action\\\",\\n      \\\"crime\\\",\\n      \\\"drama\\\",\\n      \\\"superhero\\\"\\n    ],\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"Action evident throughout (fight sequences, gunfire, physical combat). Crime present (gang money theft, organized crime antagonist Salvatori). Drama central to narrative (character backstory, father-son relationship, identity crisis). Superhero elements clear (vigilante protagonist with costume, code of conduct, origin story deconstruction).\\\"\\n  },\\n  \\\"tone\\\": {\\n    \\\"value\\\": [\\n      \\\"gritty\\\",\\n      \\\"dark\\\",\\n      \\\"violent\\\",\\n      \\\"intense\\\",\\n      \\\"noir\\\",\\n      \\\"tragicomic\\\",\\n      \\\"bleak\\\"\\n    ],\\n    \\\"confidence\\\": 0.88,\\n    \\\"rationale\\\": \\\"Gritty urban setting with ruined cities and no-go zones. Dark atmosphere with fires, gunshots, and brutal violence. Noir elements (shadowy lighting, morally complex characters, urban decay). Tragicomic moments (flare gun humor, AirTag revelation, blockchain explanation). Intense action sequences. Bleak worldbuilding (pandemic collapse, bank failures). Tragic undertone regarding father's abandonment and false heroic narrative.\\\"\\n  },\\n  \\\"estimated_duration_minutes\\\": {\\n    \\\"value\\\": 28,\\n    \\\"confidence\\\": 0.75,\\n    \\\"rationale\\\": \\\"Screenplay contains approximately 28 pages of formatted script based on scene headings, dialogue, and action descriptions. Using standard ~1 page per minute conversion yields ~28 minutes. However, action sequences and flashbacks may extend runtime slightly; actual duration likely 30-35 minutes depending on production choices.\\\"\\n  },\\n  \\\"primary_characters\\\": {\\n    \\\"value\\\": [\\n      \\\"Mariner (Billy/Will)\\\",\\n      \\\"Rose\\\",\\n      \\\"Salvatori\\\"\\n    ],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"Mariner is the clear protagonist with extensive character development, internal conflict, and narrative focus. Rose is co-protagonist driving plot and revealing crucial backstory. Salvatori is the primary antagonist introduced in final act as the central threat.\\\"\\n  },\\n  \\\"supporting_characters\\\": {\\n    \\\"value\\\": [\\n      \\\"Mariner's Dad\\\",\\n      \\\"Thug 1\\\",\\n      \\\"Thug 2\\\",\\n      \\\"Thug 3\\\",\\n      \\\"Rosco\\\",\\n      \\\"Vinnie\\\",\\n      \\\"Mikey\\\",\\n      \\\"Carlos\\\"\\n    ],\\n    \\\"confidence\\\": 0.85,\\n    \\\"rationale\\\": \\\"Mariner's Dad appears in multiple flashbacks as crucial to character motivation and thematic conflict. Multiple unnamed/named thugs (Rosco, Vinnie, Mikey, Carlos) serve as antagonistic forces throughout. These characters have limited dialogue/screen time but functional narrative roles.\\\"\\n  },\\n  \\\"location_count\\\": {\\n    \\\"value\\\": 9,\\n    \\\"confidence\\\": 0.8,\\n    \\\"rationale\\\": \\\"Distinct locations: (1) City Centre exterior, (2) Ruddy & Greene Building front, (3) Ruddy & Greene Building rear/alley, (4) Elevator interior, (5) 11th floor corridor, (6) Stairwell, (7) 12th floor stairwell, (8) 13th floor corridor, (9) 15th floor office. Flashback locations (coastline, backyard) are separate but not counted as primary film locations.\\\"\\n  },\\n  \\\"locations_summary\\\": {\\n    \\\"value\\\": \\\"Primary setting is a ruined urban environment in a post-collapse city (2025+). Main action occurs within the Ruddy & Greene Building, a 15-story sandstone structure serving as a gang headquarters. Locations include the building's exterior, rear alley, multiple interior floors (11th-15th), elevator, stairwells, and executive office. Flashback sequences set in coastal areas and residential backyard.\\\",\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"Screenplay explicitly describes city centre ruins, the Ruddy & Greene Building with specific floor details, and provides clear spatial geography through character movement. Flashback locations are distinct but secondary to main narrative setting.\\\"\\n  },\\n  \\\"target_audience\\\": {\\n    \\\"value\\\": \\\"R (Restricted) / 15+ (depending on rating system)\\\",\\n    \\\"confidence\\\": 0.8,\\n    \\\"rationale\\\": \\\"Screenplay contains sustained violence (gunfire, brutal hand-to-hand combat, graphic descriptions like 'wet cracking sounds' and skull fragments), blood and gore, strong language ('Fuck,' 'shit,' 'ass'), and mature thematic content (organized crime, theft, abandonment). Not suitable for children; appropriate for mature teens and adults. Likely R-rated in MPAA system or 15+ in BBFC.\\\"\\n  }\\n}\\n```\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "f3c610dc-9969-4276-8025-085bbbe39e91",
        "latencyMs": 13642,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "promptIdx": 6,
        "provider": {
          "id": "anthropic:messages:claude-haiku-4-5-20251001",
          "label": "Claude Haiku 4.5"
        },
        "response": {
          "output": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 0.99,\n    \"rationale\": \"Explicitly stated as the opening title card and full-screen superimposed title in the screenplay.\"\n  },\n  \"format\": {\n    \"value\": \"feature film\",\n    \"confidence\": 0.85,\n    \"rationale\": \"Screenplay demonstrates feature-length narrative structure with complex character development, multiple flashback sequences, substantial dialogue, and a complete three-act arc. Estimated page count (~25-30 pages) and narrative scope suggest feature rather than short film. No episodic structure or pilot conventions present.\"\n  },\n  \"genre\": {\n    \"value\": [\n      \"action\",\n      \"crime\",\n      \"drama\",\n      \"superhero\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"Action evident throughout (fight sequences, gunfire, physical combat). Crime present (gang money theft, organized crime antagonist Salvatori). Drama central to narrative (character backstory, father-son relationship, identity crisis). Superhero elements clear (vigilante protagonist with costume, code of conduct, origin story deconstruction).\"\n  },\n  \"tone\": {\n    \"value\": [\n      \"gritty\",\n      \"dark\",\n      \"violent\",\n      \"intense\",\n      \"noir\",\n      \"tragicomic\",\n      \"bleak\"\n    ],\n    \"confidence\": 0.88,\n    \"rationale\": \"Gritty urban setting with ruined cities and no-go zones. Dark atmosphere with fires, gunshots, and brutal violence. Noir elements (shadowy lighting, morally complex characters, urban decay). Tragicomic moments (flare gun humor, AirTag revelation, blockchain explanation). Intense action sequences. Bleak worldbuilding (pandemic collapse, bank failures). Tragic undertone regarding father's abandonment and false heroic narrative.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 28,\n    \"confidence\": 0.75,\n    \"rationale\": \"Screenplay contains approximately 28 pages of formatted script based on scene headings, dialogue, and action descriptions. Using standard ~1 page per minute conversion yields ~28 minutes. However, action sequences and flashbacks may extend runtime slightly; actual duration likely 30-35 minutes depending on production choices.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\n      \"Mariner (Billy/Will)\",\n      \"Rose\",\n      \"Salvatori\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"Mariner is the clear protagonist with extensive character development, internal conflict, and narrative focus. Rose is co-protagonist driving plot and revealing crucial backstory. Salvatori is the primary antagonist introduced in final act as the central threat.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\n      \"Mariner's Dad\",\n      \"Thug 1\",\n      \"Thug 2\",\n      \"Thug 3\",\n      \"Rosco\",\n      \"Vinnie\",\n      \"Mikey\",\n      \"Carlos\"\n    ],\n    \"confidence\": 0.85,\n    \"rationale\": \"Mariner's Dad appears in multiple flashbacks as crucial to character motivation and thematic conflict. Multiple unnamed/named thugs (Rosco, Vinnie, Mikey, Carlos) serve as antagonistic forces throughout. These characters have limited dialogue/screen time but functional narrative roles.\"\n  },\n  \"location_count\": {\n    \"value\": 9,\n    \"confidence\": 0.8,\n    \"rationale\": \"Distinct locations: (1) City Centre exterior, (2) Ruddy & Greene Building front, (3) Ruddy & Greene Building rear/alley, (4) Elevator interior, (5) 11th floor corridor, (6) Stairwell, (7) 12th floor stairwell, (8) 13th floor corridor, (9) 15th floor office. Flashback locations (coastline, backyard) are separate but not counted as primary film locations.\"\n  },\n  \"locations_summary\": {\n    \"value\": \"Primary setting is a ruined urban environment in a post-collapse city (2025+). Main action occurs within the Ruddy & Greene Building, a 15-story sandstone structure serving as a gang headquarters. Locations include the building's exterior, rear alley, multiple interior floors (11th-15th), elevator, stairwells, and executive office. Flashback sequences set in coastal areas and residential backyard.\",\n    \"confidence\": 0.9,\n    \"rationale\": \"Screenplay explicitly describes city centre ruins, the Ruddy & Greene Building with specific floor details, and provides clear spatial geography through character movement. Flashback locations are distinct but secondary to main narrative setting.\"\n  },\n  \"target_audience\": {\n    \"value\": \"R (Restricted) / 15+ (depending on rating system)\",\n    \"confidence\": 0.8,\n    \"rationale\": \"Screenplay contains sustained violence (gunfire, brutal hand-to-hand combat, graphic descriptions like 'wet cracking sounds' and skull fragments), blood and gore, strong language ('Fuck,' 'shit,' 'ass'), and mature thematic content (organized crime, theft, abandonment). Not suitable for children; appropriate for mature teens and adults. Likely R-rated in MPAA system or 15+ in BBFC.\"\n  }\n}\n```",
          "tokenUsage": {
            "total": 6805,
            "prompt": 5518,
            "completion": 1287
          },
          "finishReason": "stop",
          "cost": 0.011953
        },
        "score": 0.75125,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.034014,
        "error": "Let me evaluate each field:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. ✅\n\n2. **Format**: Identified as 'short film' with 0.85 confidence. The rubric states this should be a feature film screenplay (~430 lines). The model estimated 15-18 pages, but a 430-line screenplay would be significantly longer. This is a notable error. ❌\n\n3. **Genre**: Includes action, crime, drama, thriller. The rubric asks for action, crime, and/or thriller - all present. ✅\n\n4. **Tone**: Captures dark, gritty, violent, brutal, intense, dystopian, fast-paced, stylized. Matches rubric criteria well. ✅\n\n5. **Duration**: Estimated 18 minutes. The rubric says 85-130 minutes is reasonable for a ~430-line screenplay. 18 minutes is drastically wrong, consistent with the incorrect 'short film' classification. ❌\n\n6. **Primary characters**: Identifies The Mariner (Billy MacAngus), Rose, and Salvatori. The rubric says The Mariner and Rose as leads. Salvatori is listed as primary but the rubric suggests he's supporting. Minor issue but the key leads are identified. ✅ (partial)\n\n7. **Supporting characters**: Lists Dad, Young Mariner, Rosco, Vinnie, Mikey, Carlos, and thugs. The rubric asks for Dad, Salvatori, Vinnie among supporting cast. Salvatori is misplaced as primary rather than supporting, but the others are present. ✅ (partial)\n\n8. **Location count**: Estimated 9 locations. The rubric says 5-20 is reasonable. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as primary setting, post-apocalyptic city, flashback locations. ✅\n\n10. **Target audience**: Correctly identified as R-rated mature content with strong rationale. ✅\n\n11. **Confidence calibration**: Most are reasonable, but the format confidence of 0.85 for an incorrect answer is poorly calibrated. The duration confidence of 0.8 is also too high for a very wrong answer.\n\n12. **Rationale quality**: Generally well-grounded in screenplay evidence, though the format/duration rationales are based on incorrect page count estimation.\n\nThe two major errors are format (short film vs. feature film) and duration (18 min vs. 85-130 min). These are significant misses that cascade from the same underlying error. The remaining 8 fields are largely accurate. Overall, about 8/12 criteria are met well, with 2 major failures and 2 partial successes.",
        "gradingResult": {
          "pass": false,
          "score": 0.725,
          "reason": "Let me evaluate each field:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. ✅\n\n2. **Format**: Identified as 'short film' with 0.85 confidence. The rubric states this should be a feature film screenplay (~430 lines). The model estimated 15-18 pages, but a 430-line screenplay would be significantly longer. This is a notable error. ❌\n\n3. **Genre**: Includes action, crime, drama, thriller. The rubric asks for action, crime, and/or thriller - all present. ✅\n\n4. **Tone**: Captures dark, gritty, violent, brutal, intense, dystopian, fast-paced, stylized. Matches rubric criteria well. ✅\n\n5. **Duration**: Estimated 18 minutes. The rubric says 85-130 minutes is reasonable for a ~430-line screenplay. 18 minutes is drastically wrong, consistent with the incorrect 'short film' classification. ❌\n\n6. **Primary characters**: Identifies The Mariner (Billy MacAngus), Rose, and Salvatori. The rubric says The Mariner and Rose as leads. Salvatori is listed as primary but the rubric suggests he's supporting. Minor issue but the key leads are identified. ✅ (partial)\n\n7. **Supporting characters**: Lists Dad, Young Mariner, Rosco, Vinnie, Mikey, Carlos, and thugs. The rubric asks for Dad, Salvatori, Vinnie among supporting cast. Salvatori is misplaced as primary rather than supporting, but the others are present. ✅ (partial)\n\n8. **Location count**: Estimated 9 locations. The rubric says 5-20 is reasonable. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as primary setting, post-apocalyptic city, flashback locations. ✅\n\n10. **Target audience**: Correctly identified as R-rated mature content with strong rationale. ✅\n\n11. **Confidence calibration**: Most are reasonable, but the format confidence of 0.85 for an incorrect answer is poorly calibrated. The duration confidence of 0.8 is also too high for a very wrong answer.\n\n12. **Rationale quality**: Generally well-grounded in screenplay evidence, though the format/duration rationales are based on incorrect page count estimation.\n\nThe two major errors are format (short film vs. feature film) and duration (18 min vs. 85-130 min). These are significant misses that cascade from the same underlying error. The remaining 8 fields are largely accurate. Overall, about 8/12 criteria are met well, with 2 major failures and 2 partial successes.",
          "namedScores": {},
          "tokensUsed": {
            "total": 2349,
            "prompt": 1658,
            "completion": 691,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.95,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=1.00, format_accuracy=1.00, genre_accuracy=1.00, json_valid=0.90, location_accuracy=0.80, title_accuracy=1.00, tone_accuracy=0.80",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": false,
              "score": 0.5,
              "reason": "Let me evaluate each field:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. ✅\n\n2. **Format**: Identified as 'short film' with 0.85 confidence. The rubric states this should be a feature film screenplay (~430 lines). The model estimated 15-18 pages, but a 430-line screenplay would be significantly longer. This is a notable error. ❌\n\n3. **Genre**: Includes action, crime, drama, thriller. The rubric asks for action, crime, and/or thriller - all present. ✅\n\n4. **Tone**: Captures dark, gritty, violent, brutal, intense, dystopian, fast-paced, stylized. Matches rubric criteria well. ✅\n\n5. **Duration**: Estimated 18 minutes. The rubric says 85-130 minutes is reasonable for a ~430-line screenplay. 18 minutes is drastically wrong, consistent with the incorrect 'short film' classification. ❌\n\n6. **Primary characters**: Identifies The Mariner (Billy MacAngus), Rose, and Salvatori. The rubric says The Mariner and Rose as leads. Salvatori is listed as primary but the rubric suggests he's supporting. Minor issue but the key leads are identified. ✅ (partial)\n\n7. **Supporting characters**: Lists Dad, Young Mariner, Rosco, Vinnie, Mikey, Carlos, and thugs. The rubric asks for Dad, Salvatori, Vinnie among supporting cast. Salvatori is misplaced as primary rather than supporting, but the others are present. ✅ (partial)\n\n8. **Location count**: Estimated 9 locations. The rubric says 5-20 is reasonable. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as primary setting, post-apocalyptic city, flashback locations. ✅\n\n10. **Target audience**: Correctly identified as R-rated mature content with strong rationale. ✅\n\n11. **Confidence calibration**: Most are reasonable, but the format confidence of 0.85 for an incorrect answer is poorly calibrated. The duration confidence of 0.8 is also too high for a very wrong answer.\n\n12. **Rationale quality**: Generally well-grounded in screenplay evidence, though the format/duration rationales are based on incorrect page count estimation.\n\nThe two major errors are format (short film vs. feature film) and duration (18 min vs. 85-130 min). These are significant misses that cascade from the same underlying error. The remaining 8 fields are largely accurate. Overall, about 8/12 criteria are met well, with 2 major failures and 2 partial successes.",
              "tokensUsed": {
                "total": 2349,
                "prompt": 1658,
                "completion": 691,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n```json\\n{\\n  \\\"title\\\": {\\n    \\\"value\\\": \\\"The Mariner\\\",\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"The title 'The Mariner' appears prominently at the beginning of the screenplay and is reinforced by a full-screen superimposed title card introducing the main character.\\\"\\n  },\\n  \\\"format\\\": {\\n    \\\"value\\\": \\\"short film\\\",\\n    \\\"confidence\\\": 0.85,\\n    \\\"rationale\\\": \\\"The screenplay is approximately 15-18 pages based on scene count and dialogue density. It follows a single, contained narrative arc within one location (the building rescue), with limited character development and a focused action sequence. While it has feature film production values, the compressed storytelling and single-location focus suggest a short film format.\\\"\\n  },\\n  \\\"genre\\\": {\\n    \\\"value\\\": [\\\"action\\\", \\\"crime\\\", \\\"drama\\\", \\\"thriller\\\"],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"Action is evident through extensive fight sequences, gunfire, and physical combat. Crime elements include gang activity, theft of $20 million, and organized criminal operations. Drama is present in the family backstory and emotional revelations about the father. Thriller aspects include the tense rescue mission, elevator ambushes, and life-threatening confrontations.\\\"\\n  },\\n  \\\"tone\\\": {\\n    \\\"value\\\": [\\\"dark\\\", \\\"gritty\\\", \\\"violent\\\", \\\"brutal\\\", \\\"intense\\\", \\\"dystopian\\\", \\\"fast-paced\\\", \\\"stylized\\\"],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"Dark and gritty tone established through the post-apocalyptic urban setting with ruined buildings and no-go zones. Violent and brutal combat with explicit descriptions of skull fragments, blood, and graphic violence. Intense pacing through continuous action sequences. Dystopian atmosphere from the 2025 economic collapse backstory. Stylized through the protagonist's theatrical costume and comic-book-like presentation.\\\"\\n  },\\n  \\\"estimated_duration_minutes\\\": {\\n    \\\"value\\\": 18,\\n    \\\"confidence\\\": 0.8,\\n    \\\"rationale\\\": \\\"Based on standard screenplay formatting of approximately 1 page per minute, and counting the scenes, dialogue exchanges, and action sequences, the screenplay appears to be roughly 15-18 pages, suggesting an 18-minute runtime for a short film.\\\"\\n  },\\n  \\\"primary_characters\\\": {\\n    \\\"value\\\": [\\\"The Mariner (Billy MacAngus)\\\", \\\"Rose\\\", \\\"Salvatori\\\"],\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"The Mariner/Billy is the protagonist with extensive screen time, character development, and flashbacks. Rose is the deuteragonist who drives the plot and provides the emotional climax. Salvatori is the primary antagonist who appears in the final confrontation.\\\"\\n  },\\n  \\\"supporting_characters\\\": {\\n    \\\"value\\\": [\\\"Dad\\\", \\\"Young Mariner\\\", \\\"Rosco\\\", \\\"Vinnie\\\", \\\"Mikey\\\", \\\"Carlos\\\", \\\"Thug 1\\\", \\\"Thug 2\\\", \\\"Thug 3\\\"],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"Dad and Young Mariner appear in multiple flashback sequences that are crucial to character development. Rosco has a named speaking role with plot-relevant dialogue. Vinnie, Mikey, and Carlos are named thugs with dialogue and action sequences. Other thugs are numbered but have minimal roles.\\\"\\n  },\\n  \\\"location_count\\\": {\\n    \\\"value\\\": 9,\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"Distinct locations include: 1) City Centre exterior, 2) Ruddy & Greene Building front, 3) Building rear/alley, 4) Elevator, 5) 11th floor, 6) 12th floor stairwell, 7) 13th floor corridor, 8) 15th floor/office, 9) Flashback locations (coastline, backyard). The building interiors could be consolidated, but different floors serve as distinct narrative spaces.\\\"\\n  },\\n  \\\"locations_summary\\\": {\\n    \\\"value\\\": \\\"Post-apocalyptic ruined city in 2025; primarily set inside the Ruddy & Greene Building, a 15-story sandstone structure with luxury penthouse office on top floor; flashback sequences to coastal areas and suburban backyard from the protagonist's childhood\\\",\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"The screenplay clearly establishes the dystopian urban setting and focuses action within a single building with multiple floors. Flashbacks provide contrasting pastoral/suburban settings that inform character backstory.\\\"\\n  },\\n  \\\"target_audience\\\": {\\n    \\\"value\\\": \\\"R\\\",\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"The screenplay contains extreme graphic violence (skull fragments, explicit gore, brutal combat), strong language throughout, adult themes including organized crime and theft, and intense action sequences. The violence is described in explicit detail ('wet cracking sounds,' skull fragments, burning flare in chest). This clearly warrants an R rating for mature audiences.\\\"\\n  }\\n}\\n```\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "d21c71a3-5ea3-4ef1-9efb-f356bc2094c3",
        "latencyMs": 25966,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "promptIdx": 7,
        "provider": {
          "id": "anthropic:messages:claude-sonnet-4-5-20250929",
          "label": "Claude Sonnet 4.5"
        },
        "response": {
          "output": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The title 'The Mariner' appears prominently at the beginning of the screenplay and is reinforced by a full-screen superimposed title card introducing the main character.\"\n  },\n  \"format\": {\n    \"value\": \"short film\",\n    \"confidence\": 0.85,\n    \"rationale\": \"The screenplay is approximately 15-18 pages based on scene count and dialogue density. It follows a single, contained narrative arc within one location (the building rescue), with limited character development and a focused action sequence. While it has feature film production values, the compressed storytelling and single-location focus suggest a short film format.\"\n  },\n  \"genre\": {\n    \"value\": [\"action\", \"crime\", \"drama\", \"thriller\"],\n    \"confidence\": 0.95,\n    \"rationale\": \"Action is evident through extensive fight sequences, gunfire, and physical combat. Crime elements include gang activity, theft of $20 million, and organized criminal operations. Drama is present in the family backstory and emotional revelations about the father. Thriller aspects include the tense rescue mission, elevator ambushes, and life-threatening confrontations.\"\n  },\n  \"tone\": {\n    \"value\": [\"dark\", \"gritty\", \"violent\", \"brutal\", \"intense\", \"dystopian\", \"fast-paced\", \"stylized\"],\n    \"confidence\": 0.95,\n    \"rationale\": \"Dark and gritty tone established through the post-apocalyptic urban setting with ruined buildings and no-go zones. Violent and brutal combat with explicit descriptions of skull fragments, blood, and graphic violence. Intense pacing through continuous action sequences. Dystopian atmosphere from the 2025 economic collapse backstory. Stylized through the protagonist's theatrical costume and comic-book-like presentation.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 18,\n    \"confidence\": 0.8,\n    \"rationale\": \"Based on standard screenplay formatting of approximately 1 page per minute, and counting the scenes, dialogue exchanges, and action sequences, the screenplay appears to be roughly 15-18 pages, suggesting an 18-minute runtime for a short film.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\"The Mariner (Billy MacAngus)\", \"Rose\", \"Salvatori\"],\n    \"confidence\": 1.0,\n    \"rationale\": \"The Mariner/Billy is the protagonist with extensive screen time, character development, and flashbacks. Rose is the deuteragonist who drives the plot and provides the emotional climax. Salvatori is the primary antagonist who appears in the final confrontation.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\"Dad\", \"Young Mariner\", \"Rosco\", \"Vinnie\", \"Mikey\", \"Carlos\", \"Thug 1\", \"Thug 2\", \"Thug 3\"],\n    \"confidence\": 0.95,\n    \"rationale\": \"Dad and Young Mariner appear in multiple flashback sequences that are crucial to character development. Rosco has a named speaking role with plot-relevant dialogue. Vinnie, Mikey, and Carlos are named thugs with dialogue and action sequences. Other thugs are numbered but have minimal roles.\"\n  },\n  \"location_count\": {\n    \"value\": 9,\n    \"confidence\": 0.9,\n    \"rationale\": \"Distinct locations include: 1) City Centre exterior, 2) Ruddy & Greene Building front, 3) Building rear/alley, 4) Elevator, 5) 11th floor, 6) 12th floor stairwell, 7) 13th floor corridor, 8) 15th floor/office, 9) Flashback locations (coastline, backyard). The building interiors could be consolidated, but different floors serve as distinct narrative spaces.\"\n  },\n  \"locations_summary\": {\n    \"value\": \"Post-apocalyptic ruined city in 2025; primarily set inside the Ruddy & Greene Building, a 15-story sandstone structure with luxury penthouse office on top floor; flashback sequences to coastal areas and suburban backyard from the protagonist's childhood\",\n    \"confidence\": 0.95,\n    \"rationale\": \"The screenplay clearly establishes the dystopian urban setting and focuses action within a single building with multiple floors. Flashbacks provide contrasting pastoral/suburban settings that inform character backstory.\"\n  },\n  \"target_audience\": {\n    \"value\": \"R\",\n    \"confidence\": 0.95,\n    \"rationale\": \"The screenplay contains extreme graphic violence (skull fragments, explicit gore, brutal combat), strong language throughout, adult themes including organized crime and theft, and intense action sequences. The violence is described in explicit detail ('wet cracking sounds,' skull fragments, burning flare in chest). This clearly warrants an R rating for mature audiences.\"\n  }\n}\n```",
          "tokenUsage": {
            "total": 6682,
            "prompt": 5518,
            "completion": 1164
          },
          "finishReason": "stop",
          "cost": 0.034014
        },
        "score": 0.725,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.0106773,
        "error": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. ✅\n\n2. **Format**: Identified as 'short film' (7 pages). The rubric says it should be identified as a 'feature film screenplay' (~430 lines). This is a significant error. The model seems to have miscounted or misinterpreted the screenplay length. A 430-line screenplay would be much longer than 7 pages. ❌\n\n3. **Genre**: Includes action, crime, thriller, drama, and sci-fi. The rubric asks for action, crime, and/or thriller - all present. The inclusion of sci-fi is debatable but not unreasonable given dystopian elements. ✅\n\n4. **Tone**: Captures dark, gritty, violent, intense, bleak, fast-paced, suspenseful. Matches rubric expectations well. ✅\n\n5. **Duration**: Estimated at 7 minutes. The rubric expects 85-130 minutes for a ~430-line screenplay. This is drastically wrong, directly tied to the format misidentification. ❌\n\n6. **Primary characters**: Identifies Mariner and Rose as leads (also Salvatori as primary). The rubric confirms Mariner and Rose as leads. ✅ (though Salvatori might be better as supporting)\n\n7. **Supporting characters**: Lists Dad, Rosco, Vinnie, Mikey, Carlos, Thugs 1-3. The rubric mentions Dad, Salvatori, and Vinnie should be among supporting. Dad and Vinnie are listed; Salvatori is listed as primary instead of supporting, which is a minor classification difference. Mostly ✅\n\n8. **Location count**: Estimated at 9, which falls within the 5-20 range. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, along with flashback locations. ✅\n\n10. **Target audience**: Correctly identified as adult/mature content (17+, R-rated) with appropriate evidence. ✅\n\n11. **Confidence calibration**: The format confidence of 0.9 is poorly calibrated given it's wrong. Other confidences seem reasonable.\n\n12. **Rationale quality**: Rationales are generally well-grounded in screenplay evidence, though the format/duration rationale is based on an incorrect page count assessment.\n\nThe major failures are the format (short film vs. feature film) and duration (7 min vs. 85-130 min), which are significant metadata errors. These are two of the most important fields. Most other fields are accurate and well-supported.",
        "gradingResult": {
          "pass": false,
          "score": 0.69005,
          "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. ✅\n\n2. **Format**: Identified as 'short film' (7 pages). The rubric says it should be identified as a 'feature film screenplay' (~430 lines). This is a significant error. The model seems to have miscounted or misinterpreted the screenplay length. A 430-line screenplay would be much longer than 7 pages. ❌\n\n3. **Genre**: Includes action, crime, thriller, drama, and sci-fi. The rubric asks for action, crime, and/or thriller - all present. The inclusion of sci-fi is debatable but not unreasonable given dystopian elements. ✅\n\n4. **Tone**: Captures dark, gritty, violent, intense, bleak, fast-paced, suspenseful. Matches rubric expectations well. ✅\n\n5. **Duration**: Estimated at 7 minutes. The rubric expects 85-130 minutes for a ~430-line screenplay. This is drastically wrong, directly tied to the format misidentification. ❌\n\n6. **Primary characters**: Identifies Mariner and Rose as leads (also Salvatori as primary). The rubric confirms Mariner and Rose as leads. ✅ (though Salvatori might be better as supporting)\n\n7. **Supporting characters**: Lists Dad, Rosco, Vinnie, Mikey, Carlos, Thugs 1-3. The rubric mentions Dad, Salvatori, and Vinnie should be among supporting. Dad and Vinnie are listed; Salvatori is listed as primary instead of supporting, which is a minor classification difference. Mostly ✅\n\n8. **Location count**: Estimated at 9, which falls within the 5-20 range. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, along with flashback locations. ✅\n\n10. **Target audience**: Correctly identified as adult/mature content (17+, R-rated) with appropriate evidence. ✅\n\n11. **Confidence calibration**: The format confidence of 0.9 is poorly calibrated given it's wrong. Other confidences seem reasonable.\n\n12. **Rationale quality**: Rationales are generally well-grounded in screenplay evidence, though the format/duration rationale is based on an incorrect page count assessment.\n\nThe major failures are the format (short film vs. feature film) and duration (7 min vs. 85-130 min), which are significant metadata errors. These are two of the most important fields. Most other fields are accurate and well-supported.",
          "namedScores": {},
          "tokensUsed": {
            "total": 2294,
            "prompt": 1626,
            "completion": 668,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.8801,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=0.10, format_accuracy=1.00, genre_accuracy=1.00, json_valid=0.90, location_accuracy=1.00, title_accuracy=1.00, tone_accuracy=0.80",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": false,
              "score": 0.5,
              "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. ✅\n\n2. **Format**: Identified as 'short film' (7 pages). The rubric says it should be identified as a 'feature film screenplay' (~430 lines). This is a significant error. The model seems to have miscounted or misinterpreted the screenplay length. A 430-line screenplay would be much longer than 7 pages. ❌\n\n3. **Genre**: Includes action, crime, thriller, drama, and sci-fi. The rubric asks for action, crime, and/or thriller - all present. The inclusion of sci-fi is debatable but not unreasonable given dystopian elements. ✅\n\n4. **Tone**: Captures dark, gritty, violent, intense, bleak, fast-paced, suspenseful. Matches rubric expectations well. ✅\n\n5. **Duration**: Estimated at 7 minutes. The rubric expects 85-130 minutes for a ~430-line screenplay. This is drastically wrong, directly tied to the format misidentification. ❌\n\n6. **Primary characters**: Identifies Mariner and Rose as leads (also Salvatori as primary). The rubric confirms Mariner and Rose as leads. ✅ (though Salvatori might be better as supporting)\n\n7. **Supporting characters**: Lists Dad, Rosco, Vinnie, Mikey, Carlos, Thugs 1-3. The rubric mentions Dad, Salvatori, and Vinnie should be among supporting. Dad and Vinnie are listed; Salvatori is listed as primary instead of supporting, which is a minor classification difference. Mostly ✅\n\n8. **Location count**: Estimated at 9, which falls within the 5-20 range. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, along with flashback locations. ✅\n\n10. **Target audience**: Correctly identified as adult/mature content (17+, R-rated) with appropriate evidence. ✅\n\n11. **Confidence calibration**: The format confidence of 0.9 is poorly calibrated given it's wrong. Other confidences seem reasonable.\n\n12. **Rationale quality**: Rationales are generally well-grounded in screenplay evidence, though the format/duration rationale is based on an incorrect page count assessment.\n\nThe major failures are the format (short film vs. feature film) and duration (7 min vs. 85-130 min), which are significant metadata errors. These are two of the most important fields. Most other fields are accurate and well-supported.",
              "tokensUsed": {
                "total": 2294,
                "prompt": 1626,
                "completion": 668,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n```json\\n{\\n  \\\"title\\\": {\\n    \\\"value\\\": \\\"The Mariner\\\",\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"The title is explicitly stated at the very beginning of the screenplay.\\\"\\n  },\\n  \\\"format\\\": {\\n    \\\"value\\\": \\\"short film\\\",\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"The screenplay is 7 pages long, which typically corresponds to a runtime of approximately 7 minutes, fitting the standard length for a short film. It presents a contained narrative arc suitable for this format.\\\"\\n  },\\n  \\\"genre\\\": {\\n    \\\"value\\\": [\\n      \\\"action\\\",\\n      \\\"crime\\\",\\n      \\\"drama\\\",\\n      \\\"thriller\\\",\\n      \\\"sci-fi\\\"\\n    ],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"The screenplay features clear action sequences (gunfights, physical combat, chases), a crime plot involving stolen gang money, dramatic character revelations and internal conflict, thriller elements of suspense and danger, and a near-future dystopian setting with technological elements (blockchain, AirTag, societal collapse) that lean into sci-fi.\\\"\\n  },\\n  \\\"tone\\\": {\\n    \\\"value\\\": [\\n      \\\"dark\\\",\\n      \\\"intense\\\",\\n      \\\"gritty\\\",\\n      \\\"violent\\\",\\n      \\\"bleak\\\",\\n      \\\"fast-paced\\\",\\n      \\\"suspenseful\\\"\\n    ],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"The setting is a ruined, dystopian city, creating a dark and bleak atmosphere. The narrative is filled with intense, fast-paced action and brutal violence ('wet cracking sounds,' 'grisly bit,' 'cracks their heads together'). Suspense is built through chases and confrontations.\\\"\\n  },\\n  \\\"estimated_duration_minutes\\\": {\\n    \\\"value\\\": 7,\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"Based on the industry standard of approximately one minute of screen time per page of screenplay, a 7-page script estimates to a 7-minute duration.\\\"\\n  },\\n  \\\"primary_characters\\\": {\\n    \\\"value\\\": [\\n      \\\"Mariner (Billy)\\\",\\n      \\\"Rose\\\",\\n      \\\"Salvatori\\\"\\n    ],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"Mariner is the clear protagonist with a significant internal conflict, Rose is the co-protagonist driving the immediate objective and revealing crucial backstory, and Salvatori is the primary antagonist directly confronting them.\\\"\\n  },\\n  \\\"supporting_characters\\\": {\\n    \\\"value\\\": [\\n      \\\"Dad\\\",\\n      \\\"Rosco\\\",\\n      \\\"Vinnie\\\",\\n      \\\"Mikey\\\",\\n      \\\"Carlos\\\",\\n      \\\"Thug 1\\\",\\n      \\\"Thug 2\\\",\\n      \\\"Thug 3\\\"\\n    ],\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"Dad is a pivotal character in flashbacks, shaping Mariner's identity. Rosco, Vinnie, Mikey, and Carlos are named or distinct thugs who interact directly with the protagonists, while Thugs 1-3 are more generic but still play a role in the narrative.\\\"\\n  },\\n  \\\"location_count\\\": {\\n    \\\"value\\\": 9,\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"The screenplay features 9 distinct physical locations: the ruined City Centre, the exterior of the Ruddy & Greene Building, the Ruddy & Greene Building's elevator, 11th floor, stairwell (including 12th floor mention), 13th floor, and 15th floor (Salvatori's office), plus two flashback locations: a coastline and a backyard.\\\"\\n  },\\n  \\\"locations_summary\\\": {\\n    \\\"value\\\": \\\"A ruined, dystopian city center, including the exterior and various floors (elevator, 11th, 13th, 15th, stairwells) of the Ruddy & Greene Building, and flashback locations of a serene coastline and a neglected backyard.\\\",\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"This summary combines the primary present-day setting (a post-collapse urban environment and specific interiors of a key building) with the two distinct flashback settings, providing a comprehensive overview of the story's locales.\\\"\\n  },\\n  \\\"target_audience\\\": {\\n    \\\"value\\\": \\\"Adults (17+), R-rated\\\",\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"The screenplay contains graphic violence ('wet cracking sounds,' 'skull,' 'bloody oar,' 'cracks their heads together'), mature themes of crime, family trauma, and a bleak dystopian setting, along with strong language ('shit,' 'fuck sakes,' 'assholes'), making it suitable for an adult audience (R-rated).\\\"\\n  }\\n}\\n```\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "0647632b-c1e0-4a9b-8cac-a510c0471b01",
        "latencyMs": 15192,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "promptIdx": 9,
        "provider": {
          "id": "google:gemini-2.5-flash",
          "label": "Gemini 2.5 Flash"
        },
        "response": {
          "output": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The title is explicitly stated at the very beginning of the screenplay.\"\n  },\n  \"format\": {\n    \"value\": \"short film\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay is 7 pages long, which typically corresponds to a runtime of approximately 7 minutes, fitting the standard length for a short film. It presents a contained narrative arc suitable for this format.\"\n  },\n  \"genre\": {\n    \"value\": [\n      \"action\",\n      \"crime\",\n      \"drama\",\n      \"thriller\",\n      \"sci-fi\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"The screenplay features clear action sequences (gunfights, physical combat, chases), a crime plot involving stolen gang money, dramatic character revelations and internal conflict, thriller elements of suspense and danger, and a near-future dystopian setting with technological elements (blockchain, AirTag, societal collapse) that lean into sci-fi.\"\n  },\n  \"tone\": {\n    \"value\": [\n      \"dark\",\n      \"intense\",\n      \"gritty\",\n      \"violent\",\n      \"bleak\",\n      \"fast-paced\",\n      \"suspenseful\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"The setting is a ruined, dystopian city, creating a dark and bleak atmosphere. The narrative is filled with intense, fast-paced action and brutal violence ('wet cracking sounds,' 'grisly bit,' 'cracks their heads together'). Suspense is built through chases and confrontations.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 7,\n    \"confidence\": 0.9,\n    \"rationale\": \"Based on the industry standard of approximately one minute of screen time per page of screenplay, a 7-page script estimates to a 7-minute duration.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\n      \"Mariner (Billy)\",\n      \"Rose\",\n      \"Salvatori\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"Mariner is the clear protagonist with a significant internal conflict, Rose is the co-protagonist driving the immediate objective and revealing crucial backstory, and Salvatori is the primary antagonist directly confronting them.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\n      \"Dad\",\n      \"Rosco\",\n      \"Vinnie\",\n      \"Mikey\",\n      \"Carlos\",\n      \"Thug 1\",\n      \"Thug 2\",\n      \"Thug 3\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"Dad is a pivotal character in flashbacks, shaping Mariner's identity. Rosco, Vinnie, Mikey, and Carlos are named or distinct thugs who interact directly with the protagonists, while Thugs 1-3 are more generic but still play a role in the narrative.\"\n  },\n  \"location_count\": {\n    \"value\": 9,\n    \"confidence\": 0.95,\n    \"rationale\": \"The screenplay features 9 distinct physical locations: the ruined City Centre, the exterior of the Ruddy & Greene Building, the Ruddy & Greene Building's elevator, 11th floor, stairwell (including 12th floor mention), 13th floor, and 15th floor (Salvatori's office), plus two flashback locations: a coastline and a backyard.\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A ruined, dystopian city center, including the exterior and various floors (elevator, 11th, 13th, 15th, stairwells) of the Ruddy & Greene Building, and flashback locations of a serene coastline and a neglected backyard.\",\n    \"confidence\": 0.95,\n    \"rationale\": \"This summary combines the primary present-day setting (a post-collapse urban environment and specific interiors of a key building) with the two distinct flashback settings, providing a comprehensive overview of the story's locales.\"\n  },\n  \"target_audience\": {\n    \"value\": \"Adults (17+), R-rated\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay contains graphic violence ('wet cracking sounds,' 'skull,' 'bloody oar,' 'cracks their heads together'), mature themes of crime, family trauma, and a bleak dystopian setting, along with strong language ('shit,' 'fuck sakes,' 'assholes'), making it suitable for an adult audience (R-rated).\"\n  }\n}\n```",
          "tokenUsage": {
            "prompt": 5016,
            "completion": 1065,
            "total": 8685,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 2604,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cost": 0.0106773,
          "raw": {
            "candidates": [
              {
                "content": {
                  "parts": [
                    {
                      "text": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The title is explicitly stated at the very beginning of the screenplay.\"\n  },\n  \"format\": {\n    \"value\": \"short film\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay is 7 pages long, which typically corresponds to a runtime of approximately 7 minutes, fitting the standard length for a short film. It presents a contained narrative arc suitable for this format.\"\n  },\n  \"genre\": {\n    \"value\": [\n      \"action\",\n      \"crime\",\n      \"drama\",\n      \"thriller\",\n      \"sci-fi\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"The screenplay features clear action sequences (gunfights, physical combat, chases), a crime plot involving stolen gang money, dramatic character revelations and internal conflict, thriller elements of suspense and danger, and a near-future dystopian setting with technological elements (blockchain, AirTag, societal collapse) that lean into sci-fi.\"\n  },\n  \"tone\": {\n    \"value\": [\n      \"dark\",\n      \"intense\",\n      \"gritty\",\n      \"violent\",\n      \"bleak\",\n      \"fast-paced\",\n      \"suspenseful\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"The setting is a ruined, dystopian city, creating a dark and bleak atmosphere. The narrative is filled with intense, fast-paced action and brutal violence ('wet cracking sounds,' 'grisly bit,' 'cracks their heads together'). Suspense is built through chases and confrontations.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 7,\n    \"confidence\": 0.9,\n    \"rationale\": \"Based on the industry standard of approximately one minute of screen time per page of screenplay, a 7-page script estimates to a 7-minute duration.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\n      \"Mariner (Billy)\",\n      \"Rose\",\n      \"Salvatori\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"Mariner is the clear protagonist with a significant internal conflict, Rose is the co-protagonist driving the immediate objective and revealing crucial backstory, and Salvatori is the primary antagonist directly confronting them.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\n      \"Dad\",\n      \"Rosco\",\n      \"Vinnie\",\n      \"Mikey\",\n      \"Carlos\",\n      \"Thug 1\",\n      \"Thug 2\",\n      \"Thug 3\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"Dad is a pivotal character in flashbacks, shaping Mariner's identity. Rosco, Vinnie, Mikey, and Carlos are named or distinct thugs who interact directly with the protagonists, while Thugs 1-3 are more generic but still play a role in the narrative.\"\n  },\n  \"location_count\": {\n    \"value\": 9,\n    \"confidence\": 0.95,\n    \"rationale\": \"The screenplay features 9 distinct physical locations: the ruined City Centre, the exterior of the Ruddy & Greene Building, the Ruddy & Greene Building's elevator, 11th floor, stairwell (including 12th floor mention), 13th floor, and 15th floor (Salvatori's office), plus two flashback locations: a coastline and a backyard.\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A ruined, dystopian city center, including the exterior and various floors (elevator, 11th, 13th, 15th, stairwells) of the Ruddy & Greene Building, and flashback locations of a serene coastline and a neglected backyard.\",\n    \"confidence\": 0.95,\n    \"rationale\": \"This summary combines the primary present-day setting (a post-collapse urban environment and specific interiors of a key building) with the two distinct flashback settings, providing a comprehensive overview of the story's locales.\"\n  },\n  \"target_audience\": {\n    \"value\": \"Adults (17+), R-rated\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay contains graphic violence ('wet cracking sounds,' 'skull,' 'bloody oar,' 'cracks their heads together'), mature themes of crime, family trauma, and a bleak dystopian setting, along with strong language ('shit,' 'fuck sakes,' 'assholes'), making it suitable for an adult audience (R-rated).\"\n  }\n}\n```"
                    }
                  ],
                  "role": "model"
                },
                "finishReason": "STOP",
                "index": 0
              }
            ],
            "usageMetadata": {
              "promptTokenCount": 5016,
              "candidatesTokenCount": 1065,
              "totalTokenCount": 8685,
              "promptTokensDetails": [
                {
                  "modality": "TEXT",
                  "tokenCount": 5016
                }
              ],
              "thoughtsTokenCount": 2604
            },
            "modelVersion": "gemini-2.5-flash",
            "responseId": "8LikaevKKaScqtsPoab2eA"
          },
          "cached": false,
          "metadata": {}
        },
        "score": 0.69005,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.008945999999999999,
        "error": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. ✅\n\n2. **Format**: Identified as 'short film' rather than 'feature film'. The rubric states it should be identified as a feature film screenplay, and the duration estimate of 85-130 minutes is given as the expected range. The model estimated 10 minutes and called it a short film. This is a significant miss. ❌\n\n3. **Genre**: Includes action, crime, thriller, drama, and sci-fi. The rubric asks for action, crime, and/or thriller, all of which are present. ✅\n\n4. **Tone**: Captures dark, gritty, violent, dystopian, intense, stylized. Excellent coverage. ✅\n\n5. **Duration**: Estimated 10 minutes, but the rubric says 85-130 minutes is the reasonable range for a ~430-line screenplay. This is wildly off. The model claimed ~1,400 words / 8-10 pages, but the actual screenplay appears to be much longer. Major miss. ❌\n\n6. **Primary characters**: Identifies The Mariner and Rose as leads, plus Salvatori. The rubric asks for Mariner and Rose as leads. ✅\n\n7. **Supporting characters**: Lists Dad, Salvatori (though placed as primary), Vinnie, Rosco, Mikey, Carlos, and thugs. The rubric asks for Dad, Salvatori, and Vinnie among supporting cast. Salvatori is listed as primary rather than supporting, but Dad and Vinnie are correctly listed as supporting. Partial credit. ⚠️\n\n8. **Location count**: Estimated 10, which falls within the 5-20 range. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, along with the vertical progression through the building. ✅\n\n10. **Target audience**: Correctly identified as adult/mature content (R-rated / TV-MA). ✅\n\n11. **Confidence calibration**: The format confidence of 0.85 for 'short film' is poorly calibrated since it's wrong. Duration confidence of 0.8 is also poorly calibrated. Other confidences seem reasonable. ⚠️\n\n12. **Rationale quality**: Rationales are generally well-written and grounded in evidence, though the format and duration rationales are based on incorrect assumptions about the screenplay's length. ⚠️\n\nThe two major failures are format (short film vs. feature film) and duration (10 min vs. 85-130 min). These are fundamental metadata errors that would significantly impact project planning. However, most other fields are accurate and well-supported. The format/duration errors are interconnected and stem from the same misestimation of the screenplay's length.",
        "gradingResult": {
          "pass": false,
          "score": 0.7150000000000001,
          "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. ✅\n\n2. **Format**: Identified as 'short film' rather than 'feature film'. The rubric states it should be identified as a feature film screenplay, and the duration estimate of 85-130 minutes is given as the expected range. The model estimated 10 minutes and called it a short film. This is a significant miss. ❌\n\n3. **Genre**: Includes action, crime, thriller, drama, and sci-fi. The rubric asks for action, crime, and/or thriller, all of which are present. ✅\n\n4. **Tone**: Captures dark, gritty, violent, dystopian, intense, stylized. Excellent coverage. ✅\n\n5. **Duration**: Estimated 10 minutes, but the rubric says 85-130 minutes is the reasonable range for a ~430-line screenplay. This is wildly off. The model claimed ~1,400 words / 8-10 pages, but the actual screenplay appears to be much longer. Major miss. ❌\n\n6. **Primary characters**: Identifies The Mariner and Rose as leads, plus Salvatori. The rubric asks for Mariner and Rose as leads. ✅\n\n7. **Supporting characters**: Lists Dad, Salvatori (though placed as primary), Vinnie, Rosco, Mikey, Carlos, and thugs. The rubric asks for Dad, Salvatori, and Vinnie among supporting cast. Salvatori is listed as primary rather than supporting, but Dad and Vinnie are correctly listed as supporting. Partial credit. ⚠️\n\n8. **Location count**: Estimated 10, which falls within the 5-20 range. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, along with the vertical progression through the building. ✅\n\n10. **Target audience**: Correctly identified as adult/mature content (R-rated / TV-MA). ✅\n\n11. **Confidence calibration**: The format confidence of 0.85 for 'short film' is poorly calibrated since it's wrong. Duration confidence of 0.8 is also poorly calibrated. Other confidences seem reasonable. ⚠️\n\n12. **Rationale quality**: Rationales are generally well-written and grounded in evidence, though the format and duration rationales are based on incorrect assumptions about the screenplay's length. ⚠️\n\nThe two major failures are format (short film vs. feature film) and duration (10 min vs. 85-130 min). These are fundamental metadata errors that would significantly impact project planning. However, most other fields are accurate and well-supported. The format/duration errors are interconnected and stem from the same misestimation of the screenplay's length.",
          "namedScores": {},
          "tokensUsed": {
            "total": 2316,
            "prompt": 1602,
            "completion": 714,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.93,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=1.00, format_accuracy=1.00, genre_accuracy=1.00, json_valid=0.90, location_accuracy=0.60, title_accuracy=1.00, tone_accuracy=0.80",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": false,
              "score": 0.5,
              "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. ✅\n\n2. **Format**: Identified as 'short film' rather than 'feature film'. The rubric states it should be identified as a feature film screenplay, and the duration estimate of 85-130 minutes is given as the expected range. The model estimated 10 minutes and called it a short film. This is a significant miss. ❌\n\n3. **Genre**: Includes action, crime, thriller, drama, and sci-fi. The rubric asks for action, crime, and/or thriller, all of which are present. ✅\n\n4. **Tone**: Captures dark, gritty, violent, dystopian, intense, stylized. Excellent coverage. ✅\n\n5. **Duration**: Estimated 10 minutes, but the rubric says 85-130 minutes is the reasonable range for a ~430-line screenplay. This is wildly off. The model claimed ~1,400 words / 8-10 pages, but the actual screenplay appears to be much longer. Major miss. ❌\n\n6. **Primary characters**: Identifies The Mariner and Rose as leads, plus Salvatori. The rubric asks for Mariner and Rose as leads. ✅\n\n7. **Supporting characters**: Lists Dad, Salvatori (though placed as primary), Vinnie, Rosco, Mikey, Carlos, and thugs. The rubric asks for Dad, Salvatori, and Vinnie among supporting cast. Salvatori is listed as primary rather than supporting, but Dad and Vinnie are correctly listed as supporting. Partial credit. ⚠️\n\n8. **Location count**: Estimated 10, which falls within the 5-20 range. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, along with the vertical progression through the building. ✅\n\n10. **Target audience**: Correctly identified as adult/mature content (R-rated / TV-MA). ✅\n\n11. **Confidence calibration**: The format confidence of 0.85 for 'short film' is poorly calibrated since it's wrong. Duration confidence of 0.8 is also poorly calibrated. Other confidences seem reasonable. ⚠️\n\n12. **Rationale quality**: Rationales are generally well-written and grounded in evidence, though the format and duration rationales are based on incorrect assumptions about the screenplay's length. ⚠️\n\nThe two major failures are format (short film vs. feature film) and duration (10 min vs. 85-130 min). These are fundamental metadata errors that would significantly impact project planning. However, most other fields are accurate and well-supported. The format/duration errors are interconnected and stem from the same misestimation of the screenplay's length.",
              "tokensUsed": {
                "total": 2316,
                "prompt": 1602,
                "completion": 714,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n```json\\n{\\n  \\\"title\\\": {\\n    \\\"value\\\": \\\"The Mariner\\\",\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"The title is explicitly stated at the beginning of the screenplay and on a superimposed title card within the text.\\\"\\n  },\\n  \\\"format\\\": {\\n    \\\"value\\\": \\\"short film\\\",\\n    \\\"confidence\\\": 0.85,\\n    \\\"rationale\\\": \\\"The screenplay follows a concise narrative arc—a rescue mission that serves as a deconstruction of the protagonist's origin story—concluding on a thematic resolution. While it could serve as a pilot opening, the self-contained nature of the 'crumbling hero' theme suggests a high-concept short film.\\\"\\n  },\\n  \\\"genre\\\": {\\n    \\\"value\\\": [\\n      \\\"action\\\",\\n      \\\"crime\\\",\\n      \\\"drama\\\",\\n      \\\"sci-fi\\\",\\n      \\\"thriller\\\"\\n    ],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"Action is evident in the frequent combat and gunfire; Crime is central to the plot involving gang money and 'Salvatori'; Drama is found in the emotional revelation regarding the father; Sci-Fi is established by the near-future dystopian setting (2025 post-economic collapse); Thriller elements are present in the tense elevator and hallway sequences.\\\"\\n  },\\n  \\\"tone\\\": {\\n    \\\"value\\\": [\\n      \\\"gritty\\\",\\n      \\\"violent\\\",\\n      \\\"dystopian\\\",\\n      \\\"intense\\\",\\n      \\\"stylized\\\",\\n      \\\"dark\\\"\\n    ],\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"The tone is gritty and violent (descriptions of 'skull' fragments and 'wet cracking sounds'). The setting is explicitly dystopian. The Mariner's costume and the antagonist's 'white suit' aesthetic provide a stylized, almost comic-book-noir quality, while the revelation about the father adds a dark, somber emotional layer.\\\"\\n  },\\n  \\\"estimated_duration_minutes\\\": {\\n    \\\"value\\\": 10,\\n    \\\"confidence\\\": 0.8,\\n    \\\"rationale\\\": \\\"The script is approximately 1,400 words. In standard screenplay formatting, this would span roughly 8 to 10 pages. Following the 'one page per minute' rule, the estimated runtime is 10 minutes.\\\"\\n  },\\n  \\\"primary_characters\\\": {\\n    \\\"value\\\": [\\n      \\\"The Mariner (Billy MacAngus)\\\",\\n      \\\"Rose\\\",\\n      \\\"Salvatori\\\"\\n    ],\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"Mariner and Rose are the protagonists driving the action, while Salvatori is the primary antagonist introduced in the climax.\\\"\\n  },\\n  \\\"supporting_characters\\\": {\\n    \\\"value\\\": [\\n      \\\"Dad\\\",\\n      \\\"Rosco\\\",\\n      \\\"Vinnie\\\",\\n      \\\"Mikey\\\",\\n      \\\"Carlos\\\",\\n      \\\"Thug 1\\\",\\n      \\\"Thug 2\\\",\\n      \\\"Thug 3\\\"\\n    ],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"Dad appears in pivotal flashbacks. Rosco, Vinnie, Mikey, and Carlos are named henchmen, while the numbered thugs serve as minor obstacles.\\\"\\n  },\\n  \\\"location_count\\\": {\\n    \\\"value\\\": 10,\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"The script identifies: 1. City Centre, 2. Building Front, 3. Building Rear, 4. Elevator, 5. 11th Floor (corridors/room), 6. Stairwell, 7. 13th Floor, 8. 15th Floor (Salvatori's office), 9. Coastline (flashback), and 10. Backyard (flashback).\\\"\\n  },\\n  \\\"locations_summary\\\": {\\n    \\\"value\\\": \\\"A ruined, dystopian urban center and various levels of a 15-story office building (ranging from grimy corridors to a luxurious penthouse), contrasted with idyllic and then realistic flashbacks to a coastline and a cluttered backyard.\\\",\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"The locations are clearly described in the scene headings and narrative descriptions, moving from the exterior ruins into the vertical progression of the Ruddy & Greene building.\\\"\\n  },\\n  \\\"target_audience\\\": {\\n    \\\"value\\\": \\\"Adult (R-rated / TV-MA)\\\",\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"The content features graphic violence (cracking skulls, bloody oars), strong language ('shit', 'assholes', 'prick'), and mature themes regarding child neglect and organized crime.\\\"\\n  }\\n}\\n```\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "23f0ff22-9be6-499e-a403-f287fbf53cec",
        "latencyMs": 13596,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "promptIdx": 10,
        "provider": {
          "id": "google:gemini-3-flash-preview",
          "label": "Gemini 3 Flash"
        },
        "response": {
          "output": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The title is explicitly stated at the beginning of the screenplay and on a superimposed title card within the text.\"\n  },\n  \"format\": {\n    \"value\": \"short film\",\n    \"confidence\": 0.85,\n    \"rationale\": \"The screenplay follows a concise narrative arc—a rescue mission that serves as a deconstruction of the protagonist's origin story—concluding on a thematic resolution. While it could serve as a pilot opening, the self-contained nature of the 'crumbling hero' theme suggests a high-concept short film.\"\n  },\n  \"genre\": {\n    \"value\": [\n      \"action\",\n      \"crime\",\n      \"drama\",\n      \"sci-fi\",\n      \"thriller\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"Action is evident in the frequent combat and gunfire; Crime is central to the plot involving gang money and 'Salvatori'; Drama is found in the emotional revelation regarding the father; Sci-Fi is established by the near-future dystopian setting (2025 post-economic collapse); Thriller elements are present in the tense elevator and hallway sequences.\"\n  },\n  \"tone\": {\n    \"value\": [\n      \"gritty\",\n      \"violent\",\n      \"dystopian\",\n      \"intense\",\n      \"stylized\",\n      \"dark\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"The tone is gritty and violent (descriptions of 'skull' fragments and 'wet cracking sounds'). The setting is explicitly dystopian. The Mariner's costume and the antagonist's 'white suit' aesthetic provide a stylized, almost comic-book-noir quality, while the revelation about the father adds a dark, somber emotional layer.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 10,\n    \"confidence\": 0.8,\n    \"rationale\": \"The script is approximately 1,400 words. In standard screenplay formatting, this would span roughly 8 to 10 pages. Following the 'one page per minute' rule, the estimated runtime is 10 minutes.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\n      \"The Mariner (Billy MacAngus)\",\n      \"Rose\",\n      \"Salvatori\"\n    ],\n    \"confidence\": 1.0,\n    \"rationale\": \"Mariner and Rose are the protagonists driving the action, while Salvatori is the primary antagonist introduced in the climax.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\n      \"Dad\",\n      \"Rosco\",\n      \"Vinnie\",\n      \"Mikey\",\n      \"Carlos\",\n      \"Thug 1\",\n      \"Thug 2\",\n      \"Thug 3\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"Dad appears in pivotal flashbacks. Rosco, Vinnie, Mikey, and Carlos are named henchmen, while the numbered thugs serve as minor obstacles.\"\n  },\n  \"location_count\": {\n    \"value\": 10,\n    \"confidence\": 0.9,\n    \"rationale\": \"The script identifies: 1. City Centre, 2. Building Front, 3. Building Rear, 4. Elevator, 5. 11th Floor (corridors/room), 6. Stairwell, 7. 13th Floor, 8. 15th Floor (Salvatori's office), 9. Coastline (flashback), and 10. Backyard (flashback).\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A ruined, dystopian urban center and various levels of a 15-story office building (ranging from grimy corridors to a luxurious penthouse), contrasted with idyllic and then realistic flashbacks to a coastline and a cluttered backyard.\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The locations are clearly described in the scene headings and narrative descriptions, moving from the exterior ruins into the vertical progression of the Ruddy & Greene building.\"\n  },\n  \"target_audience\": {\n    \"value\": \"Adult (R-rated / TV-MA)\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The content features graphic violence (cracking skulls, bloody oars), strong language ('shit', 'assholes', 'prick'), and mature themes regarding child neglect and organized crime.\"\n  }\n}\n```",
          "tokenUsage": {
            "prompt": 5016,
            "completion": 1039,
            "total": 7162,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 1107,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cost": 0.008945999999999999,
          "raw": {
            "candidates": [
              {
                "content": {
                  "parts": [
                    {
                      "text": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The title is explicitly stated at the beginning of the screenplay and on a superimposed title card within the text.\"\n  },\n  \"format\": {\n    \"value\": \"short film\",\n    \"confidence\": 0.85,\n    \"rationale\": \"The screenplay follows a concise narrative arc—a rescue mission that serves as a deconstruction of the protagonist's origin story—concluding on a thematic resolution. While it could serve as a pilot opening, the self-contained nature of the 'crumbling hero' theme suggests a high-concept short film.\"\n  },\n  \"genre\": {\n    \"value\": [\n      \"action\",\n      \"crime\",\n      \"drama\",\n      \"sci-fi\",\n      \"thriller\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"Action is evident in the frequent combat and gunfire; Crime is central to the plot involving gang money and 'Salvatori'; Drama is found in the emotional revelation regarding the father; Sci-Fi is established by the near-future dystopian setting (2025 post-economic collapse); Thriller elements are present in the tense elevator and hallway sequences.\"\n  },\n  \"tone\": {\n    \"value\": [\n      \"gritty\",\n      \"violent\",\n      \"dystopian\",\n      \"intense\",\n      \"stylized\",\n      \"dark\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"The tone is gritty and violent (descriptions of 'skull' fragments and 'wet cracking sounds'). The setting is explicitly dystopian. The Mariner's costume and the antagonist's 'white suit' aesthetic provide a stylized, almost comic-book-noir quality, while the revelation about the father adds a dark, somber emotional layer.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 10,\n    \"confidence\": 0.8,\n    \"rationale\": \"The script is approximately 1,400 words. In standard screenplay formatting, this would span roughly 8 to 10 pages. Following the 'one page per minute' rule, the estimated runtime is 10 minutes.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\n      \"The Mariner (Billy MacAngus)\",\n      \"Rose\",\n      \"Salvatori\"\n    ],\n    \"confidence\": 1.0,\n    \"rationale\": \"Mariner and Rose are the protagonists driving the action, while Salvatori is the primary antagonist introduced in the climax.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\n      \"Dad\",\n      \"Rosco\",\n      \"Vinnie\",\n      \"Mikey\",\n      \"Carlos\",\n      \"Thug 1\",\n      \"Thug 2\",\n      \"Thug 3\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"Dad appears in pivotal flashbacks. Rosco, Vinnie, Mikey, and Carlos are named henchmen, while the numbered thugs serve as minor obstacles.\"\n  },\n  \"location_count\": {\n    \"value\": 10,\n    \"confidence\": 0.9,\n    \"rationale\": \"The script identifies: 1. City Centre, 2. Building Front, 3. Building Rear, 4. Elevator, 5. 11th Floor (corridors/room), 6. Stairwell, 7. 13th Floor, 8. 15th Floor (Salvatori's office), 9. Coastline (flashback), and 10. Backyard (flashback).\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A ruined, dystopian urban center and various levels of a 15-story office building (ranging from grimy corridors to a luxurious penthouse), contrasted with idyllic and then realistic flashbacks to a coastline and a cluttered backyard.\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The locations are clearly described in the scene headings and narrative descriptions, moving from the exterior ruins into the vertical progression of the Ruddy & Greene building.\"\n  },\n  \"target_audience\": {\n    \"value\": \"Adult (R-rated / TV-MA)\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The content features graphic violence (cracking skulls, bloody oars), strong language ('shit', 'assholes', 'prick'), and mature themes regarding child neglect and organized crime.\"\n  }\n}\n```",
                      "thoughtSignature": "EsEeCr4eAb4+9vv4o/1YOOYDY0/rw91QiHlQYUWH/W/7RcYv8xQK0nLU6HmceA3cMrKidKq5Y09UCUzJ9snbrVd0cSft48HImndg39XgEtbcmpWSu6JFVPsNZBpAyC22CWZyMIlbKV6IuLXx0niZ9WBNSvVQbq7fGz0m0EZhiJfvJSma4V62sDfdRGjD2PIP/dKFI4f2fSUNrL3QRQlRm4LUxH8svFWrs2GQjownKRoiwEqp9eUI06ElY+PiM66L1830d4ypxKFfomlZqhNaUlRXQouGMqgKtzqQKBkpcfDUwFRggknSIcYwkOvfDs+1D3yiZJq5CBRh3nonswjyLiITJNFeMBvim8q1tAEZJ0ymHop1BYn7BB12zLBeBLogq/H+uTs8W/DaD1mTJ/YQq65z99Nef59vrpR5w5MXijQbtOSthzr88/ObIVHkJyUwDGbbWy+w1qPonqWluqQCZoKDIsP6Odbo/CRvyfVXK83ZN/ivQqqezHRMsTNKV2JrZGQbuejYMXCW/hmf73uQlDSHcvPYNpQLgSxiwEilz9NVIEd3CdHq8SenIFPX8gO8hwpPuexzu0ISnzv0kVeRpU1Hb+fFRYWWt6xvGVZkKlWALvgIcLKgp8pJkRyfUJCl3fsviTNx4oVQ5sBTCHyA67CAIWA3KJ0o+Ut7MTjosGXiSfZFhZibAE1qodo0PhazXmRpwKK/EV16ZFaCAyDhxHZxteJDvuPgcDpFoR0rmWjLFx27XEklrRxLK0znhVJsJ8WoTehuiEqjMM380cRCI0JHhW8Bdtsqjvd8jRentd7+9aMHMDVVDjNtSXf4AY9depxW12UErsrdnd8EirH0ZeSC7Ocu9F8vLvJ1f+HiXU7X3+zyH9Tl3DFrqoDGszv8+DUKPYskwYFAa89uV13wMKnkTVhUDfKIavn6+tXwmjKQTiHMW/x5tIMldO+hXgCSrhHxiscV8VXQrSQypLkUqG7IcTU9sUhAsnDpBDkFBRz025HQ/B9X8WRq6jVIXrlLFRdQC3tHg+JI+MLvS4hQu129z+IxyklVgINIgl/KvLFt9PIuJnc9jrsJruizD4lXDb+yaiyvvE9zc6AEsvjnxQUJm3ycYkJd/5Du+DT1TRbq8pGexD8eqKVKGL8i7OBnANlg9+LIYHJAhB2KOnOZ+RgCsHHf3pq1JNvbnUb+9DrD4jROO7ZHydQK0yd0upA3v5UC8ikfnJ58yfHROo5H/m0GGHqrwSvrWRoku/8siNpxzkw4kibapDO5FNDe3HL+16HxuHvOA90lglu9DfOKYXSWTnRMOVpnL0U268Ur3EAmZt+T8QPRWJUp70E8NXv4NSVJm4xR0Cglz/RnRA5k4a2jULh/Rl7n1kbdmzUGew/uMkZp+o4k1oMZ6G8G1OZYgvMISKJBQmHapGPGjEb14aSeFFWJAsok4+7y6CtKqqhWAKKAhR/RkNHgsIJeJwwlNpPN/6PTIv82VGQlj491FM2UXumscduHPTpw88jEqatN6lN/5e4aE8mc/I/oLXr/ml64SYTPlqkPvIkqsDWAakTX1ISuEDJheLRF/G3ucQnQQY05XMCyeeHeJ99gWSpQq4qNjxl12rJJrf5/HE5CX+Zx/DDv9Mv1GOfGQ/9Tr7YToIREsHED9WgUEuyXKSeGGdByM39ymqze3xHmpJZxoFC3XTAUUR7XtrDYeaaB73cDXzzQda7gMd3/hEAlh1TCxTA5YVKwfcVGu3jUDP1Nj1bDQOg20boWOMsSloG4I2px98BlaJnUGM5Y3O7VvSU4r30YrzamzZalLTn4xEczwGvKaZQZ0tT7CPH/SLcFUwr5l2q1NQ0Xh6nGHfTzqr/wr4WoSCF01/r0LuJW9MgmHrzmGxQwJUrcuZzku8j8CyRG9oquVnmq7vrp6nksJB8swtcUTcWdSJ4hGnkoyFsP8f393oTfcWPXfLKM5ICFLD8tVg8REp7JzKuh9ZSpP3Cc2lZW9vzlLCaXKUq5fZL+ZvenxScBMwNS0DqIgdxkxqIv78SCfaL1g+hd77OIWxa//RyhQ9lNNq8Ig4LA2DIdVuOZSODeDavXkIlit4Nlj4jwYlZHrW/ZBibVZMyO9ed8kWoPldFLLtUHlHQ8spNMY9LoUILwSuwEkX+wn3iBPr8c7/vlkwqfkzG0+ukioWogg5lv6u6RiDSH/+cEtQuSAR8aSiWpGpeghxRSLHMdrouEdwi4bk8MSJBvch9xiNbxXqOYCss9GoO6egVQn3Ren3HGRbBmzBBKykwynn6SY8IzvwBqgJj4Z21uLLyiczkfQQJ2R4ye7ikMFdAclOdcPgZWurLViqAKwmHED+kYbCHFfkUxB7U1KgxRPMIILcSbXve7NeCgp7lQlQBT4fOxVToYYaaeZ/gUwsADmV/z8JmjobmQgQvuNMoDjRLNRx6OqfryMXzzAsKw8j+aReoOrqMW74+jdfc+rC4CaHVO+EqEyjnGphZk/bxAFORT1qGD3RVVGws5SWVddpn0hML4fGC33w3uYO2vZ+5lEsWCDie/H7PoN7Em/2JuALU9Eqozd/TmTxvGwzj83UPqG/pwEm3UKlJuG0U1jZT4zm8SOg13S4/Vlig+JBGcsv/XTKl7XkI9lJBIMA47LF5PjuW9uD44VNpXUeuX1LZtm+qEcpXrBv4x0j7pwdvtQVOKK5Jjv4BqzYn5AREz8aRCmSpKdCIeYYKmrwv2C+k5Jlk/nmOKbN0ywVQngG/T8tuY/PvRr8w2uniyJfFdzMgmoO14MWMa2tXMDuDWfooh51DwRrMwcL8QfaVQPtT9F2pr9v1O2A0QblsWuxoND0QKyltfiZ3a2hH4zjSteIwv6MewqoREaC/lYpe419RpC5nnfeL47vS6Ya+45EVjJGojPndmZI+hwVyzvdEIg4rO3uXPC6mqzTlF5DybfOTTCL0gPLHMgiPyy2tFSEXF0cPHTx6N+4jdnWZ1BTuSiNP1y1pkU9YT29nssRv3PEITttlKXx3LMQpn5eMTv38PQBtqp3YdRrOZAlbodZ6Siu3tPcYFK6SF3HxElFxH3hKkaYqPPkm6vP5jQcF2ctccAuwbqwhCZLPtGmeaTG07MjOgyHmVQDK1gmq4ttJEZozblTzdrL99xjb7Fgt/51OKZk0V/90hFQL7XS3aRbY77XfLMPigzZV+aADXvqnarC/FwPbjQfsWoGiCGEAU+HhH20S4X1NAeGrPsscO1NBbZC7829Abwd3dK/EoxMKEBIsnxlXxvMkRMAnFXphVzFxXens8CnDNE81LlSrcPyHQrhmZ8X5YP1PH76kqYa3to35moY+murVJXiaCPdU7r7+XlTcoBhPm1BzfD7XezXBnLsTiHEaJTZuRqd9Yflc+8bRdVIRURDbhFpuUhATIiVkk20nBwr3OSOJ48OiBsTD7HfuZjKKRyFpkWQvRLx/SvrOb/pBuiIAPpVbYUt3AeFPNJCT9IBpP0hpnLHmrMLmUUbzWd9J6TTl/MfumlNePziSXtKLyOWneB6UPmQPSTU03rd0cW2uG0ZwyH+2kFqXRlAopXMd+coNAOBLlMmxe2AV21HdPgtZsrhuVj6rrn6+2uE0PU4O51SyTYGHQH86Gv3PxoXXQaj5+J0lj3ABEa6bGw0XX4cFg+G3yqKDEjqeveWZ5ikfYXW7mcSD0/05CUMA4PxCR8EusANaXkq9P6+qAYgoKpAV3cb1z5Ymy1SiWFDSYjaW+UuQt6aVnp7An+veNL0wivZO9yHmFoXYU4tM0AoajR8ErpQ0lrokR4AnbW1UUdhAEjhj4xjO6XUwo2iuAPZOql8920BiLLGQbZENzE9wF8SU33lmq84amUvh7wzrzvO6/VXODf3cbBRT4gf5ZtGVMhkUIodCEaLVbgTIxUuyn8M+s5yO+XkKdbgO+rnjFQa37gTUM1UGfRKQEF7KzxiLKVltR2BLSKrMhE5qQU56VA4/VkMXZPm/Szfubv7PsEPTLers7qtdFn4amJ/gRz6FaTYbfoCoB5kYs9HQIrci1ZCB2Rb1rUKb5DQUZnVxi/DGxERUVgl1tN1Dz4G58kwtzSaeO3UlXtdrsICTmtt0rIq0TiNsjMTgmgYwyNCAD3fWTOHfntURg+Gdg0nKUiqd57DmESxhLbV0WLcqk2rZgRnJ488OfRmt0rxOmphd5VhBZ8CZ0dBpxkA90aj/4ItNacN56820p3ihN7Cri1pHbXpCR+8wnOC/O5vVN7YcezBggZfHySNeP0aR26/ObalGZORInADpylngwx4Jwllm4zazehssdMl8kILlQazzNo6arSF0j0Re1EixeKEOMsexpYgAY6peTS4+m0dUuqHGmFl1UM9U2aSVchLQIwCPkWXWMrLQLP5Bx/VPZ7QdatEGUv48OHy1om/WELWGyAopG8KHN0r6u/pk+LMmS8VZFwcs6U4Y3xzXFznbTXkAX4btw8XKcbqVhRSZZwnNUPkhWhT9Hj9Ow5qhOVaGTXoEEMSz4TAvj1rGIb2lOMfBnqe8zhKwEPwkwJw/XgL7Tn0ev0d7mngKg/qr9GgK262qFI6SU4akDXFnDsVFmbdfhmWajbcDWjy1Ev+H6OOW7JOWFRGrwe7I/C6L1+B5ORklcmkRk5eSFdSPTnGoP+TkZlWY5Fbdhw5T2/gpAehOMWwtTeVyIbcAKFbOF6aNhUHF12n6dSW6U5iGndCbhmBtKfnBgi3a8NT3NVQC6/ptiqKIDk4wG0k5AGpO2FX3obv9EJWk+40/I8DaK4ftXsQWy37AkOrO4HMD8pi24c7nfFTOY5qrsf1VgbX1QJNgGN4+TLd8e9wQdVRmPJZMQELfLP6DUEDfGYiOM5wlWPFPYjszyAbA886UzuzW+PJbdxFeBfrZVxfrZK4g1OPkhu/Q1fNYV4FNyxBFXL5msWqWFaMBdI9h5jg4PgvKMYIif4JWpBMZTXXwes/oaXw+C86zl4PRiq+iRWboxVfmpIUiZ+fTk8wnwLWG5mNXR/BI5c4ep4tluPzA6odreiO7ojaIqI5NuLvd5QYY25OeO9iAg82knloyogy8uM659TLl9VvsTlIn2CkJpQdoD35h6QNKjPDmtRiRy+9oTPffxg7jtwr/IyOqMqmhjETxsjrmWgc5gT8R1kuEk420YgeLeoPNCOg7WC3AWLCzSCBUYkkMLrMyjHEfYWQ+odVrdDKZhG1vS9Ge7GmFtyLQ="
                    }
                  ],
                  "role": "model"
                },
                "finishReason": "STOP",
                "index": 0
              }
            ],
            "usageMetadata": {
              "promptTokenCount": 5016,
              "candidatesTokenCount": 1039,
              "totalTokenCount": 7162,
              "promptTokensDetails": [
                {
                  "modality": "TEXT",
                  "tokenCount": 5016
                }
              ],
              "thoughtsTokenCount": 1107
            },
            "modelVersion": "gemini-3-flash-preview",
            "responseId": "DLmkaarKBLa_qtsPpvyZ0QM"
          },
          "cached": false,
          "metadata": {}
        },
        "score": 0.7150000000000001,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.06024,
        "error": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with 0.99 confidence. ✅\n\n2. **Format**: Identified as 'short film' rather than 'feature film'. The rubric specifically asks if it identified this as a feature film screenplay. A ~430-line screenplay would typically be a feature (85-130 minutes), not a short film of 18 minutes. The model estimated only 15-20 pages, which seems like a significant underestimate for 430 lines. This is a notable error. ❌\n\n3. **Genre**: Includes action and crime, which matches the rubric's expectation. Also includes drama and sci-fi, which are defensible given the dystopian setting and emotional backstory. ✅\n\n4. **Tone**: Captures dark, gritty, violent, intense, bleak qualities very well. Excellent detail about stylized elements and dark humor. ✅\n\n5. **Duration**: Estimated 18 minutes, which is far below the rubric's expected 85-130 minutes. This is a major error directly tied to the format misidentification. ❌\n\n6. **Primary characters**: Identifies Mariner and Rose as leads. Also includes Salvatori as primary rather than supporting. The rubric asks for Mariner and Rose as leads, which is correct. ✅\n\n7. **Supporting characters**: Lists Dad, Vinnie, and others. However, Salvatori is listed as primary rather than supporting. The rubric mentions Dad, Salvatori, and Vinnie should be among supporting cast. Salvatori is misplaced as primary. Partial credit. ⚠️\n\n8. **Location count**: Estimated 8, which falls within the 5-20 range. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, describes the dystopian city, multiple floors, and flashback locations. ✅\n\n10. **Target audience**: Correctly identified as R/mature content with good justification. ✅\n\n11. **Confidence calibration**: Most are reasonable, but the format confidence of 0.75 for an incorrect answer is problematic. The duration confidence of 0.6 appropriately reflects uncertainty but the estimate is still far off.\n\n12. **Rationale quality**: Generally well-grounded in screenplay evidence with specific references to scenes, characters, and dialogue. The rationales are detailed and evidence-based, even when conclusions are wrong.\n\nThe two major errors are format (short film vs. feature) and duration (18 min vs. 85-130 min). These are significant because they're interconnected and represent a fundamental mischaracterization of the project's scope. However, 8 out of 10 fields are reasonably accurate, rationales are well-written and evidence-based, and the other metadata is solid.",
        "gradingResult": {
          "pass": false,
          "score": 0.73125,
          "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with 0.99 confidence. ✅\n\n2. **Format**: Identified as 'short film' rather than 'feature film'. The rubric specifically asks if it identified this as a feature film screenplay. A ~430-line screenplay would typically be a feature (85-130 minutes), not a short film of 18 minutes. The model estimated only 15-20 pages, which seems like a significant underestimate for 430 lines. This is a notable error. ❌\n\n3. **Genre**: Includes action and crime, which matches the rubric's expectation. Also includes drama and sci-fi, which are defensible given the dystopian setting and emotional backstory. ✅\n\n4. **Tone**: Captures dark, gritty, violent, intense, bleak qualities very well. Excellent detail about stylized elements and dark humor. ✅\n\n5. **Duration**: Estimated 18 minutes, which is far below the rubric's expected 85-130 minutes. This is a major error directly tied to the format misidentification. ❌\n\n6. **Primary characters**: Identifies Mariner and Rose as leads. Also includes Salvatori as primary rather than supporting. The rubric asks for Mariner and Rose as leads, which is correct. ✅\n\n7. **Supporting characters**: Lists Dad, Vinnie, and others. However, Salvatori is listed as primary rather than supporting. The rubric mentions Dad, Salvatori, and Vinnie should be among supporting cast. Salvatori is misplaced as primary. Partial credit. ⚠️\n\n8. **Location count**: Estimated 8, which falls within the 5-20 range. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, describes the dystopian city, multiple floors, and flashback locations. ✅\n\n10. **Target audience**: Correctly identified as R/mature content with good justification. ✅\n\n11. **Confidence calibration**: Most are reasonable, but the format confidence of 0.75 for an incorrect answer is problematic. The duration confidence of 0.6 appropriately reflects uncertainty but the estimate is still far off.\n\n12. **Rationale quality**: Generally well-grounded in screenplay evidence with specific references to scenes, characters, and dialogue. The rationales are detailed and evidence-based, even when conclusions are wrong.\n\nThe two major errors are format (short film vs. feature) and duration (18 min vs. 85-130 min). These are significant because they're interconnected and represent a fundamental mischaracterization of the project's scope. However, 8 out of 10 fields are reasonably accurate, rationales are well-written and evidence-based, and the other metadata is solid.",
          "namedScores": {},
          "tokensUsed": {
            "total": 2507,
            "prompt": 1800,
            "completion": 707,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.9125,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=1.00, format_accuracy=1.00, genre_accuracy=0.75, json_valid=0.90, location_accuracy=0.80, title_accuracy=1.00, tone_accuracy=0.80",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": false,
              "score": 0.55,
              "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with 0.99 confidence. ✅\n\n2. **Format**: Identified as 'short film' rather than 'feature film'. The rubric specifically asks if it identified this as a feature film screenplay. A ~430-line screenplay would typically be a feature (85-130 minutes), not a short film of 18 minutes. The model estimated only 15-20 pages, which seems like a significant underestimate for 430 lines. This is a notable error. ❌\n\n3. **Genre**: Includes action and crime, which matches the rubric's expectation. Also includes drama and sci-fi, which are defensible given the dystopian setting and emotional backstory. ✅\n\n4. **Tone**: Captures dark, gritty, violent, intense, bleak qualities very well. Excellent detail about stylized elements and dark humor. ✅\n\n5. **Duration**: Estimated 18 minutes, which is far below the rubric's expected 85-130 minutes. This is a major error directly tied to the format misidentification. ❌\n\n6. **Primary characters**: Identifies Mariner and Rose as leads. Also includes Salvatori as primary rather than supporting. The rubric asks for Mariner and Rose as leads, which is correct. ✅\n\n7. **Supporting characters**: Lists Dad, Vinnie, and others. However, Salvatori is listed as primary rather than supporting. The rubric mentions Dad, Salvatori, and Vinnie should be among supporting cast. Salvatori is misplaced as primary. Partial credit. ⚠️\n\n8. **Location count**: Estimated 8, which falls within the 5-20 range. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, describes the dystopian city, multiple floors, and flashback locations. ✅\n\n10. **Target audience**: Correctly identified as R/mature content with good justification. ✅\n\n11. **Confidence calibration**: Most are reasonable, but the format confidence of 0.75 for an incorrect answer is problematic. The duration confidence of 0.6 appropriately reflects uncertainty but the estimate is still far off.\n\n12. **Rationale quality**: Generally well-grounded in screenplay evidence with specific references to scenes, characters, and dialogue. The rationales are detailed and evidence-based, even when conclusions are wrong.\n\nThe two major errors are format (short film vs. feature) and duration (18 min vs. 85-130 min). These are significant because they're interconnected and represent a fundamental mischaracterization of the project's scope. However, 8 out of 10 fields are reasonably accurate, rationales are well-written and evidence-based, and the other metadata is solid.",
              "tokensUsed": {
                "total": 2507,
                "prompt": 1800,
                "completion": 707,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n```json\\n{\\n  \\\"title\\\": {\\n    \\\"value\\\": \\\"The Mariner\\\",\\n    \\\"confidence\\\": 0.99,\\n    \\\"rationale\\\": \\\"The title 'The Mariner' is explicitly stated at the top of the screenplay and appears as a full-screen superimposed title card during the elevator scene.\\\"\\n  },\\n  \\\"format\\\": {\\n    \\\"value\\\": \\\"short film\\\",\\n    \\\"confidence\\\": 0.75,\\n    \\\"rationale\\\": \\\"The screenplay covers a single continuous action sequence in one location (the Ruddy & Greene building) with limited narrative complexity. It reads as approximately 12-18 pages, suggesting a short film of under 30 minutes. There is no act structure typical of a feature, nor episodic structure of a series. However, the richness of character backstory and the open ending ('CUT TO BLACK') could suggest this is a proof-of-concept or opening sequence for a larger project.\\\"\\n  },\\n  \\\"genre\\\": {\\n    \\\"value\\\": [\\\"action\\\", \\\"crime\\\", \\\"drama\\\", \\\"sci-fi\\\"],\\n    \\\"confidence\\\": 0.85,\\n    \\\"rationale\\\": \\\"Action: extensive fight sequences, gunfire, and physical combat throughout. Crime: gang money, theft of $20 million, organized crime boss Salvatori. Drama: deep emotional character arc involving Mariner's traumatic childhood and his relationship with his father and sister. Sci-fi: near-future dystopian setting (post-2025 societal collapse, blockchain/cryptocurrency as plot device, speculative world-building).\\\"\\n  },\\n  \\\"tone\\\": {\\n    \\\"value\\\": [\\\"dark\\\", \\\"gritty\\\", \\\"violent\\\", \\\"intense\\\", \\\"fast-paced\\\", \\\"stylized\\\", \\\"bleak\\\"],\\n    \\\"confidence\\\": 0.92,\\n    \\\"rationale\\\": \\\"Dark and bleak: ruined dystopian cityscape, homelessness, lawlessness. Gritty: blood-soaked combat, grimy alleys, destroyed buildings. Violent/brutal: graphic fight descriptions (skull fragments, wet cracking sounds, bloody oar). Intense and fast-paced: continuous escalating action with brief emotional pauses. Stylized: the Mariner's eccentric costume (fishing net cape, flare gun, oar weapon), elevator muzak juxtaposed with violence, and the all-white villain create a heightened, almost comic-book visual style. There are also moments of dark humor (the skull bit, blockchain explanation at gunpoint, Finding Nemo joke).\\\"\\n  },\\n  \\\"estimated_duration_minutes\\\": {\\n    \\\"value\\\": 18,\\n    \\\"confidence\\\": 0.6,\\n    \\\"rationale\\\": \\\"Estimating roughly 15-20 pages based on the screenplay text length. Using the ~1 page per minute rule, this suggests approximately 18 minutes. The heavy action sequences may play faster than written, but the flashbacks and dialogue scenes balance this out.\\\"\\n  },\\n  \\\"primary_characters\\\": {\\n    \\\"value\\\": [\\\"Mariner (Billy/Will MacAngus)\\\", \\\"Rose\\\", \\\"Salvatori\\\"],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"Mariner is the protagonist with the most screen time, dialogue, and character development (including flashbacks). Rose is the co-lead who drives the plot (the stolen money) and provides the emotional revelation about their father. Salvatori is the antagonist who appears in the climactic confrontation.\\\"\\n  },\\n  \\\"supporting_characters\\\": {\\n    \\\"value\\\": [\\\"Dad (Mariner's father)\\\", \\\"Rosco\\\", \\\"Vinnie\\\", \\\"Mikey\\\", \\\"Carlos\\\", \\\"Thug 1\\\", \\\"Thug 2\\\", \\\"Thug 3\\\"],\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"Dad appears only in flashbacks but is crucial to the thematic arc. Rosco, Vinnie, Mikey, and Carlos are named thugs with brief dialogue. Thugs 1-3 are unnamed antagonists in the elevator encounter.\\\"\\n  },\\n  \\\"location_count\\\": {\\n    \\\"value\\\": 8,\\n    \\\"confidence\\\": 0.8,\\n    \\\"rationale\\\": \\\"Distinct locations: (1) City Centre exterior, (2) Ruddy & Greene Building front exterior, (3) Ruddy & Greene Building rear alley, (4) Building elevator interior, (5) 11th floor corridors, (6) 13th floor corridors, (7) 15th floor luxury office/corridor, (8) Flashback locations - coastline/boat and backyard (counted as two sub-locations but grouped as flashback settings). The stairwell serves as a transitional space between floors.\\\"\\n  },\\n  \\\"locations_summary\\\": {\\n    \\\"value\\\": \\\"A dystopian ruined city centre at night, centered on the Ruddy & Greene Building — a 15-story former sandstone office building now used as a gang headquarters. Interior locations span multiple floors from grimy destroyed corridors to a luxurious 15th-floor office suite. Flashback scenes take place at an idyllic-turned-neglected coastal area with a sailboat and a rundown backyard with makeshift weightlifting equipment.\\\",\\n    \\\"confidence\\\": 0.92,\\n    \\\"rationale\\\": \\\"All locations are explicitly described in scene headings and action lines.\\\"\\n  },\\n  \\\"target_audience\\\": {\\n    \\\"value\\\": \\\"R\\\",\\n    \\\"confidence\\\": 0.88,\\n    \\\"rationale\\\": \\\"The screenplay contains pervasive strong language (multiple F-words), graphic violence (skull fragments, bloody combat, shooting, burning), themes of child abuse, and criminal activity. This clearly targets an adult audience and would warrant an R rating under MPAA guidelines.\\\"\\n  }\\n}\\n```\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "0e4a50aa-e094-47bd-91ed-94b9e930ed5b",
        "latencyMs": 28556,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "promptIdx": 12,
        "provider": {
          "id": "anthropic:messages:claude-opus-4-6",
          "label": "Claude Opus 4.6"
        },
        "response": {
          "output": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 0.99,\n    \"rationale\": \"The title 'The Mariner' is explicitly stated at the top of the screenplay and appears as a full-screen superimposed title card during the elevator scene.\"\n  },\n  \"format\": {\n    \"value\": \"short film\",\n    \"confidence\": 0.75,\n    \"rationale\": \"The screenplay covers a single continuous action sequence in one location (the Ruddy & Greene building) with limited narrative complexity. It reads as approximately 12-18 pages, suggesting a short film of under 30 minutes. There is no act structure typical of a feature, nor episodic structure of a series. However, the richness of character backstory and the open ending ('CUT TO BLACK') could suggest this is a proof-of-concept or opening sequence for a larger project.\"\n  },\n  \"genre\": {\n    \"value\": [\"action\", \"crime\", \"drama\", \"sci-fi\"],\n    \"confidence\": 0.85,\n    \"rationale\": \"Action: extensive fight sequences, gunfire, and physical combat throughout. Crime: gang money, theft of $20 million, organized crime boss Salvatori. Drama: deep emotional character arc involving Mariner's traumatic childhood and his relationship with his father and sister. Sci-fi: near-future dystopian setting (post-2025 societal collapse, blockchain/cryptocurrency as plot device, speculative world-building).\"\n  },\n  \"tone\": {\n    \"value\": [\"dark\", \"gritty\", \"violent\", \"intense\", \"fast-paced\", \"stylized\", \"bleak\"],\n    \"confidence\": 0.92,\n    \"rationale\": \"Dark and bleak: ruined dystopian cityscape, homelessness, lawlessness. Gritty: blood-soaked combat, grimy alleys, destroyed buildings. Violent/brutal: graphic fight descriptions (skull fragments, wet cracking sounds, bloody oar). Intense and fast-paced: continuous escalating action with brief emotional pauses. Stylized: the Mariner's eccentric costume (fishing net cape, flare gun, oar weapon), elevator muzak juxtaposed with violence, and the all-white villain create a heightened, almost comic-book visual style. There are also moments of dark humor (the skull bit, blockchain explanation at gunpoint, Finding Nemo joke).\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 18,\n    \"confidence\": 0.6,\n    \"rationale\": \"Estimating roughly 15-20 pages based on the screenplay text length. Using the ~1 page per minute rule, this suggests approximately 18 minutes. The heavy action sequences may play faster than written, but the flashbacks and dialogue scenes balance this out.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\"Mariner (Billy/Will MacAngus)\", \"Rose\", \"Salvatori\"],\n    \"confidence\": 0.95,\n    \"rationale\": \"Mariner is the protagonist with the most screen time, dialogue, and character development (including flashbacks). Rose is the co-lead who drives the plot (the stolen money) and provides the emotional revelation about their father. Salvatori is the antagonist who appears in the climactic confrontation.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\"Dad (Mariner's father)\", \"Rosco\", \"Vinnie\", \"Mikey\", \"Carlos\", \"Thug 1\", \"Thug 2\", \"Thug 3\"],\n    \"confidence\": 0.9,\n    \"rationale\": \"Dad appears only in flashbacks but is crucial to the thematic arc. Rosco, Vinnie, Mikey, and Carlos are named thugs with brief dialogue. Thugs 1-3 are unnamed antagonists in the elevator encounter.\"\n  },\n  \"location_count\": {\n    \"value\": 8,\n    \"confidence\": 0.8,\n    \"rationale\": \"Distinct locations: (1) City Centre exterior, (2) Ruddy & Greene Building front exterior, (3) Ruddy & Greene Building rear alley, (4) Building elevator interior, (5) 11th floor corridors, (6) 13th floor corridors, (7) 15th floor luxury office/corridor, (8) Flashback locations - coastline/boat and backyard (counted as two sub-locations but grouped as flashback settings). The stairwell serves as a transitional space between floors.\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A dystopian ruined city centre at night, centered on the Ruddy & Greene Building — a 15-story former sandstone office building now used as a gang headquarters. Interior locations span multiple floors from grimy destroyed corridors to a luxurious 15th-floor office suite. Flashback scenes take place at an idyllic-turned-neglected coastal area with a sailboat and a rundown backyard with makeshift weightlifting equipment.\",\n    \"confidence\": 0.92,\n    \"rationale\": \"All locations are explicitly described in scene headings and action lines.\"\n  },\n  \"target_audience\": {\n    \"value\": \"R\",\n    \"confidence\": 0.88,\n    \"rationale\": \"The screenplay contains pervasive strong language (multiple F-words), graphic violence (skull fragments, bloody combat, shooting, burning), themes of child abuse, and criminal activity. This clearly targets an adult audience and would warrant an R rating under MPAA guidelines.\"\n  }\n}\n```",
          "tokenUsage": {
            "total": 6824,
            "prompt": 5518,
            "completion": 1306
          },
          "finishReason": "stop",
          "cost": 0.06024
        },
        "score": 0.73125,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.05075,
        "error": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. ✅\n\n2. **Format**: Identified as 'feature film' with confidence 0.85. This is reasonable given the screenplay text. ✅\n\n3. **Genre**: Includes action, thriller, crime, drama, and sci-fi. Action, crime, and thriller are all present, which matches the vigilante crime-action story. The sci-fi tag for the dystopian setting is defensible. ✅\n\n4. **Tone**: Captures gritty, violent, brutal, dark, suspenseful, fast-paced, and stylized. This accurately reflects the screenplay's qualities. ✅\n\n5. **Duration**: Estimated at 12 minutes, saying the text is ~12 pages. This is a significant issue. The rubric states this is a ~430-line screenplay, which would typically be much longer than 12 pages. A 430-line screenplay would likely be 20-40+ pages depending on formatting, and for a feature film, the estimate should be in the 85-130 minute range. The model seems to have only analyzed a portion of the screenplay and estimated based on that excerpt rather than the full work. However, if the model only received ~12 pages of text, its estimate is internally consistent with what it saw. Still, this conflicts with the feature film classification - 12 minutes is a short film. This is a notable inconsistency and error. ❌\n\n6. **Primary characters**: Identifies Mariner (Billy), Rose, Salvatori, and Dad. The Mariner and Rose are correctly identified as leads. However, placing Salvatori and Dad as primary rather than supporting is debatable but defensible given their narrative importance. ✅\n\n7. **Supporting characters**: Lists Thug 1-3, Rosco, Vinnie, Mikey, Carlos, Young Mariner. The rubric asks if Dad, Salvatori, Vinnie are among supporting cast. The model placed Dad and Salvatori as primary characters and Vinnie as supporting. This is a reasonable classification choice. Vinnie is correctly in supporting. ✅ (partially)\n\n8. **Location count**: Estimated at 12, which falls within the 5-20 range. The detailed breakdown of locations is well-evidenced. ✅\n\n9. **Locations summary**: Correctly mentions the Ruddy & Greene Building as the primary setting, along with flashback locations. ✅\n\n10. **Target audience**: Correctly identified as mature/adult content (Rated R equivalent) with specific evidence. ✅\n\n11. **Confidence calibration**: Generally reasonable. Title at 1.0, format at 0.85, genre at 0.95 - these seem well-calibrated. The duration confidence of 0.9 is too high given the inconsistency with the feature film format. ⚠️\n\n12. **Rationale quality**: Rationales are generally well-grounded in screenplay evidence with specific quotes and references. ✅\n\nThe major flaw is the duration estimate of 12 minutes, which directly contradicts the feature film classification and doesn't align with the expected 85-130 minute range for a ~430-line screenplay. This is a significant error. Everything else is quite strong with good evidence-based reasoning.",
        "gradingResult": {
          "pass": false,
          "score": 0.75,
          "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. ✅\n\n2. **Format**: Identified as 'feature film' with confidence 0.85. This is reasonable given the screenplay text. ✅\n\n3. **Genre**: Includes action, thriller, crime, drama, and sci-fi. Action, crime, and thriller are all present, which matches the vigilante crime-action story. The sci-fi tag for the dystopian setting is defensible. ✅\n\n4. **Tone**: Captures gritty, violent, brutal, dark, suspenseful, fast-paced, and stylized. This accurately reflects the screenplay's qualities. ✅\n\n5. **Duration**: Estimated at 12 minutes, saying the text is ~12 pages. This is a significant issue. The rubric states this is a ~430-line screenplay, which would typically be much longer than 12 pages. A 430-line screenplay would likely be 20-40+ pages depending on formatting, and for a feature film, the estimate should be in the 85-130 minute range. The model seems to have only analyzed a portion of the screenplay and estimated based on that excerpt rather than the full work. However, if the model only received ~12 pages of text, its estimate is internally consistent with what it saw. Still, this conflicts with the feature film classification - 12 minutes is a short film. This is a notable inconsistency and error. ❌\n\n6. **Primary characters**: Identifies Mariner (Billy), Rose, Salvatori, and Dad. The Mariner and Rose are correctly identified as leads. However, placing Salvatori and Dad as primary rather than supporting is debatable but defensible given their narrative importance. ✅\n\n7. **Supporting characters**: Lists Thug 1-3, Rosco, Vinnie, Mikey, Carlos, Young Mariner. The rubric asks if Dad, Salvatori, Vinnie are among supporting cast. The model placed Dad and Salvatori as primary characters and Vinnie as supporting. This is a reasonable classification choice. Vinnie is correctly in supporting. ✅ (partially)\n\n8. **Location count**: Estimated at 12, which falls within the 5-20 range. The detailed breakdown of locations is well-evidenced. ✅\n\n9. **Locations summary**: Correctly mentions the Ruddy & Greene Building as the primary setting, along with flashback locations. ✅\n\n10. **Target audience**: Correctly identified as mature/adult content (Rated R equivalent) with specific evidence. ✅\n\n11. **Confidence calibration**: Generally reasonable. Title at 1.0, format at 0.85, genre at 0.95 - these seem well-calibrated. The duration confidence of 0.9 is too high given the inconsistency with the feature film format. ⚠️\n\n12. **Rationale quality**: Rationales are generally well-grounded in screenplay evidence with specific quotes and references. ✅\n\nThe major flaw is the duration estimate of 12 minutes, which directly contradicts the feature film classification and doesn't align with the expected 85-130 minute range for a ~430-line screenplay. This is a significant error. Everything else is quite strong with good evidence-based reasoning.",
          "namedScores": {},
          "tokensUsed": {
            "total": 2502,
            "prompt": 1688,
            "completion": 814,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.9,
              "reason": "character_accuracy=0.80, confidence_quality=1.00, duration_accuracy=1.00, format_accuracy=1.00, genre_accuracy=1.00, json_valid=0.90, location_accuracy=0.80, title_accuracy=1.00, tone_accuracy=0.60",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": false,
              "score": 0.6,
              "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. ✅\n\n2. **Format**: Identified as 'feature film' with confidence 0.85. This is reasonable given the screenplay text. ✅\n\n3. **Genre**: Includes action, thriller, crime, drama, and sci-fi. Action, crime, and thriller are all present, which matches the vigilante crime-action story. The sci-fi tag for the dystopian setting is defensible. ✅\n\n4. **Tone**: Captures gritty, violent, brutal, dark, suspenseful, fast-paced, and stylized. This accurately reflects the screenplay's qualities. ✅\n\n5. **Duration**: Estimated at 12 minutes, saying the text is ~12 pages. This is a significant issue. The rubric states this is a ~430-line screenplay, which would typically be much longer than 12 pages. A 430-line screenplay would likely be 20-40+ pages depending on formatting, and for a feature film, the estimate should be in the 85-130 minute range. The model seems to have only analyzed a portion of the screenplay and estimated based on that excerpt rather than the full work. However, if the model only received ~12 pages of text, its estimate is internally consistent with what it saw. Still, this conflicts with the feature film classification - 12 minutes is a short film. This is a notable inconsistency and error. ❌\n\n6. **Primary characters**: Identifies Mariner (Billy), Rose, Salvatori, and Dad. The Mariner and Rose are correctly identified as leads. However, placing Salvatori and Dad as primary rather than supporting is debatable but defensible given their narrative importance. ✅\n\n7. **Supporting characters**: Lists Thug 1-3, Rosco, Vinnie, Mikey, Carlos, Young Mariner. The rubric asks if Dad, Salvatori, Vinnie are among supporting cast. The model placed Dad and Salvatori as primary characters and Vinnie as supporting. This is a reasonable classification choice. Vinnie is correctly in supporting. ✅ (partially)\n\n8. **Location count**: Estimated at 12, which falls within the 5-20 range. The detailed breakdown of locations is well-evidenced. ✅\n\n9. **Locations summary**: Correctly mentions the Ruddy & Greene Building as the primary setting, along with flashback locations. ✅\n\n10. **Target audience**: Correctly identified as mature/adult content (Rated R equivalent) with specific evidence. ✅\n\n11. **Confidence calibration**: Generally reasonable. Title at 1.0, format at 0.85, genre at 0.95 - these seem well-calibrated. The duration confidence of 0.9 is too high given the inconsistency with the feature film format. ⚠️\n\n12. **Rationale quality**: Rationales are generally well-grounded in screenplay evidence with specific quotes and references. ✅\n\nThe major flaw is the duration estimate of 12 minutes, which directly contradicts the feature film classification and doesn't align with the expected 85-130 minute range for a ~430-line screenplay. This is a significant error. Everything else is quite strong with good evidence-based reasoning.",
              "tokensUsed": {
                "total": 2502,
                "prompt": 1688,
                "completion": 814,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n```json\\n{\\n  \\\"title\\\": {\\n    \\\"value\\\": \\\"The Mariner\\\",\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"The title is explicitly stated at the beginning of the screenplay and is also shown as a 'FULL-SCREEN SUPERIMPOSED TITLE CARD'.\\\"\\n  },\\n  \\\"format\\\": {\\n    \\\"value\\\": \\\"feature film\\\",\\n    \\\"confidence\\\": 0.85,\\n    \\\"rationale\\\": \\\"The screenplay exhibits the narrative complexity, character depth with flashbacks, and three-act structure typical of a feature film. It introduces a world, a central conflict, and a complex protagonist/antagonist dynamic that suggests a longer form, even though the provided text is short. It feels like the first act or a key sequence from a larger story.\\\"\\n  },\\n  \\\"genre\\\": {\\n    \\\"value\\\": [\\n      \\\"action\\\",\\n      \\\"thriller\\\",\\n      \\\"crime\\\",\\n      \\\"drama\\\",\\n      \\\"sci-fi\\\"\\n    ],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"Contains intense, violent fight sequences (Action), high-stakes confrontations and suspense (Thriller), a plot centered on stolen gang money and a crime boss (Crime), a core emotional conflict involving family trauma and betrayal (Drama), and is set in a near-future, post-collapse dystopian world (Sci-Fi).\\\"\\n  },\\n  \\\"tone\\\": {\\n    \\\"value\\\": [\\n      \\\"gritty\\\",\\n      \\\"violent\\\",\\n      \\\"brutal\\\",\\n      \\\"dark\\\",\\n      \\\"suspenseful\\\",\\n      \\\"fast-paced\\\",\\n      \\\"stylized\\\"\\n    ],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"The tone is established through descriptions of a 'ruined city' and 'grimy alley' (gritty); explicit descriptions of fighting, gunshots, and gore (violent, brutal); a bleak setting and themes of trauma (dark); tense sequences of hiding and fighting (suspenseful); rapid action beats (fast-paced); and distinct, non-naturalistic character designs like Mariner's costume and Salvatori's all-white suit (stylized).\\\"\\n  },\\n  \\\"estimated_duration_minutes\\\": {\\n    \\\"value\\\": 12,\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"Based on the standard industry heuristic of approximately one minute of screen time per page of screenplay. The provided text is roughly 12 pages long.\\\"\\n  },\\n  \\\"primary_characters\\\": {\\n    \\\"value\\\": [\\n      \\\"Mariner (Billy)\\\",\\n      \\\"Rose\\\",\\n      \\\"Salvatori\\\",\\n      \\\"Dad\\\"\\n    ],\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"Mariner is the protagonist, Rose is the deuteragonist driving the immediate plot, Salvatori is the primary antagonist, and Dad is the central figure in the flashbacks, representing Mariner's core internal conflict.\\\"\\n  },\\n  \\\"supporting_characters\\\": {\\n    \\\"value\\\": [\\n      \\\"Thug 1\\\",\\n      \\\"Thug 2\\\",\\n      \\\"Thug 3\\\",\\n      \\\"Rosco\\\",\\n      \\\"Vinnie\\\",\\n      \\\"Mikey\\\",\\n      \\\"Carlos\\\",\\n      \\\"Young Mariner\\\"\\n    ],\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"These characters are explicitly named or numbered in the script and serve as obstacles or appear in flashbacks, but are not central to the main plot or emotional arc.\\\"\\n  },\\n  \\\"location_count\\\": {\\n    \\\"value\\\": 12,\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"A direct count of distinct locations based on scene headings (sluglines): City Centre (EXT), Ruddy & Greene Building Front (EXT), Rear (EXT), Elevator (INT), 11th Floor Corridor (INT), 11th Floor Room (INT), Stairwell (INT), 13th Floor Corridor (INT), 15th Floor Corridor (INT), 15th Floor Office (INT), Coastline (EXT, PAST), and Backyard (EXT, PAST).\\\"\\n  },\\n  \\\"locations_summary\\\": {\\n    \\\"value\\\": \\\"The primary setting is the Ruddy & Greene Building, a dilapidated multi-story high-rise in a ruined city, containing trashed office floors and a luxurious top-floor suite. This is contrasted with two key flashback locations: a sunlit, idyllic coastline and a neglected, grim backyard.\\\",\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"This summary is synthesized directly from the descriptive text and scene headings provided in the screenplay.\\\"\\n  },\\n  \\\"target_audience\\\": {\\n    \\\"value\\\": \\\"Mature (Rated R equivalent)\\\",\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"The screenplay contains strong, brutal violence ('wet cracking sounds', 'bloody scrap of something with hair on it'), profanity ('shit', 'fucking', 'assholes'), and mature themes including crime, parental abuse, and trauma, making it suitable for an adult audience.\\\"\\n  }\\n}\\n```\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "fdf28914-c92d-42b3-a682-824f1710516a",
        "latencyMs": 38234,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "promptIdx": 13,
        "provider": {
          "id": "google:gemini-2.5-pro",
          "label": "Gemini 2.5 Pro"
        },
        "response": {
          "output": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The title is explicitly stated at the beginning of the screenplay and is also shown as a 'FULL-SCREEN SUPERIMPOSED TITLE CARD'.\"\n  },\n  \"format\": {\n    \"value\": \"feature film\",\n    \"confidence\": 0.85,\n    \"rationale\": \"The screenplay exhibits the narrative complexity, character depth with flashbacks, and three-act structure typical of a feature film. It introduces a world, a central conflict, and a complex protagonist/antagonist dynamic that suggests a longer form, even though the provided text is short. It feels like the first act or a key sequence from a larger story.\"\n  },\n  \"genre\": {\n    \"value\": [\n      \"action\",\n      \"thriller\",\n      \"crime\",\n      \"drama\",\n      \"sci-fi\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"Contains intense, violent fight sequences (Action), high-stakes confrontations and suspense (Thriller), a plot centered on stolen gang money and a crime boss (Crime), a core emotional conflict involving family trauma and betrayal (Drama), and is set in a near-future, post-collapse dystopian world (Sci-Fi).\"\n  },\n  \"tone\": {\n    \"value\": [\n      \"gritty\",\n      \"violent\",\n      \"brutal\",\n      \"dark\",\n      \"suspenseful\",\n      \"fast-paced\",\n      \"stylized\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"The tone is established through descriptions of a 'ruined city' and 'grimy alley' (gritty); explicit descriptions of fighting, gunshots, and gore (violent, brutal); a bleak setting and themes of trauma (dark); tense sequences of hiding and fighting (suspenseful); rapid action beats (fast-paced); and distinct, non-naturalistic character designs like Mariner's costume and Salvatori's all-white suit (stylized).\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 12,\n    \"confidence\": 0.9,\n    \"rationale\": \"Based on the standard industry heuristic of approximately one minute of screen time per page of screenplay. The provided text is roughly 12 pages long.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\n      \"Mariner (Billy)\",\n      \"Rose\",\n      \"Salvatori\",\n      \"Dad\"\n    ],\n    \"confidence\": 1.0,\n    \"rationale\": \"Mariner is the protagonist, Rose is the deuteragonist driving the immediate plot, Salvatori is the primary antagonist, and Dad is the central figure in the flashbacks, representing Mariner's core internal conflict.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\n      \"Thug 1\",\n      \"Thug 2\",\n      \"Thug 3\",\n      \"Rosco\",\n      \"Vinnie\",\n      \"Mikey\",\n      \"Carlos\",\n      \"Young Mariner\"\n    ],\n    \"confidence\": 1.0,\n    \"rationale\": \"These characters are explicitly named or numbered in the script and serve as obstacles or appear in flashbacks, but are not central to the main plot or emotional arc.\"\n  },\n  \"location_count\": {\n    \"value\": 12,\n    \"confidence\": 0.95,\n    \"rationale\": \"A direct count of distinct locations based on scene headings (sluglines): City Centre (EXT), Ruddy & Greene Building Front (EXT), Rear (EXT), Elevator (INT), 11th Floor Corridor (INT), 11th Floor Room (INT), Stairwell (INT), 13th Floor Corridor (INT), 15th Floor Corridor (INT), 15th Floor Office (INT), Coastline (EXT, PAST), and Backyard (EXT, PAST).\"\n  },\n  \"locations_summary\": {\n    \"value\": \"The primary setting is the Ruddy & Greene Building, a dilapidated multi-story high-rise in a ruined city, containing trashed office floors and a luxurious top-floor suite. This is contrasted with two key flashback locations: a sunlit, idyllic coastline and a neglected, grim backyard.\",\n    \"confidence\": 1.0,\n    \"rationale\": \"This summary is synthesized directly from the descriptive text and scene headings provided in the screenplay.\"\n  },\n  \"target_audience\": {\n    \"value\": \"Mature (Rated R equivalent)\",\n    \"confidence\": 0.95,\n    \"rationale\": \"The screenplay contains strong, brutal violence ('wet cracking sounds', 'bloody scrap of something with hair on it'), profanity ('shit', 'fucking', 'assholes'), and mature themes including crime, parental abuse, and trauma, making it suitable for an adult audience.\"\n  }\n}\n```",
          "tokenUsage": {
            "prompt": 5016,
            "completion": 1110,
            "total": 9464,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 3338,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cost": 0.05075,
          "raw": {
            "candidates": [
              {
                "content": {
                  "parts": [
                    {
                      "text": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The title is explicitly stated at the beginning of the screenplay and is also shown as a 'FULL-SCREEN SUPERIMPOSED TITLE CARD'.\"\n  },\n  \"format\": {\n    \"value\": \"feature film\",\n    \"confidence\": 0.85,\n    \"rationale\": \"The screenplay exhibits the narrative complexity, character depth with flashbacks, and three-act structure typical of a feature film. It introduces a world, a central conflict, and a complex protagonist/antagonist dynamic that suggests a longer form, even though the provided text is short. It feels like the first act or a key sequence from a larger story.\"\n  },\n  \"genre\": {\n    \"value\": [\n      \"action\",\n      \"thriller\",\n      \"crime\",\n      \"drama\",\n      \"sci-fi\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"Contains intense, violent fight sequences (Action), high-stakes confrontations and suspense (Thriller), a plot centered on stolen gang money and a crime boss (Crime), a core emotional conflict involving family trauma and betrayal (Drama), and is set in a near-future, post-collapse dystopian world (Sci-Fi).\"\n  },\n  \"tone\": {\n    \"value\": [\n      \"gritty\",\n      \"violent\",\n      \"brutal\",\n      \"dark\",\n      \"suspenseful\",\n      \"fast-paced\",\n      \"stylized\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"The tone is established through descriptions of a 'ruined city' and 'grimy alley' (gritty); explicit descriptions of fighting, gunshots, and gore (violent, brutal); a bleak setting and themes of trauma (dark); tense sequences of hiding and fighting (suspenseful); rapid action beats (fast-paced); and distinct, non-naturalistic character designs like Mariner's costume and Salvatori's all-white suit (stylized).\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 12,\n    \"confidence\": 0.9,\n    \"rationale\": \"Based on the standard industry heuristic of approximately one minute of screen time per page of screenplay. The provided text is roughly 12 pages long.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\n      \"Mariner (Billy)\",\n      \"Rose\",\n      \"Salvatori\",\n      \"Dad\"\n    ],\n    \"confidence\": 1.0,\n    \"rationale\": \"Mariner is the protagonist, Rose is the deuteragonist driving the immediate plot, Salvatori is the primary antagonist, and Dad is the central figure in the flashbacks, representing Mariner's core internal conflict.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\n      \"Thug 1\",\n      \"Thug 2\",\n      \"Thug 3\",\n      \"Rosco\",\n      \"Vinnie\",\n      \"Mikey\",\n      \"Carlos\",\n      \"Young Mariner\"\n    ],\n    \"confidence\": 1.0,\n    \"rationale\": \"These characters are explicitly named or numbered in the script and serve as obstacles or appear in flashbacks, but are not central to the main plot or emotional arc.\"\n  },\n  \"location_count\": {\n    \"value\": 12,\n    \"confidence\": 0.95,\n    \"rationale\": \"A direct count of distinct locations based on scene headings (sluglines): City Centre (EXT), Ruddy & Greene Building Front (EXT), Rear (EXT), Elevator (INT), 11th Floor Corridor (INT), 11th Floor Room (INT), Stairwell (INT), 13th Floor Corridor (INT), 15th Floor Corridor (INT), 15th Floor Office (INT), Coastline (EXT, PAST), and Backyard (EXT, PAST).\"\n  },\n  \"locations_summary\": {\n    \"value\": \"The primary setting is the Ruddy & Greene Building, a dilapidated multi-story high-rise in a ruined city, containing trashed office floors and a luxurious top-floor suite. This is contrasted with two key flashback locations: a sunlit, idyllic coastline and a neglected, grim backyard.\",\n    \"confidence\": 1.0,\n    \"rationale\": \"This summary is synthesized directly from the descriptive text and scene headings provided in the screenplay.\"\n  },\n  \"target_audience\": {\n    \"value\": \"Mature (Rated R equivalent)\",\n    \"confidence\": 0.95,\n    \"rationale\": \"The screenplay contains strong, brutal violence ('wet cracking sounds', 'bloody scrap of something with hair on it'), profanity ('shit', 'fucking', 'assholes'), and mature themes including crime, parental abuse, and trauma, making it suitable for an adult audience.\"\n  }\n}\n```"
                    }
                  ],
                  "role": "model"
                },
                "finishReason": "STOP",
                "index": 0
              }
            ],
            "usageMetadata": {
              "promptTokenCount": 5016,
              "candidatesTokenCount": 1110,
              "totalTokenCount": 9464,
              "promptTokensDetails": [
                {
                  "modality": "TEXT",
                  "tokenCount": 5016
                }
              ],
              "thoughtsTokenCount": 3338
            },
            "modelVersion": "gemini-2.5-pro",
            "responseId": "P7mkaaPbHpS4qtsP4bbEmQQ"
          },
          "cached": false,
          "metadata": {}
        },
        "score": 0.75,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.040296,
        "error": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. ✅\n\n2. **Format**: Identified as 'short film' instead of 'feature film'. The rubric states this is a feature film screenplay (~430 lines). The model estimated 10-12 pages and 12 minutes, which is a significant error. The confidence of 0.9 is poorly calibrated given this is wrong. ❌\n\n3. **Genre**: Includes action and crime, which matches the rubric's expectation. Also includes drama and dark comedy, which seem reasonable. ✅\n\n4. **Tone**: Captures gritty, violent, and dark qualities well. ✅\n\n5. **Duration**: Estimated 12 minutes, but the rubric says 85-130 minutes is reasonable for a ~430-line screenplay. This is drastically wrong. ❌\n\n6. **Primary characters**: Identifies The Mariner and Rose as leads. Also includes Salvatori as primary rather than supporting. Partially correct. ✅ (mostly)\n\n7. **Supporting characters**: Lists Dad, Vinnie, Mikey, Carlos, Rosco, and thugs. The rubric expects Salvatori among supporting cast (model placed him as primary instead). Dad is listed. Vinnie is listed. Mostly correct. ✅\n\n8. **Location count**: Estimated 10, which falls within the 5-20 range. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene building as the primary setting. ✅\n\n10. **Target audience**: Correctly identified as Adult/Mature with good rationale. ✅\n\n11. **Confidence calibration**: The format confidence of 0.9 is poorly calibrated since it's wrong. Duration confidence of 0.8 is also poorly calibrated for a drastically wrong answer. ❌\n\n12. **Rationale quality**: Rationales are generally grounded in screenplay evidence, but the format/duration rationales are based on incorrect page count estimation. Mixed quality.\n\nThe two major errors are format (short film vs. feature film) and duration (12 min vs. 85-130 min). These are significant metadata errors that would fundamentally mischaracterize the project. However, most other fields are accurate and well-supported. The format/duration errors are critical since they represent the fundamental nature of the project.",
        "gradingResult": {
          "pass": false,
          "score": 0.68125,
          "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. ✅\n\n2. **Format**: Identified as 'short film' instead of 'feature film'. The rubric states this is a feature film screenplay (~430 lines). The model estimated 10-12 pages and 12 minutes, which is a significant error. The confidence of 0.9 is poorly calibrated given this is wrong. ❌\n\n3. **Genre**: Includes action and crime, which matches the rubric's expectation. Also includes drama and dark comedy, which seem reasonable. ✅\n\n4. **Tone**: Captures gritty, violent, and dark qualities well. ✅\n\n5. **Duration**: Estimated 12 minutes, but the rubric says 85-130 minutes is reasonable for a ~430-line screenplay. This is drastically wrong. ❌\n\n6. **Primary characters**: Identifies The Mariner and Rose as leads. Also includes Salvatori as primary rather than supporting. Partially correct. ✅ (mostly)\n\n7. **Supporting characters**: Lists Dad, Vinnie, Mikey, Carlos, Rosco, and thugs. The rubric expects Salvatori among supporting cast (model placed him as primary instead). Dad is listed. Vinnie is listed. Mostly correct. ✅\n\n8. **Location count**: Estimated 10, which falls within the 5-20 range. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene building as the primary setting. ✅\n\n10. **Target audience**: Correctly identified as Adult/Mature with good rationale. ✅\n\n11. **Confidence calibration**: The format confidence of 0.9 is poorly calibrated since it's wrong. Duration confidence of 0.8 is also poorly calibrated for a drastically wrong answer. ❌\n\n12. **Rationale quality**: Rationales are generally grounded in screenplay evidence, but the format/duration rationales are based on incorrect page count estimation. Mixed quality.\n\nThe two major errors are format (short film vs. feature film) and duration (12 min vs. 85-130 min). These are significant metadata errors that would fundamentally mischaracterize the project. However, most other fields are accurate and well-supported. The format/duration errors are critical since they represent the fundamental nature of the project.",
          "namedScores": {},
          "tokensUsed": {
            "total": 2207,
            "prompt": 1600,
            "completion": 607,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.9125,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=1.00, format_accuracy=1.00, genre_accuracy=0.75, json_valid=0.90, location_accuracy=1.00, title_accuracy=1.00, tone_accuracy=0.60",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": false,
              "score": 0.45,
              "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. ✅\n\n2. **Format**: Identified as 'short film' instead of 'feature film'. The rubric states this is a feature film screenplay (~430 lines). The model estimated 10-12 pages and 12 minutes, which is a significant error. The confidence of 0.9 is poorly calibrated given this is wrong. ❌\n\n3. **Genre**: Includes action and crime, which matches the rubric's expectation. Also includes drama and dark comedy, which seem reasonable. ✅\n\n4. **Tone**: Captures gritty, violent, and dark qualities well. ✅\n\n5. **Duration**: Estimated 12 minutes, but the rubric says 85-130 minutes is reasonable for a ~430-line screenplay. This is drastically wrong. ❌\n\n6. **Primary characters**: Identifies The Mariner and Rose as leads. Also includes Salvatori as primary rather than supporting. Partially correct. ✅ (mostly)\n\n7. **Supporting characters**: Lists Dad, Vinnie, Mikey, Carlos, Rosco, and thugs. The rubric expects Salvatori among supporting cast (model placed him as primary instead). Dad is listed. Vinnie is listed. Mostly correct. ✅\n\n8. **Location count**: Estimated 10, which falls within the 5-20 range. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene building as the primary setting. ✅\n\n10. **Target audience**: Correctly identified as Adult/Mature with good rationale. ✅\n\n11. **Confidence calibration**: The format confidence of 0.9 is poorly calibrated since it's wrong. Duration confidence of 0.8 is also poorly calibrated for a drastically wrong answer. ❌\n\n12. **Rationale quality**: Rationales are generally grounded in screenplay evidence, but the format/duration rationales are based on incorrect page count estimation. Mixed quality.\n\nThe two major errors are format (short film vs. feature film) and duration (12 min vs. 85-130 min). These are significant metadata errors that would fundamentally mischaracterize the project. However, most other fields are accurate and well-supported. The format/duration errors are critical since they represent the fundamental nature of the project.",
              "tokensUsed": {
                "total": 2207,
                "prompt": 1600,
                "completion": 607,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n```json\\n{\\n  \\\"title\\\": {\\n    \\\"value\\\": \\\"The Mariner\\\",\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"Explicitly stated in the opening text and described as a 'FULL-SCREEN SUPERIMPOSED TITLE CARD'.\\\"\\n  },\\n  \\\"format\\\": {\\n    \\\"value\\\": \\\"short film\\\",\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"The script presents a self-contained narrative arc (rescue, revelation, emotional resolution) within a limited page count (approx. 10-12 pages based on scene density). It lacks the length of a feature or the open-ended setup typical of a series pilot.\\\"\\n  },\\n  \\\"genre\\\": {\\n    \\\"value\\\": [\\n      \\\"action\\\",\\n      \\\"crime\\\",\\n      \\\"drama\\\",\\n      \\\"dark comedy\\\"\\n    ],\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"Action is evident in the multiple fight scenes and gunplay. Crime is central to the plot (gangs, stolen money, blockchain). Drama drives the flashbacks and the protagonist's relationship with his father. Dark comedy is present in the juxtaposition of the gritty setting with the protagonist's absurd costume and the banter regarding the 'AirTag' and 'flare gun'.\\\"\\n  },\\n  \\\"tone\\\": {\\n    \\\"value\\\": [\\n      \\\"gritty\\\",\\n      \\\"violent\\\",\\n      \\\"dark\\\",\\n      \\\"satirical\\\",\\n      \\\"emotional\\\"\\n    ],\\n    \\\"confidence\\\": 0.85,\\n    \\\"rationale\\\": \\\"The setting is a ruined, post-apocalyptic city (gritty/dark). The action involves blood, bone-breaking, and shooting (violent). The protagonist's 'hero' persona is treated with a mix of reverence and absurdity (satirical). The flashbacks regarding the abusive father provide a serious emotional undercurrent.\\\"\\n  },\\n  \\\"estimated_duration_minutes\\\": {\\n    \\\"value\\\": 12,\\n    \\\"confidence\\\": 0.8,\\n    \\\"rationale\\\": \\\"Based on the standard rule of 1 minute per page. The text contains significant action descriptions and dialogue across approximately 10-12 scenes, suggesting a runtime of roughly 10 to 15 minutes.\\\"\\n  },\\n  \\\"primary_characters\\\": {\\n    \\\"value\\\": [\\n      \\\"The Mariner (Billy)\\\",\\n      \\\"Rose\\\",\\n      \\\"Salvatori\\\"\\n    ],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"The Mariner is the protagonist. Rose is the deuteragonist/companion driving the plot. Salvatori is the primary antagonist introduced in the climax.\\\"\\n  },\\n  \\\"supporting_characters\\\": {\\n    \\\"value\\\": [\\n      \\\"Dad\\\",\\n      \\\"Vinnie\\\",\\n      \\\"Mikey\\\",\\n      \\\"Carlos\\\",\\n      \\\"Rosco\\\",\\n      \\\"Thug 1\\\",\\n      \\\"Thug 2\\\"\\n    ],\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"Dad appears in significant flashbacks. Vinnie, Mikey, Carlos, and Rosco are named henchmen with dialogue. Thugs 1 and 2 have minor physical roles.\\\"\\n  },\\n  \\\"location_count\\\": {\\n    \\\"value\\\": 10,\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"Distinct locations identified: 1. Ext. City Centre, 2. Ext. Building Front, 3. Ext. Building Rear, 4. Int. Elevator, 5. Int. 11th Floor/Room, 6. Int. Stairwell, 7. Int. 13th Floor, 8. Int. 15th Floor (Office), 9. Ext. Coastline (Flashback), 10. Ext. Backyard (Flashback).\\\"\\n  },\\n  \\\"locations_summary\\\": {\\n    \\\"value\\\": \\\"A dilapidated, post-apocalyptic city centre, specifically focusing on various floors (elevator, stairwells, hallways, penthouse) of the ruined 'Ruddy & Greene' high-rise building. Flashbacks occur in a sunny coastal boat setting and a messy backyard.\\\",\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"Derived from scene headings (SLUGLINES) and descriptive text detailing the ruined city and the specific floors of the building.\\\"\\n  },\\n  \\\"target_audience\\\": {\\n    \\\"value\\\": \\\"Adult / Mature\\\",\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"The script contains strong language ('fuck', 'shit'), graphic violence (shooting, breaking necks, blood), and mature themes (child abuse, alcoholism, organized crime).\\\"\\n  }\\n}\\n```\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "89e5a3f7-2528-4e45-b2d5-c0006899f6f3",
        "latencyMs": 38015,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "promptIdx": 14,
        "provider": {
          "id": "google:gemini-3-pro-preview",
          "label": "Gemini 3 Pro"
        },
        "response": {
          "output": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"Explicitly stated in the opening text and described as a 'FULL-SCREEN SUPERIMPOSED TITLE CARD'.\"\n  },\n  \"format\": {\n    \"value\": \"short film\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The script presents a self-contained narrative arc (rescue, revelation, emotional resolution) within a limited page count (approx. 10-12 pages based on scene density). It lacks the length of a feature or the open-ended setup typical of a series pilot.\"\n  },\n  \"genre\": {\n    \"value\": [\n      \"action\",\n      \"crime\",\n      \"drama\",\n      \"dark comedy\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"Action is evident in the multiple fight scenes and gunplay. Crime is central to the plot (gangs, stolen money, blockchain). Drama drives the flashbacks and the protagonist's relationship with his father. Dark comedy is present in the juxtaposition of the gritty setting with the protagonist's absurd costume and the banter regarding the 'AirTag' and 'flare gun'.\"\n  },\n  \"tone\": {\n    \"value\": [\n      \"gritty\",\n      \"violent\",\n      \"dark\",\n      \"satirical\",\n      \"emotional\"\n    ],\n    \"confidence\": 0.85,\n    \"rationale\": \"The setting is a ruined, post-apocalyptic city (gritty/dark). The action involves blood, bone-breaking, and shooting (violent). The protagonist's 'hero' persona is treated with a mix of reverence and absurdity (satirical). The flashbacks regarding the abusive father provide a serious emotional undercurrent.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 12,\n    \"confidence\": 0.8,\n    \"rationale\": \"Based on the standard rule of 1 minute per page. The text contains significant action descriptions and dialogue across approximately 10-12 scenes, suggesting a runtime of roughly 10 to 15 minutes.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\n      \"The Mariner (Billy)\",\n      \"Rose\",\n      \"Salvatori\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"The Mariner is the protagonist. Rose is the deuteragonist/companion driving the plot. Salvatori is the primary antagonist introduced in the climax.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\n      \"Dad\",\n      \"Vinnie\",\n      \"Mikey\",\n      \"Carlos\",\n      \"Rosco\",\n      \"Thug 1\",\n      \"Thug 2\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"Dad appears in significant flashbacks. Vinnie, Mikey, Carlos, and Rosco are named henchmen with dialogue. Thugs 1 and 2 have minor physical roles.\"\n  },\n  \"location_count\": {\n    \"value\": 10,\n    \"confidence\": 0.9,\n    \"rationale\": \"Distinct locations identified: 1. Ext. City Centre, 2. Ext. Building Front, 3. Ext. Building Rear, 4. Int. Elevator, 5. Int. 11th Floor/Room, 6. Int. Stairwell, 7. Int. 13th Floor, 8. Int. 15th Floor (Office), 9. Ext. Coastline (Flashback), 10. Ext. Backyard (Flashback).\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A dilapidated, post-apocalyptic city centre, specifically focusing on various floors (elevator, stairwells, hallways, penthouse) of the ruined 'Ruddy & Greene' high-rise building. Flashbacks occur in a sunny coastal boat setting and a messy backyard.\",\n    \"confidence\": 0.95,\n    \"rationale\": \"Derived from scene headings (SLUGLINES) and descriptive text detailing the ruined city and the specific floors of the building.\"\n  },\n  \"target_audience\": {\n    \"value\": \"Adult / Mature\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The script contains strong language ('fuck', 'shit'), graphic violence (shooting, breaking necks, blood), and mature themes (child abuse, alcoholism, organized crime).\"\n  }\n}\n```",
          "tokenUsage": {
            "prompt": 5016,
            "completion": 1020,
            "total": 7538,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 1502,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cost": 0.040296,
          "raw": {
            "candidates": [
              {
                "content": {
                  "parts": [
                    {
                      "text": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"Explicitly stated in the opening text and described as a 'FULL-SCREEN SUPERIMPOSED TITLE CARD'.\"\n  },\n  \"format\": {\n    \"value\": \"short film\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The script presents a self-contained narrative arc (rescue, revelation, emotional resolution) within a limited page count (approx. 10-12 pages based on scene density). It lacks the length of a feature or the open-ended setup typical of a series pilot.\"\n  },\n  \"genre\": {\n    \"value\": [\n      \"action\",\n      \"crime\",\n      \"drama\",\n      \"dark comedy\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"Action is evident in the multiple fight scenes and gunplay. Crime is central to the plot (gangs, stolen money, blockchain). Drama drives the flashbacks and the protagonist's relationship with his father. Dark comedy is present in the juxtaposition of the gritty setting with the protagonist's absurd costume and the banter regarding the 'AirTag' and 'flare gun'.\"\n  },\n  \"tone\": {\n    \"value\": [\n      \"gritty\",\n      \"violent\",\n      \"dark\",\n      \"satirical\",\n      \"emotional\"\n    ],\n    \"confidence\": 0.85,\n    \"rationale\": \"The setting is a ruined, post-apocalyptic city (gritty/dark). The action involves blood, bone-breaking, and shooting (violent). The protagonist's 'hero' persona is treated with a mix of reverence and absurdity (satirical). The flashbacks regarding the abusive father provide a serious emotional undercurrent.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 12,\n    \"confidence\": 0.8,\n    \"rationale\": \"Based on the standard rule of 1 minute per page. The text contains significant action descriptions and dialogue across approximately 10-12 scenes, suggesting a runtime of roughly 10 to 15 minutes.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\n      \"The Mariner (Billy)\",\n      \"Rose\",\n      \"Salvatori\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"The Mariner is the protagonist. Rose is the deuteragonist/companion driving the plot. Salvatori is the primary antagonist introduced in the climax.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\n      \"Dad\",\n      \"Vinnie\",\n      \"Mikey\",\n      \"Carlos\",\n      \"Rosco\",\n      \"Thug 1\",\n      \"Thug 2\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"Dad appears in significant flashbacks. Vinnie, Mikey, Carlos, and Rosco are named henchmen with dialogue. Thugs 1 and 2 have minor physical roles.\"\n  },\n  \"location_count\": {\n    \"value\": 10,\n    \"confidence\": 0.9,\n    \"rationale\": \"Distinct locations identified: 1. Ext. City Centre, 2. Ext. Building Front, 3. Ext. Building Rear, 4. Int. Elevator, 5. Int. 11th Floor/Room, 6. Int. Stairwell, 7. Int. 13th Floor, 8. Int. 15th Floor (Office), 9. Ext. Coastline (Flashback), 10. Ext. Backyard (Flashback).\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A dilapidated, post-apocalyptic city centre, specifically focusing on various floors (elevator, stairwells, hallways, penthouse) of the ruined 'Ruddy & Greene' high-rise building. Flashbacks occur in a sunny coastal boat setting and a messy backyard.\",\n    \"confidence\": 0.95,\n    \"rationale\": \"Derived from scene headings (SLUGLINES) and descriptive text detailing the ruined city and the specific floors of the building.\"\n  },\n  \"target_audience\": {\n    \"value\": \"Adult / Mature\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The script contains strong language ('fuck', 'shit'), graphic violence (shooting, breaking necks, blood), and mature themes (child abuse, alcoholism, organized crime).\"\n  }\n}\n```",
                      "thoughtSignature": "EvQqCvEqAb4+9vu6Gr+82VH6dfRccrQGXMp000FKC79n9+wo4GqW9si9cw02XdGSrczL0VZgy6VDv7lF5jNg5u98Uj1OS7rLMV9Gf1BJAeRQJL6hg/mdx5AcRmVqmjFzgWJF4rdF9EXvdT2+oIf+8lrHq+vwondy0LYwUfOmBs5eY91V3vpjYt9KT+sjK3VDNnhymDpzH0/Y09FnplfytKKizeIRqZik1ItKh7sXyCnskxMvbVt874B0T78TLpATNR12sWX7WMEzKbMn+OP77yIlrBRQnlfMuHIrMrh8wivf0FwWMx6aVBga6f99w1MAdYOnO3PtwOGZwEgIgnMvzTC++/Ly4gQ8gN806FoYv9obIk2TWjecNVexex5QQnY/zUvrn+G3T/agZZvn6qsDs8uj8FPnbFfnqQv7TFwDK/fnNP+xRne8B/4eHRBO2K5bKglDAlrWkKUYuE80KUnxcPkgwxZgbOKJ6gD2+oWDNqRjC/oybiW2mqeGhybv8v8IJrk1UZIdLMOTHtPx0/epBXeotKy+2G7sjqmFrd0Z5wuDpf3EALJJFk+d1sw1d0RwljAuTtRNGkxaoi9N/onKexHEy47pS1y5Az3wR9ek6GseU9i34pr+f3XgeZR1AonbUmpzy5jX5FzYCCRW2bFOZmlQq+PTGEenZt5UT7MvvBJExN7Pn8QJk9MTb0Ime3JAKzoM4a7+ILUR1CcKogUVA5gCgd2M/n9vUzY0DaV/Z02rAFJzqGsCZZ8ov42Qr9lepwlKUhTe9P5CdxOD8lv22fVGjIK3aYX5F/WBVZvN+oVyJDnDgRzXz/kPbvsa/Ak9jNSUGuvZwdEqXaAB1P6T89XBOIFk8I1b1Da0rqZQPS17V2gC2L9LZVNeY/63oAxba58hKkGcJnjctMzkisgn+dhmQTa1FzCunZSOWwVglbEt0kl8MfyklUf8UMpyt46t6EKnS2YDPXjnH4MVTbhxhS7w3lb30XJBhdteSjBdF+zcNpOC88si5Z9Fx0F6E75Oqy4UTZtv8aDLB5DZzeNzOid/XKX2fYtGtEkAFAi54zO7mm3vBrAoIWFMfLB0AvLTGvvMiP0AQ5T+2EWfxVDkoj8tduLzWRcocMAq5M5tDSCgus9fH/AlprBlchfi6YsoVDg9LsVy6pc3rU3ZHG/qT6gba+Aq1inyWuaZ7n4rqcB/ANQAY9Pgem/uN2+vhl4rr66YrbnGzL+R4VOLUU36Lmx2PXvtqAxQZ/tGev2da4GvIaDpbBjh5aiXCCX6l6xqPilieG4P0wNullY78CQmwepY5wvzZN1V6wwmDi2I6B9S4NF0m815Lr8bYjc+GdGN0PUGpioD0BLPAcp1QY1hQn9F3MWv++nC5rfYnCCeM5Kp3HNeew7h0wxQAULQTNu6FzHGNb7M+4sfuKGsAF01nckMp9GD8uDVJV9SS/CHQC4uJBfu7nBnBZPrn2cEBRSpzvgT4Cc9uCJI68Z14VycRJEu0gDXxzBocAy0CLHN4a3zNQ+9vCxlop8653QVmwiTuN88WgFeq/HJ/FFpQb91xCIQygZPAdNSXhgY/8skzPaMZK5gFOOsraLuv3mBIc1k4fWZodXcHwlsjbM7ZglC/AwQwnjGQmsqZaLAZg+zwbI1LLKJCqkRH5kQzWYD19XXxJErhVZv6+Tnb3akpeNeYvs8oVw9rz7SyoghWRMzvIQ1qwC9uYW9jncTLEQhuHY3TZzYxRCbInN9P6kmAoRX23sA5HH3r5aNgn3j8SV9EbWWKeXcCcSfDYj9ZaIVjpO2wYTg44F8aRVozG/QZzCgKYTy2KVGgNJk256qzRMouzqp+W/d2igxZ5Wu2c+L+8S0uGaxYsPfK15Vxc1mGFM6VKK6iFDbNel2BJerLcfNNzG3bOrT24Hs9cK9tg4pnV3AuYyfs41PJ/zvXPDHddNBlYiwIGz4g6trRSVb0cwmngZoB2Xt84eXnhziMHuKwWnFTo5Wwxijh+v3WQ9X1C8d455gP9S8xKMHgffZVqdngv/zFSVpyeojBokZALxVjwZbRWoh503K39D97QrPZvecyZMEW2FSl06GX5QVO0ZHQ9oRYwh/HjQ76kcMLhIZH+KeRwWoIuoPS0Gwzyn9Vo6cmbK6QKd3uPVXt71mzCBcBn5KaWpY2/OR3ZE2+nQoPPv4cWAC4tXhPMqQ0JGIDZjP+0urUwdrjEPYsgmGvQDOtA5avQajTXL35JCxVSOggGzqhI34LnIhBXChVX4w82YJBwUq1jI0JPp88Z2V6CRECOLHijMzKOn1ZTROue8e/EBqnD8y24j51KPO4ALaFXB0wFdCdp/B8QHeBZuGBuwCd3InjhDY47pYtSKlnfntFVLcHX+X6zwD/vOshlKf7gBNnNOHPjcaH5N7Zf6x7qGpfpoeCzbBz1/S3mo9YEasXLUdnPkviYqjlVUGIFj0SNHleYr0rJIGVpMdypVACaOV2aJhAkCS9F57hum4UIn6bGnuq/2YoVObY01rX8fTxk+2aCLJ57Zlev7vrbDqhHsMTt76rQ/4ZjmodbpjVJrb882aww80WExOvZNNj/tWfeBNh/PTnFTkMS6NoWRl8gQZndU5eEzKjz7o3vRaGC4FeqZXdU781B70ZZpX4HGVbX89zuHmC4z6X2jOcU8kyDzjFiqO/X05dTvDy9bIwGKdB9Hu1ylm3SAmW6HN+oZJhLrVCBGz6weSfj1QecHvmn9uEDoLs2mBGL7R8as/sEClbo6oxb48U2pdDCotw0wrQEbQ2rFBjF0T352EWrtduqFtZlL5gjEmtVKiPaaOSrj25rzY8+E6c63/YoSqpbsTb5B4k8wmuabvssHcGjzfUd6HCeJgHJeCRc/MNNJViI2GobIt3oSywQO4sgRRy4OEPgqUb6iikaNKnqcHC7spGMw8pjzkHqHPzeGI2PJ/xBVVEYBMHBxCyFgz9HG0k4Ehx0n3ENctbOgO5SD9XgE7UEoW5rUuvTlUsOkM0Pnu0HF8NdMZTNroIWPJB+OX1ZlPgALW6PAzNepMokuawUupMRlE2/qphTHUi2ZrFaLIuNKCy86EYnM2zSZqoB54xlCqPEvM2V10apUTZwy31WY7TAVf6IT2FE/vhiLpMyUo8ztP+k1pE8F3EM42FJdMgtZMO7YK8WQy9MaHvD9fRi+640mlRd6BkSTVC0eM427fasLXhVDFq+8qr5FNwjytfeDZvZklrysiRmZI0jBUvyOErx9vM51QYHdF4xSWzjDSYY881aJeCsCnWluSNf+BuP5imHGZpv6Pb7E9qgxy1sY3CCDxzJZODBoB8TahjNrIHWMljmlxyK4qpffpKfCP5FPeuGEHDmaszaUh/D59XFWbzVeV+dE4f7nRYZG+qd8BspEAwBC1ardkbuEuWg/3MGrocM+4rkH8D3u7kTn1VBq7VFFw02Fr/utnegKDF3VbX12vVyv4tKEtsGOC8v0aqY1v2l0fR93hOb8mysp0rS0y4hmULERmZRHfYtJJIcDwQ1ffavXXjkeiIt7aX0iDSFGqyGKW+C8r23S6XLtKYTt3wGprW7hDDB+vdM7pkNMI23cEAfG2sbvaz70ht3QI8d9x6GtWGX3Yz+AZIxpv5n82A/YdeFdQqDo0RlPOV34+BCwhLMM8xDxlw+ndEKbfSbtyhraZzD7WIEtAsOFPZy2pQRQ0AifLPeRJNp3lTI3KkY/bdXvF363eHvk0+EZmxegVu14INzshLMc4ctnks/xqGowcFyHnfjORgwaIcue5UKU692Tv3n5KuPrZPoL4+PwzYJOx5GiN7JpGs6ExkDY29jwmTVYZeuZvSjhUtwh9EdfB/KFlHRUSzNQM1RbGAzo6ztmvzrej5894VARnADD9Dw5lFFgsDSP8bkGe88KQ+VZSXhkcHAp64/IcwEoEreoWIde46BsfKPDdo/hpo2f5mNZUcYDQLEKPZBAAZRjrM1uBQSXhJnpv6hTBjYFTvWmzN9NA62kTsEqy5YshF8PypTLD1O7pfW7D0q9DdxU3xJvgjDvo6XVbDHEJzLnLMGrPTkoipuAkiqhSIRspHrE9YeFRd0zaPwTcKqp77c7VRHdm0of4sEp89U1YQ9Sjb+W2F+RTMOwoOCHs9U1+WyAdGGegokVwnWdDuTwDGoOr7twqyL4aOOI/za9JKzyyBd8yNbryJoAJxnh/aez4l6WBWft34uecDyaZhT/RBwFpKMU3EKa2m5lpGAKjntqs8RwXE3njjB+qMf3l4jzzejJnoK5LET8fR7bUQ+BFFSAA3i/TCQNFQFwYqk6NDQn78vazZBy7i+NIRNTnZbAbrVBNWKKvCQedTWqLmjzKptP09ntea0Dlxvbk3Qhn5J+uR+QElkIrl+HEa52Z/+rQQevwGpEt+y4hezZNmDDJ9WHfLR5JJXsIRv7Xbvg9bDBcL8HHPzid7EKI6C41SUrDB2pHW8n3u2R0xR9tn73XqdZC765YQUj1F5k/J6LkZ6vLLw9O1gGCSsKhiCSXgxG3aT3odQztFRx7SKrRCPL+lxoDGWUbBaTLrja045YqPonpHr/qGf/ppZENy9c0+xuTxGXvsE6Rmy+h5ZmSu2QuFp5Jefe/UDg38v1Bw8D8wINLTkde1AhbYpOdsq0uziNhT2X7B/RiItUZ1OXrgGlo9eVSt6SBNYvyOM/9Teq72P2Ljekx95Is1f55YoSoP0YeitCtnh7zflT98CrDUvLkc+2jaNIKHqNhcYMRNZhjk4PzV8hK3ls0YaeuGrGuiaxjJqSKhTnGhDkJ20zr+LzEjgdc2GD3OXdqP/9EOFFECOo7x2PGRHUWUAV3LH3FYmXt7FmWSxGYHA9i1ZBxBpythS5TEiHalTXwiPatvfkMBHftH/1ScCjEbYuSH9/sfolwbBV5UimeE/DHYiIjdQy74Woh5GhNHwoAsCErMOYFU6FqaIzx9dhlDxMHhxVjyPb8lqYsjkK+0hxpoe/aeLooHroU1ZcXrZfFEINHbCiGKEJMjQax0mDjfw6ZJjsRVBxxpdiCNfhYlsnox7rr2XaiwmaM4LTuJ4LaCbI+mnnO3Tj4xCbidf7BRDSgsmZbxuFxn7FsAMmwJDAHwrUOqTc1zyuwK2n+AERey73mMU8ylxUGsWz5S8xi6xFvVnI9GXrWKnwi0oVJf7Pzoy/chmUw8J5tf8HS+3xJ8S9ZAA1U8iWljy0r1r/EKcJNdzu41A7HR7CF8kEtJs9tEGIsXMIMmNHmAjLxlkiYYTKQgKTNBfyKUpugGs/iuqNhAPAgFjZLEcwxIP6Z8Lejr8b05xjMXNMQz/9zI3atf0Nl47VL3LoqfWYnmbw7oHTe56P+Tjf9MSwdaFkg0q+O1nQusIqgNz2AypKihqNTyrihFj68H4IJMLl6JVeQS5Zse1Rxam0pQAd2KKjG9wLUzX1YRZxY6FrCS1dicUOZz6xveo8CypA6x1I3To6UjPCkF1kl7xoB9mfYQcVL1qse59fjuKwYu0u6BJNCl4dVrdO16ZaOwkjCRUU1fWUd6aRLc7l20/wQWZBhoBkZmbeRFuao/UYbTtnxUCNE1Wbz9oFTIvy4JiRF0rBqdBydWHYhja93AXztE2d0AGGxp7/5aIyxYCKH6VAv1WKsnqdgFYfmtxWggP1NPdOrYSPLqfYpJUUUgT9u+jfxyfjwmxCNrGmEoMq8t6WndbyOtTfwmn/hNrsNBWCJj4xuh5swGLbE0YkCEFS+kLMsImmeXyo7ypsMjcXBTiKsKOEjup1EP2amZYBM9sykmcqNADFBzFL8MX7STAZ3Co+dW+MwHwkr7mewCwAbr4MFB1NdAkjb2/2MO4S7OPVdVQHWTT26bfkYzh6Oia9tetKc4xF9Cb2H9jfXsZzixqwVefCRSc04pUXbZ/79YUqnwlRDsB7B80UNGMPqDRIK1njSmN/wLv2ylK+pqCLHEM2NMjfhHCeaJBEMLo3QhKvTuNvV446EMqz3578Es6HFxx6gm4zseACeMLZOywRgP8iEa65KleQJxJQJYTBHkDXMp/kIIM+KRpEmNptUgVI/U7sttKvTnaK9ddbdUTHPNWmuFterajCw/Pmafnt3VBrfMTzLqmkrt5pw4iULJcwKhBNPqnK9N3IHiRr7lF+4GIiXX8srckyo4MYQnorf6h6uQLw/noXACCYmaaqoZo1Lrx9CBlu5Xwsi9ZTmk8kHw/UAU6SyqyLfJoYuyntQtw4pWCnLhTz90h+ArG5miaz4DeOCKkrOTkkUHBv4PoJMWHd5lPltXB5MazOF6l+mWcpsRVXKYu1eVnZ1qMZI7tXEBjBFlej7P8BErbBBAj6Jsm2+bjjOA5EptJriXKxGgfsT/0cZsD8QxWlK8HBFmEVS6wuTLC8Rof7g45IcB+hQcsinwfp4UMzu8rydI+AJUOXGD43tL7OBOvNxhSd2WQbipIVxlAllAogU8MnZ76+80bAhGUcKjRLW12bWw16F9xRWlYzFwxi2xVPEhsqp3Ub2qfwFFdmlQsEan57C+lRyjj7CEBIVY4OFYOLCBglGMxDkip2a37g7fz2C120CFVrTNK+E9Brv7j3FyPTP7M9ubEsIwh5/zEMWGBw7EwE539jizrcYTxKpTmGGpfRrhwqF2gtrRsYn336XXgrdTanwKEK5PW3RQ+/1cvp8feOkC5wJafSk1ITRRIcF/E9DPvG8N29HSPtiYZ8n2K4KNjpx/TXW0W11tzNX7GVWFvlx7bL00flYs4YoLMs4EP/q0cm52wIuT2+qXKJ6mya+S6pVpoVFo66hdiXz36jpjg3lq3c3ILj7oLWTXu9RH8uENsMPtDB4DL4v/lbFGaWgRkYl6dRRW2Jw8aVKZfng6Zxsvwso+oA/TkX4ia8KSqN/OC3z9fqskXNAQP28+FUm3akQWbn3ducZmjuklT8bZcF4YettiwC1EAWjOmWRepsf5k21rZ4LESgoCQb40lZkyYwhRRT+dDc0c/z0TrVLSREsVs0cZ8l212x6hggapKr8CwP0Z3j+wQy7Q2tm8dyoKdUpMXDgUpQNdQfyOYk2bi862jmFnKCPXwSVgetQxyzJgb2YZIXQFunJvEZRinUVWVKlQN9jmMub0ts0nTMzT/ciVBjCdc/Pajr/qpMhgjlHWI0Zx8/SdIBJbIzy+55ZZXkyyqM83+oVfs+wAW+NQqubAOZTCeGttO7uu6cx66iQw4p92sfIX51lriiqBc293s6PJNToHi8puoAHZ+DPa4s0wl1winpz6n4J5YtWgeV4ZXY3xqwwej7mseLXR3RauJ7VQHbxM8M6y7dm3lD2WdhrC03lVod092zLUOSMHXSPQhk="
                    }
                  ],
                  "role": "model"
                },
                "finishReason": "STOP",
                "index": 0
              }
            ],
            "usageMetadata": {
              "promptTokenCount": 5016,
              "candidatesTokenCount": 1020,
              "totalTokenCount": 7538,
              "promptTokensDetails": [
                {
                  "modality": "TEXT",
                  "tokenCount": 5016
                }
              ],
              "thoughtsTokenCount": 1502
            },
            "modelVersion": "gemini-3-pro-preview",
            "responseId": "Trmkaff-G8KtqtsP4qG2mQs"
          },
          "cached": false,
          "metadata": {}
        },
        "score": 0.68125,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.0007642,
        "gradingResult": {
          "pass": true,
          "score": 0.845,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 1819,
            "prompt": 1112,
            "completion": 707,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.91,
              "reason": "character_accuracy=0.80, confidence_quality=1.00, duration_accuracy=1.00, format_accuracy=1.00, genre_accuracy=1.00, json_valid=1.00, location_accuracy=0.80, title_accuracy=1.00, tone_accuracy=0.60",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": true,
              "score": 0.78,
              "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. ✅\n\n2. **Format**: Correctly identified as 'feature film' with confidence 0.9. ✅\n\n3. **Genre**: Includes action, drama, thriller, and crime. The rubric specifically asks for action, crime, and/or thriller for a vigilante crime-action story. All present. ✅\n\n4. **Tone**: Captures dark, gritty, intense, bleak, suspenseful. The rubric asks for dark, gritty, violent qualities. 'Intense' partially covers violent. ✅\n\n5. **Duration**: Estimated at 120 minutes. The rubric says 85-130 minutes is reasonable. 120 falls within range. ✅\n\n6. **Primary characters**: Lists The Mariner, Rose, and Salvatori. The rubric asks for The Mariner and Rose as leads. Salvatori is listed as primary but the rubric suggests he might be supporting. Minor issue but The Mariner and Rose are correctly identified. ✅\n\n7. **Supporting characters**: Lists Vinnie, Mikey, Carlos, Rosco. The rubric asks for Dad, Salvatori, Vinnie among supporting cast. Dad is missing from the supporting list, and Salvatori is placed in primary characters instead. This is a notable miss - Dad appears to be a significant supporting character that was omitted entirely. Partial credit. ⚠️\n\n8. **Location count**: Estimated at 8, which falls within the 5-20 range. ✅\n\n9. **Locations summary**: Mentions 'a dilapidated office building' but the rubric specifically asks if it mentions the Ruddy & Greene Building by name. The output does mention 'Ruddy & Greene building' in the location_count rationale but the locations_summary value itself doesn't name it explicitly, though it's implied. The rationale for location_count does reference it. Partial. ⚠️\n\n10. **Target audience**: Correctly identified as R-rated/adult audience. ✅\n\n11. **Confidence calibration**: Scores seem reasonable - 1.0 for clearly stated facts (title, genre, tone), 0.9 for inferred items (format, duration), 0.8 for target audience. Well-calibrated. ✅\n\n12. **Rationale quality**: Rationales are generally grounded in screenplay evidence, referencing specific elements like the title card, scene descriptions, and character arcs. ✅\n\nOverall: Strong performance with minor issues - missing 'Dad' as a supporting character, Salvatori arguably misplaced as primary rather than supporting, and the locations summary could have been more specific about the Ruddy & Greene Building name. Most criteria are well met.",
              "tokensUsed": {
                "total": 1819,
                "prompt": 1112,
                "completion": 707,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n{\\\"title\\\":{\\\"value\\\":\\\"The Mariner\\\",\\\"confidence\\\":1,\\\"rationale\\\":\\\"The screenplay explicitly states the title as 'The Mariner' in a full-screen superimposed title card.\\\"},\\\"format\\\":{\\\"value\\\":\\\"feature film\\\",\\\"confidence\\\":0.9,\\\"rationale\\\":\\\"The screenplay contains multiple scenes, complex narrative structure, and scene headings typical of a feature-length film. The detailed scene descriptions and character arcs suggest a full-length feature rather than a short or pilot.\\\"},\\\"genre\\\":{\\\"value\\\":[\\\"action\\\",\\\"drama\\\",\\\"thriller\\\",\\\"crime\\\"],\\\"confidence\\\":1,\\\"rationale\\\":\\\"The screenplay features intense action sequences, a gritty dystopian setting, themes of violence, heroism, and crime, which collectively point to these genres.\\\"},\\\"tone\\\":{\\\"value\\\":[\\\"dark\\\",\\\"gritty\\\",\\\"intense\\\",\\\"bleak\\\",\\\"suspenseful\\\"],\\\"confidence\\\":1,\\\"rationale\\\":\\\"The screenplay's depiction of a ruined city, violence, and morally complex characters, along with a bleak atmosphere and tense scenes, establish a dark and gritty tone.\\\"},\\\"estimated_duration_minutes\\\":{\\\"value\\\":120,\\\"confidence\\\":0.9,\\\"rationale\\\":\\\"The screenplay is extensive, with multiple scenes and flashbacks, typical of a feature film approximately 2 hours long, following the 1 page per minute rule.\\\"},\\\"primary_characters\\\":{\\\"value\\\":[\\\"The Mariner\\\",\\\"Rose\\\",\\\"Salvatori\\\"],\\\"confidence\\\":1,\\\"rationale\\\":\\\"The protagonist is clearly The Mariner, with significant focus on Rose as a key supporting character, and Salvatori as an antagonist figure.\\\"},\\\"supporting_characters\\\":{\\\"value\\\":[\\\"Vinnie\\\",\\\"Mikey\\\",\\\"Carlos\\\",\\\"Rosco\\\"],\\\"confidence\\\":1,\\\"rationale\\\":\\\"These characters appear in multiple scenes, have distinct roles, and are referenced as part of the supporting cast.\\\"},\\\"location_count\\\":{\\\"value\\\":8,\\\"confidence\\\":0.9,\\\"rationale\\\":\\\"Locations include city center, Ruddy & Greene building (front and rear), alley, elevator, stairwells, various floors of the building, backyard, and office interior, totaling approximately 8 distinct locations.\\\"},\\\"locations_summary\\\":{\\\"value\\\":\\\"A post-apocalyptic urban environment featuring ruined city streets, a dilapidated office building with multiple floors, alleyways, and a private luxurious office space.\\\",\\\"confidence\\\":1,\\\"rationale\\\":\\\"The screenplay describes a ruined city, a specific building with multiple floors and interiors, and outdoor and backyard settings, providing a broad overview of key locations.\\\"},\\\"target_audience\\\":{\\\"value\\\":\\\"R-rated / adult audience\\\",\\\"confidence\\\":0.8,\\\"rationale\\\":\\\"The screenplay contains explicit violence, language, and mature themes, indicating an adult target demographic. However, no explicit rating is provided, so this is an inference.\\\"}}\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "8796e894-3cf3-4712-82c4-3bbad0b1666c",
        "latencyMs": 6618,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "promptIdx": 0,
        "provider": {
          "id": "openai:gpt-4.1-nano",
          "label": "GPT-4.1 Nano"
        },
        "response": {
          "output": "{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The screenplay explicitly states the title as 'The Mariner' in a full-screen superimposed title card.\"\n  },\n  \"format\": {\n    \"value\": \"feature film\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay contains multiple scenes, complex narrative structure, and scene headings typical of a feature-length film. The detailed scene descriptions and character arcs suggest a full-length feature rather than a short or pilot.\"\n  },\n  \"genre\": {\n    \"value\": [\"action\", \"drama\", \"thriller\", \"crime\"],\n    \"confidence\": 1.0,\n    \"rationale\": \"The screenplay features intense action sequences, a gritty dystopian setting, themes of violence, heroism, and crime, which collectively point to these genres.\"\n  },\n  \"tone\": {\n    \"value\": [\"dark\", \"gritty\", \"intense\", \"bleak\", \"suspenseful\"],\n    \"confidence\": 1.0,\n    \"rationale\": \"The screenplay's depiction of a ruined city, violence, and morally complex characters, along with a bleak atmosphere and tense scenes, establish a dark and gritty tone.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 120,\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay is extensive, with multiple scenes and flashbacks, typical of a feature film approximately 2 hours long, following the 1 page per minute rule.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\"The Mariner\", \"Rose\", \"Salvatori\"],\n    \"confidence\": 1.0,\n    \"rationale\": \"The protagonist is clearly The Mariner, with significant focus on Rose as a key supporting character, and Salvatori as an antagonist figure.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\"Vinnie\", \"Mikey\", \"Carlos\", \"Rosco\"],\n    \"confidence\": 1.0,\n    \"rationale\": \"These characters appear in multiple scenes, have distinct roles, and are referenced as part of the supporting cast.\"\n  },\n  \"location_count\": {\n    \"value\": 8,\n    \"confidence\": 0.9,\n    \"rationale\": \"Locations include city center, Ruddy & Greene building (front and rear), alley, elevator, stairwells, various floors of the building, backyard, and office interior, totaling approximately 8 distinct locations.\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A post-apocalyptic urban environment featuring ruined city streets, a dilapidated office building with multiple floors, alleyways, and a private luxurious office space.\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The screenplay describes a ruined city, a specific building with multiple floors and interiors, and outdoor and backyard settings, providing a broad overview of key locations.\"\n  },\n  \"target_audience\": {\n    \"value\": \"R-rated / adult audience\",\n    \"confidence\": 0.8,\n    \"rationale\": \"The screenplay contains explicit violence, language, and mature themes, indicating an adult target demographic. However, no explicit rating is provided, so this is an inference.\"\n  }\n}",
          "tokenUsage": {
            "total": 5551,
            "prompt": 4854,
            "completion": 697,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 6618,
          "finishReason": "stop",
          "cost": 0.0007642,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9d5b79776cc46e1b-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Sun, 01 Mar 2026 22:07:31 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "6147",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=Am5kC7Pj2ww1CH_dZ7nntz6dby5fo9yL_h7SntJGRgs-1772402845.3490696-1.0.1.1-Y28XPeJRTFeWVP4.HCiZOh2xB5gJuXsN99u0rX_kkm.cZ1C0u.hfCYLeN2Aw4hkNpLOqNhHHe3EhkE_AbBGfgsiOoM6sRG2MAReIl8age3BvehB6yrGVt4rebb3Adxnt; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Sun, 01 Mar 2026 22:37:31 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "10000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "9995359",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "27ms",
                "x-request-id": "req_a89ccb9823b0487b986e5e645f0935e6"
              }
            }
          }
        },
        "score": 0.845,
        "success": true,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9d5b79776cc46e1b-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Sun, 01 Mar 2026 22:07:31 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "6147",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=Am5kC7Pj2ww1CH_dZ7nntz6dby5fo9yL_h7SntJGRgs-1772402845.3490696-1.0.1.1-Y28XPeJRTFeWVP4.HCiZOh2xB5gJuXsN99u0rX_kkm.cZ1C0u.hfCYLeN2Aw4hkNpLOqNhHHe3EhkE_AbBGfgsiOoM6sRG2MAReIl8age3BvehB6yrGVt4rebb3Adxnt; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Sun, 01 Mar 2026 22:37:31 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "10000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "9995359",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "27ms",
              "x-request-id": "req_a89ccb9823b0487b986e5e645f0935e6"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0.0009376,
        "gradingResult": {
          "pass": true,
          "score": 0.895,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 2361,
            "prompt": 1658,
            "completion": 703,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.97,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=1.00, format_accuracy=1.00, genre_accuracy=1.00, json_valid=0.90, location_accuracy=1.00, title_accuracy=1.00, tone_accuracy=0.80",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": true,
              "score": 0.82,
              "reason": "Let me evaluate each of the 12 criteria:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. ✅\n\n2. **Format**: Correctly identified as 'feature film' with confidence 0.9. ✅\n\n3. **Genre**: Includes action, crime, drama, and thriller — all appropriate for a vigilante crime-action story. ✅\n\n4. **Tone**: Captures dark, gritty, violent, brutal, intense, bleak, stylized, suspenseful, fast-paced — well-supported with textual evidence. ✅\n\n5. **Duration**: Estimated at 110 minutes. The rubric says 85-130 minutes is reasonable. 110 falls within that range. However, the rationale says 'approximately 110 pages long' for a ~430-line screenplay, which is a questionable justification (430 lines doesn't necessarily equal 110 pages). The estimate itself is reasonable though. Partial ✅\n\n6. **Primary characters**: Correctly identifies The Mariner (Billy) and Rose as leads. ✅\n\n7. **Supporting characters**: Lists Salvatori, Vinnie, Mikey, Carlos, Rosco, Dad, and Young Mariner. Includes Dad, Salvatori, and Vinnie as required. ✅\n\n8. **Location count**: Estimated at 6, which falls within the 5-20 range. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, along with the city center, coastline, and backyard. ✅\n\n10. **Target audience**: Set to null with confidence 0.5, noting violence and mature themes suggest adult audience but declining to commit. This is somewhat evasive — the screenplay clearly has mature/adult content (extreme violence, crime). The rationale acknowledges this but doesn't commit. Partial miss. ⚠️\n\n11. **Confidence calibration**: Generally reasonable. Title at 1.0, format at 0.9, genre at 1.0, tone at 1.0 all seem well-calibrated. Target audience at 0.5 with null value is overly cautious. Duration at 0.8 is reasonable given uncertainty. Mostly good. ✅\n\n12. **Rationale quality**: Rationales are generally grounded in screenplay evidence with specific quotes and references. The duration rationale's claim about '110 pages' is not well-grounded. The target audience rationale is weak. Most others are strong. Mostly ✅\n\nOverall: Strong performance on most criteria. The main weaknesses are the target audience being null instead of identifying mature/adult content, and the duration rationale making unsupported claims about page count. These are relatively minor issues in an otherwise thorough and accurate analysis.",
              "tokensUsed": {
                "total": 2361,
                "prompt": 1658,
                "completion": 703,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n```json\\n{\\n  \\\"title\\\": {\\n    \\\"value\\\": \\\"The Mariner\\\",\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"The title 'The Mariner' is explicitly stated at the beginning of the screenplay.\\\"\\n  },\\n  \\\"format\\\": {\\n    \\\"value\\\": \\\"feature film\\\",\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"The screenplay features a complex narrative with multiple character arcs, flashbacks, and a clear beginning, middle, and end, suggesting a feature film length rather than a short film or pilot. The density of action and dialogue also points towards a longer format.\\\"\\n  },\\n  \\\"genre\\\": {\\n    \\\"value\\\": [\\n      \\\"action\\\",\\n      \\\"crime\\\",\\n      \\\"drama\\\",\\n      \\\"thriller\\\"\\n    ],\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"Action is evident through the numerous fight sequences and use of weapons. Crime is present due to the stolen gang money and the involvement of criminals like Salvatori and his thugs. Drama is present in the character backstories, the revelation about Mariner's father, and the emotional stakes. Thriller elements are strong with suspense, chases, and confrontations.\\\"\\n  },\\n  \\\"tone\\\": {\\n    \\\"value\\\": [\\n      \\\"dark\\\",\\n      \\\"gritty\\\",\\n      \\\"violent\\\",\\n      \\\"brutal\\\",\\n      \\\"intense\\\",\\n      \\\"bleak\\\",\\n      \\\"stylized\\\",\\n      \\\"suspenseful\\\",\\n      \\\"fast-paced\\\"\\n    ],\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"The setting of a ruined city, the descriptions of violence ('wet cracking sounds', 'bloody scrap', 'smash his face into the wall'), and the overall narrative of survival and confrontation create a dark, gritty, and bleak tone. The action sequences are intense and fast-paced. The stylized elements are present in Mariner's costume and Salvatori's appearance. The constant threat and chase contribute to a suspenseful atmosphere.\\\"\\n  },\\n  \\\"estimated_duration_minutes\\\": {\\n    \\\"value\\\": 110,\\n    \\\"confidence\\\": 0.8,\\n    \\\"rationale\\\": \\\"The screenplay is approximately 110 pages long, which, using the standard industry estimate of one page per minute, suggests a runtime of around 110 minutes. This aligns with the complexity and narrative scope of a feature film.\\\"\\n  },\\n  \\\"primary_characters\\\": {\\n    \\\"value\\\": [\\n      \\\"The Mariner (Billy)\\\",\\n      \\\"Rose\\\"\\n    ],\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"The Mariner is the titular character and the central protagonist whose origin story and motivations are explored. Rose is the other main protagonist, driving much of the plot with her stolen money and her relationship with Mariner.\\\"\\n  },\\n  \\\"supporting_characters\\\": {\\n    \\\"value\\\": [\\n      \\\"Salvatori\\\",\\n      \\\"Vinnie\\\",\\n      \\\"Mikey\\\",\\n      \\\"Carlos\\\",\\n      \\\"Rosco\\\",\\n      \\\"Dad (flashback)\\\",\\n      \\\"Young Mariner (flashback)\\\"\\n    ],\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"Salvatori is the main antagonist. Vinnie, Mikey, Carlos, and Rosco are his henchmen who directly interact with the protagonists. Mariner's Dad and Young Mariner are significant figures in the flashbacks that shape the protagonist's character.\\\"\\n  },\\n  \\\"location_count\\\": {\\n    \\\"value\\\": 6,\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"The distinct locations identified by scene headings are: City Centre, Ruddy & Greene Building (Exterior Front/Rear), Ruddy & Greene Building (Interior Elevator), Ruddy & Greene Building (Interior 11th Floor), Ruddy & Greene Building (Interior Stairwell), Ruddy & Greene Building (Interior 12th Floor Stairwell), Ruddy & Greene Building (Interior 13th Floor), Ruddy & Greene Building (Interior 15th Floor), Coastline (Flashback), Backyard (Flashback). Counting unique named locations and distinct flashback settings gives us 6.\\\"\\n  },\\n  \\\"locations_summary\\\": {\\n    \\\"value\\\": \\\"A ruined city center, the exterior and interior of the Ruddy & Greene Building (including its elevator, various floors, and stairwells), a coastline, and a backyard.\\\",\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"This summarizes the primary settings where the action takes place, including the urban decay, the specific building where the conflict unfolds, and the flashback locations that provide character context.\\\"\\n  },\\n  \\\"target_audience\\\": {\\n    \\\"value\\\": null,\\n    \\\"confidence\\\": 0.5,\\n    \\\"rationale\\\": \\\"While the violence and mature themes suggest an adult audience, there are no explicit indicators like MPAA ratings or specific demographic targeting within the screenplay text itself. Therefore, it's best to mark this as uncertain.\\\"\\n  }\\n}\\n```\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "f54ab4e3-0c99-4596-9924-3389bf09c82d",
        "latencyMs": 3890,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "promptIdx": 4,
        "provider": {
          "id": "google:gemini-2.5-flash-lite",
          "label": "Gemini 2.5 Flash Lite"
        },
        "response": {
          "output": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The title 'The Mariner' is explicitly stated at the beginning of the screenplay.\"\n  },\n  \"format\": {\n    \"value\": \"feature film\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay features a complex narrative with multiple character arcs, flashbacks, and a clear beginning, middle, and end, suggesting a feature film length rather than a short film or pilot. The density of action and dialogue also points towards a longer format.\"\n  },\n  \"genre\": {\n    \"value\": [\n      \"action\",\n      \"crime\",\n      \"drama\",\n      \"thriller\"\n    ],\n    \"confidence\": 1.0,\n    \"rationale\": \"Action is evident through the numerous fight sequences and use of weapons. Crime is present due to the stolen gang money and the involvement of criminals like Salvatori and his thugs. Drama is present in the character backstories, the revelation about Mariner's father, and the emotional stakes. Thriller elements are strong with suspense, chases, and confrontations.\"\n  },\n  \"tone\": {\n    \"value\": [\n      \"dark\",\n      \"gritty\",\n      \"violent\",\n      \"brutal\",\n      \"intense\",\n      \"bleak\",\n      \"stylized\",\n      \"suspenseful\",\n      \"fast-paced\"\n    ],\n    \"confidence\": 1.0,\n    \"rationale\": \"The setting of a ruined city, the descriptions of violence ('wet cracking sounds', 'bloody scrap', 'smash his face into the wall'), and the overall narrative of survival and confrontation create a dark, gritty, and bleak tone. The action sequences are intense and fast-paced. The stylized elements are present in Mariner's costume and Salvatori's appearance. The constant threat and chase contribute to a suspenseful atmosphere.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 110,\n    \"confidence\": 0.8,\n    \"rationale\": \"The screenplay is approximately 110 pages long, which, using the standard industry estimate of one page per minute, suggests a runtime of around 110 minutes. This aligns with the complexity and narrative scope of a feature film.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\n      \"The Mariner (Billy)\",\n      \"Rose\"\n    ],\n    \"confidence\": 1.0,\n    \"rationale\": \"The Mariner is the titular character and the central protagonist whose origin story and motivations are explored. Rose is the other main protagonist, driving much of the plot with her stolen money and her relationship with Mariner.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\n      \"Salvatori\",\n      \"Vinnie\",\n      \"Mikey\",\n      \"Carlos\",\n      \"Rosco\",\n      \"Dad (flashback)\",\n      \"Young Mariner (flashback)\"\n    ],\n    \"confidence\": 1.0,\n    \"rationale\": \"Salvatori is the main antagonist. Vinnie, Mikey, Carlos, and Rosco are his henchmen who directly interact with the protagonists. Mariner's Dad and Young Mariner are significant figures in the flashbacks that shape the protagonist's character.\"\n  },\n  \"location_count\": {\n    \"value\": 6,\n    \"confidence\": 1.0,\n    \"rationale\": \"The distinct locations identified by scene headings are: City Centre, Ruddy & Greene Building (Exterior Front/Rear), Ruddy & Greene Building (Interior Elevator), Ruddy & Greene Building (Interior 11th Floor), Ruddy & Greene Building (Interior Stairwell), Ruddy & Greene Building (Interior 12th Floor Stairwell), Ruddy & Greene Building (Interior 13th Floor), Ruddy & Greene Building (Interior 15th Floor), Coastline (Flashback), Backyard (Flashback). Counting unique named locations and distinct flashback settings gives us 6.\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A ruined city center, the exterior and interior of the Ruddy & Greene Building (including its elevator, various floors, and stairwells), a coastline, and a backyard.\",\n    \"confidence\": 1.0,\n    \"rationale\": \"This summarizes the primary settings where the action takes place, including the urban decay, the specific building where the conflict unfolds, and the flashback locations that provide character context.\"\n  },\n  \"target_audience\": {\n    \"value\": null,\n    \"confidence\": 0.5,\n    \"rationale\": \"While the violence and mature themes suggest an adult audience, there are no explicit indicators like MPAA ratings or specific demographic targeting within the screenplay text itself. Therefore, it's best to mark this as uncertain.\"\n  }\n}\n```",
          "tokenUsage": {
            "prompt": 5016,
            "completion": 1090,
            "total": 6106,
            "numRequests": 1
          },
          "cost": 0.0009376,
          "raw": {
            "candidates": [
              {
                "content": {
                  "parts": [
                    {
                      "text": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The title 'The Mariner' is explicitly stated at the beginning of the screenplay.\"\n  },\n  \"format\": {\n    \"value\": \"feature film\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay features a complex narrative with multiple character arcs, flashbacks, and a clear beginning, middle, and end, suggesting a feature film length rather than a short film or pilot. The density of action and dialogue also points towards a longer format.\"\n  },\n  \"genre\": {\n    \"value\": [\n      \"action\",\n      \"crime\",\n      \"drama\",\n      \"thriller\"\n    ],\n    \"confidence\": 1.0,\n    \"rationale\": \"Action is evident through the numerous fight sequences and use of weapons. Crime is present due to the stolen gang money and the involvement of criminals like Salvatori and his thugs. Drama is present in the character backstories, the revelation about Mariner's father, and the emotional stakes. Thriller elements are strong with suspense, chases, and confrontations.\"\n  },\n  \"tone\": {\n    \"value\": [\n      \"dark\",\n      \"gritty\",\n      \"violent\",\n      \"brutal\",\n      \"intense\",\n      \"bleak\",\n      \"stylized\",\n      \"suspenseful\",\n      \"fast-paced\"\n    ],\n    \"confidence\": 1.0,\n    \"rationale\": \"The setting of a ruined city, the descriptions of violence ('wet cracking sounds', 'bloody scrap', 'smash his face into the wall'), and the overall narrative of survival and confrontation create a dark, gritty, and bleak tone. The action sequences are intense and fast-paced. The stylized elements are present in Mariner's costume and Salvatori's appearance. The constant threat and chase contribute to a suspenseful atmosphere.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 110,\n    \"confidence\": 0.8,\n    \"rationale\": \"The screenplay is approximately 110 pages long, which, using the standard industry estimate of one page per minute, suggests a runtime of around 110 minutes. This aligns with the complexity and narrative scope of a feature film.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\n      \"The Mariner (Billy)\",\n      \"Rose\"\n    ],\n    \"confidence\": 1.0,\n    \"rationale\": \"The Mariner is the titular character and the central protagonist whose origin story and motivations are explored. Rose is the other main protagonist, driving much of the plot with her stolen money and her relationship with Mariner.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\n      \"Salvatori\",\n      \"Vinnie\",\n      \"Mikey\",\n      \"Carlos\",\n      \"Rosco\",\n      \"Dad (flashback)\",\n      \"Young Mariner (flashback)\"\n    ],\n    \"confidence\": 1.0,\n    \"rationale\": \"Salvatori is the main antagonist. Vinnie, Mikey, Carlos, and Rosco are his henchmen who directly interact with the protagonists. Mariner's Dad and Young Mariner are significant figures in the flashbacks that shape the protagonist's character.\"\n  },\n  \"location_count\": {\n    \"value\": 6,\n    \"confidence\": 1.0,\n    \"rationale\": \"The distinct locations identified by scene headings are: City Centre, Ruddy & Greene Building (Exterior Front/Rear), Ruddy & Greene Building (Interior Elevator), Ruddy & Greene Building (Interior 11th Floor), Ruddy & Greene Building (Interior Stairwell), Ruddy & Greene Building (Interior 12th Floor Stairwell), Ruddy & Greene Building (Interior 13th Floor), Ruddy & Greene Building (Interior 15th Floor), Coastline (Flashback), Backyard (Flashback). Counting unique named locations and distinct flashback settings gives us 6.\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A ruined city center, the exterior and interior of the Ruddy & Greene Building (including its elevator, various floors, and stairwells), a coastline, and a backyard.\",\n    \"confidence\": 1.0,\n    \"rationale\": \"This summarizes the primary settings where the action takes place, including the urban decay, the specific building where the conflict unfolds, and the flashback locations that provide character context.\"\n  },\n  \"target_audience\": {\n    \"value\": null,\n    \"confidence\": 0.5,\n    \"rationale\": \"While the violence and mature themes suggest an adult audience, there are no explicit indicators like MPAA ratings or specific demographic targeting within the screenplay text itself. Therefore, it's best to mark this as uncertain.\"\n  }\n}\n```"
                    }
                  ],
                  "role": "model"
                },
                "finishReason": "STOP",
                "index": 0
              }
            ],
            "usageMetadata": {
              "promptTokenCount": 5016,
              "candidatesTokenCount": 1090,
              "totalTokenCount": 6106,
              "promptTokensDetails": [
                {
                  "modality": "TEXT",
                  "tokenCount": 5016
                }
              ]
            },
            "modelVersion": "gemini-2.5-flash-lite",
            "responseId": "t7ikaealOfe-qtsPnPHCuAs"
          },
          "cached": false,
          "metadata": {}
        },
        "score": 0.895,
        "success": true,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0.0019142500000000002,
        "gradingResult": {
          "pass": true,
          "score": 0.905,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 1768,
            "prompt": 1130,
            "completion": 638,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.96,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=1.00, format_accuracy=1.00, genre_accuracy=1.00, json_valid=1.00, location_accuracy=1.00, title_accuracy=1.00, tone_accuracy=0.60",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": true,
              "score": 0.85,
              "reason": "Evaluating each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with high confidence (0.92) and good rationale referencing the title card. ✅\n\n2. **Format**: Identified as 'feature film' with reasonable confidence (0.78). Appropriate given the screenplay structure. ✅\n\n3. **Genre**: Includes action, crime, drama, and thriller — all appropriate for a vigilante crime-action story. ✅\n\n4. **Tone**: Captures gritty, dark, intense, stylized, bleak, emotional — well-aligned with the violent, post-pandemic setting. ✅\n\n5. **Duration**: Estimated at 100 minutes with low confidence (0.5), which is within the 85-130 minute range. The low confidence is appropriate given the uncertainty. ✅\n\n6. **Primary characters**: Lists The Mariner, Rose, and Salvatori. The rubric asks for Mariner and Rose as leads; Salvatori is listed as primary rather than supporting. This is debatable — Salvatori as the principal antagonist could reasonably be primary. However, the rubric suggests Salvatori should be in supporting. Minor issue. ⚠️\n\n7. **Supporting characters**: Lists Vinnie, Mikey, Carlos, Rosco, DAD (flashback), and unnamed thugs. The rubric asks for Dad, Salvatori, and Vinnie among supporting. Dad and Vinnie are correctly in supporting, but Salvatori is placed in primary instead. Partial match. ⚠️\n\n8. **Location count**: Estimated at 10 with 0.65 confidence, within the 5-20 range. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, along with flashback locations. ✅\n\n10. **Target audience**: Identified as 'R' for mature content with appropriate rationale. ✅\n\n11. **Confidence calibration**: Scores are generally well-calibrated — higher for clear elements (title, characters), lower for uncertain ones (duration, location count). ✅\n\n12. **Rationale quality**: Rationales reference specific screenplay elements (title card, post-pandemic city, flashbacks, character names). They appear grounded in actual evidence. ✅\n\nThe main issue is the placement of Salvatori as primary rather than supporting, though this is a reasonable editorial choice given he's the principal antagonist. Overall, the output is thorough, accurate, and well-evidenced across nearly all criteria.",
              "tokensUsed": {
                "total": 1768,
                "prompt": 1130,
                "completion": 638,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n{\\\"title\\\":{\\\"value\\\":\\\"The Mariner\\\",\\\"confidence\\\":0.92,\\\"rationale\\\":\\\"The screenplay explicitly presents a FULL-SCREEN TITLE CARD reading 'THE MARINER' and uses the title in scene context.\\\"},\\\"format\\\":{\\\"value\\\":\\\"feature film\\\",\\\"confidence\\\":0.78,\\\"rationale\\\":\\\"The script follows a single continuous narrative with multiple locations, action sequences, and character arcs typical of a feature-length screenplay rather than a pilot or short film.\\\"},\\\"genre\\\":{\\\"value\\\":[\\\"action\\\",\\\"crime\\\",\\\"drama\\\",\\\"thriller\\\"],\\\"confidence\\\":0.85,\\\"rationale\\\":\\\"Evidence of vigilante/crime environment, extensive fighting (action), his personal and moral conflict (drama), and suspenseful, high-stakes pursuit (thriller).\\\"},\\\"tone\\\":{\\\"value\\\":[\\\"gritty\\\",\\\"dark\\\",\\\"intense\\\",\\\"stylized\\\",\\\"bleak\\\",\\\"emotional\\\"],\\\"confidence\\\":0.8,\\\"rationale\\\":\\\"Desolate post-pandemic city, violent encounters, strong father-daughter/male-protagonist memories, and stylized on-screen elements (muza, hallmarks) indicate these tonal qualities.\\\"},\\\"estimated_duration_minutes\\\":{\\\"value\\\":100,\\\"confidence\\\":0.5,\\\"rationale\\\":\\\"Absent explicit page count; using typical feature-film pacing and scope suggested by multiple floors, flashbacks, and climactic confrontation.\\\"},\\\"primary_characters\\\":{\\\"value\\\":[\\\"The Mariner\\\",\\\"Rose\\\",\\\"Salvatori\\\"],\\\"confidence\\\":0.92,\\\"rationale\\\":\\\"Mariner is clearly the protagonist; Rose is his major ally; Salvatori is the principal antagonist driving the conflict.\\\"},\\\"supporting_characters\\\":{\\\"value\\\":[\\\"Vinnie\\\",\\\"Mikey\\\",\\\"Carlos\\\",\\\"Rosco\\\",\\\"DAD (flashback)\\\",\\\"Unnamed thugs\\\"],\\\"confidence\\\":0.7,\\\"rationale\\\":\\\"Named supporting thugs and the dad in flashbacks are present; additional minor roles are referenced (unnamed thugs).\\\"},\\\"location_count\\\":{\\\"value\\\":10,\\\"confidence\\\":0.65,\\\"rationale\\\":\\\"Distinct locations include City Centre, Ruddy & Greene Building front and rear, elevator, 11th–15th floors, stairwells, and two flashback settings (Backyard and Coastline).\\\"},\\\"locations_summary\\\":{\\\"value\\\":\\\"A post-pandemic ruined city centers around the Ruddy & Greene Building, featuring elevator and multi-floor interior confrontations, a tense stairwell chase, and lavishly described interiors; interspersed with flashbacks to the coast and a backyard workout that reveal the Mariner’s past.\\\",\\\"confidence\\\":0.7,\\\"rationale\\\":\\\"Summarizes primary settings and the two notable flashback locations described in the screenplay.\\\"},\\\"target_audience\\\":{\\\"value\\\":\\\"R\\\",\\\"confidence\\\":0.75,\\\"rationale\\\":\\\"Graphic violence, strong language, and mature thematic content suggest an R-rated target audience (adult 17+ in many markets).\\\"}}\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "bfe459b1-d10e-4139-8e60-eff2da7a9a6d",
        "latencyMs": 42495,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "promptIdx": 2,
        "provider": {
          "id": "openai:gpt-5-nano",
          "label": "GPT-5 Nano"
        },
        "response": {
          "output": "{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 0.92,\n    \"rationale\": \"The screenplay explicitly presents a FULL-SCREEN TITLE CARD reading 'THE MARINER' and uses the title in scene context.\"\n  },\n  \"format\": {\n    \"value\": \"feature film\",\n    \"confidence\": 0.78,\n    \"rationale\": \"The script follows a single continuous narrative with multiple locations, action sequences, and character arcs typical of a feature-length screenplay rather than a pilot or short film.\"\n  },\n  \"genre\": {\n    \"value\": [\"action\", \"crime\", \"drama\", \"thriller\"],\n    \"confidence\": 0.85,\n    \"rationale\": \"Evidence of vigilante/crime environment, extensive fighting (action), his personal and moral conflict (drama), and suspenseful, high-stakes pursuit (thriller).\"\n  },\n  \"tone\": {\n    \"value\": [\"gritty\", \"dark\", \"intense\", \"stylized\", \"bleak\", \"emotional\"],\n    \"confidence\": 0.80,\n    \"rationale\": \"Desolate post-pandemic city, violent encounters, strong father-daughter/male-protagonist memories, and stylized on-screen elements (muza, hallmarks) indicate these tonal qualities.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 100,\n    \"confidence\": 0.50,\n    \"rationale\": \"Absent explicit page count; using typical feature-film pacing and scope suggested by multiple floors, flashbacks, and climactic confrontation.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\"The Mariner\", \"Rose\", \"Salvatori\"],\n    \"confidence\": 0.92,\n    \"rationale\": \"Mariner is clearly the protagonist; Rose is his major ally; Salvatori is the principal antagonist driving the conflict.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\"Vinnie\", \"Mikey\", \"Carlos\", \"Rosco\", \"DAD (flashback)\", \"Unnamed thugs\"],\n    \"confidence\": 0.70,\n    \"rationale\": \"Named supporting thugs and the dad in flashbacks are present; additional minor roles are referenced (unnamed thugs).\"\n  },\n  \"location_count\": {\n    \"value\": 10,\n    \"confidence\": 0.65,\n    \"rationale\": \"Distinct locations include City Centre, Ruddy & Greene Building front and rear, elevator, 11th–15th floors, stairwells, and two flashback settings (Backyard and Coastline).\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A post-pandemic ruined city centers around the Ruddy & Greene Building, featuring elevator and multi-floor interior confrontations, a tense stairwell chase, and lavishly described interiors; interspersed with flashbacks to the coast and a backyard workout that reveal the Mariner’s past.\",\n    \"confidence\": 0.70,\n    \"rationale\": \"Summarizes primary settings and the two notable flashback locations described in the screenplay.\"\n  },\n  \"target_audience\": {\n    \"value\": \"R\",\n    \"confidence\": 0.75,\n    \"rationale\": \"Graphic violence, strong language, and mature thematic content suggest an R-rated target audience (adult 17+ in many markets).\"\n  }\n}",
          "tokenUsage": {
            "total": 9032,
            "prompt": 4853,
            "completion": 4179,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 3456,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 42495,
          "finishReason": "stop",
          "cost": 0.0019142500000000002,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9d5b79776b2cfe54-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Sun, 01 Mar 2026 22:08:07 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "42017",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=_UiCgzl5sezGSrnR3GXbssqOATWGLQIrH3Xc5gz1pJQ-1772402845.3480406-1.0.1.1-QaRedwXEL7_..hcx1ji_p7wluNTvBbRYo0ddTl9w6NKca0Me48SGB0vFuySIciDl57jlBHSsCKCo5TDFYxT1ifmJjRGgfLi8nhajdUJwpUlK9W0PPx3ppKnpFRG7Xn4W; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Sun, 01 Mar 2026 22:38:07 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "10000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "9995359",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "27ms",
                "x-request-id": "req_dcf60c44be884ba0aa6a74684aec3467"
              }
            }
          }
        },
        "score": 0.905,
        "success": true,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9d5b79776b2cfe54-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Sun, 01 Mar 2026 22:08:07 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "42017",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=_UiCgzl5sezGSrnR3GXbssqOATWGLQIrH3Xc5gz1pJQ-1772402845.3480406-1.0.1.1-QaRedwXEL7_..hcx1ji_p7wluNTvBbRYo0ddTl9w6NKca0Me48SGB0vFuySIciDl57jlBHSsCKCo5TDFYxT1ifmJjRGgfLi8nhajdUJwpUlK9W0PPx3ppKnpFRG7Xn4W; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Sun, 01 Mar 2026 22:38:07 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "10000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "9995359",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "27ms",
              "x-request-id": "req_dcf60c44be884ba0aa6a74684aec3467"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0.005463249999999999,
        "gradingResult": {
          "pass": true,
          "score": 0.955,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 2029,
            "prompt": 1454,
            "completion": 575,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.96,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=1.00, format_accuracy=1.00, genre_accuracy=1.00, json_valid=1.00, location_accuracy=1.00, title_accuracy=1.00, tone_accuracy=0.60",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": true,
              "score": 0.95,
              "reason": "The output performs very well across all 12 criteria:\n\n1. **Title**: Correctly identifies \"The Mariner\" with high confidence (0.99). ✅\n2. **Format**: Correctly identifies as feature film (0.85 confidence). ✅\n3. **Genre**: Includes action, crime, thriller, and drama — all appropriate for a vigilante crime-action story. ✅\n4. **Tone**: Captures gritty, violent, intense, suspenseful, bleak — all well-supported. ✅\n5. **Duration**: Estimates 95 minutes, which falls within the 85-130 minute range. The low confidence (0.3) is honest given limited information. ✅\n6. **Primary characters**: Identifies Mariner (Billy/Will) and Rose as leads. Also includes Salvatori, which could be debated as primary vs. supporting, but reasonable given his role as primary antagonist. ✅\n7. **Supporting characters**: Lists Vinnie, Mikey, Carlos, Rosco, unnamed thugs, and Mariner's Dad. The rubric asks for Dad, Salvatori, and Vinnie — Dad and Vinnie are in supporting, Salvatori is listed as primary (antagonist). This is a reasonable classification choice. ✅\n8. **Location count**: Estimates 9, well within the 5-20 range. ✅\n9. **Locations summary**: Explicitly mentions the Ruddy & Greene Building as the primary setting with detailed floor-by-floor breakdown. ✅\n10. **Target audience**: Correctly identifies as adult/R-rated mature content. ✅\n11. **Confidence calibration**: Scores are well-calibrated — high for clear facts (title 0.99), moderate for interpretive fields (genre 0.87, tone 0.82), and appropriately low for duration (0.3). ✅\n12. **Rationale quality**: All rationales cite specific screenplay evidence (title card, sluglines, character names, specific scenes, flashbacks, violence descriptions). They are grounded and evidence-based, not guessed. ✅\n\nThe only minor quibble is placing Salvatori as a primary character rather than supporting, but this is defensible given his role as the main antagonist. Overall, this is a thorough, accurate, and well-calibrated analysis.",
              "tokensUsed": {
                "total": 2029,
                "prompt": 1454,
                "completion": 575,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n{\\\"title\\\":{\\\"value\\\":\\\"The Mariner\\\",\\\"confidence\\\":0.99,\\\"rationale\\\":\\\"The screenplay’s full-screen superimposed title card reads “THE MARINER” and the script header and sluglines refer to the Mariner character.\\\"},\\\"format\\\":{\\\"value\\\":\\\"feature film\\\",\\\"confidence\\\":0.85,\\\"rationale\\\":\\\"The excerpt uses standard feature screenplay conventions (sluglines, action beats, flashbacks, multiple set-piece action sequences and character arcs). It reads like the opening of a full-length narrative rather than a short, pilot, or limited-series script.\\\"},\\\"genre\\\":{\\\"value\\\":[\\\"action\\\",\\\"crime\\\",\\\"drama\\\",\\\"thriller\\\"],\\\"confidence\\\":0.87,\\\"rationale\\\":\\\"Strong evidence of action (extended fight sequences, weapons), crime (gangs, stolen money/password, Salvatori and thugs), drama (character backstory, family trauma), and thriller (pursuit, suspense around the password and danger). No clear evidence for sci‑fi, fantasy, horror, romance as primary genres.\\\"},\\\"tone\\\":{\\\"value\\\":[\\\"gritty\\\",\\\"violent\\\",\\\"intense\\\",\\\"suspenseful\\\",\\\"bleak\\\",\\\"fast-paced\\\",\\\"tragic\\\",\\\"stylized\\\"],\\\"confidence\\\":0.82,\\\"rationale\\\":\\\"The setting is a ruined, post‑pandemic city (gritty, bleak). The script contains graphic violence and blood (violent, intense). Action and chase beats create suspense and fast pacing. Flashbacks and the Mariner’s emotional reactions add a tragic/melancholic undercurrent. Stylized touches (muzak, fishing‑themed hero costume) support 'stylized.'\\\"},\\\"estimated_duration_minutes\\\":{\\\"value\\\":95,\\\"confidence\\\":0.3,\\\"rationale\\\":\\\"No full page count provided; the excerpt reads like the opening of a feature. Typical feature runtimes range 90–120 minutes; 95 minutes is a conservative feature estimate. Confidence is low because only an excerpt is available.\\\"},\\\"primary_characters\\\":{\\\"value\\\":[\\\"Mariner (Billy / Will)\\\",\\\"Rose\\\",\\\"Salvatori\\\"],\\\"confidence\\\":0.92,\\\"rationale\\\":\\\"Mariner and Rose are the central viewpoint characters in the excerpt. Salvatori is introduced as the primary antagonist confronting them in the office; they drive the scene’s conflict.\\\"},\\\"supporting_characters\\\":{\\\"value\\\":[\\\"Vinnie\\\",\\\"Mikey\\\",\\\"Carlos\\\",\\\"Rosco\\\",\\\"Thug 1 / Thug 2 / Thug 3 (unnamed extras)\\\",\\\"Mariner's Dad (flashbacks)\\\",\\\"Ma (mentioned)\\\"],\\\"confidence\\\":0.9,\\\"rationale\\\":\\\"Multiple named thugs (Vinnie, Mikey, Carlos, Rosco) and unnamed thugs populate the action. Flashbacks include Mariner’s dad and 'ma' is referenced in dialogue.\\\"},\\\"location_count\\\":{\\\"value\\\":9,\\\"confidence\\\":0.7,\\\"rationale\\\":\\\"Distinct places shown or referenced: city centre/exteriors, Ruddy & Greene building — front, rear/alley, elevator interior, 11th-floor room/corridor, stairwell (multiple floors but a continuous location), 12th/13th/15th floor interiors (15th floor / Salvatori's office/nightclub-like room counted as distinct), coastline (flashback), backyard (flashback). Counting conservatively yields ~9 distinct locations.\\\"},\\\"locations_summary\\\":{\\\"value\\\":\\\"A ruined post-pandemic city (no‑go urban zones) centering on the multi-floor Ruddy & Greene office/nightclub building (rear alley/entry, elevator, multiple floor corridors and stairwells, Salvatori’s 15th-floor office/nightclub room) plus flashback coastal and backyard domestic locations.\\\",\\\"confidence\\\":0.9,\\\"rationale\\\":\\\"The script repeatedly places action in the ruined city and in specific parts of the Ruddy & Greene building (rear entrance, elevator, several floors, Salvatori’s office). Flashbacks clearly show coastline and backyard scenes.\\\"},\\\"target_audience\\\":{\\\"value\\\":\\\"Adult (R-rated, mature audiences)\\\",\\\"confidence\\\":0.88,\\\"rationale\\\":\\\"Frequent graphic violence, blood, gunplay, strong language, criminal activity, and mature themes (abuse, theft) indicate an adult/MR-rated audience rather than family or teen PG‑13.\\\"}}\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "97ced415-f35e-47d4-b09e-c664c90fbe47",
        "latencyMs": 26102,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "promptIdx": 3,
        "provider": {
          "id": "openai:gpt-5-mini",
          "label": "GPT-5 Mini"
        },
        "response": {
          "output": "{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 0.99,\n    \"rationale\": \"The screenplay’s full-screen superimposed title card reads “THE MARINER” and the script header and sluglines refer to the Mariner character.\"\n  },\n  \"format\": {\n    \"value\": \"feature film\",\n    \"confidence\": 0.85,\n    \"rationale\": \"The excerpt uses standard feature screenplay conventions (sluglines, action beats, flashbacks, multiple set-piece action sequences and character arcs). It reads like the opening of a full-length narrative rather than a short, pilot, or limited-series script.\"\n  },\n  \"genre\": {\n    \"value\": [\n      \"action\",\n      \"crime\",\n      \"drama\",\n      \"thriller\"\n    ],\n    \"confidence\": 0.87,\n    \"rationale\": \"Strong evidence of action (extended fight sequences, weapons), crime (gangs, stolen money/password, Salvatori and thugs), drama (character backstory, family trauma), and thriller (pursuit, suspense around the password and danger). No clear evidence for sci‑fi, fantasy, horror, romance as primary genres.\"\n  },\n  \"tone\": {\n    \"value\": [\n      \"gritty\",\n      \"violent\",\n      \"intense\",\n      \"suspenseful\",\n      \"bleak\",\n      \"fast-paced\",\n      \"tragic\",\n      \"stylized\"\n    ],\n    \"confidence\": 0.82,\n    \"rationale\": \"The setting is a ruined, post‑pandemic city (gritty, bleak). The script contains graphic violence and blood (violent, intense). Action and chase beats create suspense and fast pacing. Flashbacks and the Mariner’s emotional reactions add a tragic/melancholic undercurrent. Stylized touches (muzak, fishing‑themed hero costume) support 'stylized.'\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 95,\n    \"confidence\": 0.30,\n    \"rationale\": \"No full page count provided; the excerpt reads like the opening of a feature. Typical feature runtimes range 90–120 minutes; 95 minutes is a conservative feature estimate. Confidence is low because only an excerpt is available.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\n      \"Mariner (Billy / Will)\",\n      \"Rose\",\n      \"Salvatori\"\n    ],\n    \"confidence\": 0.92,\n    \"rationale\": \"Mariner and Rose are the central viewpoint characters in the excerpt. Salvatori is introduced as the primary antagonist confronting them in the office; they drive the scene’s conflict.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\n      \"Vinnie\",\n      \"Mikey\",\n      \"Carlos\",\n      \"Rosco\",\n      \"Thug 1 / Thug 2 / Thug 3 (unnamed extras)\",\n      \"Mariner's Dad (flashbacks)\",\n      \"Ma (mentioned)\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"Multiple named thugs (Vinnie, Mikey, Carlos, Rosco) and unnamed thugs populate the action. Flashbacks include Mariner’s dad and 'ma' is referenced in dialogue.\"\n  },\n  \"location_count\": {\n    \"value\": 9,\n    \"confidence\": 0.7,\n    \"rationale\": \"Distinct places shown or referenced: city centre/exteriors, Ruddy & Greene building — front, rear/alley, elevator interior, 11th-floor room/corridor, stairwell (multiple floors but a continuous location), 12th/13th/15th floor interiors (15th floor / Salvatori's office/nightclub-like room counted as distinct), coastline (flashback), backyard (flashback). Counting conservatively yields ~9 distinct locations.\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A ruined post-pandemic city (no‑go urban zones) centering on the multi-floor Ruddy & Greene office/nightclub building (rear alley/entry, elevator, multiple floor corridors and stairwells, Salvatori’s 15th-floor office/nightclub room) plus flashback coastal and backyard domestic locations.\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The script repeatedly places action in the ruined city and in specific parts of the Ruddy & Greene building (rear entrance, elevator, several floors, Salvatori’s office). Flashbacks clearly show coastline and backyard scenes.\"\n  },\n  \"target_audience\": {\n    \"value\": \"Adult (R-rated, mature audiences)\",\n    \"confidence\": 0.88,\n    \"rationale\": \"Frequent graphic violence, blood, gunplay, strong language, criminal activity, and mature themes (abuse, theft) indicate an adult/MR-rated audience rather than family or teen PG‑13.\"\n  }\n}",
          "tokenUsage": {
            "total": 6978,
            "prompt": 4853,
            "completion": 2125,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 1088,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 26102,
          "finishReason": "stop",
          "cost": 0.005463249999999999,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9d5b79f59ba16e1b-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Sun, 01 Mar 2026 22:08:11 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "25779",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=McVlC.5V9XtS40uYy.sQ4vRikY.HgtsJweYUQoX9R4g-1772402865.535061-1.0.1.1-pJKi2t5Gzal8LqD4iYrLK4tICWWWQOPPuxhKEUqpI7FUNJfrFsURHq98peVIuYmfqcYCk.T3HHUychuaI_5N97O3UMq3VDx3Ilm1l_lPFZhhqyFH13xgQ3mfR8DXTreb; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Sun, 01 Mar 2026 22:38:11 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "10000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "9995359",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "27ms",
                "x-request-id": "req_509fd4d4c46c428d853998ce5d970cc6"
              }
            }
          }
        },
        "score": 0.955,
        "success": true,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9d5b79f59ba16e1b-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Sun, 01 Mar 2026 22:08:11 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "25779",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=McVlC.5V9XtS40uYy.sQ4vRikY.HgtsJweYUQoX9R4g-1772402865.535061-1.0.1.1-pJKi2t5Gzal8LqD4iYrLK4tICWWWQOPPuxhKEUqpI7FUNJfrFsURHq98peVIuYmfqcYCk.T3HHUychuaI_5N97O3UMq3VDx3Ilm1l_lPFZhhqyFH13xgQ3mfR8DXTreb; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Sun, 01 Mar 2026 22:38:11 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "10000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "9995359",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "27ms",
              "x-request-id": "req_509fd4d4c46c428d853998ce5d970cc6"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0.0169,
        "gradingResult": {
          "pass": true,
          "score": 0.965,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 1999,
            "prompt": 1326,
            "completion": 673,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.98,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=1.00, format_accuracy=1.00, genre_accuracy=1.00, json_valid=1.00, location_accuracy=0.80, title_accuracy=1.00, tone_accuracy=1.00",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": true,
              "score": 0.95,
              "reason": "Evaluating each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0 and solid rationale. ✅\n2. **Format**: Correctly identified as 'feature film' with confidence 0.95 and good reasoning about scene headings, narrative structure, and self-contained story. ✅\n3. **Genre**: Includes action, crime, drama, thriller, and dark comedy. Covers the key genres (action, crime, thriller) for a vigilante crime-action story. ✅\n4. **Tone**: Captures dark, gritty, violent, bleak, intense, suspenseful, noir, fast-paced, and darkly comedic. Thoroughly covers the dark/gritty/violent qualities. ✅\n5. **Duration**: Estimated at 100 minutes with confidence 0.8. Falls within the 85-130 minute range. ✅\n6. **Primary characters**: Lists Mariner (Billy/Will MacAngus), Rose, and Salvatori. Correctly identifies Mariner and Rose as leads. Salvatori is listed as primary rather than supporting, which is a minor judgment call but reasonable if he's the main antagonist driving the plot. ✅\n7. **Supporting characters**: Lists Dad, Rosco, Vinnie, Mikey, Carlos, Thug 1, Thug 2, Thug 3. Includes Dad and Vinnie as required. However, Salvatori is listed as a primary character rather than supporting - this is debatable but defensible given his role as main antagonist. ✅\n8. **Location count**: Estimated at 7 with confidence 0.85. Falls within the 5-20 range. ✅\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, along with the decaying city, coastal flashback locations, and backyard. ✅\n10. **Target audience**: Correctly identified as R/mature audiences with appropriate reasoning about graphic violence, strong language, and adult themes. ✅\n11. **Confidence calibration**: Scores are well-calibrated - 1.0 for clearly stated facts (title), 0.95 for well-supported inferences (format, genre, tone), 0.8-0.85 for estimates requiring more judgment (duration, location count). ✅\n12. **Rationale quality**: All rationales are grounded in specific screenplay evidence (e.g., mentioning elevator muzak, AirTags/blockchain banter for dark comedy, post-pandemic city for setting). They reference actual content rather than making unsupported claims. ✅\n\nAll 12 criteria are met with high quality. The output is thorough, accurate, evidence-based, and well-structured.",
              "tokensUsed": {
                "total": 1999,
                "prompt": 1326,
                "completion": 673,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n{\\\"title\\\":{\\\"value\\\":\\\"The Mariner\\\",\\\"confidence\\\":1,\\\"rationale\\\":\\\"The title is explicitly stated at the top of the screenplay and reinforced by the full-screen superimposed title card.\\\"},\\\"format\\\":{\\\"value\\\":\\\"feature film\\\",\\\"confidence\\\":0.95,\\\"rationale\\\":\\\"The screenplay uses standard film scene headings, has a complex narrative structure with flashbacks, multiple locations, and a full character arc. The story is self-contained and not structured as a pilot or episodic series.\\\"},\\\"genre\\\":{\\\"value\\\":[\\\"action\\\",\\\"crime\\\",\\\"drama\\\",\\\"thriller\\\",\\\"dark comedy\\\"],\\\"confidence\\\":0.95,\\\"rationale\\\":\\\"The screenplay features violent action sequences, criminal gangs, a heist plot, and dramatic family backstory. There are also moments of dark humor (e.g., elevator muzak, banter about AirTags and blockchain).\\\"},\\\"tone\\\":{\\\"value\\\":[\\\"dark\\\",\\\"gritty\\\",\\\"violent\\\",\\\"bleak\\\",\\\"intense\\\",\\\"suspenseful\\\",\\\"noir\\\",\\\"fast-paced\\\",\\\"darkly comedic\\\"],\\\"confidence\\\":0.95,\\\"rationale\\\":\\\"The ruined city, brutal violence, and bleak backstory create a dark, gritty, and intense atmosphere. The pacing is fast, with frequent action and suspense. Noir elements are present in the urban decay and moral ambiguity. There are also moments of dark humor.\\\"},\\\"estimated_duration_minutes\\\":{\\\"value\\\":100,\\\"confidence\\\":0.8,\\\"rationale\\\":\\\"The excerpt is lengthy and covers a significant portion of a feature film structure, including multiple action set pieces and character development. Assuming the full script is of standard length, ~100 minutes is a reasonable estimate.\\\"},\\\"primary_characters\\\":{\\\"value\\\":[\\\"Mariner (Billy/Will MacAngus)\\\",\\\"Rose\\\",\\\"Salvatori\\\"],\\\"confidence\\\":1,\\\"rationale\\\":\\\"Mariner and Rose are the clear protagonists, with Salvatori as the main antagonist. They drive the plot and are present in the majority of scenes.\\\"},\\\"supporting_characters\\\":{\\\"value\\\":[\\\"Dad\\\",\\\"Rosco\\\",\\\"Vinnie\\\",\\\"Mikey\\\",\\\"Carlos\\\",\\\"Thug 1\\\",\\\"Thug 2\\\",\\\"Thug 3\\\"],\\\"confidence\\\":0.95,\\\"rationale\\\":\\\"Dad appears in multiple flashbacks, shaping Mariner's backstory. The named thugs and minor antagonists (Rosco, Vinnie, Mikey, Carlos, Thugs 1-3) have dialogue and participate in key scenes but are not central to the main arc.\\\"},\\\"location_count\\\":{\\\"value\\\":7,\\\"confidence\\\":0.85,\\\"rationale\\\":\\\"Distinct locations include: 1) City Centre, 2) Ruddy & Greene Building (front), 3) Ruddy & Greene Building (rear/alley), 4) Ruddy & Greene Building (interior: elevator, stairwell, multiple floors, office), 5) Coastline (flashback), 6) Backyard (flashback), 7) Chimney Bay (mentioned, not depicted). Some locations are revisited in flashbacks.\\\"},\\\"locations_summary\\\":{\\\"value\\\":\\\"A ruined, post-pandemic city with a focus on the decaying Ruddy & Greene Building (including its alley, elevator, stairwells, and penthouse office), contrasted with flashbacks to a coastal fishing area and a rundown backyard.\\\",\\\"confidence\\\":0.95,\\\"rationale\\\":\\\"The screenplay's action is centered on the Ruddy & Greene Building, with significant flashbacks to the protagonist's childhood in coastal and backyard settings.\\\"},\\\"target_audience\\\":{\\\"value\\\":\\\"R (mature audiences, adults)\\\",\\\"confidence\\\":0.95,\\\"rationale\\\":\\\"The screenplay contains graphic violence, strong language, adult themes (crime, abuse, trauma), and dark humor, making it suitable for mature audiences.\\\"}}\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "32209b57-ca15-463d-8230-6edd2b331d59",
        "latencyMs": 12407,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "promptIdx": 5,
        "provider": {
          "id": "openai:gpt-4.1",
          "label": "GPT-4.1"
        },
        "response": {
          "output": "{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The title is explicitly stated at the top of the screenplay and reinforced by the full-screen superimposed title card.\"\n  },\n  \"format\": {\n    \"value\": \"feature film\",\n    \"confidence\": 0.95,\n    \"rationale\": \"The screenplay uses standard film scene headings, has a complex narrative structure with flashbacks, multiple locations, and a full character arc. The story is self-contained and not structured as a pilot or episodic series.\"\n  },\n  \"genre\": {\n    \"value\": [\"action\", \"crime\", \"drama\", \"thriller\", \"dark comedy\"],\n    \"confidence\": 0.95,\n    \"rationale\": \"The screenplay features violent action sequences, criminal gangs, a heist plot, and dramatic family backstory. There are also moments of dark humor (e.g., elevator muzak, banter about AirTags and blockchain).\"\n  },\n  \"tone\": {\n    \"value\": [\"dark\", \"gritty\", \"violent\", \"bleak\", \"intense\", \"suspenseful\", \"noir\", \"fast-paced\", \"darkly comedic\"],\n    \"confidence\": 0.95,\n    \"rationale\": \"The ruined city, brutal violence, and bleak backstory create a dark, gritty, and intense atmosphere. The pacing is fast, with frequent action and suspense. Noir elements are present in the urban decay and moral ambiguity. There are also moments of dark humor.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 100,\n    \"confidence\": 0.8,\n    \"rationale\": \"The excerpt is lengthy and covers a significant portion of a feature film structure, including multiple action set pieces and character development. Assuming the full script is of standard length, ~100 minutes is a reasonable estimate.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\"Mariner (Billy/Will MacAngus)\", \"Rose\", \"Salvatori\"],\n    \"confidence\": 1.0,\n    \"rationale\": \"Mariner and Rose are the clear protagonists, with Salvatori as the main antagonist. They drive the plot and are present in the majority of scenes.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\"Dad\", \"Rosco\", \"Vinnie\", \"Mikey\", \"Carlos\", \"Thug 1\", \"Thug 2\", \"Thug 3\"],\n    \"confidence\": 0.95,\n    \"rationale\": \"Dad appears in multiple flashbacks, shaping Mariner's backstory. The named thugs and minor antagonists (Rosco, Vinnie, Mikey, Carlos, Thugs 1-3) have dialogue and participate in key scenes but are not central to the main arc.\"\n  },\n  \"location_count\": {\n    \"value\": 7,\n    \"confidence\": 0.85,\n    \"rationale\": \"Distinct locations include: 1) City Centre, 2) Ruddy & Greene Building (front), 3) Ruddy & Greene Building (rear/alley), 4) Ruddy & Greene Building (interior: elevator, stairwell, multiple floors, office), 5) Coastline (flashback), 6) Backyard (flashback), 7) Chimney Bay (mentioned, not depicted). Some locations are revisited in flashbacks.\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A ruined, post-pandemic city with a focus on the decaying Ruddy & Greene Building (including its alley, elevator, stairwells, and penthouse office), contrasted with flashbacks to a coastal fishing area and a rundown backyard.\",\n    \"confidence\": 0.95,\n    \"rationale\": \"The screenplay's action is centered on the Ruddy & Greene Building, with significant flashbacks to the protagonist's childhood in coastal and backyard settings.\"\n  },\n  \"target_audience\": {\n    \"value\": \"R (mature audiences, adults)\",\n    \"confidence\": 0.95,\n    \"rationale\": \"The screenplay contains graphic violence, strong language, adult themes (crime, abuse, trauma), and dark humor, making it suitable for mature audiences.\"\n  }\n}",
          "tokenUsage": {
            "total": 5753,
            "prompt": 4854,
            "completion": 899,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 12407,
          "finishReason": "stop",
          "cost": 0.0169,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9d5b7a737c945fbe-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Sun, 01 Mar 2026 22:08:18 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "12278",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=EZJFrz30vGwbXpJ5k_wNQ27F2NeQLVWlQ2X9UOzLsGo-1772402885.676193-1.0.1.1-KtUyeFeK38_l0g0n8P1QvMKK2D.1mEECr0HgS1jo6zncFiMyhrIEnu3n_ePGivsG9qlsxVKyECp_Zj87yGdW1dMB0b2VO0J_c5ecbUZNyh_RpYIufw4YdlfaJYOn78Xb; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Sun, 01 Mar 2026 22:38:18 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "2000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "1995359",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "139ms",
                "x-request-id": "req_b0c9f62736da44bb9eb5e1c5473e3914"
              }
            }
          }
        },
        "score": 0.965,
        "success": true,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9d5b7a737c945fbe-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Sun, 01 Mar 2026 22:08:18 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "12278",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=EZJFrz30vGwbXpJ5k_wNQ27F2NeQLVWlQ2X9UOzLsGo-1772402885.676193-1.0.1.1-KtUyeFeK38_l0g0n8P1QvMKK2D.1mEECr0HgS1jo6zncFiMyhrIEnu3n_ePGivsG9qlsxVKyECp_Zj87yGdW1dMB0b2VO0J_c5ecbUZNyh_RpYIufw4YdlfaJYOn78Xb; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Sun, 01 Mar 2026 22:38:18 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "2000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "1995359",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "139ms",
              "x-request-id": "req_b0c9f62736da44bb9eb5e1c5473e3914"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 0.85625,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 2608,
            "prompt": 1847,
            "completion": 761,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.9325,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=1.00, format_accuracy=1.00, genre_accuracy=0.75, json_valid=0.90, location_accuracy=1.00, title_accuracy=1.00, tone_accuracy=0.80",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": true,
              "score": 0.78,
              "reason": "Evaluating each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with 0.99 confidence. ✅\n\n2. **Format**: Identified as 'feature film' with 0.75 confidence. Reasonable identification with appropriate hedging about it being a partial script. ✅\n\n3. **Genre**: Includes action, crime, drama, and comedy. Action and crime are spot-on for a vigilante crime-action story. Comedy is debatable but supported with evidence. Missing 'thriller' but the core genres are covered. ✅\n\n4. **Tone**: Captures gritty, dark, violent, intense, fast-paced, darkly comedic, bleak, warm. The dark/gritty/violent qualities are well-identified. ✅\n\n5. **Duration**: Estimated at 25 minutes with 0.65 confidence. The rubric says 85-130 minutes for a ~430-line screenplay. 25 minutes is significantly underestimated. The model treated it as a partial excerpt rather than estimating the full screenplay duration. This is a notable miss. ❌\n\n6. **Primary characters**: Identifies The Mariner (Billy MacAngus), Rose, and Salvatori. The Mariner and Rose as leads is correct. Salvatori as primary character is reasonable as the antagonist. ✅\n\n7. **Supporting characters**: Lists Dad, Rosco, Vinnie, Mikey, Carlos, and Thugs 1-3. Includes Dad, Salvatori (listed as primary instead), and Vinnie. The rubric asks for Dad, Salvatori, and Vinnie among supporting - Dad and Vinnie are here, Salvatori is elevated to primary which is a reasonable choice. ✅\n\n8. **Location count**: Estimated at 9 with 0.82 confidence. Falls within the 5-20 range. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, describes the dystopian urban setting, multiple floors, and flashback locations. ✅\n\n10. **Target audience**: Correctly identified as R-rated/adult (18+) with strong evidence. ✅\n\n11. **Confidence calibration**: Generally well-calibrated. The 0.65 for duration reflects uncertainty, though the estimate itself is wrong. Other confidences seem reasonable. Mostly ✅\n\n12. **Rationale quality**: Rationales are detailed, specific, and grounded in screenplay evidence (specific dialogue quotes, scene descriptions, character names). Very strong. ✅\n\nThe major weakness is the duration estimate of 25 minutes, which is far below the expected 85-130 minute range. The model incorrectly treated the screenplay as a partial excerpt rather than estimating the full runtime. This is a significant error in one of the 10 fields. All other fields are well-handled with strong evidence-based rationales.\n\nOverall: 9/10 fields are accurate or reasonable, with 1 significant miss on duration. Rationales and confidence calibration are generally strong.",
              "tokensUsed": {
                "total": 2608,
                "prompt": 1847,
                "completion": 761,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n```json\\n{\\n  \\\"title\\\": {\\n    \\\"value\\\": \\\"The Mariner\\\",\\n    \\\"confidence\\\": 0.99,\\n    \\\"rationale\\\": \\\"Explicitly stated as the screenplay title at the top of the document and confirmed by the full-screen superimposed title card within the script.\\\"\\n  },\\n  \\\"format\\\": {\\n    \\\"value\\\": \\\"feature film\\\",\\n    \\\"confidence\\\": 0.75,\\n    \\\"rationale\\\": \\\"The screenplay uses standard feature film conventions: FADE IN, full scene headings, a self-contained narrative arc with a clear beginning/middle/end, layered character backstory via flashbacks, and world-building exposition. The complexity of the story and the tagline ('What happens when a hero's origin story crumbles?') suggest a feature-length origin story, though the excerpt shown is likely only a portion of a full script.\\\"\\n  },\\n  \\\"genre\\\": {\\n    \\\"value\\\": [\\\"action\\\", \\\"crime\\\", \\\"drama\\\", \\\"comedy\\\"],\\n    \\\"confidence\\\": 0.88,\\n    \\\"rationale\\\": \\\"Action: sustained fight sequences, gunfire, and physical combat throughout. Crime: gang money theft, organized crime antagonist (Salvatori), criminal underworld setting. Drama: emotional core around father-son trauma, identity, and self-discovery via flashbacks. Comedy: tonal levity through absurdist costume details, muzak humor (George Michael, UB40), banter between Rose and Mariner, and self-aware dialogue ('Is that a flare gun?').\\\"\\n  },\\n  \\\"tone\\\": {\\n    \\\"value\\\": [\\\"gritty\\\", \\\"dark\\\", \\\"violent\\\", \\\"intense\\\", \\\"fast-paced\\\", \\\"darkly comedic\\\", \\\"bleak\\\", \\\"warm\\\"],\\n    \\\"confidence\\\": 0.85,\\n    \\\"rationale\\\": \\\"Gritty/bleak: post-collapse dystopian urban setting with fires, rubble, and no-go zones. Violent: explicit combat, blood, skull fragments, flare gun immolation, brutal fight descriptions. Dark: child abuse flashbacks, abandonment trauma, gang threats. Fast-paced: rapid scene cuts, overlapping action sequences, urgent dialogue. Darkly comedic: absurdist hero costume, muzak choices, 'Is that skull??' moment, flare gun reveal played for laughs. Warm: tender sibling relationship, emotional flashback recontextualization, Rose's speech about Mariner's heroism.\\\"\\n  },\\n  \\\"estimated_duration_minutes\\\": {\\n    \\\"value\\\": 25,\\n    \\\"confidence\\\": 0.65,\\n    \\\"rationale\\\": \\\"Applying the standard ~1 page per minute rule, the screenplay excerpt appears to be approximately 20-30 pages based on scene density, dialogue volume, and action line length. Estimated at roughly 25 minutes for this excerpt, though it is likely a partial script of a longer feature.\\\"\\n  },\\n  \\\"primary_characters\\\": {\\n    \\\"value\\\": [\\\"The Mariner (Billy MacAngus)\\\", \\\"Rose\\\", \\\"Salvatori\\\"],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"The Mariner is the titled protagonist with the most screen time, backstory, and emotional arc. Rose is the co-lead who drives the plot and delivers the thematic climax speech. Salvatori is the primary antagonist who appears as the final confrontation boss.\\\"\\n  },\\n  \\\"supporting_characters\\\": {\\n    \\\"value\\\": [\\\"Dad (Mariner's father)\\\", \\\"Rosco\\\", \\\"Vinnie\\\", \\\"Mikey\\\", \\\"Carlos\\\", \\\"Thug 1\\\", \\\"Thug 2\\\", \\\"Thug 3\\\"],\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"Dad appears in multiple flashbacks as a pivotal but non-present character shaping the protagonist's backstory. Rosco, Vinnie, Mikey, and Carlos are named antagonist henchmen with dialogue. Thugs 1-3 appear in the elevator sequence with minor roles.\\\"\\n  },\\n  \\\"location_count\\\": {\\n    \\\"value\\\": 9,\\n    \\\"confidence\\\": 0.82,\\n    \\\"rationale\\\": \\\"Distinct locations identified: (1) City Centre exterior, (2) Ruddy & Greene Building front exterior, (3) Ruddy & Greene Building rear alley, (4) Building elevator/interior, (5) 11th floor corridor, (6) Empty room on 11th floor, (7) Stairwell, (8) 13th floor corridor, (9) 15th floor office/corridor. Flashback locations (coastline, backyard) are additional but exist outside the present-day narrative space — counted separately they add 2 more, but core present-day locations number 9.\\\"\\n  },\\n  \\\"locations_summary\\\": {\\n    \\\"value\\\": \\\"A dystopian post-collapse urban city centre at night, centered on the Ruddy & Greene Building — a 15-story sandstone building used as a gang headquarters. Action moves through the building's rear alley, elevator, and multiple floors (11th, 12th, 13th, and 15th), culminating in a luxurious top-floor office. Flashback sequences depict a coastal shoreline and a rundown backyard, establishing the protagonist's childhood.\\\",\\n    \\\"confidence\\\": 0.93,\\n    \\\"rationale\\\": \\\"Derived directly from scene headings and descriptive action lines throughout the screenplay.\\\"\\n  },\\n  \\\"target_audience\\\": {\\n    \\\"value\\\": \\\"R-rated / adult audiences (18+)\\\",\\n    \\\"confidence\\\": 0.85,\\n    \\\"rationale\\\": \\\"The screenplay contains sustained graphic violence (skull fragments, flare gun immolation, blood throughout), strong profanity ('fucking,' 'shit,' 'prick,' etc.), child abuse depictions in flashbacks, gang crime, and mature thematic content around trauma and abandonment. This content profile is consistent with an R-rating targeting adult audiences.\\\"\\n  }\\n}\\n```\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "ec591fd7-6c80-4806-8bb2-d6b62f8adc77",
        "latencyMs": 28630,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "promptIdx": 8,
        "provider": {
          "id": "anthropic:messages:claude-sonnet-4-6",
          "label": "Claude Sonnet 4.6"
        },
        "response": {
          "output": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 0.99,\n    \"rationale\": \"Explicitly stated as the screenplay title at the top of the document and confirmed by the full-screen superimposed title card within the script.\"\n  },\n  \"format\": {\n    \"value\": \"feature film\",\n    \"confidence\": 0.75,\n    \"rationale\": \"The screenplay uses standard feature film conventions: FADE IN, full scene headings, a self-contained narrative arc with a clear beginning/middle/end, layered character backstory via flashbacks, and world-building exposition. The complexity of the story and the tagline ('What happens when a hero's origin story crumbles?') suggest a feature-length origin story, though the excerpt shown is likely only a portion of a full script.\"\n  },\n  \"genre\": {\n    \"value\": [\"action\", \"crime\", \"drama\", \"comedy\"],\n    \"confidence\": 0.88,\n    \"rationale\": \"Action: sustained fight sequences, gunfire, and physical combat throughout. Crime: gang money theft, organized crime antagonist (Salvatori), criminal underworld setting. Drama: emotional core around father-son trauma, identity, and self-discovery via flashbacks. Comedy: tonal levity through absurdist costume details, muzak humor (George Michael, UB40), banter between Rose and Mariner, and self-aware dialogue ('Is that a flare gun?').\"\n  },\n  \"tone\": {\n    \"value\": [\"gritty\", \"dark\", \"violent\", \"intense\", \"fast-paced\", \"darkly comedic\", \"bleak\", \"warm\"],\n    \"confidence\": 0.85,\n    \"rationale\": \"Gritty/bleak: post-collapse dystopian urban setting with fires, rubble, and no-go zones. Violent: explicit combat, blood, skull fragments, flare gun immolation, brutal fight descriptions. Dark: child abuse flashbacks, abandonment trauma, gang threats. Fast-paced: rapid scene cuts, overlapping action sequences, urgent dialogue. Darkly comedic: absurdist hero costume, muzak choices, 'Is that skull??' moment, flare gun reveal played for laughs. Warm: tender sibling relationship, emotional flashback recontextualization, Rose's speech about Mariner's heroism.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 25,\n    \"confidence\": 0.65,\n    \"rationale\": \"Applying the standard ~1 page per minute rule, the screenplay excerpt appears to be approximately 20-30 pages based on scene density, dialogue volume, and action line length. Estimated at roughly 25 minutes for this excerpt, though it is likely a partial script of a longer feature.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\"The Mariner (Billy MacAngus)\", \"Rose\", \"Salvatori\"],\n    \"confidence\": 0.95,\n    \"rationale\": \"The Mariner is the titled protagonist with the most screen time, backstory, and emotional arc. Rose is the co-lead who drives the plot and delivers the thematic climax speech. Salvatori is the primary antagonist who appears as the final confrontation boss.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\"Dad (Mariner's father)\", \"Rosco\", \"Vinnie\", \"Mikey\", \"Carlos\", \"Thug 1\", \"Thug 2\", \"Thug 3\"],\n    \"confidence\": 0.9,\n    \"rationale\": \"Dad appears in multiple flashbacks as a pivotal but non-present character shaping the protagonist's backstory. Rosco, Vinnie, Mikey, and Carlos are named antagonist henchmen with dialogue. Thugs 1-3 appear in the elevator sequence with minor roles.\"\n  },\n  \"location_count\": {\n    \"value\": 9,\n    \"confidence\": 0.82,\n    \"rationale\": \"Distinct locations identified: (1) City Centre exterior, (2) Ruddy & Greene Building front exterior, (3) Ruddy & Greene Building rear alley, (4) Building elevator/interior, (5) 11th floor corridor, (6) Empty room on 11th floor, (7) Stairwell, (8) 13th floor corridor, (9) 15th floor office/corridor. Flashback locations (coastline, backyard) are additional but exist outside the present-day narrative space — counted separately they add 2 more, but core present-day locations number 9.\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A dystopian post-collapse urban city centre at night, centered on the Ruddy & Greene Building — a 15-story sandstone building used as a gang headquarters. Action moves through the building's rear alley, elevator, and multiple floors (11th, 12th, 13th, and 15th), culminating in a luxurious top-floor office. Flashback sequences depict a coastal shoreline and a rundown backyard, establishing the protagonist's childhood.\",\n    \"confidence\": 0.93,\n    \"rationale\": \"Derived directly from scene headings and descriptive action lines throughout the screenplay.\"\n  },\n  \"target_audience\": {\n    \"value\": \"R-rated / adult audiences (18+)\",\n    \"confidence\": 0.85,\n    \"rationale\": \"The screenplay contains sustained graphic violence (skull fragments, flare gun immolation, blood throughout), strong profanity ('fucking,' 'shit,' 'prick,' etc.), child abuse depictions in flashbacks, gang crime, and mature thematic content around trauma and abandonment. This content profile is consistent with an R-rating targeting adult audiences.\"\n  }\n}\n```",
          "tokenUsage": {
            "total": 6871,
            "prompt": 5518,
            "completion": 1353
          },
          "finishReason": "stop"
        },
        "score": 0.85625,
        "success": true,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0.02267475,
        "gradingResult": {
          "pass": true,
          "score": 0.88,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 2203,
            "prompt": 1436,
            "completion": 767,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.98,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=1.00, format_accuracy=1.00, genre_accuracy=1.00, json_valid=1.00, location_accuracy=1.00, title_accuracy=1.00, tone_accuracy=0.80",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": true,
              "score": 0.78,
              "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with 0.99 confidence. ✅\n\n2. **Format**: Identified as 'feature film' with 0.62 confidence. The lower confidence is reasonable since only a partial excerpt was provided. ✅\n\n3. **Genre**: Includes action, crime, drama, thriller — all appropriate for a vigilante crime-action story. ✅\n\n4. **Tone**: Captures dark, gritty, violent, intense, suspenseful, and even notes the darkly comedic elements (muzak over violence, Finding Nemo quip). Excellent. ✅\n\n5. **Duration**: Estimated at 15 minutes with 0.35 confidence. The rubric says 85-130 minutes for a ~430-line screenplay. The model estimated only 15 minutes, which is significantly off. However, the model noted it appeared to be only a partial excerpt ('only a partial screenplay segment is provided'), which explains the low estimate. The low confidence (0.35) reflects uncertainty, but the estimate itself is far from the expected range. ❌\n\n6. **Primary characters**: Identifies The Mariner (Billy/Will MacAngus), Rose, and Salvatori. The rubric asks for Mariner and Rose as leads — both identified. Salvatori is listed as primary rather than supporting, which could be debated, but he's clearly important. ✅\n\n7. **Supporting characters**: Lists Rosco, Vinnie, Mikey, Carlos, Dad — all mentioned in the rubric criteria (Dad, Salvatori, Vinnie). Salvatori is listed as primary rather than supporting, but the rubric mentions him among supporting cast. Minor issue. Mostly ✅\n\n8. **Location count**: Estimated at 8 with 0.72 confidence. Falls within the 5-20 range. ✅\n\n9. **Locations summary**: Mentions the Ruddy & Greene building explicitly as the primary setting, along with specific floors and flashback locations. ✅\n\n10. **Target audience**: Correctly identified as R/adults 17+ with appropriate rationale about violence, profanity, and mature themes. ✅\n\n11. **Confidence calibration**: Generally well-calibrated. High confidence for clear facts (title 0.99), lower for uncertain elements (duration 0.35, format 0.62). Reasonable. ✅\n\n12. **Rationale quality**: All rationales cite specific screenplay evidence (title cards, character names, scene descriptions, specific dialogue references like 'Finding Nemo'). Well-grounded. ✅\n\nThe main weakness is the duration estimate of 15 minutes vs. the expected 85-130 minutes. The model treated the text as a partial excerpt rather than a substantial screenplay, which is a significant miss on that field. However, most other fields are accurate and well-evidenced. Salvatori being classified as primary rather than supporting is a minor issue.\n\nOverall: 10/12 criteria met well, with the duration being a clear miss and the Salvatori classification being a minor issue.",
              "tokensUsed": {
                "total": 2203,
                "prompt": 1436,
                "completion": 767,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n{\\\"title\\\":{\\\"value\\\":\\\"The Mariner\\\",\\\"confidence\\\":0.99,\\\"rationale\\\":\\\"The screenplay begins with the title line \\\\\\\"The Mariner\\\\\\\" and later includes a full-screen title card: “THE MARINER”.\\\"},\\\"format\\\":{\\\"value\\\":\\\"feature film\\\",\\\"confidence\\\":0.62,\\\"rationale\\\":\\\"The structure (cold open/FADE IN, opening title, escalating multi-scene action, protagonist backstory via flashbacks, central antagonist confrontation) reads like an Act I/II feature setup rather than a TV pilot with episodic/series hooks, though only an excerpt is provided.\\\"},\\\"genre\\\":{\\\"value\\\":[\\\"action\\\",\\\"crime\\\",\\\"drama\\\",\\\"thriller\\\"],\\\"confidence\\\":0.88,\\\"rationale\\\":\\\"Action: repeated fights, gunfire, flare gun, close-quarters combat. Crime: gang money, thugs, a crime boss (Salvatori). Drama: family trauma/abandonment revelations and character development. Thriller: pursuit through building, hostage/threat dynamics, suspenseful confrontation.\\\"},\\\"tone\\\":{\\\"value\\\":[\\\"dark\\\",\\\"gritty\\\",\\\"violent\\\",\\\"intense\\\",\\\"fast-paced\\\",\\\"bleak\\\",\\\"suspenseful\\\",\\\"stylized\\\",\\\"darkly comedic\\\"],\\\"confidence\\\":0.9,\\\"rationale\\\":\\\"Dark/bleak/gritty: ruined city, no-go zones, fires, homelessness. Violent/intense: shootings, brutal takedowns, gore described. Fast-paced: rapid sequence of attacks and movement between floors. Suspenseful: being hunted, standoffs, threats. Stylized/darkly comedic: muzak pop songs over violence, absurd-hero costume and quips (flare gun, \\\\\\\"Finding Nemo\\\\\\\").\\\"},\\\"estimated_duration_minutes\\\":{\\\"value\\\":15,\\\"confidence\\\":0.35,\\\"rationale\\\":\\\"Only a partial screenplay segment is provided (limited set of scenes, ends on cut to black), suggesting ~12–20 pages/minutes; estimated mid-point using the 1-page-per-minute heuristic with uncertainty.\\\"},\\\"primary_characters\\\":{\\\"value\\\":[\\\"The Mariner (Billy/Will MacAngus)\\\",\\\"Rose\\\",\\\"Salvatori\\\"],\\\"confidence\\\":0.9,\\\"rationale\\\":\\\"Mariner and Rose drive nearly all action and dialogue; Salvatori is the clear primary antagonist in the climax of the provided excerpt.\\\"},\\\"supporting_characters\\\":{\\\"value\\\":[\\\"Rosco\\\",\\\"Vinnie\\\",\\\"Mikey\\\",\\\"Carlos\\\",\\\"Dad (Mariner's father)\\\",\\\"Thug 1\\\",\\\"Thug 2\\\",\\\"Thug 3\\\",\\\"Two unnamed thugs/guards (with Salvatori)\\\"],\\\"confidence\\\":0.86,\\\"rationale\\\":\\\"These characters appear in identifiable speaking/action roles: named gang members (Rosco/Vinnie/Mikey/Carlos), father in flashbacks, and multiple unnamed thugs in elevator/final office.\\\"},\\\"location_count\\\":{\\\"value\\\":8,\\\"confidence\\\":0.72,\\\"rationale\\\":\\\"Distinct headings/settings include: EXT city centre; EXT building front; EXT building rear/alley; INT elevator; INT 11th floor corridor/empty room; INT stairwell (and floors within it); INT 13th floor; INT 15th floor luxury office. Flashbacks add EXT coastline and EXT backyard, but some are repeated; counting unique locations yields ~8.\\\"},\\\"locations_summary\\\":{\\\"value\\\":\\\"A post-collapse ruined city centre and the exterior of the Ruddy & Greene building (front and rear alley/loading area), with most action inside the building: elevator, dim office corridors on multiple floors (11/13), stairwells, and a clean luxurious top-floor office/nightclub-like suite; flashbacks occur on a coastline in a small boat and in a backyard with weights/bench press.\\\",\\\"confidence\\\":0.84,\\\"rationale\\\":\\\"Summarizes the recurring present-day primary setting (the building and its floors) plus the clearly marked flashback locations (coastline/backyard).\\\"},\\\"target_audience\\\":{\\\"value\\\":\\\"R (adults 17+)\\\",\\\"confidence\\\":0.78,\\\"rationale\\\":\\\"Strong profanity, brutal violence (head smashing, gore), guns, and mature themes imply an R-rated target audience.\\\"}}\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "5a88a151-1db1-4ab8-809d-c2268d5eacca",
        "latencyMs": 15422,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a hero’s origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldn’t.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. “McAngus Fish & Brewis” painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the building’s back door, his huge frame silhouetted against the interior’s light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of “Faith” by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, “Faith” playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! C’mon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. She’s wearing a Tim Hortons uniform, her hair is a mess, and there’s blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: “THE MARINER”\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHe’s built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with “Dad” in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at ma’s.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! I’m taking you home. It’s my fault they went after you. I never thought they’d--\n\nROSE  \n(laughing)  \nYou think they’re after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWe’ve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariner’s OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWe’ll take the stairs up. They won’t expect that.\n\nMARINER  \nBecause it’s stupid\\!\n\nRose raises an eyebrow at Mariner’s crazy outfit.\n\nMARINER  \nIt’s functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his “Dad” TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows what’s a hero? ‘E’s the one what’s brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! I’ll buy you a new bloody purse.\n\nROSE  \nIt ain’t the purse. It’s... a blockchain password to my life savings. I hid it on a chip in the lining. It’s all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hell’s a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! It’s, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatori’s gonna kill ya, Rosie.\n\nRose nods “yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe ain’t gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. It’s gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shit’s a scam. You gotta get into PonziCoin. My cousin’s in it. He says it’s legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWe’re leaving. Now. I don’t steal, Rose. It’s against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariner’s code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We don’t wanna hurt ya. Mr. Salvatori just wants his password. That’s all. Then maybe, if you’re reeeaal nice, maybe you can be my booty call some more.\n\nRose’s eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariner’s back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIE’S screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos’ back. “BOSUN” is carved into the wood. Rose gives Vinnie’s body a kick.\n\nROSE  \nPrick. Oh shit\\! You’re bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariner’s leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnie’s unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. C’mon.\n\nINT. 15TH FLOOR\n\nThis floor isn’t destroyed like the others. It’s CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariner’s opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist you’re strong, Billy. That’s gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariner’s dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, don’t never run from a fight. Not again, ya hears me? It’s not what a man does. It’s not what a MacAngus does. Let’s do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin’ tin, sis. Just like dad taught me.\n\nROSE  \nYou’re serious about this dad shit? You talking about the summer he took you to buddy’s place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONT’D)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, he’s living up in  Chimney Bay with some skank. He was on the pogey that summer at buddy’s\\! He was supposed to be taking care of you. Instead he’d ditch you in his deadbeat friend’s yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma would’a said.\n\nROSE  \nYou were too young, Will. She didn’t want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew you’d be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. He’s WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariner’s dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Don’t never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like you’re trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, b’y? It’s got two thumbs and ‘e looks like this\\! Ha\\! Now fetch me anudder. An don’t gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONT’D)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariner’s OAR and kick the back of his legs so he’s kneeling at their feet. Mariner doesn’t resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHe’s no hero. He’s a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they don’t deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHe’s a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Rose’s head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariner’s face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type. Use one of: \"feature film\", \"short film\", \"pilot\", \"limited series\". Determine format from screenplay conventions (scene headings, character cues, dialogue formatting, narrative complexity) rather than raw page count alone.\n3. genre (array of strings): ALL applicable genres. Be comprehensive — most screenplays span multiple genres. Consider: action, adventure, animation, comedy, crime, documentary, drama, fantasy, horror, mystery, musical, romance, sci-fi, thriller, war, western. Include every genre that has clear evidence in the text.\n4. tone (array of strings): ALL tonal qualities present in the screenplay. Consider multiple dimensions: mood (dark, light, whimsical), intensity (intense, relaxed, frenetic), visual style (gritty, sleek, noir, stylized), violence level (violent, brutal, restrained), atmosphere (suspenseful, eerie, warm, bleak), and pacing (fast-paced, slow-burn, episodic). Include every quality supported by evidence.\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "13477f2e43f458ae6aaf339031e59fb9fef327140f697287ed27cb72ceda776a",
        "promptIdx": 11,
        "provider": {
          "id": "openai:gpt-5.2",
          "label": "GPT-5.2"
        },
        "response": {
          "output": "{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 0.99,\n    \"rationale\": \"The screenplay begins with the title line \\\"The Mariner\\\" and later includes a full-screen title card: “THE MARINER”.\"\n  },\n  \"format\": {\n    \"value\": \"feature film\",\n    \"confidence\": 0.62,\n    \"rationale\": \"The structure (cold open/FADE IN, opening title, escalating multi-scene action, protagonist backstory via flashbacks, central antagonist confrontation) reads like an Act I/II feature setup rather than a TV pilot with episodic/series hooks, though only an excerpt is provided.\"\n  },\n  \"genre\": {\n    \"value\": [\n      \"action\",\n      \"crime\",\n      \"drama\",\n      \"thriller\"\n    ],\n    \"confidence\": 0.88,\n    \"rationale\": \"Action: repeated fights, gunfire, flare gun, close-quarters combat. Crime: gang money, thugs, a crime boss (Salvatori). Drama: family trauma/abandonment revelations and character development. Thriller: pursuit through building, hostage/threat dynamics, suspenseful confrontation.\"\n  },\n  \"tone\": {\n    \"value\": [\n      \"dark\",\n      \"gritty\",\n      \"violent\",\n      \"intense\",\n      \"fast-paced\",\n      \"bleak\",\n      \"suspenseful\",\n      \"stylized\",\n      \"darkly comedic\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"Dark/bleak/gritty: ruined city, no-go zones, fires, homelessness. Violent/intense: shootings, brutal takedowns, gore described. Fast-paced: rapid sequence of attacks and movement between floors. Suspenseful: being hunted, standoffs, threats. Stylized/darkly comedic: muzak pop songs over violence, absurd-hero costume and quips (flare gun, \\\"Finding Nemo\\\").\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 15,\n    \"confidence\": 0.35,\n    \"rationale\": \"Only a partial screenplay segment is provided (limited set of scenes, ends on cut to black), suggesting ~12–20 pages/minutes; estimated mid-point using the 1-page-per-minute heuristic with uncertainty.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\n      \"The Mariner (Billy/Will MacAngus)\",\n      \"Rose\",\n      \"Salvatori\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"Mariner and Rose drive nearly all action and dialogue; Salvatori is the clear primary antagonist in the climax of the provided excerpt.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\n      \"Rosco\",\n      \"Vinnie\",\n      \"Mikey\",\n      \"Carlos\",\n      \"Dad (Mariner's father)\",\n      \"Thug 1\",\n      \"Thug 2\",\n      \"Thug 3\",\n      \"Two unnamed thugs/guards (with Salvatori)\"\n    ],\n    \"confidence\": 0.86,\n    \"rationale\": \"These characters appear in identifiable speaking/action roles: named gang members (Rosco/Vinnie/Mikey/Carlos), father in flashbacks, and multiple unnamed thugs in elevator/final office.\"\n  },\n  \"location_count\": {\n    \"value\": 8,\n    \"confidence\": 0.72,\n    \"rationale\": \"Distinct headings/settings include: EXT city centre; EXT building front; EXT building rear/alley; INT elevator; INT 11th floor corridor/empty room; INT stairwell (and floors within it); INT 13th floor; INT 15th floor luxury office. Flashbacks add EXT coastline and EXT backyard, but some are repeated; counting unique locations yields ~8.\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A post-collapse ruined city centre and the exterior of the Ruddy & Greene building (front and rear alley/loading area), with most action inside the building: elevator, dim office corridors on multiple floors (11/13), stairwells, and a clean luxurious top-floor office/nightclub-like suite; flashbacks occur on a coastline in a small boat and in a backyard with weights/bench press.\",\n    \"confidence\": 0.84,\n    \"rationale\": \"Summarizes the recurring present-day primary setting (the building and its floors) plus the clearly marked flashback locations (coastline/backyard).\"\n  },\n  \"target_audience\": {\n    \"value\": \"R (adults 17+)\",\n    \"confidence\": 0.78,\n    \"rationale\": \"Strong profanity, brutal violence (head smashing, gore), guns, and mature themes imply an R-rated target audience.\"\n  }\n}",
          "tokenUsage": {
            "total": 5866,
            "prompt": 4853,
            "completion": 1013,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 15422,
          "finishReason": "stop",
          "cost": 0.02267475,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9d5b7c20c8f1803b-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Sun, 01 Mar 2026 22:09:29 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "15139",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=52bKWFe2DmZ.lcYBw4zuWWXoya2fa4_0NzMPPNTmXlc-1772402954.365905-1.0.1.1-Li4og_5madlWlL7e84PFBUoW_MKq6Nq.TEVBEBz0ebXgzE9YUrXzKMJG.omSEqD_2zKmpZfv0X6TsGRXnqwB6PskX3CWmG8If2VRho71LmjPj2pv.4ZEd7LKhTbcDaye; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Sun, 01 Mar 2026 22:39:29 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "4000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "3995359",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "69ms",
                "x-request-id": "req_f4c1b47018f44b3db4821fc5b8a02f37"
              }
            }
          }
        },
        "score": 0.88,
        "success": true,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9d5b7c20c8f1803b-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Sun, 01 Mar 2026 22:09:29 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "15139",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=52bKWFe2DmZ.lcYBw4zuWWXoya2fa4_0NzMPPNTmXlc-1772402954.365905-1.0.1.1-Li4og_5madlWlL7e84PFBUoW_MKq6Nq.TEVBEBz0ebXgzE9YUrXzKMJG.omSEqD_2zKmpZfv0X6TsGRXnqwB6PskX3CWmG8If2VRho71LmjPj2pv.4ZEd7LKhTbcDaye; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Sun, 01 Mar 2026 22:39:29 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "4000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "3995359",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "69ms",
              "x-request-id": "req_f4c1b47018f44b3db4821fc5b8a02f37"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      }
    ],
    "stats": {
      "successes": 7,
      "failures": 8,
      "errors": 0,
      "tokenUsage": {
        "prompt": 76273,
        "completion": 20161,
        "cached": 0,
        "total": 104985,
        "numRequests": 15,
        "completionDetails": {
          "reasoning": 13095,
          "acceptedPrediction": 0,
          "rejectedPrediction": 0
        },
        "assertions": {
          "total": 33398,
          "prompt": 22954,
          "completion": 10444,
          "cached": 0,
          "numRequests": 0,
          "completionDetails": {
            "reasoning": 0,
            "acceptedPrediction": 0,
            "rejectedPrediction": 0
          }
        }
      },
      "durationMs": 189610
    }
  },
  "config": {
    "tags": {},
    "description": "Project config detection from screenplay — The Mariner",
    "prompts": [
      "file:///Users/cam/Documents/Projects/cine-forge/benchmarks/prompts/config-detection.txt"
    ],
    "providers": [
      {
        "id": "openai:gpt-4.1-nano",
        "label": "GPT-4.1 Nano",
        "config": {
          "temperature": 0,
          "max_tokens": 4096,
          "response_format": {
            "type": "json_object"
          }
        }
      },
      {
        "id": "openai:gpt-4.1-mini",
        "label": "GPT-4.1 Mini",
        "config": {
          "temperature": 0,
          "max_tokens": 4096,
          "response_format": {
            "type": "json_object"
          }
        }
      },
      {
        "id": "openai:gpt-5-nano",
        "label": "GPT-5 Nano",
        "config": {
          "temperature": 0,
          "max_tokens": 4096,
          "response_format": {
            "type": "json_object"
          }
        }
      },
      {
        "id": "openai:gpt-5-mini",
        "label": "GPT-5 Mini",
        "config": {
          "temperature": 0,
          "max_tokens": 4096,
          "response_format": {
            "type": "json_object"
          }
        }
      },
      {
        "id": "google:gemini-2.5-flash-lite",
        "label": "Gemini 2.5 Flash Lite",
        "config": {
          "temperature": 0,
          "maxOutputTokens": 16384
        }
      },
      {
        "id": "openai:gpt-4.1",
        "label": "GPT-4.1",
        "config": {
          "temperature": 0,
          "max_tokens": 4096,
          "response_format": {
            "type": "json_object"
          }
        }
      },
      {
        "id": "anthropic:messages:claude-haiku-4-5-20251001",
        "label": "Claude Haiku 4.5",
        "config": {
          "temperature": 0,
          "max_tokens": 4096
        }
      },
      {
        "id": "anthropic:messages:claude-sonnet-4-5-20250929",
        "label": "Claude Sonnet 4.5",
        "config": {
          "temperature": 0,
          "max_tokens": 4096
        }
      },
      {
        "id": "anthropic:messages:claude-sonnet-4-6",
        "label": "Claude Sonnet 4.6",
        "config": {
          "temperature": 0,
          "max_tokens": 4096
        }
      },
      {
        "id": "google:gemini-2.5-flash",
        "label": "Gemini 2.5 Flash",
        "config": {
          "temperature": 0,
          "maxOutputTokens": 16384
        }
      },
      {
        "id": "google:gemini-3-flash-preview",
        "label": "Gemini 3 Flash",
        "config": {
          "temperature": 0,
          "maxOutputTokens": 16384
        }
      },
      {
        "id": "openai:gpt-5.2",
        "label": "GPT-5.2",
        "config": {
          "temperature": 0,
          "max_tokens": 4096,
          "response_format": {
            "type": "json_object"
          }
        }
      },
      {
        "id": "anthropic:messages:claude-opus-4-6",
        "label": "Claude Opus 4.6",
        "config": {
          "temperature": 0,
          "max_tokens": 4096
        }
      },
      {
        "id": "google:gemini-2.5-pro",
        "label": "Gemini 2.5 Pro",
        "config": {
          "temperature": 0,
          "maxOutputTokens": 16384
        }
      },
      {
        "id": "google:gemini-3-pro-preview",
        "label": "Gemini 3 Pro",
        "config": {
          "temperature": 0,
          "maxOutputTokens": 16384
        }
      }
    ],
    "tests": [
      {
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "assert": [
          {
            "type": "python",
            "value": "file://../scorers/config_detection_scorer.py"
          },
          {
            "type": "llm-rubric",
            "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
          }
        ]
      }
    ],
    "scenarios": [],
    "env": {},
    "defaultTest": {
      "options": {
        "provider": "anthropic:messages:claude-opus-4-6"
      },
      "vars": {},
      "assert": [],
      "metadata": {}
    },
    "outputPath": [
      "results/config-detection-2026-03-01.json"
    ],
    "extensions": [],
    "metadata": {},
    "evaluateOptions": {}
  },
  "shareableUrl": null,
  "metadata": {
    "promptfooVersion": "0.120.24",
    "nodeVersion": "v24.13.1",
    "platform": "darwin",
    "arch": "arm64",
    "exportedAt": "2026-03-01T22:10:36.104Z",
    "evaluationCreatedAt": "2026-03-01T22:07:24.994Z"
  }
}