{
  "evalId": "eval-Xeu-2026-02-18T07:29:18",
  "results": {
    "version": 3,
    "timestamp": "2026-02-18T07:29:18.099Z",
    "prompts": [
      {
        "raw": "You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
        "label": "prompts/normalization.txt: You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
        "id": "7bc79ce1f5846d8728590285cab08ec96b22d867e2d8ac7b1dd750e47494dfc4",
        "provider": "GPT-4.1 Nano",
        "metrics": {
          "score": 1.845,
          "testPassCount": 2,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 4,
          "assertFailCount": 0,
          "totalLatencyMs": 8967,
          "tokenUsage": {
            "prompt": 1232,
            "completion": 869,
            "cached": 0,
            "total": 2101,
            "numRequests": 2,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2526,
              "prompt": 1764,
              "completion": 762,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.00047080000000000006
        }
      },
      {
        "raw": "You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
        "label": "prompts/normalization.txt: You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
        "id": "7bc79ce1f5846d8728590285cab08ec96b22d867e2d8ac7b1dd750e47494dfc4",
        "provider": "GPT-4.1 Mini",
        "metrics": {
          "score": 1.845,
          "testPassCount": 2,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 4,
          "assertFailCount": 0,
          "totalLatencyMs": 10885,
          "tokenUsage": {
            "prompt": 1232,
            "completion": 788,
            "cached": 0,
            "total": 2020,
            "numRequests": 2,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2660,
              "prompt": 1676,
              "completion": 984,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.0017536000000000001
        }
      },
      {
        "raw": "You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
        "label": "prompts/normalization.txt: You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
        "id": "7bc79ce1f5846d8728590285cab08ec96b22d867e2d8ac7b1dd750e47494dfc4",
        "provider": "GPT-4.1",
        "metrics": {
          "score": 1.8921000000000001,
          "testPassCount": 2,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 4,
          "assertFailCount": 0,
          "totalLatencyMs": 10425,
          "tokenUsage": {
            "prompt": 1232,
            "completion": 779,
            "cached": 0,
            "total": 2011,
            "numRequests": 2,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2374,
              "prompt": 1657,
              "completion": 717,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.008695999999999999
        }
      },
      {
        "raw": "You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
        "label": "prompts/normalization.txt: You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
        "id": "7bc79ce1f5846d8728590285cab08ec96b22d867e2d8ac7b1dd750e47494dfc4",
        "provider": "Claude Haiku 4.5",
        "metrics": {
          "score": 1.8092000000000001,
          "testPassCount": 2,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 4,
          "assertFailCount": 0,
          "totalLatencyMs": 4997,
          "tokenUsage": {
            "prompt": 1401,
            "completion": 952,
            "cached": 0,
            "total": 2353,
            "numRequests": 2,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2747,
              "prompt": 1688,
              "completion": 1059,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.006161
        }
      },
      {
        "raw": "You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
        "label": "prompts/normalization.txt: You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
        "id": "7bc79ce1f5846d8728590285cab08ec96b22d867e2d8ac7b1dd750e47494dfc4",
        "provider": "Claude Sonnet 4.5",
        "metrics": {
          "score": 1.91,
          "testPassCount": 2,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 4,
          "assertFailCount": 0,
          "totalLatencyMs": 10912,
          "tokenUsage": {
            "prompt": 1401,
            "completion": 975,
            "cached": 0,
            "total": 2376,
            "numRequests": 2,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2798,
              "prompt": 1711,
              "completion": 1087,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.018828
        }
      },
      {
        "raw": "You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
        "label": "prompts/normalization.txt: You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
        "id": "7bc79ce1f5846d8728590285cab08ec96b22d867e2d8ac7b1dd750e47494dfc4",
        "provider": "Claude Sonnet 4.6",
        "metrics": {
          "score": 1.91,
          "testPassCount": 2,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 4,
          "assertFailCount": 0,
          "totalLatencyMs": 9293,
          "tokenUsage": {
            "prompt": 1401,
            "completion": 956,
            "cached": 0,
            "total": 2357,
            "numRequests": 2,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2549,
              "prompt": 1692,
              "completion": 857,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0
        }
      },
      {
        "raw": "You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
        "label": "prompts/normalization.txt: You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
        "id": "7bc79ce1f5846d8728590285cab08ec96b22d867e2d8ac7b1dd750e47494dfc4",
        "provider": "GPT-5.2",
        "metrics": {
          "score": 1.495,
          "testPassCount": 1,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 3,
          "assertFailCount": 1,
          "totalLatencyMs": 10228,
          "tokenUsage": {
            "prompt": 1230,
            "completion": 861,
            "cached": 0,
            "total": 2091,
            "numRequests": 2,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 3125,
              "prompt": 1733,
              "completion": 1392,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.0142065
        }
      },
      {
        "raw": "You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
        "label": "prompts/normalization.txt: You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
        "id": "7bc79ce1f5846d8728590285cab08ec96b22d867e2d8ac7b1dd750e47494dfc4",
        "provider": "Claude Opus 4.6",
        "metrics": {
          "score": 1.8199999999999998,
          "testPassCount": 2,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 4,
          "assertFailCount": 0,
          "totalLatencyMs": 11601,
          "tokenUsage": {
            "prompt": 1401,
            "completion": 956,
            "cached": 0,
            "total": 2357,
            "numRequests": 2,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2534,
              "prompt": 1692,
              "completion": 842,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.030905000000000002
        }
      }
    ],
    "results": [
      {
        "cost": 0.007742,
        "error": "Let me evaluate each criterion:\n\n1. **Scene headings**: Present and properly formatted - INT. COMMUNITY RADIO STUDIO - NIGHT, EXT. HILLTOP WATER TOWER - LATER THAT NIGHT, INT. STUDIO HALLWAY - NIGHT. These are ALL CAPS and follow standard Fountain format. ✓\n\n2. **Character cues**: Character names are ALL CAPS on their own lines (JUNE, NOAH, ARIA, KELL, NOAH (V.O.)). ✓\n\n3. **Dialogue preservation**: The dialogue appears to be preserved from the original prose. However, there's a significant formatting problem: the dialogue lines include quotation marks AND attribution/action text mixed in. For example: '\"If this works, half the valley hears us,\" June says, setting down the mugs.' In proper Fountain format, the attribution ('June says') should be removed from dialogue and placed as action or parenthetical, and quotation marks should be removed since the character cue already indicates who's speaking. Similarly, lines like 'Noah tries to sound calm. \"If this works, we hear them too.\"' mix action with dialogue incorrectly. This is a major structural flaw. ✗\n\n4. **Parentheticals**: There are no parentheticals used at all. Action descriptions like 'Noah tries to sound calm' or 'Aria grins' or 'Kell raises an eyebrow' should have been formatted as parentheticals like (trying to sound calm) or as separate action lines, not embedded within the dialogue block. ✗\n\n5. **No markdown formatting**: No markdown symbols detected. ✓\n\n6. **Scene breaks**: Three scenes are identified, which seems reasonable from context clues (studio, hilltop, hallway). ✓\n\n7. **Author's voice preserved**: The content seems preserved without major inventions. ✓\n\nThe most critical failures are in dialogue formatting. In standard Fountain/screenplay format:\n- Dialogue should NOT contain quotation marks\n- Action/attribution tags ('June says', 'Noah tries to sound calm', 'Aria replies quietly') should NOT be embedded in dialogue lines\n- These should be either parentheticals or separate action lines\n\nThe prose-to-screenplay conversion is incomplete - it reads more like the prose was reorganized under character headings rather than truly converted to screenplay format. The quotation marks and said-tags are hallmarks of prose that should have been stripped during normalization.",
        "gradingResult": {
          "pass": false,
          "score": 0.62,
          "reason": "Let me evaluate each criterion:\n\n1. **Scene headings**: Present and properly formatted - INT. COMMUNITY RADIO STUDIO - NIGHT, EXT. HILLTOP WATER TOWER - LATER THAT NIGHT, INT. STUDIO HALLWAY - NIGHT. These are ALL CAPS and follow standard Fountain format. ✓\n\n2. **Character cues**: Character names are ALL CAPS on their own lines (JUNE, NOAH, ARIA, KELL, NOAH (V.O.)). ✓\n\n3. **Dialogue preservation**: The dialogue appears to be preserved from the original prose. However, there's a significant formatting problem: the dialogue lines include quotation marks AND attribution/action text mixed in. For example: '\"If this works, half the valley hears us,\" June says, setting down the mugs.' In proper Fountain format, the attribution ('June says') should be removed from dialogue and placed as action or parenthetical, and quotation marks should be removed since the character cue already indicates who's speaking. Similarly, lines like 'Noah tries to sound calm. \"If this works, we hear them too.\"' mix action with dialogue incorrectly. This is a major structural flaw. ✗\n\n4. **Parentheticals**: There are no parentheticals used at all. Action descriptions like 'Noah tries to sound calm' or 'Aria grins' or 'Kell raises an eyebrow' should have been formatted as parentheticals like (trying to sound calm) or as separate action lines, not embedded within the dialogue block. ✗\n\n5. **No markdown formatting**: No markdown symbols detected. ✓\n\n6. **Scene breaks**: Three scenes are identified, which seems reasonable from context clues (studio, hilltop, hallway). ✓\n\n7. **Author's voice preserved**: The content seems preserved without major inventions. ✓\n\nThe most critical failures are in dialogue formatting. In standard Fountain/screenplay format:\n- Dialogue should NOT contain quotation marks\n- Action/attribution tags ('June says', 'Noah tries to sound calm', 'Aria replies quietly') should NOT be embedded in dialogue lines\n- These should be either parentheticals or separate action lines\n\nThe prose-to-screenplay conversion is incomplete - it reads more like the prose was reorganized under character headings rather than truly converted to screenplay format. The quotation marks and said-tags are hallmarks of prose that should have been stripped during normalization.",
          "namedScores": {},
          "tokensUsed": {
            "total": 1507,
            "prompt": 907,
            "completion": 600,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.94,
              "reason": "character_cues=1.00 | content_completeness=1.00 | dialogue_preserved=1.00 | no_markdown=1.00 | scene_headings=0.70 | structure_quality=1.00 | Headings: 2/4 matched",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/normalization_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate this screenplay normalization. The input was a prose narrative\nwith no Fountain formatting. The model should have converted it to\nstandard Fountain format.\n\nKey quality criteria:\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\n2. Are character cues ALL CAPS on their own line?\n3. Is dialogue preserved exactly as written?\n4. Are parentheticals in (lowercase parens) format?\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\n6. Are scene breaks identified correctly from context clues?\n7. Is the author's voice preserved without inventions?\n\nScore strictly: structural correctness AND content preservation both matter.\n"
              },
              "pass": false,
              "score": 0.3,
              "reason": "Let me evaluate each criterion:\n\n1. **Scene headings**: Present and properly formatted - INT. COMMUNITY RADIO STUDIO - NIGHT, EXT. HILLTOP WATER TOWER - LATER THAT NIGHT, INT. STUDIO HALLWAY - NIGHT. These are ALL CAPS and follow standard Fountain format. ✓\n\n2. **Character cues**: Character names are ALL CAPS on their own lines (JUNE, NOAH, ARIA, KELL, NOAH (V.O.)). ✓\n\n3. **Dialogue preservation**: The dialogue appears to be preserved from the original prose. However, there's a significant formatting problem: the dialogue lines include quotation marks AND attribution/action text mixed in. For example: '\"If this works, half the valley hears us,\" June says, setting down the mugs.' In proper Fountain format, the attribution ('June says') should be removed from dialogue and placed as action or parenthetical, and quotation marks should be removed since the character cue already indicates who's speaking. Similarly, lines like 'Noah tries to sound calm. \"If this works, we hear them too.\"' mix action with dialogue incorrectly. This is a major structural flaw. ✗\n\n4. **Parentheticals**: There are no parentheticals used at all. Action descriptions like 'Noah tries to sound calm' or 'Aria grins' or 'Kell raises an eyebrow' should have been formatted as parentheticals like (trying to sound calm) or as separate action lines, not embedded within the dialogue block. ✗\n\n5. **No markdown formatting**: No markdown symbols detected. ✓\n\n6. **Scene breaks**: Three scenes are identified, which seems reasonable from context clues (studio, hilltop, hallway). ✓\n\n7. **Author's voice preserved**: The content seems preserved without major inventions. ✓\n\nThe most critical failures are in dialogue formatting. In standard Fountain/screenplay format:\n- Dialogue should NOT contain quotation marks\n- Action/attribution tags ('June says', 'Noah tries to sound calm', 'Aria replies quietly') should NOT be embedded in dialogue lines\n- These should be either parentheticals or separate action lines\n\nThe prose-to-screenplay conversion is incomplete - it reads more like the prose was reorganized under character headings rather than truly converted to screenplay format. The quotation marks and said-tags are hallmarks of prose that should have been stripped during normalization.",
              "tokensUsed": {
                "total": 1507,
                "prompt": 907,
                "completion": 600,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\nINT. COMMUNITY RADIO STUDIO - NIGHT\\n\\nInside a cramped community radio studio, old gear hums while rain taps on the skylight. Aria threads a tape reel as Noah checks the cracked mixer. June comes in balancing two mugs of tea on a pile of scripts.\\n\\nJUNE\\n\\\"If this works, half the valley hears us,\\\" June says, setting down the mugs.\\n\\nNOAH\\nNoah tries to sound calm. \\\"If this works, we hear them too.\\\"\\n\\nARIA\\n\\\"Then we stop talking and start listening,\\\" Aria replies quietly.\\n\\nThe ON AIR light flickers once, then goes dark.\\n\\nEXT. HILLTOP WATER TOWER - LATER THAT NIGHT\\n\\nLater that night, on a hilltop water tower, wind whips prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder carrying a portable antenna. Below them, town lights blink in scattered clusters.\\n\\nNOAH\\n\\\"I still vote for warm studios and bad coffee,\\\" Noah says, shivering.\\n\\nARIA\\nAria grins. \\\"We lost warm. Keep the coffee dream alive.\\\"\\n\\nA burst of static crackles from the handheld receiver. They both freeze.\\n\\nNOAH\\n\\\"Did you hear that?\\\" Noah whispers.\\n\\nARIA\\n\\\"Only enough to hope,\\\" Aria says.\\n\\nThey lock the antenna in place and point it toward the dark ridge line.\\n\\nINT. STUDIO HALLWAY - NIGHT\\n\\nDown in the studio hallway, fluorescent lights buzz overhead. Kell tapes handwritten evacuation arrows to the wall while June hurries past carrying batteries and tangled cables.\\n\\nKELL\\n\\\"Generator room flooded,\\\" Kell reports. \\\"We can run one board, maybe two.\\\"\\n\\nJUNE\\n\\\"One board is enough,\\\" June replies.\\n\\nKELL\\nKell raises an eyebrow. \\\"For news, maybe. For miracles?\\\"\\n\\nJUNE\\nJune half-smiles. \\\"We schedule those after midnight.\\\"\\n\\nShe shoulders open the control-room door. Inside the studio, monitors glow back to life one by one.\\n\\nNOAH (V.O.)\\nNoah's voice comes through the radio: \\\"Tower looks stable. Feed us a carrier tone.\\\"\\n\\nJUNE\\nJune taps the mic. \\\"Good evening, Red Creek. If you're out there, key once and wait.\\\"\\n\\nSilence. Then three tiny chirps answer in sequence. The room goes still.\\n</Output>\\n<Rubric>\\nEvaluate this screenplay normalization. The input was a prose narrative\\nwith no Fountain formatting. The model should have converted it to\\nstandard Fountain format.\\n\\nKey quality criteria:\\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\\n2. Are character cues ALL CAPS on their own line?\\n3. Is dialogue preserved exactly as written?\\n4. Are parentheticals in (lowercase parens) format?\\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\\n6. Are scene breaks identified correctly from context clues?\\n7. Is the author's voice preserved without inventions?\\n\\nScore strictly: structural correctness AND content preservation both matter.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "fb6056eb-46b6-4f20-8ef3-703e5e79cd1d",
        "latencyMs": 5542,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\nInside a cramped community radio studio, old gear hums while rain taps on the skylight. Aria threads a tape reel as Noah checks the cracked mixer. June comes in balancing two mugs of tea on a pile of scripts.\n\n\"If this works, half the valley hears us,\" June says, setting down the mugs.\n\nNoah tries to sound calm. \"If this works, we hear them too.\"\n\n\"Then we stop talking and start listening,\" Aria replies quietly.\n\nThe ON AIR light flickers once, then goes dark.\n\nLater that night, on a hilltop water tower, wind whips prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder carrying a portable antenna. Below them, town lights blink in scattered clusters.\n\n\"I still vote for warm studios and bad coffee,\" Noah says, shivering.\n\nAria grins. \"We lost warm. Keep the coffee dream alive.\"\n\nA burst of static crackles from the handheld receiver. They both freeze.\n\n\"Did you hear that?\" Noah whispers.\n\n\"Only enough to hope,\" Aria says.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nDown in the studio hallway, fluorescent lights buzz overhead. Kell tapes handwritten evacuation arrows to the wall while June hurries past carrying batteries and tangled cables.\n\n\"Generator room flooded,\" Kell reports. \"We can run one board, maybe two.\"\n\n\"One board is enough,\" June replies.\n\nKell raises an eyebrow. \"For news, maybe. For miracles?\"\n\nJune half-smiles. \"We schedule those after midnight.\"\n\nShe shoulders open the control-room door. Inside the studio, monitors glow back to life one by one.\n\nNoah's voice comes through the radio: \"Tower looks stable. Feed us a carrier tone.\"\n\nJune taps the mic. \"Good evening, Red Creek. If you're out there, key once and wait.\"\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.\n==========",
          "label": "prompts/normalization.txt: You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "7bc79ce1f5846d8728590285cab08ec96b22d867e2d8ac7b1dd750e47494dfc4",
        "promptIdx": 6,
        "provider": {
          "id": "openai:gpt-5.2",
          "label": "GPT-5.2"
        },
        "response": {
          "output": "INT. COMMUNITY RADIO STUDIO - NIGHT\n\nInside a cramped community radio studio, old gear hums while rain taps on the skylight. Aria threads a tape reel as Noah checks the cracked mixer. June comes in balancing two mugs of tea on a pile of scripts.\n\nJUNE\n\"If this works, half the valley hears us,\" June says, setting down the mugs.\n\nNOAH\nNoah tries to sound calm. \"If this works, we hear them too.\"\n\nARIA\n\"Then we stop talking and start listening,\" Aria replies quietly.\n\nThe ON AIR light flickers once, then goes dark.\n\nEXT. HILLTOP WATER TOWER - LATER THAT NIGHT\n\nLater that night, on a hilltop water tower, wind whips prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder carrying a portable antenna. Below them, town lights blink in scattered clusters.\n\nNOAH\n\"I still vote for warm studios and bad coffee,\" Noah says, shivering.\n\nARIA\nAria grins. \"We lost warm. Keep the coffee dream alive.\"\n\nA burst of static crackles from the handheld receiver. They both freeze.\n\nNOAH\n\"Did you hear that?\" Noah whispers.\n\nARIA\n\"Only enough to hope,\" Aria says.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nINT. STUDIO HALLWAY - NIGHT\n\nDown in the studio hallway, fluorescent lights buzz overhead. Kell tapes handwritten evacuation arrows to the wall while June hurries past carrying batteries and tangled cables.\n\nKELL\n\"Generator room flooded,\" Kell reports. \"We can run one board, maybe two.\"\n\nJUNE\n\"One board is enough,\" June replies.\n\nKELL\nKell raises an eyebrow. \"For news, maybe. For miracles?\"\n\nJUNE\nJune half-smiles. \"We schedule those after midnight.\"\n\nShe shoulders open the control-room door. Inside the studio, monitors glow back to life one by one.\n\nNOAH (V.O.)\nNoah's voice comes through the radio: \"Tower looks stable. Feed us a carrier tone.\"\n\nJUNE\nJune taps the mic. \"Good evening, Red Creek. If you're out there, key once and wait.\"\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.",
          "tokenUsage": {
            "total": 1099,
            "prompt": 624,
            "completion": 475,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 5542,
          "finishReason": "stop",
          "cost": 0.007742,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9cfbd0d5ba6250df-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Wed, 18 Feb 2026 07:29:56 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "5401",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=dak0SgXj.Qk932jNLNralMZ5berLj.LGUEZfmtYjrBs-1771399790.9916296-1.0.1.1-RJ.3W4TOXkAPsuOQ0LxI81ogf1SxaQN8nTjJDnBNysydil7lFh2S6btbgbrnEKrwv52okK7mRZgrEs6oY_fBeG8EyJ7wV5vzj.Riz3Lk1hnWFQlEp_S0jfJvfzPMAxV_; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Wed, 18 Feb 2026 07:59:56 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "4000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "3999289",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "10ms",
                "x-request-id": "req_f0542760dccd4706aca40f5ce39be753"
              }
            }
          }
        },
        "score": 0.62,
        "success": false,
        "testCase": {
          "vars": {
            "source_text": "file://../input/normalize-prose.txt",
            "golden_path": "golden/normalize-signal-golden.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/normalization_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate this screenplay normalization. The input was a prose narrative\nwith no Fountain formatting. The model should have converted it to\nstandard Fountain format.\n\nKey quality criteria:\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\n2. Are character cues ALL CAPS on their own line?\n3. Is dialogue preserved exactly as written?\n4. Are parentheticals in (lowercase parens) format?\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\n6. Are scene breaks identified correctly from context clues?\n7. Is the author's voice preserved without inventions?\n\nScore strictly: structural correctness AND content preservation both matter.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "source_text": "file://../input/normalize-prose.txt",
          "golden_path": "golden/normalize-signal-golden.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9cfbd0d5ba6250df-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Wed, 18 Feb 2026 07:29:56 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "5401",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=dak0SgXj.Qk932jNLNralMZ5berLj.LGUEZfmtYjrBs-1771399790.9916296-1.0.1.1-RJ.3W4TOXkAPsuOQ0LxI81ogf1SxaQN8nTjJDnBNysydil7lFh2S6btbgbrnEKrwv52okK7mRZgrEs6oY_fBeG8EyJ7wV5vzj.Riz3Lk1hnWFQlEp_S0jfJvfzPMAxV_; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Wed, 18 Feb 2026 07:59:56 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "4000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "3999289",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "10ms",
              "x-request-id": "req_f0542760dccd4706aca40f5ce39be753"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.004474,
        "gradingResult": {
          "pass": true,
          "score": 0.895,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 1197,
            "prompt": 835,
            "completion": 362,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.94,
              "reason": "character_cues=1.00 | content_completeness=1.00 | dialogue_preserved=1.00 | no_markdown=1.00 | scene_headings=0.70 | structure_quality=1.00 | Headings: 2/4 matched",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/normalization_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate this screenplay normalization. The input was a prose narrative\nwith no Fountain formatting. The model should have converted it to\nstandard Fountain format.\n\nKey quality criteria:\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\n2. Are character cues ALL CAPS on their own line?\n3. Is dialogue preserved exactly as written?\n4. Are parentheticals in (lowercase parens) format?\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\n6. Are scene breaks identified correctly from context clues?\n7. Is the author's voice preserved without inventions?\n\nScore strictly: structural correctness AND content preservation both matter.\n"
              },
              "pass": true,
              "score": 0.85,
              "reason": "The output demonstrates strong Fountain formatting conventions: 1) Scene headings are present and properly formatted in ALL CAPS with INT./EXT. prefixes (INT. CRAMPED COMMUNITY RADIO STUDIO - NIGHT, EXT. HILLTOP WATER TOWER - NIGHT, INT. STUDIO HALLWAY - NIGHT, INT. RADIO STUDIO - NIGHT). 2) Character cues are ALL CAPS on their own lines (JUNE, NOAH, ARIA, KELL). 3) Dialogue appears naturally preserved. 4) Parentheticals are in (lowercase parens) format, e.g., '(whispers)'. 5) There is no markdown formatting - no >, #, **, ``` etc. 6) Scene breaks are identified with proper scene headings based on location/time changes. 7) The author's voice appears preserved with action lines and dialogue intact. However, the rubric states 'The input was a prose narrative with no Fountain formatting' and the model 'should have converted it to standard Fountain format.' Without seeing the original input, I must evaluate the output on its own merits as a Fountain-formatted screenplay. The formatting is largely correct. One minor issue: in standard Fountain, character names should be preceded by a blank line, and the output appears to follow this convention. Action lines are properly formatted as regular paragraphs. V.O. extension is properly formatted (NOAH (V.O.)). Overall this is a well-formatted Fountain screenplay with proper structural elements and apparent content preservation.",
              "tokensUsed": {
                "total": 1197,
                "prompt": 835,
                "completion": 362,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\nINT. CRAMPED COMMUNITY RADIO STUDIO - NIGHT\\n\\nOld gear hums while rain taps on the skylight. Aria threads a tape reel as Noah checks the cracked mixer. June comes in balancing two mugs of tea on a pile of scripts.\\n\\nJUNE\\n\\nIf this works, half the valley hears us.\\n\\nShe sets down the mugs.\\n\\nNOAH\\n\\nIf this works, we hear them too.\\n\\nARIA\\n\\nThen we stop talking and start listening.\\n\\nThe ON AIR light flickers once, then goes dark.\\n\\nEXT. HILLTOP WATER TOWER - NIGHT\\n\\nWind whips prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder carrying a portable antenna. Below them, town lights blink in scattered clusters.\\n\\nNOAH\\n\\nI still vote for warm studios and bad coffee.\\n\\nHe shivers.\\n\\nARIA\\n\\nWe lost warm. Keep the coffee dream alive.\\n\\nA burst of static crackles from the handheld receiver. They both freeze.\\n\\nNOAH\\n(whispers)\\n\\nDid you hear that?\\n\\nARIA\\n\\nOnly enough to hope.\\n\\nThey lock the antenna in place and point it toward the dark ridge line.\\n\\nINT. STUDIO HALLWAY - NIGHT\\n\\nFluorescent lights buzz overhead. Kell tapes handwritten evacuation arrows to the wall while June hurries past carrying batteries and tangled cables.\\n\\nKELL\\n\\nGenerator room flooded. We can run one board, maybe two.\\n\\nJUNE\\n\\nOne board is enough.\\n\\nKell raises an eyebrow.\\n\\nKELL\\n\\nFor news, maybe. For miracles?\\n\\nJUNE\\n\\nWe schedule those after midnight.\\n\\nShe shoulders open the control-room door.\\n\\nINT. RADIO STUDIO - NIGHT\\n\\nInside the studio, monitors glow back to life one by one.\\n\\nNOAH (V.O.)\\n\\nTower looks stable. Feed us a carrier tone.\\n\\nJune taps the mic.\\n\\nJUNE\\n\\nGood evening, Red Creek. If you're out there, key once and wait.\\n\\nSilence. Then three tiny chirps answer in sequence. The room goes still.\\n</Output>\\n<Rubric>\\nEvaluate this screenplay normalization. The input was a prose narrative\\nwith no Fountain formatting. The model should have converted it to\\nstandard Fountain format.\\n\\nKey quality criteria:\\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\\n2. Are character cues ALL CAPS on their own line?\\n3. Is dialogue preserved exactly as written?\\n4. Are parentheticals in (lowercase parens) format?\\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\\n6. Are scene breaks identified correctly from context clues?\\n7. Is the author's voice preserved without inventions?\\n\\nScore strictly: structural correctness AND content preservation both matter.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "9f68c684-530c-4696-bd78-5af2918c9549",
        "latencyMs": 5311,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\nInside a cramped community radio studio, old gear hums while rain taps on the skylight. Aria threads a tape reel as Noah checks the cracked mixer. June comes in balancing two mugs of tea on a pile of scripts.\n\n\"If this works, half the valley hears us,\" June says, setting down the mugs.\n\nNoah tries to sound calm. \"If this works, we hear them too.\"\n\n\"Then we stop talking and start listening,\" Aria replies quietly.\n\nThe ON AIR light flickers once, then goes dark.\n\nLater that night, on a hilltop water tower, wind whips prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder carrying a portable antenna. Below them, town lights blink in scattered clusters.\n\n\"I still vote for warm studios and bad coffee,\" Noah says, shivering.\n\nAria grins. \"We lost warm. Keep the coffee dream alive.\"\n\nA burst of static crackles from the handheld receiver. They both freeze.\n\n\"Did you hear that?\" Noah whispers.\n\n\"Only enough to hope,\" Aria says.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nDown in the studio hallway, fluorescent lights buzz overhead. Kell tapes handwritten evacuation arrows to the wall while June hurries past carrying batteries and tangled cables.\n\n\"Generator room flooded,\" Kell reports. \"We can run one board, maybe two.\"\n\n\"One board is enough,\" June replies.\n\nKell raises an eyebrow. \"For news, maybe. For miracles?\"\n\nJune half-smiles. \"We schedule those after midnight.\"\n\nShe shoulders open the control-room door. Inside the studio, monitors glow back to life one by one.\n\nNoah's voice comes through the radio: \"Tower looks stable. Feed us a carrier tone.\"\n\nJune taps the mic. \"Good evening, Red Creek. If you're out there, key once and wait.\"\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.\n==========",
          "label": "prompts/normalization.txt: You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "7bc79ce1f5846d8728590285cab08ec96b22d867e2d8ac7b1dd750e47494dfc4",
        "promptIdx": 2,
        "provider": {
          "id": "openai:gpt-4.1",
          "label": "GPT-4.1"
        },
        "response": {
          "output": "INT. CRAMPED COMMUNITY RADIO STUDIO - NIGHT\n\nOld gear hums while rain taps on the skylight. Aria threads a tape reel as Noah checks the cracked mixer. June comes in balancing two mugs of tea on a pile of scripts.\n\nJUNE\n\nIf this works, half the valley hears us.\n\nShe sets down the mugs.\n\nNOAH\n\nIf this works, we hear them too.\n\nARIA\n\nThen we stop talking and start listening.\n\nThe ON AIR light flickers once, then goes dark.\n\nEXT. HILLTOP WATER TOWER - NIGHT\n\nWind whips prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder carrying a portable antenna. Below them, town lights blink in scattered clusters.\n\nNOAH\n\nI still vote for warm studios and bad coffee.\n\nHe shivers.\n\nARIA\n\nWe lost warm. Keep the coffee dream alive.\n\nA burst of static crackles from the handheld receiver. They both freeze.\n\nNOAH\n(whispers)\n\nDid you hear that?\n\nARIA\n\nOnly enough to hope.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nINT. STUDIO HALLWAY - NIGHT\n\nFluorescent lights buzz overhead. Kell tapes handwritten evacuation arrows to the wall while June hurries past carrying batteries and tangled cables.\n\nKELL\n\nGenerator room flooded. We can run one board, maybe two.\n\nJUNE\n\nOne board is enough.\n\nKell raises an eyebrow.\n\nKELL\n\nFor news, maybe. For miracles?\n\nJUNE\n\nWe schedule those after midnight.\n\nShe shoulders open the control-room door.\n\nINT. RADIO STUDIO - NIGHT\n\nInside the studio, monitors glow back to life one by one.\n\nNOAH (V.O.)\n\nTower looks stable. Feed us a carrier tone.\n\nJune taps the mic.\n\nJUNE\n\nGood evening, Red Creek. If you're out there, key once and wait.\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.",
          "tokenUsage": {
            "total": 1028,
            "prompt": 625,
            "completion": 403,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 5311,
          "finishReason": "stop",
          "cost": 0.004474,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9cfbd0099f12d325-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Wed, 18 Feb 2026 07:29:23 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "4954",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=CWfZFZWWvTBRx7UxqDDVYdKJ15j4qLYwzrdkzMy4p58-1771399758.3397565-1.0.1.1-cMObievw1n5frY9kvOUp_TgCUXKHViWuA2YFUKTXKMXU8b8_4zudewmEYBxSdbv52VD3mUYu2h9CCi.j5isoiTKWN2hQkf2W2DCgVzKQTKDD_1V33DOZaac_PkSRsauB; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Wed, 18 Feb 2026 07:59:23 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "2000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "1999289",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "21ms",
                "x-request-id": "req_8b345f7aa5c84d738f0f3ddb3d2c2ec1"
              }
            }
          }
        },
        "score": 0.895,
        "success": true,
        "testCase": {
          "vars": {
            "source_text": "file://../input/normalize-prose.txt",
            "golden_path": "golden/normalize-signal-golden.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/normalization_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate this screenplay normalization. The input was a prose narrative\nwith no Fountain formatting. The model should have converted it to\nstandard Fountain format.\n\nKey quality criteria:\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\n2. Are character cues ALL CAPS on their own line?\n3. Is dialogue preserved exactly as written?\n4. Are parentheticals in (lowercase parens) format?\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\n6. Are scene breaks identified correctly from context clues?\n7. Is the author's voice preserved without inventions?\n\nScore strictly: structural correctness AND content preservation both matter.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "source_text": "file://../input/normalize-prose.txt",
          "golden_path": "golden/normalize-signal-golden.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9cfbd0099f12d325-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Wed, 18 Feb 2026 07:29:23 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "4954",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=CWfZFZWWvTBRx7UxqDDVYdKJ15j4qLYwzrdkzMy4p58-1771399758.3397565-1.0.1.1-cMObievw1n5frY9kvOUp_TgCUXKHViWuA2YFUKTXKMXU8b8_4zudewmEYBxSdbv52VD3mUYu2h9CCi.j5isoiTKWN2hQkf2W2DCgVzKQTKDD_1V33DOZaac_PkSRsauB; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Wed, 18 Feb 2026 07:59:23 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "2000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "1999289",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "21ms",
              "x-request-id": "req_8b345f7aa5c84d738f0f3ddb3d2c2ec1"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0.0008900000000000001,
        "gradingResult": {
          "pass": true,
          "score": 0.845,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 1417,
            "prompt": 840,
            "completion": 577,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.97,
              "reason": "character_cues=1.00 | content_completeness=1.00 | dialogue_preserved=1.00 | no_markdown=1.00 | scene_headings=0.85 | structure_quality=1.00 | Headings: 3/4 matched",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/normalization_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate this screenplay normalization. The input was a prose narrative\nwith no Fountain formatting. The model should have converted it to\nstandard Fountain format.\n\nKey quality criteria:\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\n2. Are character cues ALL CAPS on their own line?\n3. Is dialogue preserved exactly as written?\n4. Are parentheticals in (lowercase parens) format?\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\n6. Are scene breaks identified correctly from context clues?\n7. Is the author's voice preserved without inventions?\n\nScore strictly: structural correctness AND content preservation both matter.\n"
              },
              "pass": true,
              "score": 0.72,
              "reason": "Evaluating against the rubric criteria:\n\n1. **Scene headings**: Present and properly formatted - 'INT. COMMUNITY RADIO STUDIO - DAY', 'EXT. HILLTOP WATER TOWER - NIGHT', 'INT. STUDIO HALLWAY - NIGHT' are all in ALL CAPS with proper INT./EXT. prefixes. ✓\n\n2. **Character cues**: JUNE, NOAH, ARIA, KELL are ALL CAPS on their own lines. NOAH (V.O.) is also properly formatted. ✓\n\n3. **Dialogue preservation**: The dialogue appears natural and well-formatted. However, the rubric states this was a 'prose narrative with no Fountain formatting' that should have been converted. The output looks like it could be an original screenplay generation rather than a conversion from prose. Without seeing the original input, I must evaluate what's presented. The dialogue is on its own lines beneath character cues. ✓\n\n4. **Parentheticals**: '(shivering)', '(whispers)', '(half-smiles)' are in lowercase parens format. ✓\n\n5. **No markdown formatting**: There are no >, #, **, ``` or other markdown elements present. ✓\n\n6. **Scene breaks**: Three distinct scenes are identified with proper scene headings. ✓\n\n7. **Author's voice preservation**: The rubric says the input was a prose narrative. Without seeing the original, I can note the output reads as a well-structured screenplay. The action lines read naturally.\n\nHowever, there are some structural issues:\n- Some parentheticals like '(shivering)' and '(whispers)' appear AFTER the dialogue line rather than before it, which is non-standard Fountain placement. In standard Fountain, parentheticals should appear between the character name and the dialogue.\n- The action/description lines are not separated from dialogue blocks with consistent blank lines in all cases, though this is minor.\n\nThe parenthetical placement issue is notable - '(shivering)' appears after Noah's dialogue line rather than before it, and '(whispers)' appears after Noah's second dialogue line. This is a structural error in Fountain formatting.\n\nOverall, the formatting is mostly correct with good scene headings, character cues, and no markdown. The parenthetical placement errors are a moderate issue.",
              "tokensUsed": {
                "total": 1417,
                "prompt": 840,
                "completion": 577,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\nINT. COMMUNITY RADIO STUDIO - DAY\\n\\nInside a cramped community radio studio, old gear hums while rain taps on the skylight. Aria threads a tape reel as Noah checks the cracked mixer. June comes in balancing two mugs of tea on a pile of scripts.\\n\\nJUNE  \\nIf this works, half the valley hears us.\\n\\nNoah tries to sound calm.\\n\\nNOAH  \\nIf this works, we hear them too.\\n\\nARIA  \\nThen we stop talking and start listening.\\n\\nThe ON AIR light flickers once, then goes dark.\\n\\nEXT. HILLTOP WATER TOWER - NIGHT\\n\\nWind whips prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder carrying a portable antenna. Below them, town lights blink in scattered clusters.\\n\\nNOAH  \\nI still vote for warm studios and bad coffee.\\n\\n(shivering)\\n\\nARIA  \\nWe lost warm. Keep the coffee dream alive.\\n\\nA burst of static crackles from the handheld receiver. They both freeze.\\n\\nNOAH  \\nDid you hear that?\\n\\n(whispers)\\n\\nARIA  \\nOnly enough to hope.\\n\\nThey lock the antenna in place and point it toward the dark ridge line.\\n\\nINT. STUDIO HALLWAY - NIGHT\\n\\nFluorescent lights buzz overhead. Kell tapes handwritten evacuation arrows to the wall while June hurries past carrying batteries and tangled cables.\\n\\nKELL  \\nGenerator room flooded. We can run one board, maybe two.\\n\\nJUNE  \\nOne board is enough.\\n\\nKELL  \\nFor news, maybe. For miracles?\\n\\nJUNE  \\n(half-smiles)  \\nWe schedule those after midnight.\\n\\nShe shoulders open the control-room door. Inside the studio, monitors glow back to life one by one.\\n\\nNOAH (V.O.)  \\nTower looks stable. Feed us a carrier tone.\\n\\nJune taps the mic.\\n\\nJUNE  \\nGood evening, Red Creek. If you're out there, key once and wait.\\n\\nSilence. Then three tiny chirps answer in sequence. The room goes still.\\n</Output>\\n<Rubric>\\nEvaluate this screenplay normalization. The input was a prose narrative\\nwith no Fountain formatting. The model should have converted it to\\nstandard Fountain format.\\n\\nKey quality criteria:\\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\\n2. Are character cues ALL CAPS on their own line?\\n3. Is dialogue preserved exactly as written?\\n4. Are parentheticals in (lowercase parens) format?\\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\\n6. Are scene breaks identified correctly from context clues?\\n7. Is the author's voice preserved without inventions?\\n\\nScore strictly: structural correctness AND content preservation both matter.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "e0e83397-6d92-46df-9b74-b070e691076c",
        "latencyMs": 5702,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\nInside a cramped community radio studio, old gear hums while rain taps on the skylight. Aria threads a tape reel as Noah checks the cracked mixer. June comes in balancing two mugs of tea on a pile of scripts.\n\n\"If this works, half the valley hears us,\" June says, setting down the mugs.\n\nNoah tries to sound calm. \"If this works, we hear them too.\"\n\n\"Then we stop talking and start listening,\" Aria replies quietly.\n\nThe ON AIR light flickers once, then goes dark.\n\nLater that night, on a hilltop water tower, wind whips prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder carrying a portable antenna. Below them, town lights blink in scattered clusters.\n\n\"I still vote for warm studios and bad coffee,\" Noah says, shivering.\n\nAria grins. \"We lost warm. Keep the coffee dream alive.\"\n\nA burst of static crackles from the handheld receiver. They both freeze.\n\n\"Did you hear that?\" Noah whispers.\n\n\"Only enough to hope,\" Aria says.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nDown in the studio hallway, fluorescent lights buzz overhead. Kell tapes handwritten evacuation arrows to the wall while June hurries past carrying batteries and tangled cables.\n\n\"Generator room flooded,\" Kell reports. \"We can run one board, maybe two.\"\n\n\"One board is enough,\" June replies.\n\nKell raises an eyebrow. \"For news, maybe. For miracles?\"\n\nJune half-smiles. \"We schedule those after midnight.\"\n\nShe shoulders open the control-room door. Inside the studio, monitors glow back to life one by one.\n\nNoah's voice comes through the radio: \"Tower looks stable. Feed us a carrier tone.\"\n\nJune taps the mic. \"Good evening, Red Creek. If you're out there, key once and wait.\"\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.\n==========",
          "label": "prompts/normalization.txt: You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "7bc79ce1f5846d8728590285cab08ec96b22d867e2d8ac7b1dd750e47494dfc4",
        "promptIdx": 1,
        "provider": {
          "id": "openai:gpt-4.1-mini",
          "label": "GPT-4.1 Mini"
        },
        "response": {
          "output": "INT. COMMUNITY RADIO STUDIO - DAY\n\nInside a cramped community radio studio, old gear hums while rain taps on the skylight. Aria threads a tape reel as Noah checks the cracked mixer. June comes in balancing two mugs of tea on a pile of scripts.\n\nJUNE  \nIf this works, half the valley hears us.\n\nNoah tries to sound calm.\n\nNOAH  \nIf this works, we hear them too.\n\nARIA  \nThen we stop talking and start listening.\n\nThe ON AIR light flickers once, then goes dark.\n\nEXT. HILLTOP WATER TOWER - NIGHT\n\nWind whips prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder carrying a portable antenna. Below them, town lights blink in scattered clusters.\n\nNOAH  \nI still vote for warm studios and bad coffee.\n\n(shivering)\n\nARIA  \nWe lost warm. Keep the coffee dream alive.\n\nA burst of static crackles from the handheld receiver. They both freeze.\n\nNOAH  \nDid you hear that?\n\n(whispers)\n\nARIA  \nOnly enough to hope.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nINT. STUDIO HALLWAY - NIGHT\n\nFluorescent lights buzz overhead. Kell tapes handwritten evacuation arrows to the wall while June hurries past carrying batteries and tangled cables.\n\nKELL  \nGenerator room flooded. We can run one board, maybe two.\n\nJUNE  \nOne board is enough.\n\nKELL  \nFor news, maybe. For miracles?\n\nJUNE  \n(half-smiles)  \nWe schedule those after midnight.\n\nShe shoulders open the control-room door. Inside the studio, monitors glow back to life one by one.\n\nNOAH (V.O.)  \nTower looks stable. Feed us a carrier tone.\n\nJune taps the mic.\n\nJUNE  \nGood evening, Red Creek. If you're out there, key once and wait.\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.",
          "tokenUsage": {
            "total": 1025,
            "prompt": 625,
            "completion": 400,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 5702,
          "finishReason": "stop",
          "cost": 0.0008900000000000001,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9cfbd00998327daf-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Wed, 18 Feb 2026 07:29:23 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "5463",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=fP7bIssfb7uWUNSs.WsI2_bbdWMAcePrX7eZMUpfN5o-1771399758.3340766-1.0.1.1-2oIdWE6TiwXm7REzM4EyHRcrxfM1IUfNbRjOn0YKg5IHmqLP8NG1YML57AbDkiQT4yOPILmfkCid0x672gpT3I.VAT_DHQ5u4MVs1WS.tVAxZipFKxQHupysn_4iCruN; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Wed, 18 Feb 2026 07:59:23 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "10000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "9999289",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "4ms",
                "x-request-id": "req_2cab7ed2a1ff48f98904b4ccbe5e84de"
              }
            }
          }
        },
        "score": 0.845,
        "success": true,
        "testCase": {
          "vars": {
            "source_text": "file://../input/normalize-prose.txt",
            "golden_path": "golden/normalize-signal-golden.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/normalization_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate this screenplay normalization. The input was a prose narrative\nwith no Fountain formatting. The model should have converted it to\nstandard Fountain format.\n\nKey quality criteria:\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\n2. Are character cues ALL CAPS on their own line?\n3. Is dialogue preserved exactly as written?\n4. Are parentheticals in (lowercase parens) format?\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\n6. Are scene breaks identified correctly from context clues?\n7. Is the author's voice preserved without inventions?\n\nScore strictly: structural correctness AND content preservation both matter.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "source_text": "file://../input/normalize-prose.txt",
          "golden_path": "golden/normalize-signal-golden.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9cfbd00998327daf-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Wed, 18 Feb 2026 07:29:23 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "5463",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=fP7bIssfb7uWUNSs.WsI2_bbdWMAcePrX7eZMUpfN5o-1771399758.3340766-1.0.1.1-2oIdWE6TiwXm7REzM4EyHRcrxfM1IUfNbRjOn0YKg5IHmqLP8NG1YML57AbDkiQT4yOPILmfkCid0x672gpT3I.VAT_DHQ5u4MVs1WS.tVAxZipFKxQHupysn_4iCruN; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Wed, 18 Feb 2026 07:59:23 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "10000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "9999289",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "4ms",
              "x-request-id": "req_2cab7ed2a1ff48f98904b4ccbe5e84de"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0.0002549,
        "gradingResult": {
          "pass": true,
          "score": 0.895,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 1449,
            "prompt": 918,
            "completion": 531,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.94,
              "reason": "character_cues=1.00 | content_completeness=1.00 | dialogue_preserved=1.00 | no_markdown=1.00 | scene_headings=0.70 | structure_quality=1.00 | Headings: 2/4 matched",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/normalization_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate this screenplay normalization. The input was a prose narrative\nwith no Fountain formatting. The model should have converted it to\nstandard Fountain format.\n\nKey quality criteria:\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\n2. Are character cues ALL CAPS on their own line?\n3. Is dialogue preserved exactly as written?\n4. Are parentheticals in (lowercase parens) format?\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\n6. Are scene breaks identified correctly from context clues?\n7. Is the author's voice preserved without inventions?\n\nScore strictly: structural correctness AND content preservation both matter.\n"
              },
              "pass": true,
              "score": 0.85,
              "reason": "Evaluating against the rubric criteria:\n\n1. **Scene headings**: Present and properly formatted - 'INT. COMMUNITY RADIO STUDIO - DAY', 'EXT. HILLTOP WATER TOWER - NIGHT', 'INT. RADIO STATION HALLWAY - DAY' are all in ALL CAPS with proper INT./EXT. prefixes. ✓\n\n2. **Character cues**: All character names (JUNE, NOAH, ARIA, KELL) appear in ALL CAPS on their own lines. ✓\n\n3. **Dialogue preservation**: Without the original prose input to compare against, I can assess that dialogue appears natural and consistent. The rubric says 'preserved exactly as written' - since I don't have the original, I'll note this looks well-formed but can't verify exact preservation. Assuming reasonable fidelity.\n\n4. **Parentheticals**: Present in (lowercase parens) format - '(setting down the mugs)', '(shivering)', '(whispering)', '(reporting)', '(teasing)' - all correctly formatted. ✓\n\n5. **No markdown formatting**: The output contains no >, #, **, ``` or other markdown. It's plain text with Fountain-style indentation. ✓\n\n6. **Scene breaks**: Three distinct scenes are identified with proper headings, transitioning from studio to hilltop to hallway. These appear logically derived from context (location/time changes). ✓\n\n7. **Author's voice preservation**: Action lines read naturally and describe settings/actions without excessive invention. The prose descriptions between dialogue appear to serve as proper scene direction. The V.O. tag for Noah's radio transmission is a smart formatting choice. ✓\n\nMinor issues: The formatting uses indentation for dialogue and character names rather than strict Fountain plain-text conventions (Fountain format typically has character names flush left or with specific tab stops, not centered with spaces). However, the output follows a common screenplay presentation style. The action/description lines are well-crafted and serve the narrative.\n\nOverall, this is a well-structured screenplay conversion with proper formatting conventions, clear scene delineation, and professional presentation.",
              "tokensUsed": {
                "total": 1449,
                "prompt": 918,
                "completion": 531,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\nINT. COMMUNITY RADIO STUDIO - DAY\\n\\nInside a cramped community radio studio, old gear hums while rain taps on the skylight. Aria threads a tape reel as Noah checks the cracked mixer. June comes in balancing two mugs of tea on a pile of scripts.\\n\\n                JUNE\\n        (setting down the mugs)\\n    If this works, half the valley hears us.\\n\\nNoah tries to sound calm.\\n\\n                NOAH\\n    If this works, we hear them too.\\n\\nAria replies quietly.\\n\\n                ARIA\\n    Then we stop talking and start listening.\\n\\nThe ON AIR light flickers once, then goes dark.\\n\\nEXT. HILLTOP WATER TOWER - NIGHT\\n\\nLater that night, wind whips prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder carrying a portable antenna. Below them, town lights blink in scattered clusters.\\n\\n                NOAH\\n        (shivering)\\n    I still vote for warm studios and bad coffee.\\n\\nAria grins.\\n\\n                ARIA\\n    We lost warm. Keep the coffee dream alive.\\n\\nA burst of static crackles from the handheld receiver. They both freeze.\\n\\n                NOAH\\n        (whispering)\\n    Did you hear that?\\n\\n                ARIA\\n    Only enough to hope.\\n\\nThey lock the antenna in place and point it toward the dark ridge line.\\n\\nINT. RADIO STATION HALLWAY - DAY\\n\\nDown in the studio hallway, fluorescent lights buzz overhead. Kell tapes handwritten evacuation arrows to the wall while June hurries past carrying batteries and tangled cables.\\n\\n                KELL\\n        (reporting)\\n    Generator room flooded. We can run one board, maybe two.\\n\\n                JUNE\\n    One board is enough.\\n\\nKell raises an eyebrow.\\n\\n                KELL\\n        (teasing)\\n    For news, maybe. For miracles?\\n\\nJune half-smiles.\\n\\n                JUNE\\n    We schedule those after midnight.\\n\\nShe shoulders open the control-room door. Inside the studio, monitors glow back to life one by one.\\n\\nNoah's voice comes through the radio.\\n\\n                NOAH (V.O.)\\n    Tower looks stable. Feed us a carrier tone.\\n\\nJune taps the mic.\\n\\n                JUNE\\n    Good evening, Red Creek. If you're out there, key once and wait.\\n\\nSilence. Then three tiny chirps answer in sequence. The room goes still.\\n</Output>\\n<Rubric>\\nEvaluate this screenplay normalization. The input was a prose narrative\\nwith no Fountain formatting. The model should have converted it to\\nstandard Fountain format.\\n\\nKey quality criteria:\\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\\n2. Are character cues ALL CAPS on their own line?\\n3. Is dialogue preserved exactly as written?\\n4. Are parentheticals in (lowercase parens) format?\\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\\n6. Are scene breaks identified correctly from context clues?\\n7. Is the author's voice preserved without inventions?\\n\\nScore strictly: structural correctness AND content preservation both matter.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "9c7d1bdc-7545-41ba-85be-05a609101f47",
        "latencyMs": 5052,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\nInside a cramped community radio studio, old gear hums while rain taps on the skylight. Aria threads a tape reel as Noah checks the cracked mixer. June comes in balancing two mugs of tea on a pile of scripts.\n\n\"If this works, half the valley hears us,\" June says, setting down the mugs.\n\nNoah tries to sound calm. \"If this works, we hear them too.\"\n\n\"Then we stop talking and start listening,\" Aria replies quietly.\n\nThe ON AIR light flickers once, then goes dark.\n\nLater that night, on a hilltop water tower, wind whips prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder carrying a portable antenna. Below them, town lights blink in scattered clusters.\n\n\"I still vote for warm studios and bad coffee,\" Noah says, shivering.\n\nAria grins. \"We lost warm. Keep the coffee dream alive.\"\n\nA burst of static crackles from the handheld receiver. They both freeze.\n\n\"Did you hear that?\" Noah whispers.\n\n\"Only enough to hope,\" Aria says.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nDown in the studio hallway, fluorescent lights buzz overhead. Kell tapes handwritten evacuation arrows to the wall while June hurries past carrying batteries and tangled cables.\n\n\"Generator room flooded,\" Kell reports. \"We can run one board, maybe two.\"\n\n\"One board is enough,\" June replies.\n\nKell raises an eyebrow. \"For news, maybe. For miracles?\"\n\nJune half-smiles. \"We schedule those after midnight.\"\n\nShe shoulders open the control-room door. Inside the studio, monitors glow back to life one by one.\n\nNoah's voice comes through the radio: \"Tower looks stable. Feed us a carrier tone.\"\n\nJune taps the mic. \"Good evening, Red Creek. If you're out there, key once and wait.\"\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.\n==========",
          "label": "prompts/normalization.txt: You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "7bc79ce1f5846d8728590285cab08ec96b22d867e2d8ac7b1dd750e47494dfc4",
        "promptIdx": 0,
        "provider": {
          "id": "openai:gpt-4.1-nano",
          "label": "GPT-4.1 Nano"
        },
        "response": {
          "output": "INT. COMMUNITY RADIO STUDIO - DAY\n\nInside a cramped community radio studio, old gear hums while rain taps on the skylight. Aria threads a tape reel as Noah checks the cracked mixer. June comes in balancing two mugs of tea on a pile of scripts.\n\n                JUNE\n        (setting down the mugs)\n    If this works, half the valley hears us.\n\nNoah tries to sound calm.\n\n                NOAH\n    If this works, we hear them too.\n\nAria replies quietly.\n\n                ARIA\n    Then we stop talking and start listening.\n\nThe ON AIR light flickers once, then goes dark.\n\nEXT. HILLTOP WATER TOWER - NIGHT\n\nLater that night, wind whips prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder carrying a portable antenna. Below them, town lights blink in scattered clusters.\n\n                NOAH\n        (shivering)\n    I still vote for warm studios and bad coffee.\n\nAria grins.\n\n                ARIA\n    We lost warm. Keep the coffee dream alive.\n\nA burst of static crackles from the handheld receiver. They both freeze.\n\n                NOAH\n        (whispering)\n    Did you hear that?\n\n                ARIA\n    Only enough to hope.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nINT. RADIO STATION HALLWAY - DAY\n\nDown in the studio hallway, fluorescent lights buzz overhead. Kell tapes handwritten evacuation arrows to the wall while June hurries past carrying batteries and tangled cables.\n\n                KELL\n        (reporting)\n    Generator room flooded. We can run one board, maybe two.\n\n                JUNE\n    One board is enough.\n\nKell raises an eyebrow.\n\n                KELL\n        (teasing)\n    For news, maybe. For miracles?\n\nJune half-smiles.\n\n                JUNE\n    We schedule those after midnight.\n\nShe shoulders open the control-room door. Inside the studio, monitors glow back to life one by one.\n\nNoah's voice comes through the radio.\n\n                NOAH (V.O.)\n    Tower looks stable. Feed us a carrier tone.\n\nJune taps the mic.\n\n                JUNE\n    Good evening, Red Creek. If you're out there, key once and wait.\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.",
          "tokenUsage": {
            "total": 1106,
            "prompt": 625,
            "completion": 481,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 5052,
          "finishReason": "stop",
          "cost": 0.0002549,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9cfbd009991850df-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Wed, 18 Feb 2026 07:29:23 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "4810",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=K3_KCLaklhlZGKhN14L8s202TTj1mKjSHC2hzvRTgSY-1771399758.339328-1.0.1.1-oxt8tiXGv5viydlvoPnf4UlZ1nt2SdOA127NJIdtMXGYBUD2svwM9zGCf1By.AbHaGgPix9UtSMvYWV9C9_ToR9Wrfqxg4slrH5ZmB0lZdM8dDYeQw459drrsvDvq1Zt; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Wed, 18 Feb 2026 07:59:23 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "10000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "9999289",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "4ms",
                "x-request-id": "req_f1497de1c31243858322b22b38090d63"
              }
            }
          }
        },
        "score": 0.895,
        "success": true,
        "testCase": {
          "vars": {
            "source_text": "file://../input/normalize-prose.txt",
            "golden_path": "golden/normalize-signal-golden.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/normalization_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate this screenplay normalization. The input was a prose narrative\nwith no Fountain formatting. The model should have converted it to\nstandard Fountain format.\n\nKey quality criteria:\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\n2. Are character cues ALL CAPS on their own line?\n3. Is dialogue preserved exactly as written?\n4. Are parentheticals in (lowercase parens) format?\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\n6. Are scene breaks identified correctly from context clues?\n7. Is the author's voice preserved without inventions?\n\nScore strictly: structural correctness AND content preservation both matter.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "source_text": "file://../input/normalize-prose.txt",
          "golden_path": "golden/normalize-signal-golden.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9cfbd009991850df-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Wed, 18 Feb 2026 07:29:23 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "4810",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=K3_KCLaklhlZGKhN14L8s202TTj1mKjSHC2hzvRTgSY-1771399758.339328-1.0.1.1-oxt8tiXGv5viydlvoPnf4UlZ1nt2SdOA127NJIdtMXGYBUD2svwM9zGCf1By.AbHaGgPix9UtSMvYWV9C9_ToR9Wrfqxg4slrH5ZmB0lZdM8dDYeQw459drrsvDvq1Zt; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Wed, 18 Feb 2026 07:59:23 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "10000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "9999289",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "4ms",
              "x-request-id": "req_f1497de1c31243858322b22b38090d63"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0.003245,
        "gradingResult": {
          "pass": true,
          "score": 0.8121,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 1562,
            "prompt": 866,
            "completion": 696,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.9042,
              "reason": "character_cues=1.00 | content_completeness=1.00 | dialogue_preserved=1.00 | no_markdown=1.00 | scene_headings=0.55 | structure_quality=0.96 | Headings: 1/4 matched",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/normalization_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate this screenplay normalization. The input was a prose narrative\nwith no Fountain formatting. The model should have converted it to\nstandard Fountain format.\n\nKey quality criteria:\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\n2. Are character cues ALL CAPS on their own line?\n3. Is dialogue preserved exactly as written?\n4. Are parentheticals in (lowercase parens) format?\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\n6. Are scene breaks identified correctly from context clues?\n7. Is the author's voice preserved without inventions?\n\nScore strictly: structural correctness AND content preservation both matter.\n"
              },
              "pass": true,
              "score": 0.72,
              "reason": "Evaluating against the rubric criteria:\n\n1. **Scene headings**: Present and properly formatted - 'INT. COMMUNITY RADIO STUDIO', 'EXT. HILLTOP WATER TOWER - LATER THAT NIGHT', 'INT. STUDIO HALLWAY - CONTINUOUS' are all in ALL CAPS with proper INT./EXT. prefixes. ✓\n\n2. **Character cues**: ALL CAPS on their own lines - JUNE, NOAH, ARIA, KELL, NOAH (V.O.) all appear correctly formatted. ✓\n\n3. **Dialogue preservation**: Without the original prose input to compare against, I must assess whether dialogue appears natural and consistent. The dialogue reads naturally and appears well-preserved. However, the rubric states the input was a prose narrative - this means the model had to extract dialogue from prose. I cannot verify exact preservation without the original, but the dialogue is coherent. Partial ✓\n\n4. **Parentheticals**: Present in (lowercase parens) format - '(trying to sound calm)', '(grinning)', '(raising an eyebrow)', '(half-smiling)', '(whispering)', '(through radio)', '(at mic)' - all correctly formatted. ✓\n\n5. **No markdown formatting**: No >, #, **, ``` or other markdown symbols present. The output is clean Fountain-style text. ✓\n\n6. **Scene breaks**: Three distinct scenes are identified with proper headings, and transitions seem logical (studio → hilltop → studio hallway). ✓\n\n7. **Author's voice preserved without inventions**: There are some action/description lines that appear to be narrative prose converted to action lines (e.g., 'Aria replies quietly', 'Noah shivers'). These feel like they could be remnants of prose narration converted to screen direction. However, some lines like 'Wind whips prayer flags tied to the guardrail' read as proper action lines. Without the original input, it's hard to judge if anything was invented, but the content seems cohesive.\n\nOne notable issue: Some action lines appear after dialogue rather than before, which is slightly unusual (e.g., 'Aria replies quietly' after Aria's line, 'June sets down the mugs' after June's line, 'Noah shivers' after Noah's line). This is a formatting choice that's somewhat non-standard - typically action lines precede or are separate from dialogue blocks rather than serving as post-dialogue description. This suggests the prose-to-screenplay conversion wasn't perfectly clean.\n\nAlso, 'NOAH (CONT'D)' followed by a parenthetical '(whispering)' with no dialogue line is odd/incorrect formatting.\n\nOverall: The structural formatting is largely correct with proper Fountain conventions. There are minor issues with action line placement and one empty dialogue block. The output is clean of markdown.",
              "tokensUsed": {
                "total": 1562,
                "prompt": 866,
                "completion": 696,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\nINT. COMMUNITY RADIO STUDIO\\n\\nInside a cramped community radio studio, old gear hums while rain taps on the skylight. Aria threads a tape reel as Noah checks the cracked mixer. June comes in balancing two mugs of tea on a pile of scripts.\\n\\nJUNE\\nIf this works, half the valley hears us.\\n\\nJune sets down the mugs.\\n\\nNOAH\\n(trying to sound calm)\\nIf this works, we hear them too.\\n\\nARIA\\nThen we stop talking and start listening.\\n\\nAria replies quietly. The ON AIR light flickers once, then goes dark.\\n\\nEXT. HILLTOP WATER TOWER - LATER THAT NIGHT\\n\\nWind whips prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder carrying a portable antenna. Below them, town lights blink in scattered clusters.\\n\\nNOAH\\nI still vote for warm studios and bad coffee.\\n\\nNoah shivers.\\n\\nARIA\\n(grinning)\\nWe lost warm. Keep the coffee dream alive.\\n\\nA burst of static crackles from the handheld receiver. They both freeze.\\n\\nNOAH\\nDid you hear that?\\n\\nNOAH (CONT'D)\\n(whispering)\\n\\nARIA\\nOnly enough to hope.\\n\\nThey lock the antenna in place and point it toward the dark ridge line.\\n\\nINT. STUDIO HALLWAY - CONTINUOUS\\n\\nFluorescent lights buzz overhead. Kell tapes handwritten evacuation arrows to the wall while June hurries past carrying batteries and tangled cables.\\n\\nKELL\\nGenerator room flooded. We can run one board, maybe two.\\n\\nJUNE\\nOne board is enough.\\n\\nKELL\\n(raising an eyebrow)\\nFor news, maybe. For miracles?\\n\\nJUNE\\n(half-smiling)\\nWe schedule those after midnight.\\n\\nShe shoulders open the control-room door. Inside the studio, monitors glow back to life one by one.\\n\\nNOAH (V.O.)\\n(through radio)\\nTower looks stable. Feed us a carrier tone.\\n\\nJUNE\\n(at mic)\\nGood evening, Red Creek. If you're out there, key once and wait.\\n\\nSilence. Then three tiny chirps answer in sequence. The room goes still.\\n</Output>\\n<Rubric>\\nEvaluate this screenplay normalization. The input was a prose narrative\\nwith no Fountain formatting. The model should have converted it to\\nstandard Fountain format.\\n\\nKey quality criteria:\\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\\n2. Are character cues ALL CAPS on their own line?\\n3. Is dialogue preserved exactly as written?\\n4. Are parentheticals in (lowercase parens) format?\\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\\n6. Are scene breaks identified correctly from context clues?\\n7. Is the author's voice preserved without inventions?\\n\\nScore strictly: structural correctness AND content preservation both matter.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "9f93bbc4-2fe9-417c-831e-bdc46a48eb7b",
        "latencyMs": 2894,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\nInside a cramped community radio studio, old gear hums while rain taps on the skylight. Aria threads a tape reel as Noah checks the cracked mixer. June comes in balancing two mugs of tea on a pile of scripts.\n\n\"If this works, half the valley hears us,\" June says, setting down the mugs.\n\nNoah tries to sound calm. \"If this works, we hear them too.\"\n\n\"Then we stop talking and start listening,\" Aria replies quietly.\n\nThe ON AIR light flickers once, then goes dark.\n\nLater that night, on a hilltop water tower, wind whips prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder carrying a portable antenna. Below them, town lights blink in scattered clusters.\n\n\"I still vote for warm studios and bad coffee,\" Noah says, shivering.\n\nAria grins. \"We lost warm. Keep the coffee dream alive.\"\n\nA burst of static crackles from the handheld receiver. They both freeze.\n\n\"Did you hear that?\" Noah whispers.\n\n\"Only enough to hope,\" Aria says.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nDown in the studio hallway, fluorescent lights buzz overhead. Kell tapes handwritten evacuation arrows to the wall while June hurries past carrying batteries and tangled cables.\n\n\"Generator room flooded,\" Kell reports. \"We can run one board, maybe two.\"\n\n\"One board is enough,\" June replies.\n\nKell raises an eyebrow. \"For news, maybe. For miracles?\"\n\nJune half-smiles. \"We schedule those after midnight.\"\n\nShe shoulders open the control-room door. Inside the studio, monitors glow back to life one by one.\n\nNoah's voice comes through the radio: \"Tower looks stable. Feed us a carrier tone.\"\n\nJune taps the mic. \"Good evening, Red Creek. If you're out there, key once and wait.\"\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.\n==========",
          "label": "prompts/normalization.txt: You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "7bc79ce1f5846d8728590285cab08ec96b22d867e2d8ac7b1dd750e47494dfc4",
        "promptIdx": 3,
        "provider": {
          "id": "anthropic:messages:claude-haiku-4-5-20251001",
          "label": "Claude Haiku 4.5"
        },
        "response": {
          "output": "INT. COMMUNITY RADIO STUDIO\n\nInside a cramped community radio studio, old gear hums while rain taps on the skylight. Aria threads a tape reel as Noah checks the cracked mixer. June comes in balancing two mugs of tea on a pile of scripts.\n\nJUNE\nIf this works, half the valley hears us.\n\nJune sets down the mugs.\n\nNOAH\n(trying to sound calm)\nIf this works, we hear them too.\n\nARIA\nThen we stop talking and start listening.\n\nAria replies quietly. The ON AIR light flickers once, then goes dark.\n\nEXT. HILLTOP WATER TOWER - LATER THAT NIGHT\n\nWind whips prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder carrying a portable antenna. Below them, town lights blink in scattered clusters.\n\nNOAH\nI still vote for warm studios and bad coffee.\n\nNoah shivers.\n\nARIA\n(grinning)\nWe lost warm. Keep the coffee dream alive.\n\nA burst of static crackles from the handheld receiver. They both freeze.\n\nNOAH\nDid you hear that?\n\nNOAH (CONT'D)\n(whispering)\n\nARIA\nOnly enough to hope.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nINT. STUDIO HALLWAY - CONTINUOUS\n\nFluorescent lights buzz overhead. Kell tapes handwritten evacuation arrows to the wall while June hurries past carrying batteries and tangled cables.\n\nKELL\nGenerator room flooded. We can run one board, maybe two.\n\nJUNE\nOne board is enough.\n\nKELL\n(raising an eyebrow)\nFor news, maybe. For miracles?\n\nJUNE\n(half-smiling)\nWe schedule those after midnight.\n\nShe shoulders open the control-room door. Inside the studio, monitors glow back to life one by one.\n\nNOAH (V.O.)\n(through radio)\nTower looks stable. Feed us a carrier tone.\n\nJUNE\n(at mic)\nGood evening, Red Creek. If you're out there, key once and wait.\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.",
          "tokenUsage": {
            "total": 1221,
            "prompt": 715,
            "completion": 506
          },
          "finishReason": "stop",
          "cost": 0.003245
        },
        "score": 0.8121,
        "success": true,
        "testCase": {
          "vars": {
            "source_text": "file://../input/normalize-prose.txt",
            "golden_path": "golden/normalize-signal-golden.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/normalization_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate this screenplay normalization. The input was a prose narrative\nwith no Fountain formatting. The model should have converted it to\nstandard Fountain format.\n\nKey quality criteria:\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\n2. Are character cues ALL CAPS on their own line?\n3. Is dialogue preserved exactly as written?\n4. Are parentheticals in (lowercase parens) format?\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\n6. Are scene breaks identified correctly from context clues?\n7. Is the author's voice preserved without inventions?\n\nScore strictly: structural correctness AND content preservation both matter.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "source_text": "file://../input/normalize-prose.txt",
          "golden_path": "golden/normalize-signal-golden.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 0.9099999999999999,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 1302,
            "prompt": 863,
            "completion": 439,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "character_cues=1.00 | content_completeness=1.00 | dialogue_preserved=1.00 | no_markdown=1.00 | scene_headings=1.00 | structure_quality=1.00",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/normalization_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate this screenplay normalization. The input was a prose narrative\nwith no Fountain formatting. The model should have converted it to\nstandard Fountain format.\n\nKey quality criteria:\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\n2. Are character cues ALL CAPS on their own line?\n3. Is dialogue preserved exactly as written?\n4. Are parentheticals in (lowercase parens) format?\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\n6. Are scene breaks identified correctly from context clues?\n7. Is the author's voice preserved without inventions?\n\nScore strictly: structural correctness AND content preservation both matter.\n"
              },
              "pass": true,
              "score": 0.82,
              "reason": "The output demonstrates strong Fountain formatting conventions: 1) Scene headings are present and properly formatted with INT./EXT. in ALL CAPS (e.g., 'INT. COMMUNITY RADIO STUDIO - DAY', 'EXT. HILLTOP WATER TOWER - NIGHT'). 2) Character cues are ALL CAPS on their own lines (JUNE, NOAH, ARIA, KELL). 3) Dialogue appears naturally formatted beneath character names. 4) Parentheticals are in (lowercase parens) format like '(trying to sound calm)', '(shivering)', '(half-smiling)'. 5) There is no markdown formatting - no #, **, ```, or > symbols. 6) Scene breaks are logically identified with proper slug lines. 7) The author's voice appears preserved with action lines and dialogue that feel natural.\n\nHowever, the rubric states 'The input was a prose narrative with no Fountain formatting. The model should have converted it to standard Fountain format.' This implies there was an original prose input that was converted. Without seeing the original input, I cannot fully verify that dialogue was 'preserved exactly as written' or that there were no inventions. But evaluating the output on its own structural merits: the Fountain formatting is well-executed. The action lines serve as scene description, character names are properly cued, and the format is clean.\n\nOne minor issue: In strict Fountain spec, scene headings don't require special formatting beyond starting with INT./EXT., which is done correctly. The CONTINUOUS tag is properly used. V.O. annotation is correct.\n\nThe output is well-structured Fountain format with no markdown artifacts. Since I cannot verify exact content preservation against an unseen input, I'll score based on structural quality which is high, with a small deduction for the inability to confirm exact preservation.",
              "tokensUsed": {
                "total": 1302,
                "prompt": 863,
                "completion": 439,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\nINT. COMMUNITY RADIO STUDIO - DAY\\n\\nInside a cramped community radio studio, old gear hums while rain taps on the skylight. Aria threads a tape reel as Noah checks the cracked mixer. June comes in balancing two mugs of tea on a pile of scripts.\\n\\nJUNE\\nIf this works, half the valley hears us.\\n\\nShe sets down the mugs.\\n\\nNOAH\\n(trying to sound calm)\\nIf this works, we hear them too.\\n\\nARIA\\n(quietly)\\nThen we stop talking and start listening.\\n\\nThe ON AIR light flickers once, then goes dark.\\n\\nEXT. HILLTOP WATER TOWER - NIGHT\\n\\nWind whips prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder carrying a portable antenna. Below them, town lights blink in scattered clusters.\\n\\nNOAH\\n(shivering)\\nI still vote for warm studios and bad coffee.\\n\\nARIA\\n(grinning)\\nWe lost warm. Keep the coffee dream alive.\\n\\nA burst of static crackles from the handheld receiver. They both freeze.\\n\\nNOAH\\n(whispering)\\nDid you hear that?\\n\\nARIA\\nOnly enough to hope.\\n\\nThey lock the antenna in place and point it toward the dark ridge line.\\n\\nINT. STUDIO HALLWAY - NIGHT\\n\\nFluorescent lights buzz overhead. Kell tapes handwritten evacuation arrows to the wall while June hurries past carrying batteries and tangled cables.\\n\\nKELL\\nGenerator room flooded. We can run one board, maybe two.\\n\\nJUNE\\nOne board is enough.\\n\\nKELL\\n(raising an eyebrow)\\nFor news, maybe. For miracles?\\n\\nJUNE\\n(half-smiling)\\nWe schedule those after midnight.\\n\\nShe shoulders open the control-room door.\\n\\nINT. COMMUNITY RADIO STUDIO - CONTINUOUS\\n\\nMonitors glow back to life one by one.\\n\\nNOAH (V.O.)\\nTower looks stable. Feed us a carrier tone.\\n\\nJune taps the mic.\\n\\nJUNE\\nGood evening, Red Creek. If you're out there, key once and wait.\\n\\nSilence. Then three tiny chirps answer in sequence. The room goes still.\\n</Output>\\n<Rubric>\\nEvaluate this screenplay normalization. The input was a prose narrative\\nwith no Fountain formatting. The model should have converted it to\\nstandard Fountain format.\\n\\nKey quality criteria:\\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\\n2. Are character cues ALL CAPS on their own line?\\n3. Is dialogue preserved exactly as written?\\n4. Are parentheticals in (lowercase parens) format?\\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\\n6. Are scene breaks identified correctly from context clues?\\n7. Is the author's voice preserved without inventions?\\n\\nScore strictly: structural correctness AND content preservation both matter.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "768f8b4c-b255-41ec-b245-62f1e4860b73",
        "latencyMs": 5213,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\nInside a cramped community radio studio, old gear hums while rain taps on the skylight. Aria threads a tape reel as Noah checks the cracked mixer. June comes in balancing two mugs of tea on a pile of scripts.\n\n\"If this works, half the valley hears us,\" June says, setting down the mugs.\n\nNoah tries to sound calm. \"If this works, we hear them too.\"\n\n\"Then we stop talking and start listening,\" Aria replies quietly.\n\nThe ON AIR light flickers once, then goes dark.\n\nLater that night, on a hilltop water tower, wind whips prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder carrying a portable antenna. Below them, town lights blink in scattered clusters.\n\n\"I still vote for warm studios and bad coffee,\" Noah says, shivering.\n\nAria grins. \"We lost warm. Keep the coffee dream alive.\"\n\nA burst of static crackles from the handheld receiver. They both freeze.\n\n\"Did you hear that?\" Noah whispers.\n\n\"Only enough to hope,\" Aria says.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nDown in the studio hallway, fluorescent lights buzz overhead. Kell tapes handwritten evacuation arrows to the wall while June hurries past carrying batteries and tangled cables.\n\n\"Generator room flooded,\" Kell reports. \"We can run one board, maybe two.\"\n\n\"One board is enough,\" June replies.\n\nKell raises an eyebrow. \"For news, maybe. For miracles?\"\n\nJune half-smiles. \"We schedule those after midnight.\"\n\nShe shoulders open the control-room door. Inside the studio, monitors glow back to life one by one.\n\nNoah's voice comes through the radio: \"Tower looks stable. Feed us a carrier tone.\"\n\nJune taps the mic. \"Good evening, Red Creek. If you're out there, key once and wait.\"\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.\n==========",
          "label": "prompts/normalization.txt: You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "7bc79ce1f5846d8728590285cab08ec96b22d867e2d8ac7b1dd750e47494dfc4",
        "promptIdx": 5,
        "provider": {
          "id": "anthropic:messages:claude-sonnet-4-6",
          "label": "Claude Sonnet 4.6"
        },
        "response": {
          "output": "INT. COMMUNITY RADIO STUDIO - DAY\n\nInside a cramped community radio studio, old gear hums while rain taps on the skylight. Aria threads a tape reel as Noah checks the cracked mixer. June comes in balancing two mugs of tea on a pile of scripts.\n\nJUNE\nIf this works, half the valley hears us.\n\nShe sets down the mugs.\n\nNOAH\n(trying to sound calm)\nIf this works, we hear them too.\n\nARIA\n(quietly)\nThen we stop talking and start listening.\n\nThe ON AIR light flickers once, then goes dark.\n\nEXT. HILLTOP WATER TOWER - NIGHT\n\nWind whips prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder carrying a portable antenna. Below them, town lights blink in scattered clusters.\n\nNOAH\n(shivering)\nI still vote for warm studios and bad coffee.\n\nARIA\n(grinning)\nWe lost warm. Keep the coffee dream alive.\n\nA burst of static crackles from the handheld receiver. They both freeze.\n\nNOAH\n(whispering)\nDid you hear that?\n\nARIA\nOnly enough to hope.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nINT. STUDIO HALLWAY - NIGHT\n\nFluorescent lights buzz overhead. Kell tapes handwritten evacuation arrows to the wall while June hurries past carrying batteries and tangled cables.\n\nKELL\nGenerator room flooded. We can run one board, maybe two.\n\nJUNE\nOne board is enough.\n\nKELL\n(raising an eyebrow)\nFor news, maybe. For miracles?\n\nJUNE\n(half-smiling)\nWe schedule those after midnight.\n\nShe shoulders open the control-room door.\n\nINT. COMMUNITY RADIO STUDIO - CONTINUOUS\n\nMonitors glow back to life one by one.\n\nNOAH (V.O.)\nTower looks stable. Feed us a carrier tone.\n\nJune taps the mic.\n\nJUNE\nGood evening, Red Creek. If you're out there, key once and wait.\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.",
          "tokenUsage": {
            "total": 1218,
            "prompt": 715,
            "completion": 503
          },
          "finishReason": "stop"
        },
        "score": 0.9099999999999999,
        "success": true,
        "testCase": {
          "vars": {
            "source_text": "file://../input/normalize-prose.txt",
            "golden_path": "golden/normalize-signal-golden.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/normalization_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate this screenplay normalization. The input was a prose narrative\nwith no Fountain formatting. The model should have converted it to\nstandard Fountain format.\n\nKey quality criteria:\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\n2. Are character cues ALL CAPS on their own line?\n3. Is dialogue preserved exactly as written?\n4. Are parentheticals in (lowercase parens) format?\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\n6. Are scene breaks identified correctly from context clues?\n7. Is the author's voice preserved without inventions?\n\nScore strictly: structural correctness AND content preservation both matter.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "source_text": "file://../input/normalize-prose.txt",
          "golden_path": "golden/normalize-signal-golden.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0.009975000000000001,
        "gradingResult": {
          "pass": true,
          "score": 0.9099999999999999,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 1551,
            "prompt": 882,
            "completion": 669,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.97,
              "reason": "character_cues=1.00 | content_completeness=1.00 | dialogue_preserved=1.00 | no_markdown=1.00 | scene_headings=0.85 | structure_quality=1.00 | Headings: 3/4 matched",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/normalization_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate this screenplay normalization. The input was a prose narrative\nwith no Fountain formatting. The model should have converted it to\nstandard Fountain format.\n\nKey quality criteria:\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\n2. Are character cues ALL CAPS on their own line?\n3. Is dialogue preserved exactly as written?\n4. Are parentheticals in (lowercase parens) format?\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\n6. Are scene breaks identified correctly from context clues?\n7. Is the author's voice preserved without inventions?\n\nScore strictly: structural correctness AND content preservation both matter.\n"
              },
              "pass": true,
              "score": 0.85,
              "reason": "Evaluating against the rubric criteria:\n\n1. **Scene headings present and properly formatted (INT./EXT. ALL CAPS):** Yes. We see 'INT. COMMUNITY RADIO STUDIO - DAY', 'EXT. HILLTOP WATER TOWER - NIGHT', 'INT. STUDIO HALLWAY - NIGHT', 'INT. CONTROL ROOM - CONTINUOUS' — all properly formatted in ALL CAPS with INT./EXT. prefixes and location/time.\n\n2. **Character cues ALL CAPS on their own line:** Yes. JUNE, NOAH, ARIA, KELL all appear in ALL CAPS on their own lines before dialogue.\n\n3. **Dialogue preserved exactly as written:** Without the original prose input to compare against, I must assess whether the dialogue reads naturally and consistently. The dialogue appears coherent and well-structured. There's no obvious sign of invention or distortion.\n\n4. **Parentheticals in (lowercase parens) format:** Yes. Examples: '(trying to sound calm)', '(quietly)', '(shivering)', '(grinning)', '(whispers)', '(raising an eyebrow)', '(half-smiling)', '(through the radio)' — all properly formatted.\n\n5. **No markdown formatting:** Correct. There are no #, **, >, ``` or other markdown artifacts. The output is clean Fountain-style text.\n\n6. **Scene breaks identified correctly from context clues:** The transitions between locations (studio → hilltop → hallway → control room) are logically broken with appropriate scene headings. The CONTINUOUS slug for the control room following the hallway scene is appropriate.\n\n7. **Author's voice preserved without inventions:** The action lines contain descriptive prose that reads like converted narrative ('old gear hums while rain taps on the skylight', 'wind whips prayer flags tied to the guardrail'). This suggests faithful conversion from prose to screenplay format while maintaining the author's voice.\n\nHowever, there's a notable issue: the rubric states 'The input was a prose narrative with no Fountain formatting. The model should have converted it to standard Fountain format.' Without seeing the original input, I cannot verify with 100% certainty that dialogue and action were preserved exactly. But the output itself is structurally sound Fountain format.\n\nOne minor structural note: In strict Fountain format, action lines typically don't begin with scene-setting descriptions that read like prose paragraphs (e.g., 'Inside a cramped community radio studio, old gear hums...'). However, this is acceptable in Fountain and preserves the author's narrative voice.\n\nOverall, the formatting is clean, consistent, and follows Fountain conventions well. The structure is correct with proper scene headings, character cues, parentheticals, and dialogue formatting.",
              "tokensUsed": {
                "total": 1551,
                "prompt": 882,
                "completion": 669,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\nINT. COMMUNITY RADIO STUDIO - DAY\\n\\nInside a cramped community radio studio, old gear hums while rain taps on the skylight. Aria threads a tape reel as Noah checks the cracked mixer. June comes in balancing two mugs of tea on a pile of scripts.\\n\\nJUNE\\nIf this works, half the valley hears us.\\n\\nShe sets down the mugs.\\n\\nNOAH\\n(trying to sound calm)\\nIf this works, we hear them too.\\n\\nARIA\\n(quietly)\\nThen we stop talking and start listening.\\n\\nThe ON AIR light flickers once, then goes dark.\\n\\nEXT. HILLTOP WATER TOWER - NIGHT\\n\\nLater that night, on a hilltop water tower, wind whips prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder carrying a portable antenna. Below them, town lights blink in scattered clusters.\\n\\nNOAH\\n(shivering)\\nI still vote for warm studios and bad coffee.\\n\\nARIA\\n(grinning)\\nWe lost warm. Keep the coffee dream alive.\\n\\nA burst of static crackles from the handheld receiver. They both freeze.\\n\\nNOAH\\n(whispers)\\nDid you hear that?\\n\\nARIA\\nOnly enough to hope.\\n\\nThey lock the antenna in place and point it toward the dark ridge line.\\n\\nINT. STUDIO HALLWAY - NIGHT\\n\\nDown in the studio hallway, fluorescent lights buzz overhead. Kell tapes handwritten evacuation arrows to the wall while June hurries past carrying batteries and tangled cables.\\n\\nKELL\\nGenerator room flooded. We can run one board, maybe two.\\n\\nJUNE\\nOne board is enough.\\n\\nKELL\\n(raising an eyebrow)\\nFor news, maybe. For miracles?\\n\\nJUNE\\n(half-smiling)\\nWe schedule those after midnight.\\n\\nShe shoulders open the control-room door.\\n\\nINT. CONTROL ROOM - CONTINUOUS\\n\\nInside the studio, monitors glow back to life one by one.\\n\\nNOAH\\n(through the radio)\\nTower looks stable. Feed us a carrier tone.\\n\\nJune taps the mic.\\n\\nJUNE\\nGood evening, Red Creek. If you're out there, key once and wait.\\n\\nSilence. Then three tiny chirps answer in sequence. The room goes still.\\n</Output>\\n<Rubric>\\nEvaluate this screenplay normalization. The input was a prose narrative\\nwith no Fountain formatting. The model should have converted it to\\nstandard Fountain format.\\n\\nKey quality criteria:\\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\\n2. Are character cues ALL CAPS on their own line?\\n3. Is dialogue preserved exactly as written?\\n4. Are parentheticals in (lowercase parens) format?\\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\\n6. Are scene breaks identified correctly from context clues?\\n7. Is the author's voice preserved without inventions?\\n\\nScore strictly: structural correctness AND content preservation both matter.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "ceb779f7-35bc-4af7-833a-e8eae457c99e",
        "latencyMs": 6025,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\nInside a cramped community radio studio, old gear hums while rain taps on the skylight. Aria threads a tape reel as Noah checks the cracked mixer. June comes in balancing two mugs of tea on a pile of scripts.\n\n\"If this works, half the valley hears us,\" June says, setting down the mugs.\n\nNoah tries to sound calm. \"If this works, we hear them too.\"\n\n\"Then we stop talking and start listening,\" Aria replies quietly.\n\nThe ON AIR light flickers once, then goes dark.\n\nLater that night, on a hilltop water tower, wind whips prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder carrying a portable antenna. Below them, town lights blink in scattered clusters.\n\n\"I still vote for warm studios and bad coffee,\" Noah says, shivering.\n\nAria grins. \"We lost warm. Keep the coffee dream alive.\"\n\nA burst of static crackles from the handheld receiver. They both freeze.\n\n\"Did you hear that?\" Noah whispers.\n\n\"Only enough to hope,\" Aria says.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nDown in the studio hallway, fluorescent lights buzz overhead. Kell tapes handwritten evacuation arrows to the wall while June hurries past carrying batteries and tangled cables.\n\n\"Generator room flooded,\" Kell reports. \"We can run one board, maybe two.\"\n\n\"One board is enough,\" June replies.\n\nKell raises an eyebrow. \"For news, maybe. For miracles?\"\n\nJune half-smiles. \"We schedule those after midnight.\"\n\nShe shoulders open the control-room door. Inside the studio, monitors glow back to life one by one.\n\nNoah's voice comes through the radio: \"Tower looks stable. Feed us a carrier tone.\"\n\nJune taps the mic. \"Good evening, Red Creek. If you're out there, key once and wait.\"\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.\n==========",
          "label": "prompts/normalization.txt: You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "7bc79ce1f5846d8728590285cab08ec96b22d867e2d8ac7b1dd750e47494dfc4",
        "promptIdx": 4,
        "provider": {
          "id": "anthropic:messages:claude-sonnet-4-5-20250929",
          "label": "Claude Sonnet 4.5"
        },
        "response": {
          "output": "INT. COMMUNITY RADIO STUDIO - DAY\n\nInside a cramped community radio studio, old gear hums while rain taps on the skylight. Aria threads a tape reel as Noah checks the cracked mixer. June comes in balancing two mugs of tea on a pile of scripts.\n\nJUNE\nIf this works, half the valley hears us.\n\nShe sets down the mugs.\n\nNOAH\n(trying to sound calm)\nIf this works, we hear them too.\n\nARIA\n(quietly)\nThen we stop talking and start listening.\n\nThe ON AIR light flickers once, then goes dark.\n\nEXT. HILLTOP WATER TOWER - NIGHT\n\nLater that night, on a hilltop water tower, wind whips prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder carrying a portable antenna. Below them, town lights blink in scattered clusters.\n\nNOAH\n(shivering)\nI still vote for warm studios and bad coffee.\n\nARIA\n(grinning)\nWe lost warm. Keep the coffee dream alive.\n\nA burst of static crackles from the handheld receiver. They both freeze.\n\nNOAH\n(whispers)\nDid you hear that?\n\nARIA\nOnly enough to hope.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nINT. STUDIO HALLWAY - NIGHT\n\nDown in the studio hallway, fluorescent lights buzz overhead. Kell tapes handwritten evacuation arrows to the wall while June hurries past carrying batteries and tangled cables.\n\nKELL\nGenerator room flooded. We can run one board, maybe two.\n\nJUNE\nOne board is enough.\n\nKELL\n(raising an eyebrow)\nFor news, maybe. For miracles?\n\nJUNE\n(half-smiling)\nWe schedule those after midnight.\n\nShe shoulders open the control-room door.\n\nINT. CONTROL ROOM - CONTINUOUS\n\nInside the studio, monitors glow back to life one by one.\n\nNOAH\n(through the radio)\nTower looks stable. Feed us a carrier tone.\n\nJune taps the mic.\n\nJUNE\nGood evening, Red Creek. If you're out there, key once and wait.\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.",
          "tokenUsage": {
            "total": 1237,
            "prompt": 715,
            "completion": 522
          },
          "finishReason": "stop",
          "cost": 0.009975000000000001
        },
        "score": 0.9099999999999999,
        "success": true,
        "testCase": {
          "vars": {
            "source_text": "file://../input/normalize-prose.txt",
            "golden_path": "golden/normalize-signal-golden.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/normalization_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate this screenplay normalization. The input was a prose narrative\nwith no Fountain formatting. The model should have converted it to\nstandard Fountain format.\n\nKey quality criteria:\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\n2. Are character cues ALL CAPS on their own line?\n3. Is dialogue preserved exactly as written?\n4. Are parentheticals in (lowercase parens) format?\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\n6. Are scene breaks identified correctly from context clues?\n7. Is the author's voice preserved without inventions?\n\nScore strictly: structural correctness AND content preservation both matter.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "source_text": "file://../input/normalize-prose.txt",
          "golden_path": "golden/normalize-signal-golden.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0.01615,
        "gradingResult": {
          "pass": true,
          "score": 0.845,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 1243,
            "prompt": 863,
            "completion": 380,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.94,
              "reason": "character_cues=1.00 | content_completeness=1.00 | dialogue_preserved=1.00 | no_markdown=1.00 | scene_headings=0.70 | structure_quality=1.00 | Headings: 2/4 matched",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/normalization_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate this screenplay normalization. The input was a prose narrative\nwith no Fountain formatting. The model should have converted it to\nstandard Fountain format.\n\nKey quality criteria:\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\n2. Are character cues ALL CAPS on their own line?\n3. Is dialogue preserved exactly as written?\n4. Are parentheticals in (lowercase parens) format?\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\n6. Are scene breaks identified correctly from context clues?\n7. Is the author's voice preserved without inventions?\n\nScore strictly: structural correctness AND content preservation both matter.\n"
              },
              "pass": true,
              "score": 0.75,
              "reason": "The output demonstrates strong Fountain formatting conventions: 1) Scene headings are present and properly formatted in ALL CAPS with INT./EXT. prefixes (e.g., 'INT. COMMUNITY RADIO STUDIO - DAY', 'EXT. HILLTOP WATER TOWER - NIGHT'). 2) Character cues are ALL CAPS on their own lines (JUNE, NOAH, ARIA, KELL). 3) Dialogue appears naturally formatted below character names. 4) Parentheticals are in (lowercase parens) format like (quietly), (shivering), (grinning), (whispering), (raising an eyebrow), (half-smiling). 5) There is no markdown formatting - no >, #, **, ``` etc. 6) Scene breaks are logically identified with proper sluglines. 7) The author's voice appears preserved. However, the rubric states 'The input was a prose narrative with no Fountain formatting' and the model 'should have converted it to standard Fountain format.' The critical issue is that we cannot verify content preservation against the original prose input since it wasn't provided. The output itself looks like well-formatted Fountain screenplay content. There are also action/description lines that read naturally. One minor issue: in strict Fountain format, CONTINUOUS should work fine as a scene extension. V.O. notation for Noah is properly formatted. The output appears to be a well-structured Fountain screenplay. Without seeing the original prose input, I cannot fully verify that dialogue was 'preserved exactly as written' or that no inventions were made, but the formatting quality is high.",
              "tokensUsed": {
                "total": 1243,
                "prompt": 863,
                "completion": 380,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\nINT. COMMUNITY RADIO STUDIO - DAY\\n\\nOld gear hums in the cramped space while rain taps on the skylight. Aria threads a tape reel as Noah checks the cracked mixer. June comes in balancing two mugs of tea on a pile of scripts.\\n\\nJUNE\\nIf this works, half the valley hears us.\\n\\nShe sets down the mugs.\\n\\nNOAH\\nIf this works, we hear them too.\\n\\nARIA\\n(quietly)\\nThen we stop talking and start listening.\\n\\nThe ON AIR light flickers once, then goes dark.\\n\\nEXT. HILLTOP WATER TOWER - NIGHT\\n\\nWind whips prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder carrying a portable antenna. Below them, town lights blink in scattered clusters.\\n\\nNOAH\\n(shivering)\\nI still vote for warm studios and bad coffee.\\n\\nARIA\\n(grinning)\\nWe lost warm. Keep the coffee dream alive.\\n\\nA burst of static crackles from the handheld receiver. They both freeze.\\n\\nNOAH\\n(whispering)\\nDid you hear that?\\n\\nARIA\\nOnly enough to hope.\\n\\nThey lock the antenna in place and point it toward the dark ridge line.\\n\\nINT. COMMUNITY RADIO STUDIO - HALLWAY - NIGHT\\n\\nFluorescent lights buzz overhead. Kell tapes handwritten evacuation arrows to the wall while June hurries past carrying batteries and tangled cables.\\n\\nKELL\\nGenerator room flooded. We can run one board, maybe two.\\n\\nJUNE\\nOne board is enough.\\n\\nKELL\\n(raising an eyebrow)\\nFor news, maybe. For miracles?\\n\\nJUNE\\n(half-smiling)\\nWe schedule those after midnight.\\n\\nShe shoulders open the control-room door.\\n\\nINT. COMMUNITY RADIO STUDIO - CONTROL ROOM - CONTINUOUS\\n\\nMonitors glow back to life one by one.\\n\\nNOAH (V.O.)\\nTower looks stable. Feed us a carrier tone.\\n\\nJune taps the mic.\\n\\nJUNE\\nGood evening, Red Creek. If you're out there, key once and wait.\\n\\nSilence. Then three tiny chirps answer in sequence. The room goes still.\\n</Output>\\n<Rubric>\\nEvaluate this screenplay normalization. The input was a prose narrative\\nwith no Fountain formatting. The model should have converted it to\\nstandard Fountain format.\\n\\nKey quality criteria:\\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\\n2. Are character cues ALL CAPS on their own line?\\n3. Is dialogue preserved exactly as written?\\n4. Are parentheticals in (lowercase parens) format?\\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\\n6. Are scene breaks identified correctly from context clues?\\n7. Is the author's voice preserved without inventions?\\n\\nScore strictly: structural correctness AND content preservation both matter.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "cba69a5f-12f5-422f-88bd-efdb04984b51",
        "latencyMs": 6370,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\nInside a cramped community radio studio, old gear hums while rain taps on the skylight. Aria threads a tape reel as Noah checks the cracked mixer. June comes in balancing two mugs of tea on a pile of scripts.\n\n\"If this works, half the valley hears us,\" June says, setting down the mugs.\n\nNoah tries to sound calm. \"If this works, we hear them too.\"\n\n\"Then we stop talking and start listening,\" Aria replies quietly.\n\nThe ON AIR light flickers once, then goes dark.\n\nLater that night, on a hilltop water tower, wind whips prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder carrying a portable antenna. Below them, town lights blink in scattered clusters.\n\n\"I still vote for warm studios and bad coffee,\" Noah says, shivering.\n\nAria grins. \"We lost warm. Keep the coffee dream alive.\"\n\nA burst of static crackles from the handheld receiver. They both freeze.\n\n\"Did you hear that?\" Noah whispers.\n\n\"Only enough to hope,\" Aria says.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nDown in the studio hallway, fluorescent lights buzz overhead. Kell tapes handwritten evacuation arrows to the wall while June hurries past carrying batteries and tangled cables.\n\n\"Generator room flooded,\" Kell reports. \"We can run one board, maybe two.\"\n\n\"One board is enough,\" June replies.\n\nKell raises an eyebrow. \"For news, maybe. For miracles?\"\n\nJune half-smiles. \"We schedule those after midnight.\"\n\nShe shoulders open the control-room door. Inside the studio, monitors glow back to life one by one.\n\nNoah's voice comes through the radio: \"Tower looks stable. Feed us a carrier tone.\"\n\nJune taps the mic. \"Good evening, Red Creek. If you're out there, key once and wait.\"\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.\n==========",
          "label": "prompts/normalization.txt: You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "7bc79ce1f5846d8728590285cab08ec96b22d867e2d8ac7b1dd750e47494dfc4",
        "promptIdx": 7,
        "provider": {
          "id": "anthropic:messages:claude-opus-4-6",
          "label": "Claude Opus 4.6"
        },
        "response": {
          "output": "INT. COMMUNITY RADIO STUDIO - DAY\n\nOld gear hums in the cramped space while rain taps on the skylight. Aria threads a tape reel as Noah checks the cracked mixer. June comes in balancing two mugs of tea on a pile of scripts.\n\nJUNE\nIf this works, half the valley hears us.\n\nShe sets down the mugs.\n\nNOAH\nIf this works, we hear them too.\n\nARIA\n(quietly)\nThen we stop talking and start listening.\n\nThe ON AIR light flickers once, then goes dark.\n\nEXT. HILLTOP WATER TOWER - NIGHT\n\nWind whips prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder carrying a portable antenna. Below them, town lights blink in scattered clusters.\n\nNOAH\n(shivering)\nI still vote for warm studios and bad coffee.\n\nARIA\n(grinning)\nWe lost warm. Keep the coffee dream alive.\n\nA burst of static crackles from the handheld receiver. They both freeze.\n\nNOAH\n(whispering)\nDid you hear that?\n\nARIA\nOnly enough to hope.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nINT. COMMUNITY RADIO STUDIO - HALLWAY - NIGHT\n\nFluorescent lights buzz overhead. Kell tapes handwritten evacuation arrows to the wall while June hurries past carrying batteries and tangled cables.\n\nKELL\nGenerator room flooded. We can run one board, maybe two.\n\nJUNE\nOne board is enough.\n\nKELL\n(raising an eyebrow)\nFor news, maybe. For miracles?\n\nJUNE\n(half-smiling)\nWe schedule those after midnight.\n\nShe shoulders open the control-room door.\n\nINT. COMMUNITY RADIO STUDIO - CONTROL ROOM - CONTINUOUS\n\nMonitors glow back to life one by one.\n\nNOAH (V.O.)\nTower looks stable. Feed us a carrier tone.\n\nJune taps the mic.\n\nJUNE\nGood evening, Red Creek. If you're out there, key once and wait.\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.",
          "tokenUsage": {
            "total": 1218,
            "prompt": 715,
            "completion": 503
          },
          "finishReason": "stop",
          "cost": 0.01615
        },
        "score": 0.845,
        "success": true,
        "testCase": {
          "vars": {
            "source_text": "file://../input/normalize-prose.txt",
            "golden_path": "golden/normalize-signal-golden.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/normalization_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate this screenplay normalization. The input was a prose narrative\nwith no Fountain formatting. The model should have converted it to\nstandard Fountain format.\n\nKey quality criteria:\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\n2. Are character cues ALL CAPS on their own line?\n3. Is dialogue preserved exactly as written?\n4. Are parentheticals in (lowercase parens) format?\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\n6. Are scene breaks identified correctly from context clues?\n7. Is the author's voice preserved without inventions?\n\nScore strictly: structural correctness AND content preservation both matter.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "source_text": "file://../input/normalize-prose.txt",
          "golden_path": "golden/normalize-signal-golden.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0.00021590000000000002,
        "gradingResult": {
          "pass": true,
          "score": 0.95,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 1077,
            "prompt": 846,
            "completion": 231,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "character_cues=1.00 | content_completeness=1.00 | dialogue_preserved=1.00 | no_markdown=1.00 | scene_headings=1.00 | structure_quality=1.00",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/normalization_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate this screenplay normalization. The input was broken Fountain\nformat with markdown artifacts (## headers, > blockquotes, escaped\ncharacters like \\-). The model should have fixed these issues while\npreserving the screenplay structure.\n\nKey quality criteria:\n1. Are scene headings ALL CAPS (not lowercase like the input)?\n2. Are character cues ALL CAPS (not lowercase like the input)?\n3. Are markdown artifacts removed (no ##, >, \\-, \\!)?\n4. Is dialogue preserved exactly?\n5. Are parentheticals formatted correctly?\n6. Is the V.O. designation preserved for Noah's line?\n7. Is the CUT TO: transition plain text, not a markdown header?\n\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\n"
              },
              "pass": true,
              "score": 0.9,
              "reason": "The output shows properly formatted screenplay structure: scene headings are ALL CAPS (e.g., 'INT. COMMUNITY RADIO STUDIO', 'EXT. HILLTOP WATER TOWER - NIGHT'), character cues are ALL CAPS (JUNE, NOAH, ARIA, KELL), there are no markdown artifacts (no ##, >, \\-, \\!), parentheticals are formatted correctly (e.g., '(trying to sound calm)', '(half-smiling)'), the V.O. designation is preserved for Noah's line ('NOAH (V.O.)'), and 'CUT TO:' is plain text, not a markdown header. Dialogue appears preserved and natural. All key quality criteria are met. However, since I don't have the original input to verify exact dialogue preservation word-for-word, I'm relying on the output's internal consistency and proper formatting. The cleanup appears thorough with no remaining markdown artifacts.",
              "tokensUsed": {
                "total": 1077,
                "prompt": 846,
                "completion": 231,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\nTitle: Signal in the Rain\\n\\nINT. COMMUNITY RADIO STUDIO\\n\\nA cramped studio hums with old gear. Rain taps the skylight in steady rhythm.  \\nAria threads a tape reel while Noah checks a cracked mixer. June balances two mugs of tea on a stack of scripts.\\n\\nJUNE  \\nIf this works, half the valley hears us.\\n\\nNOAH  \\n(trying to sound calm)  \\nIf this works, we hear them too.\\n\\nARIA  \\nThen we stop talking and start listening.\\n\\nThe ON AIR light flickers once, then goes dark.\\n\\nCUT TO:\\n\\nEXT. HILLTOP WATER TOWER - NIGHT\\n\\nWind lashes prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder with a portable antenna.  \\nFar below, town lights blink in uneven clusters.\\n\\nNOAH  \\nI still vote for warm studios and bad coffee.\\n\\nARIA  \\nWe lost warm. Keep the coffee dream alive.\\n\\nA burst of static jumps from the handheld receiver. They freeze.\\n\\nNOAH  \\nDid you hear that?\\n\\nARIA  \\nOnly enough to hope.\\n\\nThey lock the antenna in place and point it toward the dark ridge line.\\n\\nINT. STUDIO HALLWAY - NIGHT\\n\\nFluorescent lights buzz. Kell tapes handwritten evacuation arrows to the wall.\\n\\nKELL  \\nGenerator room flooded. We can run one board, maybe two.\\n\\nJUNE  \\nOne board is enough.\\n\\nKELL  \\nFor news, maybe. For miracles?\\n\\nJUNE  \\n(half-smiling)  \\nWe schedule those after midnight.\\n\\nShe shoulders open the control-room door.\\n\\nINT. COMMUNITY RADIO STUDIO - CONTINUOUS\\n\\nMonitors glow back to life one by one.\\n\\nNOAH (V.O.)  \\nTower looks stable. Feed us a carrier tone.\\n\\nJUNE  \\nGood evening, Red Creek. If you're out there, key once and wait.\\n\\nSilence. Then three tiny chirps answer in sequence. The room goes still.\\n</Output>\\n<Rubric>\\nEvaluate this screenplay normalization. The input was broken Fountain\\nformat with markdown artifacts (## headers, > blockquotes, escaped\\ncharacters like \\\\-). The model should have fixed these issues while\\npreserving the screenplay structure.\\n\\nKey quality criteria:\\n1. Are scene headings ALL CAPS (not lowercase like the input)?\\n2. Are character cues ALL CAPS (not lowercase like the input)?\\n3. Are markdown artifacts removed (no ##, >, \\\\-, \\\\!)?\\n4. Is dialogue preserved exactly?\\n5. Are parentheticals formatted correctly?\\n6. Is the V.O. designation preserved for Noah's line?\\n7. Is the CUT TO: transition plain text, not a markdown header?\\n\\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "57db2374-e1d2-454e-99a2-752c0adfb8b9",
        "latencyMs": 3915,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\nTitle: Signal in the Rain\n\nint. community radio studio\n\nA cramped studio hums with old gear. Rain taps the skylight in steady rhythm.\naria threads a tape reel while noah checks a cracked mixer. june balances two mugs of tea on a stack of scripts.\n\njune\nIf this works, half the valley hears us.\n\nnoah\n> (trying to sound calm)\nIf this works, we hear them too.\n\naria\nThen we stop talking and start listening.\n\nThe ON AIR light flickers once, then goes dark.\n\n## CUT TO:\n\next. hilltop water tower \\- night\n\nWind lashes prayer flags tied to the guardrail. aria and noah climb a rusted service ladder with a portable antenna.\nFar below, town lights blink in uneven clusters.\n\nnoah\nI still vote for warm studios and bad coffee.\n\naria\nWe lost warm. Keep the coffee dream alive.\n\nA burst of static jumps from the handheld receiver. They freeze.\n\nnoah\nDid you hear that?\n\naria\nOnly enough to hope.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nint. studio hallway \\- night\n\nFluorescent lights buzz. kell tapes handwritten evacuation arrows to the wall.\n\nkell\nGenerator room flooded. We can run one board, maybe two.\n\njune\nOne board is enough.\n\nkell\nFor news, maybe. For miracles?\n\njune\n> (half\\-smiling)\nWe schedule those after midnight.\n\nShe shoulders open the control\\-room door.\n\nint. community radio studio \\- continuous\n\nMonitors glow back to life one by one.\n\nnoah (V.O.)\nTower looks stable. Feed us a carrier tone.\n\njune\nGood evening, Red Creek. If you're out there, key once and wait.\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.\n==========",
          "label": "prompts/normalization.txt: You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "7bc79ce1f5846d8728590285cab08ec96b22d867e2d8ac7b1dd750e47494dfc4",
        "promptIdx": 0,
        "provider": {
          "id": "openai:gpt-4.1-nano",
          "label": "GPT-4.1 Nano"
        },
        "response": {
          "output": "Title: Signal in the Rain\n\nINT. COMMUNITY RADIO STUDIO\n\nA cramped studio hums with old gear. Rain taps the skylight in steady rhythm.  \nAria threads a tape reel while Noah checks a cracked mixer. June balances two mugs of tea on a stack of scripts.\n\nJUNE  \nIf this works, half the valley hears us.\n\nNOAH  \n(trying to sound calm)  \nIf this works, we hear them too.\n\nARIA  \nThen we stop talking and start listening.\n\nThe ON AIR light flickers once, then goes dark.\n\nCUT TO:\n\nEXT. HILLTOP WATER TOWER - NIGHT\n\nWind lashes prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder with a portable antenna.  \nFar below, town lights blink in uneven clusters.\n\nNOAH  \nI still vote for warm studios and bad coffee.\n\nARIA  \nWe lost warm. Keep the coffee dream alive.\n\nA burst of static jumps from the handheld receiver. They freeze.\n\nNOAH  \nDid you hear that?\n\nARIA  \nOnly enough to hope.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nINT. STUDIO HALLWAY - NIGHT\n\nFluorescent lights buzz. Kell tapes handwritten evacuation arrows to the wall.\n\nKELL  \nGenerator room flooded. We can run one board, maybe two.\n\nJUNE  \nOne board is enough.\n\nKELL  \nFor news, maybe. For miracles?\n\nJUNE  \n(half-smiling)  \nWe schedule those after midnight.\n\nShe shoulders open the control-room door.\n\nINT. COMMUNITY RADIO STUDIO - CONTINUOUS\n\nMonitors glow back to life one by one.\n\nNOAH (V.O.)  \nTower looks stable. Feed us a carrier tone.\n\nJUNE  \nGood evening, Red Creek. If you're out there, key once and wait.\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.",
          "tokenUsage": {
            "total": 995,
            "prompt": 607,
            "completion": 388,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 3915,
          "finishReason": "stop",
          "cost": 0.00021590000000000002,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9cfbd0f95bf650df-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Wed, 18 Feb 2026 07:30:00 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "3781",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=KTbS_UOnsnMROGigaXihqdIke2VcyQaklehWREYEPUo-1771399796.6995437-1.0.1.1-ICXmORlq6zm53e3z_tmditnyUkDUspEpfjV7GuWV2rqnhc1BcbaZEYFhk0ek.BSKLxpCAFs7ed_MYTaXxwrs6WkDXrUdmLzXDy1fc8s.9uHaIi4Iy23HE3dpQ2LAK0.W; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Wed, 18 Feb 2026 08:00:00 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "10000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "9999339",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "3ms",
                "x-request-id": "req_31e264a858524265be97991bfeb99c6f"
              }
            }
          }
        },
        "score": 0.95,
        "success": true,
        "testCase": {
          "vars": {
            "source_text": "file://../input/normalize-broken-fountain.txt",
            "golden_path": "golden/normalize-signal-golden.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/normalization_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate this screenplay normalization. The input was broken Fountain\nformat with markdown artifacts (## headers, > blockquotes, escaped\ncharacters like \\-). The model should have fixed these issues while\npreserving the screenplay structure.\n\nKey quality criteria:\n1. Are scene headings ALL CAPS (not lowercase like the input)?\n2. Are character cues ALL CAPS (not lowercase like the input)?\n3. Are markdown artifacts removed (no ##, >, \\-, \\!)?\n4. Is dialogue preserved exactly?\n5. Are parentheticals formatted correctly?\n6. Is the V.O. designation preserved for Noah's line?\n7. Is the CUT TO: transition plain text, not a markdown header?\n\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 1,
        "vars": {
          "source_text": "file://../input/normalize-broken-fountain.txt",
          "golden_path": "golden/normalize-signal-golden.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9cfbd0f95bf650df-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Wed, 18 Feb 2026 07:30:00 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "3781",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=KTbS_UOnsnMROGigaXihqdIke2VcyQaklehWREYEPUo-1771399796.6995437-1.0.1.1-ICXmORlq6zm53e3z_tmditnyUkDUspEpfjV7GuWV2rqnhc1BcbaZEYFhk0ek.BSKLxpCAFs7ed_MYTaXxwrs6WkDXrUdmLzXDy1fc8s.9uHaIi4Iy23HE3dpQ2LAK0.W; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Wed, 18 Feb 2026 08:00:00 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "10000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "9999339",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "3ms",
              "x-request-id": "req_31e264a858524265be97991bfeb99c6f"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0.002916,
        "gradingResult": {
          "pass": true,
          "score": 0.9971,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 1185,
            "prompt": 822,
            "completion": 363,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.9942,
              "reason": "character_cues=1.00 | content_completeness=1.00 | dialogue_preserved=1.00 | no_markdown=1.00 | scene_headings=1.00 | structure_quality=0.96",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/normalization_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate this screenplay normalization. The input was broken Fountain\nformat with markdown artifacts (## headers, > blockquotes, escaped\ncharacters like \\-). The model should have fixed these issues while\npreserving the screenplay structure.\n\nKey quality criteria:\n1. Are scene headings ALL CAPS (not lowercase like the input)?\n2. Are character cues ALL CAPS (not lowercase like the input)?\n3. Are markdown artifacts removed (no ##, >, \\-, \\!)?\n4. Is dialogue preserved exactly?\n5. Are parentheticals formatted correctly?\n6. Is the V.O. designation preserved for Noah's line?\n7. Is the CUT TO: transition plain text, not a markdown header?\n\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\n"
              },
              "pass": true,
              "score": 1,
              "reason": "Evaluating the output against the rubric criteria:\n\n1. **Scene headings ALL CAPS**: Yes. 'INT. COMMUNITY RADIO STUDIO', 'EXT. HILLTOP WATER TOWER - NIGHT', 'INT. STUDIO HALLWAY - NIGHT', 'INT. COMMUNITY RADIO STUDIO - CONTINUOUS' are all in ALL CAPS.\n\n2. **Character cues ALL CAPS**: Yes. JUNE, NOAH, ARIA, KELL, NOAH (V.O.) are all in ALL CAPS.\n\n3. **Markdown artifacts removed**: There are no ##, >, \\-, \\! or any other markdown artifacts visible in the output. The text is clean.\n\n4. **Dialogue preserved exactly**: The dialogue appears natural and well-preserved. Without seeing the original input directly, the dialogue reads coherently and appears intact.\n\n5. **Parentheticals formatted correctly**: Yes. '(trying to sound calm)' and '(half-smiling)' are on their own lines, in parentheses, which is standard Fountain/screenplay format.\n\n6. **V.O. designation preserved**: Yes. 'NOAH (V.O.)' is present.\n\n7. **CUT TO: transition**: 'CUT TO:' appears as plain text, not as a markdown header.\n\nAll seven criteria are met. The output is a clean, properly formatted screenplay with no markdown artifacts and correct Fountain conventions.",
              "tokensUsed": {
                "total": 1185,
                "prompt": 822,
                "completion": 363,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\nINT. COMMUNITY RADIO STUDIO\\n\\nA cramped studio hums with old gear. Rain taps the skylight in steady rhythm.\\n\\nAria threads a tape reel while Noah checks a cracked mixer. June balances two mugs of tea on a stack of scripts.\\n\\nJUNE\\nIf this works, half the valley hears us.\\n\\nNOAH\\n(trying to sound calm)\\nIf this works, we hear them too.\\n\\nARIA\\nThen we stop talking and start listening.\\n\\nThe ON AIR light flickers once, then goes dark.\\n\\nCUT TO:\\n\\nEXT. HILLTOP WATER TOWER - NIGHT\\n\\nWind lashes prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder with a portable antenna.\\n\\nFar below, town lights blink in uneven clusters.\\n\\nNOAH\\nI still vote for warm studios and bad coffee.\\n\\nARIA\\nWe lost warm. Keep the coffee dream alive.\\n\\nA burst of static jumps from the handheld receiver. They freeze.\\n\\nNOAH\\nDid you hear that?\\n\\nARIA\\nOnly enough to hope.\\n\\nThey lock the antenna in place and point it toward the dark ridge line.\\n\\nINT. STUDIO HALLWAY - NIGHT\\n\\nFluorescent lights buzz. Kell tapes handwritten evacuation arrows to the wall.\\n\\nKELL\\nGenerator room flooded. We can run one board, maybe two.\\n\\nJUNE\\nOne board is enough.\\n\\nKELL\\nFor news, maybe. For miracles?\\n\\nJUNE\\n(half-smiling)\\nWe schedule those after midnight.\\n\\nShe shoulders open the control-room door.\\n\\nINT. COMMUNITY RADIO STUDIO - CONTINUOUS\\n\\nMonitors glow back to life one by one.\\n\\nNOAH (V.O.)\\nTower looks stable. Feed us a carrier tone.\\n\\nJUNE\\nGood evening, Red Creek. If you're out there, key once and wait.\\n\\nSilence. Then three tiny chirps answer in sequence. The room goes still.\\n</Output>\\n<Rubric>\\nEvaluate this screenplay normalization. The input was broken Fountain\\nformat with markdown artifacts (## headers, > blockquotes, escaped\\ncharacters like \\\\-). The model should have fixed these issues while\\npreserving the screenplay structure.\\n\\nKey quality criteria:\\n1. Are scene headings ALL CAPS (not lowercase like the input)?\\n2. Are character cues ALL CAPS (not lowercase like the input)?\\n3. Are markdown artifacts removed (no ##, >, \\\\-, \\\\!)?\\n4. Is dialogue preserved exactly?\\n5. Are parentheticals formatted correctly?\\n6. Is the V.O. designation preserved for Noah's line?\\n7. Is the CUT TO: transition plain text, not a markdown header?\\n\\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "a92df855-5f04-4708-a8ee-d3d30d48a612",
        "latencyMs": 2103,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\nTitle: Signal in the Rain\n\nint. community radio studio\n\nA cramped studio hums with old gear. Rain taps the skylight in steady rhythm.\naria threads a tape reel while noah checks a cracked mixer. june balances two mugs of tea on a stack of scripts.\n\njune\nIf this works, half the valley hears us.\n\nnoah\n> (trying to sound calm)\nIf this works, we hear them too.\n\naria\nThen we stop talking and start listening.\n\nThe ON AIR light flickers once, then goes dark.\n\n## CUT TO:\n\next. hilltop water tower \\- night\n\nWind lashes prayer flags tied to the guardrail. aria and noah climb a rusted service ladder with a portable antenna.\nFar below, town lights blink in uneven clusters.\n\nnoah\nI still vote for warm studios and bad coffee.\n\naria\nWe lost warm. Keep the coffee dream alive.\n\nA burst of static jumps from the handheld receiver. They freeze.\n\nnoah\nDid you hear that?\n\naria\nOnly enough to hope.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nint. studio hallway \\- night\n\nFluorescent lights buzz. kell tapes handwritten evacuation arrows to the wall.\n\nkell\nGenerator room flooded. We can run one board, maybe two.\n\njune\nOne board is enough.\n\nkell\nFor news, maybe. For miracles?\n\njune\n> (half\\-smiling)\nWe schedule those after midnight.\n\nShe shoulders open the control\\-room door.\n\nint. community radio studio \\- continuous\n\nMonitors glow back to life one by one.\n\nnoah (V.O.)\nTower looks stable. Feed us a carrier tone.\n\njune\nGood evening, Red Creek. If you're out there, key once and wait.\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.\n==========",
          "label": "prompts/normalization.txt: You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "7bc79ce1f5846d8728590285cab08ec96b22d867e2d8ac7b1dd750e47494dfc4",
        "promptIdx": 3,
        "provider": {
          "id": "anthropic:messages:claude-haiku-4-5-20251001",
          "label": "Claude Haiku 4.5"
        },
        "response": {
          "output": "INT. COMMUNITY RADIO STUDIO\n\nA cramped studio hums with old gear. Rain taps the skylight in steady rhythm.\n\nAria threads a tape reel while Noah checks a cracked mixer. June balances two mugs of tea on a stack of scripts.\n\nJUNE\nIf this works, half the valley hears us.\n\nNOAH\n(trying to sound calm)\nIf this works, we hear them too.\n\nARIA\nThen we stop talking and start listening.\n\nThe ON AIR light flickers once, then goes dark.\n\nCUT TO:\n\nEXT. HILLTOP WATER TOWER - NIGHT\n\nWind lashes prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder with a portable antenna.\n\nFar below, town lights blink in uneven clusters.\n\nNOAH\nI still vote for warm studios and bad coffee.\n\nARIA\nWe lost warm. Keep the coffee dream alive.\n\nA burst of static jumps from the handheld receiver. They freeze.\n\nNOAH\nDid you hear that?\n\nARIA\nOnly enough to hope.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nINT. STUDIO HALLWAY - NIGHT\n\nFluorescent lights buzz. Kell tapes handwritten evacuation arrows to the wall.\n\nKELL\nGenerator room flooded. We can run one board, maybe two.\n\nJUNE\nOne board is enough.\n\nKELL\nFor news, maybe. For miracles?\n\nJUNE\n(half-smiling)\nWe schedule those after midnight.\n\nShe shoulders open the control-room door.\n\nINT. COMMUNITY RADIO STUDIO - CONTINUOUS\n\nMonitors glow back to life one by one.\n\nNOAH (V.O.)\nTower looks stable. Feed us a carrier tone.\n\nJUNE\nGood evening, Red Creek. If you're out there, key once and wait.\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.",
          "tokenUsage": {
            "total": 1132,
            "prompt": 686,
            "completion": 446
          },
          "finishReason": "stop",
          "cost": 0.002916
        },
        "score": 0.9971,
        "success": true,
        "testCase": {
          "vars": {
            "source_text": "file://../input/normalize-broken-fountain.txt",
            "golden_path": "golden/normalize-signal-golden.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/normalization_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate this screenplay normalization. The input was broken Fountain\nformat with markdown artifacts (## headers, > blockquotes, escaped\ncharacters like \\-). The model should have fixed these issues while\npreserving the screenplay structure.\n\nKey quality criteria:\n1. Are scene headings ALL CAPS (not lowercase like the input)?\n2. Are character cues ALL CAPS (not lowercase like the input)?\n3. Are markdown artifacts removed (no ##, >, \\-, \\!)?\n4. Is dialogue preserved exactly?\n5. Are parentheticals formatted correctly?\n6. Is the V.O. designation preserved for Noah's line?\n7. Is the CUT TO: transition plain text, not a markdown header?\n\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 1,
        "vars": {
          "source_text": "file://../input/normalize-broken-fountain.txt",
          "golden_path": "golden/normalize-signal-golden.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0.0008636000000000001,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 1243,
            "prompt": 836,
            "completion": 407,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "character_cues=1.00 | content_completeness=1.00 | dialogue_preserved=1.00 | no_markdown=1.00 | scene_headings=1.00 | structure_quality=1.00",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/normalization_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate this screenplay normalization. The input was broken Fountain\nformat with markdown artifacts (## headers, > blockquotes, escaped\ncharacters like \\-). The model should have fixed these issues while\npreserving the screenplay structure.\n\nKey quality criteria:\n1. Are scene headings ALL CAPS (not lowercase like the input)?\n2. Are character cues ALL CAPS (not lowercase like the input)?\n3. Are markdown artifacts removed (no ##, >, \\-, \\!)?\n4. Is dialogue preserved exactly?\n5. Are parentheticals formatted correctly?\n6. Is the V.O. designation preserved for Noah's line?\n7. Is the CUT TO: transition plain text, not a markdown header?\n\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\n"
              },
              "pass": true,
              "score": 1,
              "reason": "Evaluating the output against the rubric criteria:\n\n1. **Scene headings ALL CAPS**: Yes - 'INT. COMMUNITY RADIO STUDIO', 'EXT. HILLTOP WATER TOWER - NIGHT', 'INT. STUDIO HALLWAY - NIGHT', 'INT. COMMUNITY RADIO STUDIO - CONTINUOUS' are all in ALL CAPS.\n\n2. **Character cues ALL CAPS**: Yes - JUNE, NOAH, ARIA, KELL, NOAH (V.O.) are all in ALL CAPS.\n\n3. **Markdown artifacts removed**: Yes - There are no ##, >, \\-, \\! or other markdown artifacts visible in the output. The text is clean.\n\n4. **Dialogue preserved exactly**: Without seeing the original input, I can assess that the dialogue appears natural and complete. The rubric implies the dialogue should match the input exactly. Since I don't have the original input to compare word-for-word, I'll note the dialogue appears well-structured and consistent.\n\n5. **Parentheticals formatted correctly**: Yes - '(trying to sound calm)' and '(half-smiling)' are on their own lines, in parentheses, which is standard Fountain/screenplay format.\n\n6. **V.O. designation preserved**: Yes - 'NOAH (V.O.)' is present and correctly formatted.\n\n7. **CUT TO: transition as plain text**: Yes - 'CUT TO:' appears as plain text, not as a markdown header.\n\nThe output appears to be a clean, properly formatted screenplay with all markdown artifacts removed and proper screenplay conventions followed. All seven criteria are met.",
              "tokensUsed": {
                "total": 1243,
                "prompt": 836,
                "completion": 407,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\nTITLE: SIGNAL IN THE RAIN\\n\\nINT. COMMUNITY RADIO STUDIO\\n\\nA cramped studio hums with old gear. Rain taps the skylight in steady rhythm.  \\nAria threads a tape reel while Noah checks a cracked mixer. June balances two mugs of tea on a stack of scripts.\\n\\nJUNE\\n\\nIf this works, half the valley hears us.\\n\\nNOAH\\n\\n(trying to sound calm)  \\nIf this works, we hear them too.\\n\\nARIA\\n\\nThen we stop talking and start listening.\\n\\nThe ON AIR light flickers once, then goes dark.\\n\\nCUT TO:\\n\\nEXT. HILLTOP WATER TOWER - NIGHT\\n\\nWind lashes prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder with a portable antenna.  \\nFar below, town lights blink in uneven clusters.\\n\\nNOAH\\n\\nI still vote for warm studios and bad coffee.\\n\\nARIA\\n\\nWe lost warm. Keep the coffee dream alive.\\n\\nA burst of static jumps from the handheld receiver. They freeze.\\n\\nNOAH\\n\\nDid you hear that?\\n\\nARIA\\n\\nOnly enough to hope.\\n\\nThey lock the antenna in place and point it toward the dark ridge line.\\n\\nINT. STUDIO HALLWAY - NIGHT\\n\\nFluorescent lights buzz. Kell tapes handwritten evacuation arrows to the wall.\\n\\nKELL\\n\\nGenerator room flooded. We can run one board, maybe two.\\n\\nJUNE\\n\\nOne board is enough.\\n\\nKELL\\n\\nFor news, maybe. For miracles?\\n\\nJUNE\\n\\n(half-smiling)  \\nWe schedule those after midnight.\\n\\nShe shoulders open the control-room door.\\n\\nINT. COMMUNITY RADIO STUDIO - CONTINUOUS\\n\\nMonitors glow back to life one by one.\\n\\nNOAH (V.O.)\\n\\nTower looks stable. Feed us a carrier tone.\\n\\nJUNE\\n\\nGood evening, Red Creek. If you're out there, key once and wait.\\n\\nSilence. Then three tiny chirps answer in sequence. The room goes still.\\n</Output>\\n<Rubric>\\nEvaluate this screenplay normalization. The input was broken Fountain\\nformat with markdown artifacts (## headers, > blockquotes, escaped\\ncharacters like \\\\-). The model should have fixed these issues while\\npreserving the screenplay structure.\\n\\nKey quality criteria:\\n1. Are scene headings ALL CAPS (not lowercase like the input)?\\n2. Are character cues ALL CAPS (not lowercase like the input)?\\n3. Are markdown artifacts removed (no ##, >, \\\\-, \\\\!)?\\n4. Is dialogue preserved exactly?\\n5. Are parentheticals formatted correctly?\\n6. Is the V.O. designation preserved for Noah's line?\\n7. Is the CUT TO: transition plain text, not a markdown header?\\n\\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "a2dfb409-fb37-4aaa-89e7-821e1153de8d",
        "latencyMs": 5183,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\nTitle: Signal in the Rain\n\nint. community radio studio\n\nA cramped studio hums with old gear. Rain taps the skylight in steady rhythm.\naria threads a tape reel while noah checks a cracked mixer. june balances two mugs of tea on a stack of scripts.\n\njune\nIf this works, half the valley hears us.\n\nnoah\n> (trying to sound calm)\nIf this works, we hear them too.\n\naria\nThen we stop talking and start listening.\n\nThe ON AIR light flickers once, then goes dark.\n\n## CUT TO:\n\next. hilltop water tower \\- night\n\nWind lashes prayer flags tied to the guardrail. aria and noah climb a rusted service ladder with a portable antenna.\nFar below, town lights blink in uneven clusters.\n\nnoah\nI still vote for warm studios and bad coffee.\n\naria\nWe lost warm. Keep the coffee dream alive.\n\nA burst of static jumps from the handheld receiver. They freeze.\n\nnoah\nDid you hear that?\n\naria\nOnly enough to hope.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nint. studio hallway \\- night\n\nFluorescent lights buzz. kell tapes handwritten evacuation arrows to the wall.\n\nkell\nGenerator room flooded. We can run one board, maybe two.\n\njune\nOne board is enough.\n\nkell\nFor news, maybe. For miracles?\n\njune\n> (half\\-smiling)\nWe schedule those after midnight.\n\nShe shoulders open the control\\-room door.\n\nint. community radio studio \\- continuous\n\nMonitors glow back to life one by one.\n\nnoah (V.O.)\nTower looks stable. Feed us a carrier tone.\n\njune\nGood evening, Red Creek. If you're out there, key once and wait.\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.\n==========",
          "label": "prompts/normalization.txt: You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "7bc79ce1f5846d8728590285cab08ec96b22d867e2d8ac7b1dd750e47494dfc4",
        "promptIdx": 1,
        "provider": {
          "id": "openai:gpt-4.1-mini",
          "label": "GPT-4.1 Mini"
        },
        "response": {
          "output": "TITLE: SIGNAL IN THE RAIN\n\nINT. COMMUNITY RADIO STUDIO\n\nA cramped studio hums with old gear. Rain taps the skylight in steady rhythm.  \nAria threads a tape reel while Noah checks a cracked mixer. June balances two mugs of tea on a stack of scripts.\n\nJUNE\n\nIf this works, half the valley hears us.\n\nNOAH\n\n(trying to sound calm)  \nIf this works, we hear them too.\n\nARIA\n\nThen we stop talking and start listening.\n\nThe ON AIR light flickers once, then goes dark.\n\nCUT TO:\n\nEXT. HILLTOP WATER TOWER - NIGHT\n\nWind lashes prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder with a portable antenna.  \nFar below, town lights blink in uneven clusters.\n\nNOAH\n\nI still vote for warm studios and bad coffee.\n\nARIA\n\nWe lost warm. Keep the coffee dream alive.\n\nA burst of static jumps from the handheld receiver. They freeze.\n\nNOAH\n\nDid you hear that?\n\nARIA\n\nOnly enough to hope.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nINT. STUDIO HALLWAY - NIGHT\n\nFluorescent lights buzz. Kell tapes handwritten evacuation arrows to the wall.\n\nKELL\n\nGenerator room flooded. We can run one board, maybe two.\n\nJUNE\n\nOne board is enough.\n\nKELL\n\nFor news, maybe. For miracles?\n\nJUNE\n\n(half-smiling)  \nWe schedule those after midnight.\n\nShe shoulders open the control-room door.\n\nINT. COMMUNITY RADIO STUDIO - CONTINUOUS\n\nMonitors glow back to life one by one.\n\nNOAH (V.O.)\n\nTower looks stable. Feed us a carrier tone.\n\nJUNE\n\nGood evening, Red Creek. If you're out there, key once and wait.\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.",
          "tokenUsage": {
            "total": 995,
            "prompt": 607,
            "completion": 388,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 5183,
          "finishReason": "stop",
          "cost": 0.0008636000000000001,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9cfbd1379b6c50df-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Wed, 18 Feb 2026 07:30:11 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "5064",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=EaxAVynC0AQ119GUuuXfygF3422pLm3G4Os5tgNrAyA-1771399806.6559908-1.0.1.1-Z5mqvbntfpDcLfJaWm1YC0Xk6vPxRLKRvwbp_og2k4hTD2guaWQ5omv77Q8HdXdXY9LXomvCiGQ45yvXQ0VCiFPmUazEj3hksRE8RrYVOFp_g8lETR54cYenTmYFyhzg; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Wed, 18 Feb 2026 08:00:11 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "10000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "9999338",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "3ms",
                "x-request-id": "req_65fc54d1da1e48e39c654a9c3d74e239"
              }
            }
          }
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "source_text": "file://../input/normalize-broken-fountain.txt",
            "golden_path": "golden/normalize-signal-golden.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/normalization_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate this screenplay normalization. The input was broken Fountain\nformat with markdown artifacts (## headers, > blockquotes, escaped\ncharacters like \\-). The model should have fixed these issues while\npreserving the screenplay structure.\n\nKey quality criteria:\n1. Are scene headings ALL CAPS (not lowercase like the input)?\n2. Are character cues ALL CAPS (not lowercase like the input)?\n3. Are markdown artifacts removed (no ##, >, \\-, \\!)?\n4. Is dialogue preserved exactly?\n5. Are parentheticals formatted correctly?\n6. Is the V.O. designation preserved for Noah's line?\n7. Is the CUT TO: transition plain text, not a markdown header?\n\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 1,
        "vars": {
          "source_text": "file://../input/normalize-broken-fountain.txt",
          "golden_path": "golden/normalize-signal-golden.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9cfbd1379b6c50df-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Wed, 18 Feb 2026 07:30:11 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "5064",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=EaxAVynC0AQ119GUuuXfygF3422pLm3G4Os5tgNrAyA-1771399806.6559908-1.0.1.1-Z5mqvbntfpDcLfJaWm1YC0Xk6vPxRLKRvwbp_og2k4hTD2guaWQ5omv77Q8HdXdXY9LXomvCiGQ45yvXQ0VCiFPmUazEj3hksRE8RrYVOFp_g8lETR54cYenTmYFyhzg; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Wed, 18 Feb 2026 08:00:11 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "10000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "9999338",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "3ms",
              "x-request-id": "req_65fc54d1da1e48e39c654a9c3d74e239"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0.004222,
        "gradingResult": {
          "pass": true,
          "score": 0.9971,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 1177,
            "prompt": 822,
            "completion": 355,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.9942,
              "reason": "character_cues=1.00 | content_completeness=1.00 | dialogue_preserved=1.00 | no_markdown=1.00 | scene_headings=1.00 | structure_quality=0.96",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/normalization_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate this screenplay normalization. The input was broken Fountain\nformat with markdown artifacts (## headers, > blockquotes, escaped\ncharacters like \\-). The model should have fixed these issues while\npreserving the screenplay structure.\n\nKey quality criteria:\n1. Are scene headings ALL CAPS (not lowercase like the input)?\n2. Are character cues ALL CAPS (not lowercase like the input)?\n3. Are markdown artifacts removed (no ##, >, \\-, \\!)?\n4. Is dialogue preserved exactly?\n5. Are parentheticals formatted correctly?\n6. Is the V.O. designation preserved for Noah's line?\n7. Is the CUT TO: transition plain text, not a markdown header?\n\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\n"
              },
              "pass": true,
              "score": 1,
              "reason": "Evaluating against the rubric criteria:\n\n1. Scene headings ALL CAPS: Yes - 'INT. COMMUNITY RADIO STUDIO', 'EXT. HILLTOP WATER TOWER - NIGHT', 'INT. STUDIO HALLWAY - NIGHT', 'INT. COMMUNITY RADIO STUDIO - CONTINUOUS' are all in ALL CAPS.\n\n2. Character cues ALL CAPS: Yes - JUNE, NOAH, ARIA, KELL, NOAH (V.O.) are all in ALL CAPS.\n\n3. Markdown artifacts removed: Yes - No ##, >, \\-, \\! visible anywhere in the output. The text is clean.\n\n4. Dialogue preserved: The dialogue appears natural and complete. Without seeing the original input I cannot verify exact preservation, but the dialogue reads coherently and there are no obvious truncations or alterations.\n\n5. Parentheticals formatted correctly: Yes - '(trying to sound calm)' and '(half-smiling)' are on their own lines in parentheses, which is standard Fountain/screenplay format.\n\n6. V.O. designation preserved: Yes - 'NOAH (V.O.)' is present.\n\n7. CUT TO: transition: Yes - 'CUT TO:' appears as plain text, not as a markdown header.\n\nAll criteria are met. The output is a clean, properly formatted screenplay with no markdown artifacts remaining.",
              "tokensUsed": {
                "total": 1177,
                "prompt": 822,
                "completion": 355,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\nINT. COMMUNITY RADIO STUDIO\\n\\nA cramped studio hums with old gear. Rain taps the skylight in steady rhythm.\\n\\nAria threads a tape reel while Noah checks a cracked mixer. June balances two mugs of tea on a stack of scripts.\\n\\nJUNE\\n\\nIf this works, half the valley hears us.\\n\\nNOAH\\n\\n(trying to sound calm)\\n\\nIf this works, we hear them too.\\n\\nARIA\\n\\nThen we stop talking and start listening.\\n\\nThe ON AIR light flickers once, then goes dark.\\n\\nCUT TO:\\n\\nEXT. HILLTOP WATER TOWER - NIGHT\\n\\nWind lashes prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder with a portable antenna.\\n\\nFar below, town lights blink in uneven clusters.\\n\\nNOAH\\n\\nI still vote for warm studios and bad coffee.\\n\\nARIA\\n\\nWe lost warm. Keep the coffee dream alive.\\n\\nA burst of static jumps from the handheld receiver. They freeze.\\n\\nNOAH\\n\\nDid you hear that?\\n\\nARIA\\n\\nOnly enough to hope.\\n\\nThey lock the antenna in place and point it toward the dark ridge line.\\n\\nINT. STUDIO HALLWAY - NIGHT\\n\\nFluorescent lights buzz. Kell tapes handwritten evacuation arrows to the wall.\\n\\nKELL\\n\\nGenerator room flooded. We can run one board, maybe two.\\n\\nJUNE\\n\\nOne board is enough.\\n\\nKELL\\n\\nFor news, maybe. For miracles?\\n\\nJUNE\\n\\n(half-smiling)\\n\\nWe schedule those after midnight.\\n\\nShe shoulders open the control-room door.\\n\\nINT. COMMUNITY RADIO STUDIO - CONTINUOUS\\n\\nMonitors glow back to life one by one.\\n\\nNOAH (V.O.)\\n\\nTower looks stable. Feed us a carrier tone.\\n\\nJUNE\\n\\nGood evening, Red Creek. If you're out there, key once and wait.\\n\\nSilence. Then three tiny chirps answer in sequence. The room goes still.\\n</Output>\\n<Rubric>\\nEvaluate this screenplay normalization. The input was broken Fountain\\nformat with markdown artifacts (## headers, > blockquotes, escaped\\ncharacters like \\\\-). The model should have fixed these issues while\\npreserving the screenplay structure.\\n\\nKey quality criteria:\\n1. Are scene headings ALL CAPS (not lowercase like the input)?\\n2. Are character cues ALL CAPS (not lowercase like the input)?\\n3. Are markdown artifacts removed (no ##, >, \\\\-, \\\\!)?\\n4. Is dialogue preserved exactly?\\n5. Are parentheticals formatted correctly?\\n6. Is the V.O. designation preserved for Noah's line?\\n7. Is the CUT TO: transition plain text, not a markdown header?\\n\\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "7c7f7666-2801-4468-866a-867eebefb134",
        "latencyMs": 5114,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\nTitle: Signal in the Rain\n\nint. community radio studio\n\nA cramped studio hums with old gear. Rain taps the skylight in steady rhythm.\naria threads a tape reel while noah checks a cracked mixer. june balances two mugs of tea on a stack of scripts.\n\njune\nIf this works, half the valley hears us.\n\nnoah\n> (trying to sound calm)\nIf this works, we hear them too.\n\naria\nThen we stop talking and start listening.\n\nThe ON AIR light flickers once, then goes dark.\n\n## CUT TO:\n\next. hilltop water tower \\- night\n\nWind lashes prayer flags tied to the guardrail. aria and noah climb a rusted service ladder with a portable antenna.\nFar below, town lights blink in uneven clusters.\n\nnoah\nI still vote for warm studios and bad coffee.\n\naria\nWe lost warm. Keep the coffee dream alive.\n\nA burst of static jumps from the handheld receiver. They freeze.\n\nnoah\nDid you hear that?\n\naria\nOnly enough to hope.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nint. studio hallway \\- night\n\nFluorescent lights buzz. kell tapes handwritten evacuation arrows to the wall.\n\nkell\nGenerator room flooded. We can run one board, maybe two.\n\njune\nOne board is enough.\n\nkell\nFor news, maybe. For miracles?\n\njune\n> (half\\-smiling)\nWe schedule those after midnight.\n\nShe shoulders open the control\\-room door.\n\nint. community radio studio \\- continuous\n\nMonitors glow back to life one by one.\n\nnoah (V.O.)\nTower looks stable. Feed us a carrier tone.\n\njune\nGood evening, Red Creek. If you're out there, key once and wait.\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.\n==========",
          "label": "prompts/normalization.txt: You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "7bc79ce1f5846d8728590285cab08ec96b22d867e2d8ac7b1dd750e47494dfc4",
        "promptIdx": 2,
        "provider": {
          "id": "openai:gpt-4.1",
          "label": "GPT-4.1"
        },
        "response": {
          "output": "INT. COMMUNITY RADIO STUDIO\n\nA cramped studio hums with old gear. Rain taps the skylight in steady rhythm.\n\nAria threads a tape reel while Noah checks a cracked mixer. June balances two mugs of tea on a stack of scripts.\n\nJUNE\n\nIf this works, half the valley hears us.\n\nNOAH\n\n(trying to sound calm)\n\nIf this works, we hear them too.\n\nARIA\n\nThen we stop talking and start listening.\n\nThe ON AIR light flickers once, then goes dark.\n\nCUT TO:\n\nEXT. HILLTOP WATER TOWER - NIGHT\n\nWind lashes prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder with a portable antenna.\n\nFar below, town lights blink in uneven clusters.\n\nNOAH\n\nI still vote for warm studios and bad coffee.\n\nARIA\n\nWe lost warm. Keep the coffee dream alive.\n\nA burst of static jumps from the handheld receiver. They freeze.\n\nNOAH\n\nDid you hear that?\n\nARIA\n\nOnly enough to hope.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nINT. STUDIO HALLWAY - NIGHT\n\nFluorescent lights buzz. Kell tapes handwritten evacuation arrows to the wall.\n\nKELL\n\nGenerator room flooded. We can run one board, maybe two.\n\nJUNE\n\nOne board is enough.\n\nKELL\n\nFor news, maybe. For miracles?\n\nJUNE\n\n(half-smiling)\n\nWe schedule those after midnight.\n\nShe shoulders open the control-room door.\n\nINT. COMMUNITY RADIO STUDIO - CONTINUOUS\n\nMonitors glow back to life one by one.\n\nNOAH (V.O.)\n\nTower looks stable. Feed us a carrier tone.\n\nJUNE\n\nGood evening, Red Creek. If you're out there, key once and wait.\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.",
          "tokenUsage": {
            "total": 983,
            "prompt": 607,
            "completion": 376,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 5114,
          "finishReason": "stop",
          "cost": 0.004222,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9cfbd141da042c5d-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Wed, 18 Feb 2026 07:30:13 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "4877",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=1EwesniUZjMcZdCVKyamxGxrSyZPhUqEOkZfzII2Cyg-1771399808.3001957-1.0.1.1-RiviA_egcthQEuU9USfJQ5fbCRL3IjRBZrtKNIA8NET3gOA9YH975kBOdfObWLzAb1gAOWvZzp_cfU__jdP3vbarijrTRPtbVVQpi7d8T9tn0Lpa.c08O3XSzfIr6VhS; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Wed, 18 Feb 2026 08:00:13 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "2000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "1999339",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "19ms",
                "x-request-id": "req_f9a155e146db90c09c8d1745dff4db4c"
              }
            }
          }
        },
        "score": 0.9971,
        "success": true,
        "testCase": {
          "vars": {
            "source_text": "file://../input/normalize-broken-fountain.txt",
            "golden_path": "golden/normalize-signal-golden.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/normalization_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate this screenplay normalization. The input was broken Fountain\nformat with markdown artifacts (## headers, > blockquotes, escaped\ncharacters like \\-). The model should have fixed these issues while\npreserving the screenplay structure.\n\nKey quality criteria:\n1. Are scene headings ALL CAPS (not lowercase like the input)?\n2. Are character cues ALL CAPS (not lowercase like the input)?\n3. Are markdown artifacts removed (no ##, >, \\-, \\!)?\n4. Is dialogue preserved exactly?\n5. Are parentheticals formatted correctly?\n6. Is the V.O. designation preserved for Noah's line?\n7. Is the CUT TO: transition plain text, not a markdown header?\n\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 1,
        "vars": {
          "source_text": "file://../input/normalize-broken-fountain.txt",
          "golden_path": "golden/normalize-signal-golden.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9cfbd141da042c5d-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Wed, 18 Feb 2026 07:30:13 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "4877",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=1EwesniUZjMcZdCVKyamxGxrSyZPhUqEOkZfzII2Cyg-1771399808.3001957-1.0.1.1-RiviA_egcthQEuU9USfJQ5fbCRL3IjRBZrtKNIA8NET3gOA9YH975kBOdfObWLzAb1gAOWvZzp_cfU__jdP3vbarijrTRPtbVVQpi7d8T9tn0Lpa.c08O3XSzfIr6VhS; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Wed, 18 Feb 2026 08:00:13 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "2000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "1999339",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "19ms",
              "x-request-id": "req_f9a155e146db90c09c8d1745dff4db4c"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 1247,
            "prompt": 829,
            "completion": 418,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "character_cues=1.00 | content_completeness=1.00 | dialogue_preserved=1.00 | no_markdown=1.00 | scene_headings=1.00 | structure_quality=1.00",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/normalization_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate this screenplay normalization. The input was broken Fountain\nformat with markdown artifacts (## headers, > blockquotes, escaped\ncharacters like \\-). The model should have fixed these issues while\npreserving the screenplay structure.\n\nKey quality criteria:\n1. Are scene headings ALL CAPS (not lowercase like the input)?\n2. Are character cues ALL CAPS (not lowercase like the input)?\n3. Are markdown artifacts removed (no ##, >, \\-, \\!)?\n4. Is dialogue preserved exactly?\n5. Are parentheticals formatted correctly?\n6. Is the V.O. designation preserved for Noah's line?\n7. Is the CUT TO: transition plain text, not a markdown header?\n\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\n"
              },
              "pass": true,
              "score": 1,
              "reason": "Let me evaluate each criterion:\n\n1. **Scene headings ALL CAPS**: Yes - 'INT. COMMUNITY RADIO STUDIO', 'EXT. HILLTOP WATER TOWER - NIGHT', 'INT. STUDIO HALLWAY - NIGHT', 'INT. COMMUNITY RADIO STUDIO - CONTINUOUS' are all in ALL CAPS. ✓\n\n2. **Character cues ALL CAPS**: Yes - JUNE, NOAH, ARIA, KELL are all in ALL CAPS. ✓\n\n3. **Markdown artifacts removed**: There are no ##, >, \\-, \\! visible in the output. ✓\n\n4. **Dialogue preserved**: Without seeing the original input, I can't verify exact preservation, but the dialogue reads naturally and appears complete. The rubric mentions the input had markdown artifacts, and the output appears clean. Assuming preservation. ✓\n\n5. **Parentheticals formatted correctly**: '(trying to sound calm)' and '(half-smiling)' are on their own lines in parentheses, which is correct Fountain/screenplay format. ✓\n\n6. **V.O. designation preserved**: 'NOAH (V.O.)' is present. ✓\n\n7. **CUT TO: transition**: 'CUT TO:' appears as plain text, not as a markdown header. ✓\n\nThe output is clean, properly formatted screenplay text with no markdown artifacts visible. All scene headings and character names are in ALL CAPS. Parentheticals are correctly formatted. The V.O. designation is preserved. The CUT TO: is plain text. This appears to be a well-executed cleanup.",
              "tokensUsed": {
                "total": 1247,
                "prompt": 829,
                "completion": 418,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\nTitle: Signal in the Rain\\n\\nINT. COMMUNITY RADIO STUDIO\\n\\nA cramped studio hums with old gear. Rain taps the skylight in steady rhythm.\\n\\nAria threads a tape reel while Noah checks a cracked mixer. June balances two mugs of tea on a stack of scripts.\\n\\nJUNE\\nIf this works, half the valley hears us.\\n\\nNOAH\\n(trying to sound calm)\\nIf this works, we hear them too.\\n\\nARIA\\nThen we stop talking and start listening.\\n\\nThe ON AIR light flickers once, then goes dark.\\n\\nCUT TO:\\n\\nEXT. HILLTOP WATER TOWER - NIGHT\\n\\nWind lashes prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder with a portable antenna.\\n\\nFar below, town lights blink in uneven clusters.\\n\\nNOAH\\nI still vote for warm studios and bad coffee.\\n\\nARIA\\nWe lost warm. Keep the coffee dream alive.\\n\\nA burst of static jumps from the handheld receiver. They freeze.\\n\\nNOAH\\nDid you hear that?\\n\\nARIA\\nOnly enough to hope.\\n\\nThey lock the antenna in place and point it toward the dark ridge line.\\n\\nINT. STUDIO HALLWAY - NIGHT\\n\\nFluorescent lights buzz. Kell tapes handwritten evacuation arrows to the wall.\\n\\nKELL\\nGenerator room flooded. We can run one board, maybe two.\\n\\nJUNE\\nOne board is enough.\\n\\nKELL\\nFor news, maybe. For miracles?\\n\\nJUNE\\n(half-smiling)\\nWe schedule those after midnight.\\n\\nShe shoulders open the control-room door.\\n\\nINT. COMMUNITY RADIO STUDIO - CONTINUOUS\\n\\nMonitors glow back to life one by one.\\n\\nNOAH (V.O.)\\nTower looks stable. Feed us a carrier tone.\\n\\nJUNE\\nGood evening, Red Creek. If you're out there, key once and wait.\\n\\nSilence. Then three tiny chirps answer in sequence. The room goes still.\\n</Output>\\n<Rubric>\\nEvaluate this screenplay normalization. The input was broken Fountain\\nformat with markdown artifacts (## headers, > blockquotes, escaped\\ncharacters like \\\\-). The model should have fixed these issues while\\npreserving the screenplay structure.\\n\\nKey quality criteria:\\n1. Are scene headings ALL CAPS (not lowercase like the input)?\\n2. Are character cues ALL CAPS (not lowercase like the input)?\\n3. Are markdown artifacts removed (no ##, >, \\\\-, \\\\!)?\\n4. Is dialogue preserved exactly?\\n5. Are parentheticals formatted correctly?\\n6. Is the V.O. designation preserved for Noah's line?\\n7. Is the CUT TO: transition plain text, not a markdown header?\\n\\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "a13679ee-54b0-455c-8250-757e88cd511e",
        "latencyMs": 4080,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\nTitle: Signal in the Rain\n\nint. community radio studio\n\nA cramped studio hums with old gear. Rain taps the skylight in steady rhythm.\naria threads a tape reel while noah checks a cracked mixer. june balances two mugs of tea on a stack of scripts.\n\njune\nIf this works, half the valley hears us.\n\nnoah\n> (trying to sound calm)\nIf this works, we hear them too.\n\naria\nThen we stop talking and start listening.\n\nThe ON AIR light flickers once, then goes dark.\n\n## CUT TO:\n\next. hilltop water tower \\- night\n\nWind lashes prayer flags tied to the guardrail. aria and noah climb a rusted service ladder with a portable antenna.\nFar below, town lights blink in uneven clusters.\n\nnoah\nI still vote for warm studios and bad coffee.\n\naria\nWe lost warm. Keep the coffee dream alive.\n\nA burst of static jumps from the handheld receiver. They freeze.\n\nnoah\nDid you hear that?\n\naria\nOnly enough to hope.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nint. studio hallway \\- night\n\nFluorescent lights buzz. kell tapes handwritten evacuation arrows to the wall.\n\nkell\nGenerator room flooded. We can run one board, maybe two.\n\njune\nOne board is enough.\n\nkell\nFor news, maybe. For miracles?\n\njune\n> (half\\-smiling)\nWe schedule those after midnight.\n\nShe shoulders open the control\\-room door.\n\nint. community radio studio \\- continuous\n\nMonitors glow back to life one by one.\n\nnoah (V.O.)\nTower looks stable. Feed us a carrier tone.\n\njune\nGood evening, Red Creek. If you're out there, key once and wait.\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.\n==========",
          "label": "prompts/normalization.txt: You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "7bc79ce1f5846d8728590285cab08ec96b22d867e2d8ac7b1dd750e47494dfc4",
        "promptIdx": 5,
        "provider": {
          "id": "anthropic:messages:claude-sonnet-4-6",
          "label": "Claude Sonnet 4.6"
        },
        "response": {
          "output": "Title: Signal in the Rain\n\nINT. COMMUNITY RADIO STUDIO\n\nA cramped studio hums with old gear. Rain taps the skylight in steady rhythm.\n\nAria threads a tape reel while Noah checks a cracked mixer. June balances two mugs of tea on a stack of scripts.\n\nJUNE\nIf this works, half the valley hears us.\n\nNOAH\n(trying to sound calm)\nIf this works, we hear them too.\n\nARIA\nThen we stop talking and start listening.\n\nThe ON AIR light flickers once, then goes dark.\n\nCUT TO:\n\nEXT. HILLTOP WATER TOWER - NIGHT\n\nWind lashes prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder with a portable antenna.\n\nFar below, town lights blink in uneven clusters.\n\nNOAH\nI still vote for warm studios and bad coffee.\n\nARIA\nWe lost warm. Keep the coffee dream alive.\n\nA burst of static jumps from the handheld receiver. They freeze.\n\nNOAH\nDid you hear that?\n\nARIA\nOnly enough to hope.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nINT. STUDIO HALLWAY - NIGHT\n\nFluorescent lights buzz. Kell tapes handwritten evacuation arrows to the wall.\n\nKELL\nGenerator room flooded. We can run one board, maybe two.\n\nJUNE\nOne board is enough.\n\nKELL\nFor news, maybe. For miracles?\n\nJUNE\n(half-smiling)\nWe schedule those after midnight.\n\nShe shoulders open the control-room door.\n\nINT. COMMUNITY RADIO STUDIO - CONTINUOUS\n\nMonitors glow back to life one by one.\n\nNOAH (V.O.)\nTower looks stable. Feed us a carrier tone.\n\nJUNE\nGood evening, Red Creek. If you're out there, key once and wait.\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.",
          "tokenUsage": {
            "total": 1139,
            "prompt": 686,
            "completion": 453
          },
          "finishReason": "stop"
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "source_text": "file://../input/normalize-broken-fountain.txt",
            "golden_path": "golden/normalize-signal-golden.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/normalization_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate this screenplay normalization. The input was broken Fountain\nformat with markdown artifacts (## headers, > blockquotes, escaped\ncharacters like \\-). The model should have fixed these issues while\npreserving the screenplay structure.\n\nKey quality criteria:\n1. Are scene headings ALL CAPS (not lowercase like the input)?\n2. Are character cues ALL CAPS (not lowercase like the input)?\n3. Are markdown artifacts removed (no ##, >, \\-, \\!)?\n4. Is dialogue preserved exactly?\n5. Are parentheticals formatted correctly?\n6. Is the V.O. designation preserved for Noah's line?\n7. Is the CUT TO: transition plain text, not a markdown header?\n\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 1,
        "vars": {
          "source_text": "file://../input/normalize-broken-fountain.txt",
          "golden_path": "golden/normalize-signal-golden.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0.008853,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 1247,
            "prompt": 829,
            "completion": 418,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "character_cues=1.00 | content_completeness=1.00 | dialogue_preserved=1.00 | no_markdown=1.00 | scene_headings=1.00 | structure_quality=1.00",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/normalization_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate this screenplay normalization. The input was broken Fountain\nformat with markdown artifacts (## headers, > blockquotes, escaped\ncharacters like \\-). The model should have fixed these issues while\npreserving the screenplay structure.\n\nKey quality criteria:\n1. Are scene headings ALL CAPS (not lowercase like the input)?\n2. Are character cues ALL CAPS (not lowercase like the input)?\n3. Are markdown artifacts removed (no ##, >, \\-, \\!)?\n4. Is dialogue preserved exactly?\n5. Are parentheticals formatted correctly?\n6. Is the V.O. designation preserved for Noah's line?\n7. Is the CUT TO: transition plain text, not a markdown header?\n\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\n"
              },
              "pass": true,
              "score": 1,
              "reason": "Let me evaluate each criterion:\n\n1. **Scene headings ALL CAPS**: Yes - 'INT. COMMUNITY RADIO STUDIO', 'EXT. HILLTOP WATER TOWER - NIGHT', 'INT. STUDIO HALLWAY - NIGHT', 'INT. COMMUNITY RADIO STUDIO - CONTINUOUS' are all in ALL CAPS. ✓\n\n2. **Character cues ALL CAPS**: Yes - JUNE, NOAH, ARIA, KELL are all in ALL CAPS. ✓\n\n3. **Markdown artifacts removed**: There are no ##, >, \\-, \\! visible in the output. ✓\n\n4. **Dialogue preserved**: Without seeing the original input, I can't verify exact preservation, but the dialogue reads naturally and appears complete. The rubric mentions the input had markdown artifacts, and the output appears clean. Assuming preservation. ✓\n\n5. **Parentheticals formatted correctly**: '(trying to sound calm)' and '(half-smiling)' are on their own lines in parentheses, which is correct Fountain/screenplay format. ✓\n\n6. **V.O. designation preserved**: 'NOAH (V.O.)' is present. ✓\n\n7. **CUT TO: transition**: 'CUT TO:' appears as plain text, not as a markdown header. ✓\n\nThe output is clean, properly formatted screenplay text with no markdown artifacts visible. All scene headings and character names are in ALL CAPS. Parentheticals are correctly formatted. The V.O. designation is preserved. The CUT TO: is plain text. This appears to be a well-executed cleanup.",
              "tokensUsed": {
                "total": 1247,
                "prompt": 829,
                "completion": 418,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\nTitle: Signal in the Rain\\n\\nINT. COMMUNITY RADIO STUDIO\\n\\nA cramped studio hums with old gear. Rain taps the skylight in steady rhythm.\\n\\nAria threads a tape reel while Noah checks a cracked mixer. June balances two mugs of tea on a stack of scripts.\\n\\nJUNE\\nIf this works, half the valley hears us.\\n\\nNOAH\\n(trying to sound calm)\\nIf this works, we hear them too.\\n\\nARIA\\nThen we stop talking and start listening.\\n\\nThe ON AIR light flickers once, then goes dark.\\n\\nCUT TO:\\n\\nEXT. HILLTOP WATER TOWER - NIGHT\\n\\nWind lashes prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder with a portable antenna.\\n\\nFar below, town lights blink in uneven clusters.\\n\\nNOAH\\nI still vote for warm studios and bad coffee.\\n\\nARIA\\nWe lost warm. Keep the coffee dream alive.\\n\\nA burst of static jumps from the handheld receiver. They freeze.\\n\\nNOAH\\nDid you hear that?\\n\\nARIA\\nOnly enough to hope.\\n\\nThey lock the antenna in place and point it toward the dark ridge line.\\n\\nINT. STUDIO HALLWAY - NIGHT\\n\\nFluorescent lights buzz. Kell tapes handwritten evacuation arrows to the wall.\\n\\nKELL\\nGenerator room flooded. We can run one board, maybe two.\\n\\nJUNE\\nOne board is enough.\\n\\nKELL\\nFor news, maybe. For miracles?\\n\\nJUNE\\n(half-smiling)\\nWe schedule those after midnight.\\n\\nShe shoulders open the control-room door.\\n\\nINT. COMMUNITY RADIO STUDIO - CONTINUOUS\\n\\nMonitors glow back to life one by one.\\n\\nNOAH (V.O.)\\nTower looks stable. Feed us a carrier tone.\\n\\nJUNE\\nGood evening, Red Creek. If you're out there, key once and wait.\\n\\nSilence. Then three tiny chirps answer in sequence. The room goes still.\\n</Output>\\n<Rubric>\\nEvaluate this screenplay normalization. The input was broken Fountain\\nformat with markdown artifacts (## headers, > blockquotes, escaped\\ncharacters like \\\\-). The model should have fixed these issues while\\npreserving the screenplay structure.\\n\\nKey quality criteria:\\n1. Are scene headings ALL CAPS (not lowercase like the input)?\\n2. Are character cues ALL CAPS (not lowercase like the input)?\\n3. Are markdown artifacts removed (no ##, >, \\\\-, \\\\!)?\\n4. Is dialogue preserved exactly?\\n5. Are parentheticals formatted correctly?\\n6. Is the V.O. designation preserved for Noah's line?\\n7. Is the CUT TO: transition plain text, not a markdown header?\\n\\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "73490c26-23c7-40d7-84be-9f0e8e3e4171",
        "latencyMs": 4887,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\nTitle: Signal in the Rain\n\nint. community radio studio\n\nA cramped studio hums with old gear. Rain taps the skylight in steady rhythm.\naria threads a tape reel while noah checks a cracked mixer. june balances two mugs of tea on a stack of scripts.\n\njune\nIf this works, half the valley hears us.\n\nnoah\n> (trying to sound calm)\nIf this works, we hear them too.\n\naria\nThen we stop talking and start listening.\n\nThe ON AIR light flickers once, then goes dark.\n\n## CUT TO:\n\next. hilltop water tower \\- night\n\nWind lashes prayer flags tied to the guardrail. aria and noah climb a rusted service ladder with a portable antenna.\nFar below, town lights blink in uneven clusters.\n\nnoah\nI still vote for warm studios and bad coffee.\n\naria\nWe lost warm. Keep the coffee dream alive.\n\nA burst of static jumps from the handheld receiver. They freeze.\n\nnoah\nDid you hear that?\n\naria\nOnly enough to hope.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nint. studio hallway \\- night\n\nFluorescent lights buzz. kell tapes handwritten evacuation arrows to the wall.\n\nkell\nGenerator room flooded. We can run one board, maybe two.\n\njune\nOne board is enough.\n\nkell\nFor news, maybe. For miracles?\n\njune\n> (half\\-smiling)\nWe schedule those after midnight.\n\nShe shoulders open the control\\-room door.\n\nint. community radio studio \\- continuous\n\nMonitors glow back to life one by one.\n\nnoah (V.O.)\nTower looks stable. Feed us a carrier tone.\n\njune\nGood evening, Red Creek. If you're out there, key once and wait.\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.\n==========",
          "label": "prompts/normalization.txt: You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "7bc79ce1f5846d8728590285cab08ec96b22d867e2d8ac7b1dd750e47494dfc4",
        "promptIdx": 4,
        "provider": {
          "id": "anthropic:messages:claude-sonnet-4-5-20250929",
          "label": "Claude Sonnet 4.5"
        },
        "response": {
          "output": "Title: Signal in the Rain\n\nINT. COMMUNITY RADIO STUDIO\n\nA cramped studio hums with old gear. Rain taps the skylight in steady rhythm.\n\nAria threads a tape reel while Noah checks a cracked mixer. June balances two mugs of tea on a stack of scripts.\n\nJUNE\nIf this works, half the valley hears us.\n\nNOAH\n(trying to sound calm)\nIf this works, we hear them too.\n\nARIA\nThen we stop talking and start listening.\n\nThe ON AIR light flickers once, then goes dark.\n\nCUT TO:\n\nEXT. HILLTOP WATER TOWER - NIGHT\n\nWind lashes prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder with a portable antenna.\n\nFar below, town lights blink in uneven clusters.\n\nNOAH\nI still vote for warm studios and bad coffee.\n\nARIA\nWe lost warm. Keep the coffee dream alive.\n\nA burst of static jumps from the handheld receiver. They freeze.\n\nNOAH\nDid you hear that?\n\nARIA\nOnly enough to hope.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nINT. STUDIO HALLWAY - NIGHT\n\nFluorescent lights buzz. Kell tapes handwritten evacuation arrows to the wall.\n\nKELL\nGenerator room flooded. We can run one board, maybe two.\n\nJUNE\nOne board is enough.\n\nKELL\nFor news, maybe. For miracles?\n\nJUNE\n(half-smiling)\nWe schedule those after midnight.\n\nShe shoulders open the control-room door.\n\nINT. COMMUNITY RADIO STUDIO - CONTINUOUS\n\nMonitors glow back to life one by one.\n\nNOAH (V.O.)\nTower looks stable. Feed us a carrier tone.\n\nJUNE\nGood evening, Red Creek. If you're out there, key once and wait.\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.",
          "tokenUsage": {
            "total": 1139,
            "prompt": 686,
            "completion": 453
          },
          "finishReason": "stop",
          "cost": 0.008853
        },
        "score": 1,
        "success": true,
        "testCase": {
          "vars": {
            "source_text": "file://../input/normalize-broken-fountain.txt",
            "golden_path": "golden/normalize-signal-golden.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/normalization_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate this screenplay normalization. The input was broken Fountain\nformat with markdown artifacts (## headers, > blockquotes, escaped\ncharacters like \\-). The model should have fixed these issues while\npreserving the screenplay structure.\n\nKey quality criteria:\n1. Are scene headings ALL CAPS (not lowercase like the input)?\n2. Are character cues ALL CAPS (not lowercase like the input)?\n3. Are markdown artifacts removed (no ##, >, \\-, \\!)?\n4. Is dialogue preserved exactly?\n5. Are parentheticals formatted correctly?\n6. Is the V.O. designation preserved for Noah's line?\n7. Is the CUT TO: transition plain text, not a markdown header?\n\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 1,
        "vars": {
          "source_text": "file://../input/normalize-broken-fountain.txt",
          "golden_path": "golden/normalize-signal-golden.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0.0064645,
        "gradingResult": {
          "pass": true,
          "score": 0.875,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 1618,
            "prompt": 826,
            "completion": 792,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "character_cues=1.00 | content_completeness=1.00 | dialogue_preserved=1.00 | no_markdown=1.00 | scene_headings=1.00 | structure_quality=1.00",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/normalization_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate this screenplay normalization. The input was broken Fountain\nformat with markdown artifacts (## headers, > blockquotes, escaped\ncharacters like \\-). The model should have fixed these issues while\npreserving the screenplay structure.\n\nKey quality criteria:\n1. Are scene headings ALL CAPS (not lowercase like the input)?\n2. Are character cues ALL CAPS (not lowercase like the input)?\n3. Are markdown artifacts removed (no ##, >, \\-, \\!)?\n4. Is dialogue preserved exactly?\n5. Are parentheticals formatted correctly?\n6. Is the V.O. designation preserved for Noah's line?\n7. Is the CUT TO: transition plain text, not a markdown header?\n\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\n"
              },
              "pass": true,
              "score": 0.75,
              "reason": "All seven explicit rubric criteria are met: scene headings are ALL CAPS, character cues above dialogue are ALL CAPS, no markdown artifacts (##, >, \\-, \\!) remain, dialogue appears preserved, parentheticals are correctly formatted, NOAH (V.O.) is preserved, and CUT TO: is plain text. However, character names in action/description lines (aria, noah, june, kell) are lowercase rather than ALL CAPS, which is a notable screenplay formatting issue but not explicitly listed in the rubric's key criteria. Since the rubric says 'every markdown artifact should be gone' and focuses on the seven listed criteria, the output largely passes but the lowercase action-line names represent an imperfect cleanup.",
              "tokensUsed": {
                "total": 1618,
                "prompt": 826,
                "completion": 792,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\nTitle: Signal in the Rain\\n\\nINT. COMMUNITY RADIO STUDIO\\n\\nA cramped studio hums with old gear. Rain taps the skylight in steady rhythm.\\naria threads a tape reel while noah checks a cracked mixer. june balances two mugs of tea on a stack of scripts.\\n\\nJUNE\\nIf this works, half the valley hears us.\\n\\nNOAH\\n(trying to sound calm)\\nIf this works, we hear them too.\\n\\nARIA\\nThen we stop talking and start listening.\\n\\nThe ON AIR light flickers once, then goes dark.\\n\\nCUT TO:\\n\\nEXT. HILLTOP WATER TOWER - NIGHT\\n\\nWind lashes prayer flags tied to the guardrail. aria and noah climb a rusted service ladder with a portable antenna.\\nFar below, town lights blink in uneven clusters.\\n\\nNOAH\\nI still vote for warm studios and bad coffee.\\n\\nARIA\\nWe lost warm. Keep the coffee dream alive.\\n\\nA burst of static jumps from the handheld receiver. They freeze.\\n\\nNOAH\\nDid you hear that?\\n\\nARIA\\nOnly enough to hope.\\n\\nThey lock the antenna in place and point it toward the dark ridge line.\\n\\nINT. STUDIO HALLWAY - NIGHT\\n\\nFluorescent lights buzz. kell tapes handwritten evacuation arrows to the wall.\\n\\nKELL\\nGenerator room flooded. We can run one board, maybe two.\\n\\nJUNE\\nOne board is enough.\\n\\nKELL\\nFor news, maybe. For miracles?\\n\\nJUNE\\n(half-smiling)\\nWe schedule those after midnight.\\n\\nShe shoulders open the control-room door.\\n\\nINT. COMMUNITY RADIO STUDIO - CONTINUOUS\\n\\nMonitors glow back to life one by one.\\n\\nNOAH (V.O.)\\nTower looks stable. Feed us a carrier tone.\\n\\nJUNE\\nGood evening, Red Creek. If you're out there, key once and wait.\\n\\nSilence. Then three tiny chirps answer in sequence. The room goes still.\\n</Output>\\n<Rubric>\\nEvaluate this screenplay normalization. The input was broken Fountain\\nformat with markdown artifacts (## headers, > blockquotes, escaped\\ncharacters like \\\\-). The model should have fixed these issues while\\npreserving the screenplay structure.\\n\\nKey quality criteria:\\n1. Are scene headings ALL CAPS (not lowercase like the input)?\\n2. Are character cues ALL CAPS (not lowercase like the input)?\\n3. Are markdown artifacts removed (no ##, >, \\\\-, \\\\!)?\\n4. Is dialogue preserved exactly?\\n5. Are parentheticals formatted correctly?\\n6. Is the V.O. designation preserved for Noah's line?\\n7. Is the CUT TO: transition plain text, not a markdown header?\\n\\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "a487b767-efb3-4c03-8e70-185697838b32",
        "latencyMs": 4686,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\nTitle: Signal in the Rain\n\nint. community radio studio\n\nA cramped studio hums with old gear. Rain taps the skylight in steady rhythm.\naria threads a tape reel while noah checks a cracked mixer. june balances two mugs of tea on a stack of scripts.\n\njune\nIf this works, half the valley hears us.\n\nnoah\n> (trying to sound calm)\nIf this works, we hear them too.\n\naria\nThen we stop talking and start listening.\n\nThe ON AIR light flickers once, then goes dark.\n\n## CUT TO:\n\next. hilltop water tower \\- night\n\nWind lashes prayer flags tied to the guardrail. aria and noah climb a rusted service ladder with a portable antenna.\nFar below, town lights blink in uneven clusters.\n\nnoah\nI still vote for warm studios and bad coffee.\n\naria\nWe lost warm. Keep the coffee dream alive.\n\nA burst of static jumps from the handheld receiver. They freeze.\n\nnoah\nDid you hear that?\n\naria\nOnly enough to hope.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nint. studio hallway \\- night\n\nFluorescent lights buzz. kell tapes handwritten evacuation arrows to the wall.\n\nkell\nGenerator room flooded. We can run one board, maybe two.\n\njune\nOne board is enough.\n\nkell\nFor news, maybe. For miracles?\n\njune\n> (half\\-smiling)\nWe schedule those after midnight.\n\nShe shoulders open the control\\-room door.\n\nint. community radio studio \\- continuous\n\nMonitors glow back to life one by one.\n\nnoah (V.O.)\nTower looks stable. Feed us a carrier tone.\n\njune\nGood evening, Red Creek. If you're out there, key once and wait.\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.\n==========",
          "label": "prompts/normalization.txt: You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "7bc79ce1f5846d8728590285cab08ec96b22d867e2d8ac7b1dd750e47494dfc4",
        "promptIdx": 6,
        "provider": {
          "id": "openai:gpt-5.2",
          "label": "GPT-5.2"
        },
        "response": {
          "output": "Title: Signal in the Rain\n\nINT. COMMUNITY RADIO STUDIO\n\nA cramped studio hums with old gear. Rain taps the skylight in steady rhythm.\naria threads a tape reel while noah checks a cracked mixer. june balances two mugs of tea on a stack of scripts.\n\nJUNE\nIf this works, half the valley hears us.\n\nNOAH\n(trying to sound calm)\nIf this works, we hear them too.\n\nARIA\nThen we stop talking and start listening.\n\nThe ON AIR light flickers once, then goes dark.\n\nCUT TO:\n\nEXT. HILLTOP WATER TOWER - NIGHT\n\nWind lashes prayer flags tied to the guardrail. aria and noah climb a rusted service ladder with a portable antenna.\nFar below, town lights blink in uneven clusters.\n\nNOAH\nI still vote for warm studios and bad coffee.\n\nARIA\nWe lost warm. Keep the coffee dream alive.\n\nA burst of static jumps from the handheld receiver. They freeze.\n\nNOAH\nDid you hear that?\n\nARIA\nOnly enough to hope.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nINT. STUDIO HALLWAY - NIGHT\n\nFluorescent lights buzz. kell tapes handwritten evacuation arrows to the wall.\n\nKELL\nGenerator room flooded. We can run one board, maybe two.\n\nJUNE\nOne board is enough.\n\nKELL\nFor news, maybe. For miracles?\n\nJUNE\n(half-smiling)\nWe schedule those after midnight.\n\nShe shoulders open the control-room door.\n\nINT. COMMUNITY RADIO STUDIO - CONTINUOUS\n\nMonitors glow back to life one by one.\n\nNOAH (V.O.)\nTower looks stable. Feed us a carrier tone.\n\nJUNE\nGood evening, Red Creek. If you're out there, key once and wait.\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.",
          "tokenUsage": {
            "total": 992,
            "prompt": 606,
            "completion": 386,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 4686,
          "finishReason": "stop",
          "cost": 0.0064645,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9cfbd19529c350df-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Wed, 18 Feb 2026 07:30:26 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "4549",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=jByjVd38Fj0GRKhiHLZ0GuCOAfrzUODV33rrzypPO9A-1771399821.6210992-1.0.1.1-OwaeEkeuGAkQcWJ2FNYo2TU0fBCTaJA3YiuUTRQtXgai04sMfRaWw.Jgm64bzozCwRirutAM8czPvBRGBriwYapfRZ1TdkO5usNzVacxaC.8uz_hzsTj7rNXRKrvnTwc; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Wed, 18 Feb 2026 08:00:26 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "4000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "3999339",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "9ms",
                "x-request-id": "req_f191c5fcfc5e48f8aed4b82637c3ee0e"
              }
            }
          }
        },
        "score": 0.875,
        "success": true,
        "testCase": {
          "vars": {
            "source_text": "file://../input/normalize-broken-fountain.txt",
            "golden_path": "golden/normalize-signal-golden.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/normalization_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate this screenplay normalization. The input was broken Fountain\nformat with markdown artifacts (## headers, > blockquotes, escaped\ncharacters like \\-). The model should have fixed these issues while\npreserving the screenplay structure.\n\nKey quality criteria:\n1. Are scene headings ALL CAPS (not lowercase like the input)?\n2. Are character cues ALL CAPS (not lowercase like the input)?\n3. Are markdown artifacts removed (no ##, >, \\-, \\!)?\n4. Is dialogue preserved exactly?\n5. Are parentheticals formatted correctly?\n6. Is the V.O. designation preserved for Noah's line?\n7. Is the CUT TO: transition plain text, not a markdown header?\n\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 1,
        "vars": {
          "source_text": "file://../input/normalize-broken-fountain.txt",
          "golden_path": "golden/normalize-signal-golden.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9cfbd19529c350df-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Wed, 18 Feb 2026 07:30:26 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "4549",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=jByjVd38Fj0GRKhiHLZ0GuCOAfrzUODV33rrzypPO9A-1771399821.6210992-1.0.1.1-OwaeEkeuGAkQcWJ2FNYo2TU0fBCTaJA3YiuUTRQtXgai04sMfRaWw.Jgm64bzozCwRirutAM8czPvBRGBriwYapfRZ1TdkO5usNzVacxaC.8uz_hzsTj7rNXRKrvnTwc; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Wed, 18 Feb 2026 08:00:26 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "4000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "3999339",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "9ms",
              "x-request-id": "req_f191c5fcfc5e48f8aed4b82637c3ee0e"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0.014755,
        "gradingResult": {
          "pass": true,
          "score": 0.975,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 1291,
            "prompt": 829,
            "completion": 462,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "character_cues=1.00 | content_completeness=1.00 | dialogue_preserved=1.00 | no_markdown=1.00 | scene_headings=1.00 | structure_quality=1.00",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/normalization_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate this screenplay normalization. The input was broken Fountain\nformat with markdown artifacts (## headers, > blockquotes, escaped\ncharacters like \\-). The model should have fixed these issues while\npreserving the screenplay structure.\n\nKey quality criteria:\n1. Are scene headings ALL CAPS (not lowercase like the input)?\n2. Are character cues ALL CAPS (not lowercase like the input)?\n3. Are markdown artifacts removed (no ##, >, \\-, \\!)?\n4. Is dialogue preserved exactly?\n5. Are parentheticals formatted correctly?\n6. Is the V.O. designation preserved for Noah's line?\n7. Is the CUT TO: transition plain text, not a markdown header?\n\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\n"
              },
              "pass": true,
              "score": 0.95,
              "reason": "Let me evaluate each criterion:\n\n1. **Scene headings ALL CAPS**: Yes - 'INT. COMMUNITY RADIO STUDIO', 'EXT. HILLTOP WATER TOWER - NIGHT', 'INT. STUDIO HALLWAY - NIGHT', 'INT. COMMUNITY RADIO STUDIO - CONTINUOUS' are all in ALL CAPS. ✓\n\n2. **Character cues ALL CAPS**: Yes - JUNE, NOAH, ARIA, KELL are all in ALL CAPS. ✓\n\n3. **Markdown artifacts removed**: There are no ##, >, \\-, \\! visible in the output. ✓\n\n4. **Dialogue preserved**: Without seeing the original input, I can't verify exact preservation, but the dialogue reads naturally and appears complete. The rubric mentions the input had markdown artifacts, and the output appears clean. Assuming preserved. ✓\n\n5. **Parentheticals formatted correctly**: '(trying to sound calm)' and '(half-smiling)' are on their own lines, in parentheses, under character names. ✓\n\n6. **V.O. designation preserved**: 'NOAH (V.O.)' is present. ✓\n\n7. **CUT TO: transition**: 'CUT TO:' appears as plain text, not a markdown header. ✓\n\nAll seven criteria are met. The output is clean Fountain/screenplay format with no markdown artifacts, proper ALL CAPS for scene headings and character cues, correct parentheticals, and preserved V.O. designation.\n\nHowever, I should note one concern: I don't have the original input to verify that dialogue was preserved *exactly*. The rubric says the input was broken Fountain format, and the output appears to be a properly cleaned version. Given that all visible formatting criteria are met, this scores very well.",
              "tokensUsed": {
                "total": 1291,
                "prompt": 829,
                "completion": 462,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\nTitle: Signal in the Rain\\n\\nINT. COMMUNITY RADIO STUDIO\\n\\nA cramped studio hums with old gear. Rain taps the skylight in steady rhythm.\\n\\nAria threads a tape reel while Noah checks a cracked mixer. June balances two mugs of tea on a stack of scripts.\\n\\nJUNE\\nIf this works, half the valley hears us.\\n\\nNOAH\\n(trying to sound calm)\\nIf this works, we hear them too.\\n\\nARIA\\nThen we stop talking and start listening.\\n\\nThe ON AIR light flickers once, then goes dark.\\n\\nCUT TO:\\n\\nEXT. HILLTOP WATER TOWER - NIGHT\\n\\nWind lashes prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder with a portable antenna.\\n\\nFar below, town lights blink in uneven clusters.\\n\\nNOAH\\nI still vote for warm studios and bad coffee.\\n\\nARIA\\nWe lost warm. Keep the coffee dream alive.\\n\\nA burst of static jumps from the handheld receiver. They freeze.\\n\\nNOAH\\nDid you hear that?\\n\\nARIA\\nOnly enough to hope.\\n\\nThey lock the antenna in place and point it toward the dark ridge line.\\n\\nINT. STUDIO HALLWAY - NIGHT\\n\\nFluorescent lights buzz. Kell tapes handwritten evacuation arrows to the wall.\\n\\nKELL\\nGenerator room flooded. We can run one board, maybe two.\\n\\nJUNE\\nOne board is enough.\\n\\nKELL\\nFor news, maybe. For miracles?\\n\\nJUNE\\n(half-smiling)\\nWe schedule those after midnight.\\n\\nShe shoulders open the control-room door.\\n\\nINT. COMMUNITY RADIO STUDIO - CONTINUOUS\\n\\nMonitors glow back to life one by one.\\n\\nNOAH (V.O.)\\nTower looks stable. Feed us a carrier tone.\\n\\nJUNE\\nGood evening, Red Creek. If you're out there, key once and wait.\\n\\nSilence. Then three tiny chirps answer in sequence. The room goes still.\\n</Output>\\n<Rubric>\\nEvaluate this screenplay normalization. The input was broken Fountain\\nformat with markdown artifacts (## headers, > blockquotes, escaped\\ncharacters like \\\\-). The model should have fixed these issues while\\npreserving the screenplay structure.\\n\\nKey quality criteria:\\n1. Are scene headings ALL CAPS (not lowercase like the input)?\\n2. Are character cues ALL CAPS (not lowercase like the input)?\\n3. Are markdown artifacts removed (no ##, >, \\\\-, \\\\!)?\\n4. Is dialogue preserved exactly?\\n5. Are parentheticals formatted correctly?\\n6. Is the V.O. designation preserved for Noah's line?\\n7. Is the CUT TO: transition plain text, not a markdown header?\\n\\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "757ebcb4-f6b3-44c6-9c06-e01e46d97b22",
        "latencyMs": 5231,
        "namedScores": {},
        "prompt": {
          "raw": "You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\nTitle: Signal in the Rain\n\nint. community radio studio\n\nA cramped studio hums with old gear. Rain taps the skylight in steady rhythm.\naria threads a tape reel while noah checks a cracked mixer. june balances two mugs of tea on a stack of scripts.\n\njune\nIf this works, half the valley hears us.\n\nnoah\n> (trying to sound calm)\nIf this works, we hear them too.\n\naria\nThen we stop talking and start listening.\n\nThe ON AIR light flickers once, then goes dark.\n\n## CUT TO:\n\next. hilltop water tower \\- night\n\nWind lashes prayer flags tied to the guardrail. aria and noah climb a rusted service ladder with a portable antenna.\nFar below, town lights blink in uneven clusters.\n\nnoah\nI still vote for warm studios and bad coffee.\n\naria\nWe lost warm. Keep the coffee dream alive.\n\nA burst of static jumps from the handheld receiver. They freeze.\n\nnoah\nDid you hear that?\n\naria\nOnly enough to hope.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nint. studio hallway \\- night\n\nFluorescent lights buzz. kell tapes handwritten evacuation arrows to the wall.\n\nkell\nGenerator room flooded. We can run one board, maybe two.\n\njune\nOne board is enough.\n\nkell\nFor news, maybe. For miracles?\n\njune\n> (half\\-smiling)\nWe schedule those after midnight.\n\nShe shoulders open the control\\-room door.\n\nint. community radio studio \\- continuous\n\nMonitors glow back to life one by one.\n\nnoah (V.O.)\nTower looks stable. Feed us a carrier tone.\n\njune\nGood evening, Red Creek. If you're out there, key once and wait.\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.\n==========",
          "label": "prompts/normalization.txt: You are a professional script supervisor normalizing creative writing into standard Fountain screenplay format.\n\nYour task: convert the input text into properly formatted Fountain screenplay format.\n\nFountain format rules:\n- Scene headings: INT./EXT. on their own line, ALL CAPS\n- Character cues: ALL CAPS on their own line, preceded by blank line\n- Dialogue: plain text on lines immediately after character cue\n- Parentheticals: (lowercase in parens) on their own line between character cue and dialogue\n- Action: plain text paragraphs separated by blank lines\n- Do NOT use markdown formatting (no >, *, #, or blockquotes)\n- Do NOT escape special characters (no \\- or \\!)\n- Transitions (CUT TO:, DISSOLVE TO:, etc.) should be plain text, not markdown headers\n\nPreserve the author's voice, dialogue, and narrative content exactly. Do not invent new dialogue or action. Fix only structural and formatting issues.\n\nReturn ONLY the normalized screenplay text. No explanations, no JSON wrapping, no markdown code fences.\n\n==========\nINPUT TEXT:\n{{source_text}}\n==========",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "7bc79ce1f5846d8728590285cab08ec96b22d867e2d8ac7b1dd750e47494dfc4",
        "promptIdx": 7,
        "provider": {
          "id": "anthropic:messages:claude-opus-4-6",
          "label": "Claude Opus 4.6"
        },
        "response": {
          "output": "Title: Signal in the Rain\n\nINT. COMMUNITY RADIO STUDIO\n\nA cramped studio hums with old gear. Rain taps the skylight in steady rhythm.\n\nAria threads a tape reel while Noah checks a cracked mixer. June balances two mugs of tea on a stack of scripts.\n\nJUNE\nIf this works, half the valley hears us.\n\nNOAH\n(trying to sound calm)\nIf this works, we hear them too.\n\nARIA\nThen we stop talking and start listening.\n\nThe ON AIR light flickers once, then goes dark.\n\nCUT TO:\n\nEXT. HILLTOP WATER TOWER - NIGHT\n\nWind lashes prayer flags tied to the guardrail. Aria and Noah climb a rusted service ladder with a portable antenna.\n\nFar below, town lights blink in uneven clusters.\n\nNOAH\nI still vote for warm studios and bad coffee.\n\nARIA\nWe lost warm. Keep the coffee dream alive.\n\nA burst of static jumps from the handheld receiver. They freeze.\n\nNOAH\nDid you hear that?\n\nARIA\nOnly enough to hope.\n\nThey lock the antenna in place and point it toward the dark ridge line.\n\nINT. STUDIO HALLWAY - NIGHT\n\nFluorescent lights buzz. Kell tapes handwritten evacuation arrows to the wall.\n\nKELL\nGenerator room flooded. We can run one board, maybe two.\n\nJUNE\nOne board is enough.\n\nKELL\nFor news, maybe. For miracles?\n\nJUNE\n(half-smiling)\nWe schedule those after midnight.\n\nShe shoulders open the control-room door.\n\nINT. COMMUNITY RADIO STUDIO - CONTINUOUS\n\nMonitors glow back to life one by one.\n\nNOAH (V.O.)\nTower looks stable. Feed us a carrier tone.\n\nJUNE\nGood evening, Red Creek. If you're out there, key once and wait.\n\nSilence. Then three tiny chirps answer in sequence. The room goes still.",
          "tokenUsage": {
            "total": 1139,
            "prompt": 686,
            "completion": 453
          },
          "finishReason": "stop",
          "cost": 0.014755
        },
        "score": 0.975,
        "success": true,
        "testCase": {
          "vars": {
            "source_text": "file://../input/normalize-broken-fountain.txt",
            "golden_path": "golden/normalize-signal-golden.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/normalization_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate this screenplay normalization. The input was broken Fountain\nformat with markdown artifacts (## headers, > blockquotes, escaped\ncharacters like \\-). The model should have fixed these issues while\npreserving the screenplay structure.\n\nKey quality criteria:\n1. Are scene headings ALL CAPS (not lowercase like the input)?\n2. Are character cues ALL CAPS (not lowercase like the input)?\n3. Are markdown artifacts removed (no ##, >, \\-, \\!)?\n4. Is dialogue preserved exactly?\n5. Are parentheticals formatted correctly?\n6. Is the V.O. designation preserved for Noah's line?\n7. Is the CUT TO: transition plain text, not a markdown header?\n\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 1,
        "vars": {
          "source_text": "file://../input/normalize-broken-fountain.txt",
          "golden_path": "golden/normalize-signal-golden.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      }
    ],
    "stats": {
      "successes": 15,
      "failures": 1,
      "errors": 0,
      "tokenUsage": {
        "prompt": 10530,
        "completion": 7136,
        "cached": 0,
        "total": 17666,
        "numRequests": 16,
        "completionDetails": {
          "reasoning": 0,
          "acceptedPrediction": 0,
          "rejectedPrediction": 0
        },
        "assertions": {
          "total": 21313,
          "prompt": 13613,
          "completion": 7700,
          "cached": 0,
          "numRequests": 0,
          "completionDetails": {
            "reasoning": 0,
            "acceptedPrediction": 0,
            "rejectedPrediction": 0
          }
        }
      },
      "durationMs": 89837
    }
  },
  "config": {
    "tags": {},
    "description": "Script normalization — prose and broken Fountain to valid Fountain",
    "prompts": [
      "file:///Users/cam/Documents/Projects/cine-forge/benchmarks/prompts/normalization.txt"
    ],
    "providers": [
      {
        "id": "openai:gpt-4.1-nano",
        "label": "GPT-4.1 Nano",
        "config": {
          "temperature": 0,
          "max_tokens": 4096
        }
      },
      {
        "id": "openai:gpt-4.1-mini",
        "label": "GPT-4.1 Mini",
        "config": {
          "temperature": 0,
          "max_tokens": 4096
        }
      },
      {
        "id": "google:gemini-2.5-flash-lite",
        "label": "Gemini 2.5 Flash Lite",
        "config": {
          "temperature": 0,
          "maxOutputTokens": 16384
        }
      },
      {
        "id": "openai:gpt-4.1",
        "label": "GPT-4.1",
        "config": {
          "temperature": 0,
          "max_tokens": 4096
        }
      },
      {
        "id": "anthropic:messages:claude-haiku-4-5-20251001",
        "label": "Claude Haiku 4.5",
        "config": {
          "temperature": 0,
          "max_tokens": 4096
        }
      },
      {
        "id": "anthropic:messages:claude-sonnet-4-5-20250929",
        "label": "Claude Sonnet 4.5",
        "config": {
          "temperature": 0,
          "max_tokens": 4096
        }
      },
      {
        "id": "anthropic:messages:claude-sonnet-4-6",
        "label": "Claude Sonnet 4.6",
        "config": {
          "temperature": 0,
          "max_tokens": 4096
        }
      },
      {
        "id": "google:gemini-2.5-flash",
        "label": "Gemini 2.5 Flash",
        "config": {
          "temperature": 0,
          "maxOutputTokens": 16384
        }
      },
      {
        "id": "google:gemini-3-flash-preview",
        "label": "Gemini 3 Flash",
        "config": {
          "temperature": 0,
          "maxOutputTokens": 16384
        }
      },
      {
        "id": "openai:gpt-5.2",
        "label": "GPT-5.2",
        "config": {
          "temperature": 0,
          "max_tokens": 4096
        }
      },
      {
        "id": "anthropic:messages:claude-opus-4-6",
        "label": "Claude Opus 4.6",
        "config": {
          "temperature": 0,
          "max_tokens": 4096
        }
      },
      {
        "id": "google:gemini-2.5-pro",
        "label": "Gemini 2.5 Pro",
        "config": {
          "temperature": 0,
          "maxOutputTokens": 16384
        }
      },
      {
        "id": "google:gemini-3-pro-preview",
        "label": "Gemini 3 Pro",
        "config": {
          "temperature": 0,
          "maxOutputTokens": 16384
        }
      }
    ],
    "tests": [
      {
        "vars": {
          "source_text": "file://../input/normalize-prose.txt",
          "golden_path": "golden/normalize-signal-golden.json"
        },
        "assert": [
          {
            "type": "python",
            "value": "file://../scorers/normalization_scorer.py"
          },
          {
            "type": "llm-rubric",
            "value": "Evaluate this screenplay normalization. The input was a prose narrative\nwith no Fountain formatting. The model should have converted it to\nstandard Fountain format.\n\nKey quality criteria:\n1. Are scene headings present and properly formatted (INT./EXT. ALL CAPS)?\n2. Are character cues ALL CAPS on their own line?\n3. Is dialogue preserved exactly as written?\n4. Are parentheticals in (lowercase parens) format?\n5. Is there NO markdown formatting (no >, #, **, ``` etc.)?\n6. Are scene breaks identified correctly from context clues?\n7. Is the author's voice preserved without inventions?\n\nScore strictly: structural correctness AND content preservation both matter.\n"
          }
        ]
      },
      {
        "vars": {
          "source_text": "file://../input/normalize-broken-fountain.txt",
          "golden_path": "golden/normalize-signal-golden.json"
        },
        "assert": [
          {
            "type": "python",
            "value": "file://../scorers/normalization_scorer.py"
          },
          {
            "type": "llm-rubric",
            "value": "Evaluate this screenplay normalization. The input was broken Fountain\nformat with markdown artifacts (## headers, > blockquotes, escaped\ncharacters like \\-). The model should have fixed these issues while\npreserving the screenplay structure.\n\nKey quality criteria:\n1. Are scene headings ALL CAPS (not lowercase like the input)?\n2. Are character cues ALL CAPS (not lowercase like the input)?\n3. Are markdown artifacts removed (no ##, >, \\-, \\!)?\n4. Is dialogue preserved exactly?\n5. Are parentheticals formatted correctly?\n6. Is the V.O. designation preserved for Noah's line?\n7. Is the CUT TO: transition plain text, not a markdown header?\n\nScore strictly: this is a cleanup task — every markdown artifact should be gone.\n"
          }
        ]
      }
    ],
    "scenarios": [],
    "env": {},
    "defaultTest": {
      "options": {
        "provider": "anthropic:messages:claude-opus-4-6"
      },
      "vars": {},
      "assert": [],
      "metadata": {}
    },
    "outputPath": [
      "results/normalization-2026-02-18.json"
    ],
    "extensions": [],
    "metadata": {},
    "evaluateOptions": {}
  },
  "shareableUrl": null,
  "metadata": {
    "promptfooVersion": "0.120.24",
    "nodeVersion": "v24.13.1",
    "platform": "darwin",
    "arch": "arm64",
    "exportedAt": "2026-02-18T07:30:48.735Z",
    "evaluationCreatedAt": "2026-02-18T07:29:18.099Z"
  }
}