{
  "evalId": "eval-TCi-2026-02-16T01:32:23",
  "results": {
    "version": 3,
    "timestamp": "2026-02-16T01:32:23.108Z",
    "prompts": [
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "a298f8e59d0e5184b43a0be484524cae03335a41d5ae89811f617d91fa39c887",
        "provider": "GPT-4.1 Nano",
        "metrics": {
          "score": 0.78125,
          "testPassCount": 1,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 2,
          "assertFailCount": 0,
          "totalLatencyMs": 5678,
          "tokenUsage": {
            "prompt": 4719,
            "completion": 626,
            "cached": 0,
            "total": 5345,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 1754,
              "prompt": 1041,
              "completion": 713,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.0007223
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "a298f8e59d0e5184b43a0be484524cae03335a41d5ae89811f617d91fa39c887",
        "provider": "GPT-4.1 Mini",
        "metrics": {
          "score": 0.7152000000000001,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 1,
          "totalLatencyMs": 7581,
          "tokenUsage": {
            "prompt": 4719,
            "completion": 666,
            "cached": 0,
            "total": 5385,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 1737,
              "prompt": 1080,
              "completion": 657,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.0029532000000000004
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "a298f8e59d0e5184b43a0be484524cae03335a41d5ae89811f617d91fa39c887",
        "provider": "Gemini 2.5 Flash Lite",
        "metrics": {
          "score": 0.88125,
          "testPassCount": 1,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 2,
          "assertFailCount": 0,
          "totalLatencyMs": 4276,
          "tokenUsage": {
            "prompt": 4883,
            "completion": 954,
            "cached": 0,
            "total": 5837,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2273,
              "prompt": 1504,
              "completion": 769,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.0008699000000000001
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "a298f8e59d0e5184b43a0be484524cae03335a41d5ae89811f617d91fa39c887",
        "provider": "GPT-4.1",
        "metrics": {
          "score": 0.75485,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 1,
          "totalLatencyMs": 11245,
          "tokenUsage": {
            "prompt": 4719,
            "completion": 756,
            "cached": 0,
            "total": 5475,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 1817,
              "prompt": 1172,
              "completion": 645,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.015486
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "a298f8e59d0e5184b43a0be484524cae03335a41d5ae89811f617d91fa39c887",
        "provider": "Claude Haiku 4.5",
        "metrics": {
          "score": 0.88625,
          "testPassCount": 1,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 2,
          "assertFailCount": 0,
          "totalLatencyMs": 10142,
          "tokenUsage": {
            "prompt": 5368,
            "completion": 982,
            "cached": 0,
            "total": 6350,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2165,
              "prompt": 1476,
              "completion": 689,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.010277999999999999
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "a298f8e59d0e5184b43a0be484524cae03335a41d5ae89811f617d91fa39c887",
        "provider": "Claude Sonnet 4.5",
        "metrics": {
          "score": 0.6546000000000001,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 1,
          "totalLatencyMs": 21235,
          "tokenUsage": {
            "prompt": 5368,
            "completion": 1021,
            "cached": 0,
            "total": 6389,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2167,
              "prompt": 1515,
              "completion": 652,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.031419
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "a298f8e59d0e5184b43a0be484524cae03335a41d5ae89811f617d91fa39c887",
        "provider": "Gemini 2.5 Flash",
        "metrics": {
          "score": 0.5909,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 1,
          "totalLatencyMs": 19093,
          "tokenUsage": {
            "prompt": 4883,
            "completion": 954,
            "cached": 0,
            "total": 9514,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 3677,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2227,
              "prompt": 1522,
              "completion": 705,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.013042400000000001
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "a298f8e59d0e5184b43a0be484524cae03335a41d5ae89811f617d91fa39c887",
        "provider": "Gemini 3 Flash",
        "metrics": {
          "score": 0.60545,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 1,
          "totalLatencyMs": 13241,
          "tokenUsage": {
            "prompt": 4883,
            "completion": 874,
            "cached": 0,
            "total": 6879,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 1122,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2156,
              "prompt": 1431,
              "completion": 725,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.0084295
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "a298f8e59d0e5184b43a0be484524cae03335a41d5ae89811f617d91fa39c887",
        "provider": "GPT-5.2",
        "metrics": {
          "score": 0.70825,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 1,
          "totalLatencyMs": 15883,
          "tokenUsage": {
            "prompt": 4718,
            "completion": 795,
            "cached": 0,
            "total": 5513,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2042,
              "prompt": 1234,
              "completion": 808,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.0193865
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "a298f8e59d0e5184b43a0be484524cae03335a41d5ae89811f617d91fa39c887",
        "provider": "Claude Opus 4.6",
        "metrics": {
          "score": 0.6432500000000001,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 1,
          "totalLatencyMs": 27278,
          "tokenUsage": {
            "prompt": 5368,
            "completion": 1188,
            "cached": 0,
            "total": 6556,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2409,
              "prompt": 1682,
              "completion": 727,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.05654000000000001
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "a298f8e59d0e5184b43a0be484524cae03335a41d5ae89811f617d91fa39c887",
        "provider": "Gemini 2.5 Pro",
        "metrics": {
          "score": 0.61685,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 1,
          "totalLatencyMs": 31194,
          "tokenUsage": {
            "prompt": 4883,
            "completion": 935,
            "cached": 0,
            "total": 8429,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 2611,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2135,
              "prompt": 1504,
              "completion": 631,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.041563750000000003
        }
      },
      {
        "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
        "id": "a298f8e59d0e5184b43a0be484524cae03335a41d5ae89811f617d91fa39c887",
        "provider": "Gemini 3 Pro",
        "metrics": {
          "score": 0.5649500000000001,
          "testPassCount": 0,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 1,
          "assertFailCount": 1,
          "totalLatencyMs": 27151,
          "tokenUsage": {
            "prompt": 4883,
            "completion": 888,
            "cached": 0,
            "total": 7591,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 1820,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 2248,
              "prompt": 1458,
              "completion": 790,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0.04226200000000001
        }
      }
    ],
    "results": [
      {
        "cost": 0.0029532000000000004,
        "error": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. \n\n2. **Format**: Identified as 'feature film' with confidence 0.9. Reasonable identification. \n\n3. **Genre**: Lists action, crime, drama. The rubric mentions action, crime, and/or thriller. It captures action and crime well. Drama is reasonable too, though thriller might have been a better fit than drama for a vigilante story. Mostly \n\n4. **Tone**: Dark, gritty, dramatic  captures the dark and gritty qualities well. \n\n5. **Duration**: Estimated at 30 minutes with confidence 0.7. The rubric says 85-130 minutes for a ~430-line screenplay. 30 minutes is significantly too low. The model seems to have underestimated the screenplay length, treating it as ~30 pages when it's apparently much longer.  This is a significant miss.\n\n6. **Primary characters**: Lists Mariner, Rose, and Salvatori. The rubric says Mariner and Rose as leads. Salvatori being listed as primary rather than supporting is debatable  the rubric lists Salvatori as supporting. Minor issue but mostly \n\n7. **Supporting characters**: Lists Vinnie, Mikey, Carlos, Rosco, Dad. The rubric mentions Dad, Salvatori, Vinnie as supporting. Salvatori is misplaced as primary instead of supporting, but Dad and Vinnie are correctly placed. Partially \n\n8. **Location count**: Estimated at 5 with confidence 0.85. The rubric says 5-20 is reasonable. 5 is at the low end but within range. \n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, along with flashback locations. \n\n10. **Target audience**: Identified as 'R' for mature content. \n\n11. **Confidence calibration**: Most are reasonable. The duration confidence of 0.7 is appropriately lower given the uncertainty, but the estimate itself is still very wrong. The other confidences seem well-calibrated.\n\n12. **Rationale quality**: Rationales are generally grounded in screenplay evidence, referencing specific elements like the building name, character roles, and thematic content. \n\nThe major failing is the duration estimate of 30 minutes vs. the expected 85-130 minutes  this is a very significant error. The Salvatori placement as primary vs. supporting is a minor issue. Everything else is solid.",
        "gradingResult": {
          "pass": false,
          "score": 0.7152000000000001,
          "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. \n\n2. **Format**: Identified as 'feature film' with confidence 0.9. Reasonable identification. \n\n3. **Genre**: Lists action, crime, drama. The rubric mentions action, crime, and/or thriller. It captures action and crime well. Drama is reasonable too, though thriller might have been a better fit than drama for a vigilante story. Mostly \n\n4. **Tone**: Dark, gritty, dramatic  captures the dark and gritty qualities well. \n\n5. **Duration**: Estimated at 30 minutes with confidence 0.7. The rubric says 85-130 minutes for a ~430-line screenplay. 30 minutes is significantly too low. The model seems to have underestimated the screenplay length, treating it as ~30 pages when it's apparently much longer.  This is a significant miss.\n\n6. **Primary characters**: Lists Mariner, Rose, and Salvatori. The rubric says Mariner and Rose as leads. Salvatori being listed as primary rather than supporting is debatable  the rubric lists Salvatori as supporting. Minor issue but mostly \n\n7. **Supporting characters**: Lists Vinnie, Mikey, Carlos, Rosco, Dad. The rubric mentions Dad, Salvatori, Vinnie as supporting. Salvatori is misplaced as primary instead of supporting, but Dad and Vinnie are correctly placed. Partially \n\n8. **Location count**: Estimated at 5 with confidence 0.85. The rubric says 5-20 is reasonable. 5 is at the low end but within range. \n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, along with flashback locations. \n\n10. **Target audience**: Identified as 'R' for mature content. \n\n11. **Confidence calibration**: Most are reasonable. The duration confidence of 0.7 is appropriately lower given the uncertainty, but the estimate itself is still very wrong. The other confidences seem well-calibrated.\n\n12. **Rationale quality**: Rationales are generally grounded in screenplay evidence, referencing specific elements like the building name, character roles, and thematic content. \n\nThe major failing is the duration estimate of 30 minutes vs. the expected 85-130 minutes  this is a very significant error. The Salvatori placement as primary vs. supporting is a minor issue. Everything else is solid.",
          "namedScores": {},
          "tokensUsed": {
            "total": 1737,
            "prompt": 1080,
            "completion": 657,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.8304,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=0.28, format_accuracy=1.00, genre_accuracy=0.75, json_valid=1.00, location_accuracy=1.00, title_accuracy=1.00, tone_accuracy=0.40",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": false,
              "score": 0.6,
              "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. \n\n2. **Format**: Identified as 'feature film' with confidence 0.9. Reasonable identification. \n\n3. **Genre**: Lists action, crime, drama. The rubric mentions action, crime, and/or thriller. It captures action and crime well. Drama is reasonable too, though thriller might have been a better fit than drama for a vigilante story. Mostly \n\n4. **Tone**: Dark, gritty, dramatic  captures the dark and gritty qualities well. \n\n5. **Duration**: Estimated at 30 minutes with confidence 0.7. The rubric says 85-130 minutes for a ~430-line screenplay. 30 minutes is significantly too low. The model seems to have underestimated the screenplay length, treating it as ~30 pages when it's apparently much longer.  This is a significant miss.\n\n6. **Primary characters**: Lists Mariner, Rose, and Salvatori. The rubric says Mariner and Rose as leads. Salvatori being listed as primary rather than supporting is debatable  the rubric lists Salvatori as supporting. Minor issue but mostly \n\n7. **Supporting characters**: Lists Vinnie, Mikey, Carlos, Rosco, Dad. The rubric mentions Dad, Salvatori, Vinnie as supporting. Salvatori is misplaced as primary instead of supporting, but Dad and Vinnie are correctly placed. Partially \n\n8. **Location count**: Estimated at 5 with confidence 0.85. The rubric says 5-20 is reasonable. 5 is at the low end but within range. \n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, along with flashback locations. \n\n10. **Target audience**: Identified as 'R' for mature content. \n\n11. **Confidence calibration**: Most are reasonable. The duration confidence of 0.7 is appropriately lower given the uncertainty, but the estimate itself is still very wrong. The other confidences seem well-calibrated.\n\n12. **Rationale quality**: Rationales are generally grounded in screenplay evidence, referencing specific elements like the building name, character roles, and thematic content. \n\nThe major failing is the duration estimate of 30 minutes vs. the expected 85-130 minutes  this is a very significant error. The Salvatori placement as primary vs. supporting is a minor issue. Everything else is solid.",
              "tokensUsed": {
                "total": 1737,
                "prompt": 1080,
                "completion": 657,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n{\\\"title\\\":{\\\"value\\\":\\\"The Mariner\\\",\\\"confidence\\\":1,\\\"rationale\\\":\\\"The title is explicitly given at the top of the screenplay and again as a full-screen superimposed title card.\\\"},\\\"format\\\":{\\\"value\\\":\\\"feature film\\\",\\\"confidence\\\":0.9,\\\"rationale\\\":\\\"The screenplay is structured with multiple scenes, flashbacks, and a complex narrative typical of a feature film. No indication of episodic structure or short format.\\\"},\\\"genre\\\":{\\\"value\\\":[\\\"action\\\",\\\"crime\\\",\\\"drama\\\"],\\\"confidence\\\":0.95,\\\"rationale\\\":\\\"The screenplay features violent confrontations, gang-related crime elements, and a strong emotional backstory focusing on personal struggle and relationships.\\\"},\\\"tone\\\":{\\\"value\\\":[\\\"dark\\\",\\\"gritty\\\",\\\"dramatic\\\"],\\\"confidence\\\":0.95,\\\"rationale\\\":\\\"The setting is a ruined city with violence and crime; the characters have troubled pasts and emotional depth, creating a dark and gritty atmosphere with dramatic tension.\\\"},\\\"estimated_duration_minutes\\\":{\\\"value\\\":30,\\\"confidence\\\":0.7,\\\"rationale\\\":\\\"The screenplay excerpt is about 30 pages long (estimated from length), and the standard rule of thumb is roughly 1 page per minute. Since this may be a partial script, the estimate is conservative.\\\"},\\\"primary_characters\\\":{\\\"value\\\":[\\\"Mariner\\\",\\\"Rose\\\",\\\"Salvatori\\\"],\\\"confidence\\\":0.95,\\\"rationale\\\":\\\"Mariner and Rose are the protagonists, central to the narrative and action. Salvatori is the main antagonist confronting them.\\\"},\\\"supporting_characters\\\":{\\\"value\\\":[\\\"Vinnie\\\",\\\"Mikey\\\",\\\"Carlos\\\",\\\"Rosco\\\",\\\"Dad\\\"],\\\"confidence\\\":0.9,\\\"rationale\\\":\\\"These characters appear in supporting roles: gang members and Mariners father in flashbacks.\\\"},\\\"location_count\\\":{\\\"value\\\":5,\\\"confidence\\\":0.85,\\\"rationale\\\":\\\"Distinct locations include: the ruined city (general), Ruddy & Greene Building (multiple floors), elevator, stairwell, and flashback locations (coastline, backyard). These can be grouped into about five key locations.\\\"},\\\"locations_summary\\\":{\\\"value\\\":\\\"A ruined urban city center dominated by the Ruddy & Greene Building with multiple floors and corridors, including elevator and stairwells; flashbacks occur at a coastline and a backyard.\\\",\\\"confidence\\\":0.9,\\\"rationale\\\":\\\"The screenplay repeatedly references the ruined city, the building with multiple floors, and flashbacks to outdoor locations.\\\"},\\\"target_audience\\\":{\\\"value\\\":\\\"R\\\",\\\"confidence\\\":0.85,\\\"rationale\\\":\\\"The screenplay contains graphic violence, strong language, and mature themes such as crime, drug use, and trauma, indicating an adult audience rating.\\\"}}\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "aa7e69c9-7563-48f4-9062-78925e97d6a2",
        "latencyMs": 7581,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a heros origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldnt.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. McAngus Fish & Brewis painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the buildings back door, his huge frame silhouetted against the interiors light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of Faith by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, Faith playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! Cmon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. Shes wearing a Tim Hortons uniform, her hair is a mess, and theres blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: THE MARINER\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHes built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with Dad in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at mas.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! Im taking you home. Its my fault they went after you. I never thought theyd--\n\nROSE  \n(laughing)  \nYou think theyre after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWeve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariners OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWell take the stairs up. They wont expect that.\n\nMARINER  \nBecause its stupid\\!\n\nRose raises an eyebrow at Mariners crazy outfit.\n\nMARINER  \nIts functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his Dad TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows whats a hero? Es the one whats brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! Ill buy you a new bloody purse.\n\nROSE  \nIt aint the purse. Its... a blockchain password to my life savings. I hid it on a chip in the lining. Its all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hells a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! Its, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatoris gonna kill ya, Rosie.\n\nRose nods yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe aint gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. Its gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shits a scam. You gotta get into PonziCoin. My cousins in it. He says its legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWere leaving. Now. I dont steal, Rose. Its against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariners code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We dont wanna hurt ya. Mr. Salvatori just wants his password. Thats all. Then maybe, if youre reeeaal nice, maybe you can be my booty call some more.\n\nRoses eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariners back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIES screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos back. BOSUN is carved into the wood. Rose gives Vinnies body a kick.\n\nROSE  \nPrick. Oh shit\\! Youre bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariners leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnies unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. Cmon.\n\nINT. 15TH FLOOR\n\nThis floor isnt destroyed like the others. Its CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariners opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist youre strong, Billy. Thats gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariners dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, dont never run from a fight. Not again, ya hears me? Its not what a man does. Its not what a MacAngus does. Lets do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin tin, sis. Just like dad taught me.\n\nROSE  \nYoure serious about this dad shit? You talking about the summer he took you to buddys place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONTD)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, hes living up in  Chimney Bay with some skank. He was on the pogey that summer at buddys\\! He was supposed to be taking care of you. Instead hed ditch you in his deadbeat friends yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma woulda said.\n\nROSE  \nYou were too young, Will. She didnt want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew youd be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. Hes WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariners dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Dont never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like youre trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, by? Its got two thumbs and e looks like this\\! Ha\\! Now fetch me anudder. An dont gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONTD)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariners OAR and kick the back of his legs so hes kneeling at their feet. Mariner doesnt resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHes no hero. Hes a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they dont deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHes a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Roses head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariners face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "a298f8e59d0e5184b43a0be484524cae03335a41d5ae89811f617d91fa39c887",
        "promptIdx": 1,
        "provider": {
          "id": "openai:gpt-4.1-mini",
          "label": "GPT-4.1 Mini"
        },
        "response": {
          "output": "{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The title is explicitly given at the top of the screenplay and again as a full-screen superimposed title card.\"\n  },\n  \"format\": {\n    \"value\": \"feature film\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay is structured with multiple scenes, flashbacks, and a complex narrative typical of a feature film. No indication of episodic structure or short format.\"\n  },\n  \"genre\": {\n    \"value\": [\"action\", \"crime\", \"drama\"],\n    \"confidence\": 0.95,\n    \"rationale\": \"The screenplay features violent confrontations, gang-related crime elements, and a strong emotional backstory focusing on personal struggle and relationships.\"\n  },\n  \"tone\": {\n    \"value\": [\"dark\", \"gritty\", \"dramatic\"],\n    \"confidence\": 0.95,\n    \"rationale\": \"The setting is a ruined city with violence and crime; the characters have troubled pasts and emotional depth, creating a dark and gritty atmosphere with dramatic tension.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 30,\n    \"confidence\": 0.7,\n    \"rationale\": \"The screenplay excerpt is about 30 pages long (estimated from length), and the standard rule of thumb is roughly 1 page per minute. Since this may be a partial script, the estimate is conservative.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\"Mariner\", \"Rose\", \"Salvatori\"],\n    \"confidence\": 0.95,\n    \"rationale\": \"Mariner and Rose are the protagonists, central to the narrative and action. Salvatori is the main antagonist confronting them.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\"Vinnie\", \"Mikey\", \"Carlos\", \"Rosco\", \"Dad\"],\n    \"confidence\": 0.9,\n    \"rationale\": \"These characters appear in supporting roles: gang members and Mariners father in flashbacks.\"\n  },\n  \"location_count\": {\n    \"value\": 5,\n    \"confidence\": 0.85,\n    \"rationale\": \"Distinct locations include: the ruined city (general), Ruddy & Greene Building (multiple floors), elevator, stairwell, and flashback locations (coastline, backyard). These can be grouped into about five key locations.\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A ruined urban city center dominated by the Ruddy & Greene Building with multiple floors and corridors, including elevator and stairwells; flashbacks occur at a coastline and a backyard.\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay repeatedly references the ruined city, the building with multiple floors, and flashbacks to outdoor locations.\"\n  },\n  \"target_audience\": {\n    \"value\": \"R\",\n    \"confidence\": 0.85,\n    \"rationale\": \"The screenplay contains graphic violence, strong language, and mature themes such as crime, drug use, and trauma, indicating an adult audience rating.\"\n  }\n}",
          "tokenUsage": {
            "total": 5385,
            "prompt": 4719,
            "completion": 666,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 7581,
          "finishReason": "stop",
          "cost": 0.0029532000000000004,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9ce94a75db7789d5-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Mon, 16 Feb 2026 01:32:30 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "7336",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=HVPlQrzcepZt1fOQ8NaFpTc_QZ2ox5UJIAt.N2Me8hs-1771205543.3383102-1.0.1.1-jfBdF1RQTKiAidtgMUDnCrVPrYZxuwYQZatkYOc273tf.CI8qTB8FRfWkwf6VRYvvmCwAVp.evwaW2mrNscjJcF9jtM6q.7cfwUuj41uVimjaLybmCjPIprPY5MnjXQU; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Mon, 16 Feb 2026 02:02:30 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "10000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "9995538",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "26ms",
                "x-request-id": "req_a0b0665ac8ab4b1289f2cfc148f96f4f"
              }
            }
          }
        },
        "score": 0.7152000000000001,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9ce94a75db7789d5-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Mon, 16 Feb 2026 01:32:30 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "7336",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=HVPlQrzcepZt1fOQ8NaFpTc_QZ2ox5UJIAt.N2Me8hs-1771205543.3383102-1.0.1.1-jfBdF1RQTKiAidtgMUDnCrVPrYZxuwYQZatkYOc273tf.CI8qTB8FRfWkwf6VRYvvmCwAVp.evwaW2mrNscjJcF9jtM6q.7cfwUuj41uVimjaLybmCjPIprPY5MnjXQU; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Mon, 16 Feb 2026 02:02:30 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "10000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "9995538",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "26ms",
              "x-request-id": "req_a0b0665ac8ab4b1289f2cfc148f96f4f"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.015486,
        "error": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. \n\n2. **Format**: Identified as 'feature film' with confidence 0.9. This is reasonable. \n\n3. **Genre**: Includes action, crime, and drama. The rubric mentions action, crime, and/or thriller - it captures action and crime. Drama is also appropriate. \n\n4. **Tone**: Captures gritty, dark, violent, emotional, and satirical. The dark/gritty/violent qualities are well-identified. \n\n5. **Duration**: Estimated at 40 minutes. The rubric says 85-130 minutes is reasonable for a ~430-line screenplay. 40 minutes is significantly below the expected range. The model seems to have underestimated, treating the content as only ~40 pages. This is a notable miss. \n\n6. **Primary characters**: Identifies Mariner and Rose as leads, plus Salvatori. The rubric asks for Mariner and Rose specifically. Salvatori could arguably be primary as the antagonist. \n\n7. **Supporting characters**: Lists Dad, Rosco, Vinnie, Mikey, Carlos, and Thugs. The rubric asks for Dad, Salvatori, and Vinnie among supporting cast. Salvatori is listed as primary rather than supporting, but Dad and Vinnie are correctly in supporting. This is a minor quibble since Salvatori's placement as primary antagonist is defensible. \n\n8. **Location count**: Estimated at 7, which falls within the 5-20 range. \n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, along with other locations. \n\n10. **Target audience**: Correctly identified as R-rated adult audience with appropriate reasoning. \n\n11. **Confidence calibration**: Generally reasonable. The 0.7 for duration is appropriately lower given uncertainty. Other scores seem well-calibrated. \n\n12. **Rationale quality**: Rationales are grounded in screenplay evidence, referencing specific elements like the post-pandemic city, violent confrontations, flashbacks, etc. \n\nThe major issue is the duration estimate of 40 minutes, which is well below the expected 85-130 minute range. This is a significant factual error. All other fields are accurate and well-supported. 10 out of 12 criteria are met well, with the duration being a clear miss.",
        "gradingResult": {
          "pass": false,
          "score": 0.75485,
          "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. \n\n2. **Format**: Identified as 'feature film' with confidence 0.9. This is reasonable. \n\n3. **Genre**: Includes action, crime, and drama. The rubric mentions action, crime, and/or thriller - it captures action and crime. Drama is also appropriate. \n\n4. **Tone**: Captures gritty, dark, violent, emotional, and satirical. The dark/gritty/violent qualities are well-identified. \n\n5. **Duration**: Estimated at 40 minutes. The rubric says 85-130 minutes is reasonable for a ~430-line screenplay. 40 minutes is significantly below the expected range. The model seems to have underestimated, treating the content as only ~40 pages. This is a notable miss. \n\n6. **Primary characters**: Identifies Mariner and Rose as leads, plus Salvatori. The rubric asks for Mariner and Rose specifically. Salvatori could arguably be primary as the antagonist. \n\n7. **Supporting characters**: Lists Dad, Rosco, Vinnie, Mikey, Carlos, and Thugs. The rubric asks for Dad, Salvatori, and Vinnie among supporting cast. Salvatori is listed as primary rather than supporting, but Dad and Vinnie are correctly in supporting. This is a minor quibble since Salvatori's placement as primary antagonist is defensible. \n\n8. **Location count**: Estimated at 7, which falls within the 5-20 range. \n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, along with other locations. \n\n10. **Target audience**: Correctly identified as R-rated adult audience with appropriate reasoning. \n\n11. **Confidence calibration**: Generally reasonable. The 0.7 for duration is appropriately lower given uncertainty. Other scores seem well-calibrated. \n\n12. **Rationale quality**: Rationales are grounded in screenplay evidence, referencing specific elements like the post-pandemic city, violent confrontations, flashbacks, etc. \n\nThe major issue is the duration estimate of 40 minutes, which is well below the expected 85-130 minute range. This is a significant factual error. All other fields are accurate and well-supported. 10 out of 12 criteria are met well, with the duration being a clear miss.",
          "namedScores": {},
          "tokensUsed": {
            "total": 1817,
            "prompt": 1172,
            "completion": 645,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.8597,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=0.37, format_accuracy=1.00, genre_accuracy=0.75, json_valid=1.00, location_accuracy=1.00, title_accuracy=1.00, tone_accuracy=0.60",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": false,
              "score": 0.65,
              "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. \n\n2. **Format**: Identified as 'feature film' with confidence 0.9. This is reasonable. \n\n3. **Genre**: Includes action, crime, and drama. The rubric mentions action, crime, and/or thriller - it captures action and crime. Drama is also appropriate. \n\n4. **Tone**: Captures gritty, dark, violent, emotional, and satirical. The dark/gritty/violent qualities are well-identified. \n\n5. **Duration**: Estimated at 40 minutes. The rubric says 85-130 minutes is reasonable for a ~430-line screenplay. 40 minutes is significantly below the expected range. The model seems to have underestimated, treating the content as only ~40 pages. This is a notable miss. \n\n6. **Primary characters**: Identifies Mariner and Rose as leads, plus Salvatori. The rubric asks for Mariner and Rose specifically. Salvatori could arguably be primary as the antagonist. \n\n7. **Supporting characters**: Lists Dad, Rosco, Vinnie, Mikey, Carlos, and Thugs. The rubric asks for Dad, Salvatori, and Vinnie among supporting cast. Salvatori is listed as primary rather than supporting, but Dad and Vinnie are correctly in supporting. This is a minor quibble since Salvatori's placement as primary antagonist is defensible. \n\n8. **Location count**: Estimated at 7, which falls within the 5-20 range. \n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, along with other locations. \n\n10. **Target audience**: Correctly identified as R-rated adult audience with appropriate reasoning. \n\n11. **Confidence calibration**: Generally reasonable. The 0.7 for duration is appropriately lower given uncertainty. Other scores seem well-calibrated. \n\n12. **Rationale quality**: Rationales are grounded in screenplay evidence, referencing specific elements like the post-pandemic city, violent confrontations, flashbacks, etc. \n\nThe major issue is the duration estimate of 40 minutes, which is well below the expected 85-130 minute range. This is a significant factual error. All other fields are accurate and well-supported. 10 out of 12 criteria are met well, with the duration being a clear miss.",
              "tokensUsed": {
                "total": 1817,
                "prompt": 1172,
                "completion": 645,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n{\\\"title\\\":{\\\"value\\\":\\\"The Mariner\\\",\\\"confidence\\\":1,\\\"rationale\\\":\\\"The title is explicitly stated at the top and in a full-screen superimposed title card.\\\"},\\\"format\\\":{\\\"value\\\":\\\"feature film\\\",\\\"confidence\\\":0.9,\\\"rationale\\\":\\\"The screenplay is structured as a single, self-contained story with a cinematic opening, flashbacks, and a full character arc. The length and complexity suggest a feature film rather than a short or pilot.\\\"},\\\"genre\\\":{\\\"value\\\":[\\\"action\\\",\\\"crime\\\",\\\"drama\\\"],\\\"confidence\\\":0.95,\\\"rationale\\\":\\\"The story centers on violent confrontations, criminal gangs, and a vigilante protagonist, with strong dramatic elements about family and identity.\\\"},\\\"tone\\\":{\\\"value\\\":[\\\"gritty\\\",\\\"dark\\\",\\\"violent\\\",\\\"emotional\\\",\\\"satirical\\\"],\\\"confidence\\\":0.9,\\\"rationale\\\":\\\"The setting is a ruined city with violence and crime, but there are also moments of dark humor and emotional family drama.\\\"},\\\"estimated_duration_minutes\\\":{\\\"value\\\":40,\\\"confidence\\\":0.7,\\\"rationale\\\":\\\"The provided text is approximately 40 pages (based on the amount of content and scene changes), which would translate to about 40 minutes. However, the full screenplay may be longer, but only this portion is available.\\\"},\\\"primary_characters\\\":{\\\"value\\\":[\\\"Mariner\\\",\\\"Rose\\\",\\\"Salvatori\\\"],\\\"confidence\\\":0.95,\\\"rationale\\\":\\\"Mariner and Rose are the clear protagonists, with Salvatori as the main antagonist.\\\"},\\\"supporting_characters\\\":{\\\"value\\\":[\\\"Dad\\\",\\\"Rosco\\\",\\\"Vinnie\\\",\\\"Mikey\\\",\\\"Carlos\\\",\\\"Thug 1\\\",\\\"Thug 2\\\",\\\"Thug 3\\\"],\\\"confidence\\\":0.9,\\\"rationale\\\":\\\"These characters have speaking roles or are named, but are not the main focus of the story.\\\"},\\\"location_count\\\":{\\\"value\\\":7,\\\"confidence\\\":0.8,\\\"rationale\\\":\\\"Distinct locations include: 1) City Centre, 2) Ruddy & Greene Building (front), 3) Ruddy & Greene Building (rear/alley), 4) Ruddy & Greene Building (interior: elevator, corridors, stairwell, 11th, 12th, 13th, 15th floors, office), 5) Coastline (flashback), 6) Backyard (flashback), 7) Boat (flashback). Some are nested, but are visually distinct.\\\"},\\\"locations_summary\\\":{\\\"value\\\":\\\"A ruined, post-pandemic city; the bullet-riddled Ruddy & Greene Building (including its alley, elevator, stairwells, and various floors); flashbacks to a coastal fishing area, a backyard, and a small boat.\\\",\\\"confidence\\\":0.9,\\\"rationale\\\":\\\"Summary covers all major and visually distinct locations as described in the screenplay.\\\"},\\\"target_audience\\\":{\\\"value\\\":\\\"R-rated adult audience\\\",\\\"confidence\\\":0.85,\\\"rationale\\\":\\\"Frequent strong language, graphic violence, and mature themes (crime, abuse, trauma) indicate an R rating and an adult demographic.\\\"}}\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "0858cbc7-eedd-476f-b0ba-ba5c54fa2ed1",
        "latencyMs": 11245,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a heros origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldnt.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. McAngus Fish & Brewis painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the buildings back door, his huge frame silhouetted against the interiors light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of Faith by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, Faith playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! Cmon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. Shes wearing a Tim Hortons uniform, her hair is a mess, and theres blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: THE MARINER\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHes built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with Dad in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at mas.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! Im taking you home. Its my fault they went after you. I never thought theyd--\n\nROSE  \n(laughing)  \nYou think theyre after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWeve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariners OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWell take the stairs up. They wont expect that.\n\nMARINER  \nBecause its stupid\\!\n\nRose raises an eyebrow at Mariners crazy outfit.\n\nMARINER  \nIts functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his Dad TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows whats a hero? Es the one whats brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! Ill buy you a new bloody purse.\n\nROSE  \nIt aint the purse. Its... a blockchain password to my life savings. I hid it on a chip in the lining. Its all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hells a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! Its, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatoris gonna kill ya, Rosie.\n\nRose nods yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe aint gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. Its gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shits a scam. You gotta get into PonziCoin. My cousins in it. He says its legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWere leaving. Now. I dont steal, Rose. Its against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariners code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We dont wanna hurt ya. Mr. Salvatori just wants his password. Thats all. Then maybe, if youre reeeaal nice, maybe you can be my booty call some more.\n\nRoses eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariners back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIES screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos back. BOSUN is carved into the wood. Rose gives Vinnies body a kick.\n\nROSE  \nPrick. Oh shit\\! Youre bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariners leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnies unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. Cmon.\n\nINT. 15TH FLOOR\n\nThis floor isnt destroyed like the others. Its CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariners opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist youre strong, Billy. Thats gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariners dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, dont never run from a fight. Not again, ya hears me? Its not what a man does. Its not what a MacAngus does. Lets do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin tin, sis. Just like dad taught me.\n\nROSE  \nYoure serious about this dad shit? You talking about the summer he took you to buddys place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONTD)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, hes living up in  Chimney Bay with some skank. He was on the pogey that summer at buddys\\! He was supposed to be taking care of you. Instead hed ditch you in his deadbeat friends yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma woulda said.\n\nROSE  \nYou were too young, Will. She didnt want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew youd be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. Hes WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariners dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Dont never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like youre trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, by? Its got two thumbs and e looks like this\\! Ha\\! Now fetch me anudder. An dont gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONTD)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariners OAR and kick the back of his legs so hes kneeling at their feet. Mariner doesnt resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHes no hero. Hes a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they dont deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHes a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Roses head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariners face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "a298f8e59d0e5184b43a0be484524cae03335a41d5ae89811f617d91fa39c887",
        "promptIdx": 3,
        "provider": {
          "id": "openai:gpt-4.1",
          "label": "GPT-4.1"
        },
        "response": {
          "output": "{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The title is explicitly stated at the top and in a full-screen superimposed title card.\"\n  },\n  \"format\": {\n    \"value\": \"feature film\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay is structured as a single, self-contained story with a cinematic opening, flashbacks, and a full character arc. The length and complexity suggest a feature film rather than a short or pilot.\"\n  },\n  \"genre\": {\n    \"value\": [\"action\", \"crime\", \"drama\"],\n    \"confidence\": 0.95,\n    \"rationale\": \"The story centers on violent confrontations, criminal gangs, and a vigilante protagonist, with strong dramatic elements about family and identity.\"\n  },\n  \"tone\": {\n    \"value\": [\"gritty\", \"dark\", \"violent\", \"emotional\", \"satirical\"],\n    \"confidence\": 0.9,\n    \"rationale\": \"The setting is a ruined city with violence and crime, but there are also moments of dark humor and emotional family drama.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 40,\n    \"confidence\": 0.7,\n    \"rationale\": \"The provided text is approximately 40 pages (based on the amount of content and scene changes), which would translate to about 40 minutes. However, the full screenplay may be longer, but only this portion is available.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\"Mariner\", \"Rose\", \"Salvatori\"],\n    \"confidence\": 0.95,\n    \"rationale\": \"Mariner and Rose are the clear protagonists, with Salvatori as the main antagonist.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\"Dad\", \"Rosco\", \"Vinnie\", \"Mikey\", \"Carlos\", \"Thug 1\", \"Thug 2\", \"Thug 3\"],\n    \"confidence\": 0.9,\n    \"rationale\": \"These characters have speaking roles or are named, but are not the main focus of the story.\"\n  },\n  \"location_count\": {\n    \"value\": 7,\n    \"confidence\": 0.8,\n    \"rationale\": \"Distinct locations include: 1) City Centre, 2) Ruddy & Greene Building (front), 3) Ruddy & Greene Building (rear/alley), 4) Ruddy & Greene Building (interior: elevator, corridors, stairwell, 11th, 12th, 13th, 15th floors, office), 5) Coastline (flashback), 6) Backyard (flashback), 7) Boat (flashback). Some are nested, but are visually distinct.\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A ruined, post-pandemic city; the bullet-riddled Ruddy & Greene Building (including its alley, elevator, stairwells, and various floors); flashbacks to a coastal fishing area, a backyard, and a small boat.\",\n    \"confidence\": 0.9,\n    \"rationale\": \"Summary covers all major and visually distinct locations as described in the screenplay.\"\n  },\n  \"target_audience\": {\n    \"value\": \"R-rated adult audience\",\n    \"confidence\": 0.85,\n    \"rationale\": \"Frequent strong language, graphic violence, and mature themes (crime, abuse, trauma) indicate an R rating and an adult demographic.\"\n  }\n}",
          "tokenUsage": {
            "total": 5475,
            "prompt": 4719,
            "completion": 756,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 11245,
          "finishReason": "stop",
          "cost": 0.015486,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9ce94aeeecf958e5-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Mon, 16 Feb 2026 01:32:53 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "11115",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=LpvVhfKZompuacfZcsW0qjpkBEiNDol2H0axS.oVh.g-1771205562.703778-1.0.1.1-e1.DITXnyzHyTR5.Dci7hcLK7W_LnomtqmO_gcob34Mj561xgjw0QS2gChnEj4bOwewY2t4sWxW_n2hF4o4clrSAzgA.LhXpm2fUE5w2XpeZ3D__kx0HezrWyg2KyCTw; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Mon, 16 Feb 2026 02:02:53 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "2000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "1995538",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "133ms",
                "x-request-id": "req_3490494dfaef4ef8a679671114ec0531"
              }
            }
          }
        },
        "score": 0.75485,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9ce94aeeecf958e5-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Mon, 16 Feb 2026 01:32:53 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "11115",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=LpvVhfKZompuacfZcsW0qjpkBEiNDol2H0axS.oVh.g-1771205562.703778-1.0.1.1-e1.DITXnyzHyTR5.Dci7hcLK7W_LnomtqmO_gcob34Mj561xgjw0QS2gChnEj4bOwewY2t4sWxW_n2hF4o4clrSAzgA.LhXpm2fUE5w2XpeZ3D__kx0HezrWyg2KyCTw; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Mon, 16 Feb 2026 02:02:53 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "2000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "1995538",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "133ms",
              "x-request-id": "req_3490494dfaef4ef8a679671114ec0531"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.031419,
        "error": "Let me evaluate each field:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. \n\n2. **Format**: Identified as 'short film' with confidence 0.85. The rubric states this should be a feature film screenplay (~430 lines, 85-130 minutes). This is a significant error. \n\n3. **Genre**: Identified as action, crime, drama. The rubric mentions action, crime, and/or thriller. Action and crime are correct. Drama is reasonable given the father subplot.  (mostly)\n\n4. **Tone**: Dark, gritty, violent, emotional - captures the key qualities well. \n\n5. **Duration**: Estimated at 18 minutes. The rubric says 85-130 minutes is reasonable for a ~430-line screenplay. This is drastically wrong, consistent with the misidentification as a short film. \n\n6. **Primary characters**: Lists The Mariner (Billy), Rose, and Salvatori. The rubric says The Mariner and Rose as leads. Salvatori is listed as primary rather than supporting, which is debatable but not terrible.  (mostly)\n\n7. **Supporting characters**: Lists Dad, Vinnie, Rosco, Mikey, Carlos, and unnamed thugs. The rubric mentions Dad, Salvatori, Vinnie. Salvatori was moved to primary, but the others are present.  (mostly)\n\n8. **Location count**: Estimated at 12, which falls within the 5-20 range. \n\n9. **Locations summary**: Correctly mentions the Ruddy & Greene Building as the primary setting, with floor-by-floor progression and flashback locations. \n\n10. **Target audience**: Correctly identified as R-rated mature content with strong evidence. \n\n11. **Confidence calibration**: The format confidence of 0.85 is too high given it's wrong. The duration confidence of 0.8 is also too high for a wrong answer. Other confidences seem reasonable. Mixed.\n\n12. **Rationale quality**: Rationales are generally well-grounded in screenplay evidence, though the format/duration rationales are based on incorrect page count estimates.\n\nThe two major errors are format (short film vs. feature) and duration (18 min vs. 85-130 min). These are significant and interconnected errors. The rest of the fields are largely accurate. Given that 2 of 10 fields are substantially wrong (and they're important structural fields), and confidence calibration on those is poor, this is a mixed result.",
        "gradingResult": {
          "pass": false,
          "score": 0.6546000000000001,
          "reason": "Let me evaluate each field:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. \n\n2. **Format**: Identified as 'short film' with confidence 0.85. The rubric states this should be a feature film screenplay (~430 lines, 85-130 minutes). This is a significant error. \n\n3. **Genre**: Identified as action, crime, drama. The rubric mentions action, crime, and/or thriller. Action and crime are correct. Drama is reasonable given the father subplot.  (mostly)\n\n4. **Tone**: Dark, gritty, violent, emotional - captures the key qualities well. \n\n5. **Duration**: Estimated at 18 minutes. The rubric says 85-130 minutes is reasonable for a ~430-line screenplay. This is drastically wrong, consistent with the misidentification as a short film. \n\n6. **Primary characters**: Lists The Mariner (Billy), Rose, and Salvatori. The rubric says The Mariner and Rose as leads. Salvatori is listed as primary rather than supporting, which is debatable but not terrible.  (mostly)\n\n7. **Supporting characters**: Lists Dad, Vinnie, Rosco, Mikey, Carlos, and unnamed thugs. The rubric mentions Dad, Salvatori, Vinnie. Salvatori was moved to primary, but the others are present.  (mostly)\n\n8. **Location count**: Estimated at 12, which falls within the 5-20 range. \n\n9. **Locations summary**: Correctly mentions the Ruddy & Greene Building as the primary setting, with floor-by-floor progression and flashback locations. \n\n10. **Target audience**: Correctly identified as R-rated mature content with strong evidence. \n\n11. **Confidence calibration**: The format confidence of 0.85 is too high given it's wrong. The duration confidence of 0.8 is also too high for a wrong answer. Other confidences seem reasonable. Mixed.\n\n12. **Rationale quality**: Rationales are generally well-grounded in screenplay evidence, though the format/duration rationales are based on incorrect page count estimates.\n\nThe two major errors are format (short film vs. feature) and duration (18 min vs. 85-130 min). These are significant and interconnected errors. The rest of the fields are largely accurate. Given that 2 of 10 fields are substantially wrong (and they're important structural fields), and confidence calibration on those is poor, this is a mixed result.",
          "namedScores": {},
          "tokensUsed": {
            "total": 2167,
            "prompt": 1515,
            "completion": 652,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.7592,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=0.17, format_accuracy=0.30, genre_accuracy=0.75, json_valid=0.90, location_accuracy=1.00, title_accuracy=1.00, tone_accuracy=0.60",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": false,
              "score": 0.55,
              "reason": "Let me evaluate each field:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. \n\n2. **Format**: Identified as 'short film' with confidence 0.85. The rubric states this should be a feature film screenplay (~430 lines, 85-130 minutes). This is a significant error. \n\n3. **Genre**: Identified as action, crime, drama. The rubric mentions action, crime, and/or thriller. Action and crime are correct. Drama is reasonable given the father subplot.  (mostly)\n\n4. **Tone**: Dark, gritty, violent, emotional - captures the key qualities well. \n\n5. **Duration**: Estimated at 18 minutes. The rubric says 85-130 minutes is reasonable for a ~430-line screenplay. This is drastically wrong, consistent with the misidentification as a short film. \n\n6. **Primary characters**: Lists The Mariner (Billy), Rose, and Salvatori. The rubric says The Mariner and Rose as leads. Salvatori is listed as primary rather than supporting, which is debatable but not terrible.  (mostly)\n\n7. **Supporting characters**: Lists Dad, Vinnie, Rosco, Mikey, Carlos, and unnamed thugs. The rubric mentions Dad, Salvatori, Vinnie. Salvatori was moved to primary, but the others are present.  (mostly)\n\n8. **Location count**: Estimated at 12, which falls within the 5-20 range. \n\n9. **Locations summary**: Correctly mentions the Ruddy & Greene Building as the primary setting, with floor-by-floor progression and flashback locations. \n\n10. **Target audience**: Correctly identified as R-rated mature content with strong evidence. \n\n11. **Confidence calibration**: The format confidence of 0.85 is too high given it's wrong. The duration confidence of 0.8 is also too high for a wrong answer. Other confidences seem reasonable. Mixed.\n\n12. **Rationale quality**: Rationales are generally well-grounded in screenplay evidence, though the format/duration rationales are based on incorrect page count estimates.\n\nThe two major errors are format (short film vs. feature) and duration (18 min vs. 85-130 min). These are significant and interconnected errors. The rest of the fields are largely accurate. Given that 2 of 10 fields are substantially wrong (and they're important structural fields), and confidence calibration on those is poor, this is a mixed result.",
              "tokensUsed": {
                "total": 2167,
                "prompt": 1515,
                "completion": 652,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n```json\\n{\\n  \\\"title\\\": {\\n    \\\"value\\\": \\\"The Mariner\\\",\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"The title 'The Mariner' appears at the beginning of the screenplay as a header, and is reinforced by a full-screen superimposed title card identifying the main character as 'THE MARINER'.\\\"\\n  },\\n  \\\"format\\\": {\\n    \\\"value\\\": \\\"short film\\\",\\n    \\\"confidence\\\": 0.85,\\n    \\\"rationale\\\": \\\"The screenplay is approximately 15-17 pages based on the content density and structure. It tells a complete single-location action sequence with a beginning, middle, and end, typical of a short film rather than a feature-length screenplay.\\\"\\n  },\\n  \\\"genre\\\": {\\n    \\\"value\\\": [\\\"action\\\", \\\"crime\\\", \\\"drama\\\"],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"The screenplay features extensive action sequences (fighting, gunfire, chase scenes), involves criminal gangs and stolen money (crime), and explores the protagonist's emotional journey regarding his father (drama).\\\"\\n  },\\n  \\\"tone\\\": {\\n    \\\"value\\\": [\\\"dark\\\", \\\"gritty\\\", \\\"violent\\\", \\\"emotional\\\"],\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"The setting is a post-apocalyptic ruined city with graphic violence ('wet cracking sounds', skull fragments, blood). The tone is gritty with dark humor, but also contains emotional depth in the flashbacks about the protagonist's abusive father.\\\"\\n  },\\n  \\\"estimated_duration_minutes\\\": {\\n    \\\"value\\\": 18,\\n    \\\"confidence\\\": 0.8,\\n    \\\"rationale\\\": \\\"Using the standard rule of approximately 1 page per minute, and estimating this screenplay at 16-20 pages based on scene count, dialogue density, and action sequences, 18 minutes is a reasonable estimate for a short film.\\\"\\n  },\\n  \\\"primary_characters\\\": {\\n    \\\"value\\\": [\\\"The Mariner (Billy)\\\", \\\"Rose\\\", \\\"Salvatori\\\"],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"The Mariner/Billy is the protagonist with the most screen time and character development. Rose is his sister and the deuteragonist who drives the plot. Salvatori is the main antagonist who appears in the climactic confrontation.\\\"\\n  },\\n  \\\"supporting_characters\\\": {\\n    \\\"value\\\": [\\\"Dad\\\", \\\"Vinnie\\\", \\\"Rosco\\\", \\\"Mikey\\\", \\\"Carlos\\\", \\\"Thug 1\\\", \\\"Thug 2\\\", \\\"Thug 3\\\"],\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"Dad appears in multiple flashbacks and is crucial to the story's emotional arc. Vinnie, Rosco, Mikey, and Carlos are named thugs with dialogue. Additional unnamed thugs appear in action sequences.\\\"\\n  },\\n  \\\"location_count\\\": {\\n    \\\"value\\\": 12,\\n    \\\"confidence\\\": 0.85,\\n    \\\"rationale\\\": \\\"Distinct locations include: City Centre, Ruddy & Greene Building Front, Ruddy & Greene Building Rear, Elevator, 11th Floor, 11th Floor Room, Stairwell, 12th Floor Stairwell, 13th Floor, 15th Floor, 15th Floor Office, plus flashback locations (Coastline, Backyard).\\\"\\n  },\\n  \\\"locations_summary\\\": {\\n    \\\"value\\\": \\\"Primarily set in the Ruddy & Greene Building, a 15-story ruined office building in a post-apocalyptic city. Action moves through various floors, stairwells, and an elevator, culminating in a luxurious 15th-floor office. Flashback scenes occur at a coastline and backyard.\\\",\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"The screenplay clearly establishes the main location as the Ruddy & Greene Building with specific floor locations detailed throughout. The opening establishes the broader ruined city context, and flashbacks provide contrasting pastoral/suburban settings.\\\"\\n  },\\n  \\\"target_audience\\\": {\\n    \\\"value\\\": \\\"R\\\",\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"The screenplay contains extreme graphic violence (skull fragments, blood, brutal combat), strong language ('fuck', 'shit', 'ass'), adult themes (child abuse, abandonment, gang crime), and would clearly warrant an R rating for mature audiences.\\\"\\n  }\\n}\\n```\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "e2a749c4-ce77-4c0c-aee5-014cdb540b1f",
        "latencyMs": 21235,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a heros origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldnt.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. McAngus Fish & Brewis painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the buildings back door, his huge frame silhouetted against the interiors light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of Faith by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, Faith playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! Cmon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. Shes wearing a Tim Hortons uniform, her hair is a mess, and theres blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: THE MARINER\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHes built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with Dad in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at mas.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! Im taking you home. Its my fault they went after you. I never thought theyd--\n\nROSE  \n(laughing)  \nYou think theyre after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWeve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariners OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWell take the stairs up. They wont expect that.\n\nMARINER  \nBecause its stupid\\!\n\nRose raises an eyebrow at Mariners crazy outfit.\n\nMARINER  \nIts functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his Dad TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows whats a hero? Es the one whats brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! Ill buy you a new bloody purse.\n\nROSE  \nIt aint the purse. Its... a blockchain password to my life savings. I hid it on a chip in the lining. Its all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hells a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! Its, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatoris gonna kill ya, Rosie.\n\nRose nods yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe aint gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. Its gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shits a scam. You gotta get into PonziCoin. My cousins in it. He says its legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWere leaving. Now. I dont steal, Rose. Its against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariners code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We dont wanna hurt ya. Mr. Salvatori just wants his password. Thats all. Then maybe, if youre reeeaal nice, maybe you can be my booty call some more.\n\nRoses eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariners back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIES screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos back. BOSUN is carved into the wood. Rose gives Vinnies body a kick.\n\nROSE  \nPrick. Oh shit\\! Youre bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariners leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnies unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. Cmon.\n\nINT. 15TH FLOOR\n\nThis floor isnt destroyed like the others. Its CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariners opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist youre strong, Billy. Thats gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariners dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, dont never run from a fight. Not again, ya hears me? Its not what a man does. Its not what a MacAngus does. Lets do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin tin, sis. Just like dad taught me.\n\nROSE  \nYoure serious about this dad shit? You talking about the summer he took you to buddys place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONTD)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, hes living up in  Chimney Bay with some skank. He was on the pogey that summer at buddys\\! He was supposed to be taking care of you. Instead hed ditch you in his deadbeat friends yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma woulda said.\n\nROSE  \nYou were too young, Will. She didnt want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew youd be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. Hes WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariners dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Dont never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like youre trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, by? Its got two thumbs and e looks like this\\! Ha\\! Now fetch me anudder. An dont gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONTD)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariners OAR and kick the back of his legs so hes kneeling at their feet. Mariner doesnt resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHes no hero. Hes a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they dont deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHes a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Roses head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariners face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "a298f8e59d0e5184b43a0be484524cae03335a41d5ae89811f617d91fa39c887",
        "promptIdx": 5,
        "provider": {
          "id": "anthropic:messages:claude-sonnet-4-5-20250929",
          "label": "Claude Sonnet 4.5"
        },
        "response": {
          "output": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The title 'The Mariner' appears at the beginning of the screenplay as a header, and is reinforced by a full-screen superimposed title card identifying the main character as 'THE MARINER'.\"\n  },\n  \"format\": {\n    \"value\": \"short film\",\n    \"confidence\": 0.85,\n    \"rationale\": \"The screenplay is approximately 15-17 pages based on the content density and structure. It tells a complete single-location action sequence with a beginning, middle, and end, typical of a short film rather than a feature-length screenplay.\"\n  },\n  \"genre\": {\n    \"value\": [\"action\", \"crime\", \"drama\"],\n    \"confidence\": 0.95,\n    \"rationale\": \"The screenplay features extensive action sequences (fighting, gunfire, chase scenes), involves criminal gangs and stolen money (crime), and explores the protagonist's emotional journey regarding his father (drama).\"\n  },\n  \"tone\": {\n    \"value\": [\"dark\", \"gritty\", \"violent\", \"emotional\"],\n    \"confidence\": 0.9,\n    \"rationale\": \"The setting is a post-apocalyptic ruined city with graphic violence ('wet cracking sounds', skull fragments, blood). The tone is gritty with dark humor, but also contains emotional depth in the flashbacks about the protagonist's abusive father.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 18,\n    \"confidence\": 0.8,\n    \"rationale\": \"Using the standard rule of approximately 1 page per minute, and estimating this screenplay at 16-20 pages based on scene count, dialogue density, and action sequences, 18 minutes is a reasonable estimate for a short film.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\"The Mariner (Billy)\", \"Rose\", \"Salvatori\"],\n    \"confidence\": 0.95,\n    \"rationale\": \"The Mariner/Billy is the protagonist with the most screen time and character development. Rose is his sister and the deuteragonist who drives the plot. Salvatori is the main antagonist who appears in the climactic confrontation.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\"Dad\", \"Vinnie\", \"Rosco\", \"Mikey\", \"Carlos\", \"Thug 1\", \"Thug 2\", \"Thug 3\"],\n    \"confidence\": 0.9,\n    \"rationale\": \"Dad appears in multiple flashbacks and is crucial to the story's emotional arc. Vinnie, Rosco, Mikey, and Carlos are named thugs with dialogue. Additional unnamed thugs appear in action sequences.\"\n  },\n  \"location_count\": {\n    \"value\": 12,\n    \"confidence\": 0.85,\n    \"rationale\": \"Distinct locations include: City Centre, Ruddy & Greene Building Front, Ruddy & Greene Building Rear, Elevator, 11th Floor, 11th Floor Room, Stairwell, 12th Floor Stairwell, 13th Floor, 15th Floor, 15th Floor Office, plus flashback locations (Coastline, Backyard).\"\n  },\n  \"locations_summary\": {\n    \"value\": \"Primarily set in the Ruddy & Greene Building, a 15-story ruined office building in a post-apocalyptic city. Action moves through various floors, stairwells, and an elevator, culminating in a luxurious 15th-floor office. Flashback scenes occur at a coastline and backyard.\",\n    \"confidence\": 0.95,\n    \"rationale\": \"The screenplay clearly establishes the main location as the Ruddy & Greene Building with specific floor locations detailed throughout. The opening establishes the broader ruined city context, and flashbacks provide contrasting pastoral/suburban settings.\"\n  },\n  \"target_audience\": {\n    \"value\": \"R\",\n    \"confidence\": 0.95,\n    \"rationale\": \"The screenplay contains extreme graphic violence (skull fragments, blood, brutal combat), strong language ('fuck', 'shit', 'ass'), adult themes (child abuse, abandonment, gang crime), and would clearly warrant an R rating for mature audiences.\"\n  }\n}\n```",
          "tokenUsage": {
            "total": 6389,
            "prompt": 5368,
            "completion": 1021
          },
          "finishReason": "stop",
          "cost": 0.031419
        },
        "score": 0.6546000000000001,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.0084295,
        "error": "Let me evaluate each field:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. \n\n2. **Format**: Identified as 'short film' with confidence 0.85. The rubric states it should be a 'feature film screenplay' (~430 lines). The model's classification as a short film is incorrect. \n\n3. **Genre**: Includes action, crime, and drama. The rubric mentions action, crime, and/or thriller. While 'drama' is reasonable, missing 'thriller' is a minor issue. The core genres are captured.  (mostly)\n\n4. **Tone**: Captures gritty, dark, stylized, emotional - this aligns well with the rubric's criteria for dark, gritty, violent qualities. \n\n5. **Duration**: Estimated at 9 minutes. The rubric says 85-130 minutes for a ~430-line screenplay. This is drastically wrong, likely because the model misidentified the format as a short film. The model says '8-10 pages' when the screenplay is apparently ~430 lines.  (major error)\n\n6. **Primary characters**: Identifies The Mariner (Billy/Will), Rose, and Salvatori. The rubric says The Mariner and Rose as leads. Salvatori is listed as primary but the rubric suggests he's supporting. Minor issue but the key leads are identified.  (mostly)\n\n7. **Supporting characters**: Lists Dad, Vinnie, Mikey, Carlos, Rosco, Thugs. The rubric mentions Dad, Salvatori, Vinnie among supporting cast. Salvatori is listed as primary instead of supporting, but the others are present.  (mostly)\n\n8. **Location count**: Estimated at 10, which falls within the rubric's 5-20 range. \n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, along with the dystopian city and flashback locations. \n\n10. **Target audience**: Correctly identified as mature/adult content (R-rated) with appropriate evidence. \n\n11. **Confidence calibration**: The format confidence of 0.85 is too high given it's wrong. Duration confidence of 0.8 is also too high for a wrong answer. Other confidences seem reasonable. Mixed.\n\n12. **Rationale quality**: Rationales are generally grounded in screenplay evidence, though the format/duration rationales are based on an incorrect page count assessment.\n\nThe two major errors are the format (short film vs. feature film) and duration (9 min vs. 85-130 min). These are significant misidentifications that cascade from the same root error of misjudging the screenplay's length. The remaining 8 fields are largely accurate. Overall, about 8/12 criteria are met well, with 2 major failures.",
        "gradingResult": {
          "pass": false,
          "score": 0.60545,
          "reason": "Let me evaluate each field:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. \n\n2. **Format**: Identified as 'short film' with confidence 0.85. The rubric states it should be a 'feature film screenplay' (~430 lines). The model's classification as a short film is incorrect. \n\n3. **Genre**: Includes action, crime, and drama. The rubric mentions action, crime, and/or thriller. While 'drama' is reasonable, missing 'thriller' is a minor issue. The core genres are captured.  (mostly)\n\n4. **Tone**: Captures gritty, dark, stylized, emotional - this aligns well with the rubric's criteria for dark, gritty, violent qualities. \n\n5. **Duration**: Estimated at 9 minutes. The rubric says 85-130 minutes for a ~430-line screenplay. This is drastically wrong, likely because the model misidentified the format as a short film. The model says '8-10 pages' when the screenplay is apparently ~430 lines.  (major error)\n\n6. **Primary characters**: Identifies The Mariner (Billy/Will), Rose, and Salvatori. The rubric says The Mariner and Rose as leads. Salvatori is listed as primary but the rubric suggests he's supporting. Minor issue but the key leads are identified.  (mostly)\n\n7. **Supporting characters**: Lists Dad, Vinnie, Mikey, Carlos, Rosco, Thugs. The rubric mentions Dad, Salvatori, Vinnie among supporting cast. Salvatori is listed as primary instead of supporting, but the others are present.  (mostly)\n\n8. **Location count**: Estimated at 10, which falls within the rubric's 5-20 range. \n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, along with the dystopian city and flashback locations. \n\n10. **Target audience**: Correctly identified as mature/adult content (R-rated) with appropriate evidence. \n\n11. **Confidence calibration**: The format confidence of 0.85 is too high given it's wrong. Duration confidence of 0.8 is also too high for a wrong answer. Other confidences seem reasonable. Mixed.\n\n12. **Rationale quality**: Rationales are generally grounded in screenplay evidence, though the format/duration rationales are based on an incorrect page count assessment.\n\nThe two major errors are the format (short film vs. feature film) and duration (9 min vs. 85-130 min). These are significant misidentifications that cascade from the same root error of misjudging the screenplay's length. The remaining 8 fields are largely accurate. Overall, about 8/12 criteria are met well, with 2 major failures.",
          "namedScores": {},
          "tokensUsed": {
            "total": 2156,
            "prompt": 1431,
            "completion": 725,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.7109,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=0.08, format_accuracy=0.30, genre_accuracy=0.75, json_valid=0.90, location_accuracy=0.80, title_accuracy=1.00, tone_accuracy=0.40",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": false,
              "score": 0.5,
              "reason": "Let me evaluate each field:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. \n\n2. **Format**: Identified as 'short film' with confidence 0.85. The rubric states it should be a 'feature film screenplay' (~430 lines). The model's classification as a short film is incorrect. \n\n3. **Genre**: Includes action, crime, and drama. The rubric mentions action, crime, and/or thriller. While 'drama' is reasonable, missing 'thriller' is a minor issue. The core genres are captured.  (mostly)\n\n4. **Tone**: Captures gritty, dark, stylized, emotional - this aligns well with the rubric's criteria for dark, gritty, violent qualities. \n\n5. **Duration**: Estimated at 9 minutes. The rubric says 85-130 minutes for a ~430-line screenplay. This is drastically wrong, likely because the model misidentified the format as a short film. The model says '8-10 pages' when the screenplay is apparently ~430 lines.  (major error)\n\n6. **Primary characters**: Identifies The Mariner (Billy/Will), Rose, and Salvatori. The rubric says The Mariner and Rose as leads. Salvatori is listed as primary but the rubric suggests he's supporting. Minor issue but the key leads are identified.  (mostly)\n\n7. **Supporting characters**: Lists Dad, Vinnie, Mikey, Carlos, Rosco, Thugs. The rubric mentions Dad, Salvatori, Vinnie among supporting cast. Salvatori is listed as primary instead of supporting, but the others are present.  (mostly)\n\n8. **Location count**: Estimated at 10, which falls within the rubric's 5-20 range. \n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, along with the dystopian city and flashback locations. \n\n10. **Target audience**: Correctly identified as mature/adult content (R-rated) with appropriate evidence. \n\n11. **Confidence calibration**: The format confidence of 0.85 is too high given it's wrong. Duration confidence of 0.8 is also too high for a wrong answer. Other confidences seem reasonable. Mixed.\n\n12. **Rationale quality**: Rationales are generally grounded in screenplay evidence, though the format/duration rationales are based on an incorrect page count assessment.\n\nThe two major errors are the format (short film vs. feature film) and duration (9 min vs. 85-130 min). These are significant misidentifications that cascade from the same root error of misjudging the screenplay's length. The remaining 8 fields are largely accurate. Overall, about 8/12 criteria are met well, with 2 major failures.",
              "tokensUsed": {
                "total": 2156,
                "prompt": 1431,
                "completion": 725,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n```json\\n{\\n  \\\"title\\\": {\\n    \\\"value\\\": \\\"The Mariner\\\",\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"The title is explicitly stated at the beginning of the screenplay and on a superimposed title card within the text.\\\"\\n  },\\n  \\\"format\\\": {\\n    \\\"value\\\": \\\"short film\\\",\\n    \\\"confidence\\\": 0.85,\\n    \\\"rationale\\\": \\\"The script is approximately 8-10 pages long and follows a self-contained thematic arc regarding the protagonist's origin story, suggesting a short film or a proof-of-concept.\\\"\\n  },\\n  \\\"genre\\\": {\\n    \\\"value\\\": [\\n      \\\"action\\\",\\n      \\\"crime\\\",\\n      \\\"drama\\\"\\n    ],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"The script features heavy combat and weapons (action), a plot involving gang money and blockchain theft (crime), and a central conflict about family trauma and a broken father-son relationship (drama).\\\"\\n  },\\n  \\\"tone\\\": {\\n    \\\"value\\\": [\\n      \\\"gritty\\\",\\n      \\\"dark\\\",\\n      \\\"stylized\\\",\\n      \\\"emotional\\\"\\n    ],\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"The setting is a ruined, post-collapse city with graphic violence ('wet cracking sounds', 'skull'). The 'Mariner' persona adds a stylized/superhero element, while the flashbacks provide an emotional, somber counterpoint.\\\"\\n  },\\n  \\\"estimated_duration_minutes\\\": {\\n    \\\"value\\\": 9,\\n    \\\"confidence\\\": 0.8,\\n    \\\"rationale\\\": \\\"Based on the standard industry rule of one minute per page, the script's length and density of action sequences suggest a runtime of approximately 8 to 10 minutes.\\\"\\n  },\\n  \\\"primary_characters\\\": {\\n    \\\"value\\\": [\\n      \\\"The Mariner (Billy/Will)\\\",\\n      \\\"Rose\\\",\\n      \\\"Salvatori\\\"\\n    ],\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"Billy (The Mariner) and Rose are the central protagonists present throughout the narrative; Salvatori is the primary antagonist introduced in the climax.\\\"\\n  },\\n  \\\"supporting_characters\\\": {\\n    \\\"value\\\": [\\n      \\\"Dad\\\",\\n      \\\"Vinnie\\\",\\n      \\\"Mikey\\\",\\n      \\\"Carlos\\\",\\n      \\\"Rosco\\\",\\n      \\\"Thugs\\\"\\n    ],\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"Dad appears in pivotal flashbacks. Vinnie, Mikey, Carlos, and Rosco are named antagonists/thugs who interact with the leads before being neutralized.\\\"\\n  },\\n  \\\"location_count\\\": {\\n    \\\"value\\\": 10,\\n    \\\"confidence\\\": 0.85,\\n    \\\"rationale\\\": \\\"Distinct locations identified by sluglines include: City Centre, Ruddy & Greene Building (Front, Rear, Elevator, 11th Floor, 12th Floor Stairwell, 13th Floor, 15th Floor Office), Coastline (Flashback), and Backyard (Flashback).\\\"\\n  },\\n  \\\"locations_summary\\\": {\\n    \\\"value\\\": \\\"A dystopian, ruined city center; various levels of a dilapidated yet partially luxurious office building (hallways, elevator, stairwells, and a high-end office); and two outdoor flashback locations (a coastline and a backyard).\\\",\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"The script moves from the exterior ruined city into a vertical progression through the Ruddy & Greene building, interspersed with memory-based outdoor settings.\\\"\\n  },\\n  \\\"target_audience\\\": {\\n    \\\"value\\\": \\\"Mature Adults (R-rated)\\\",\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"The script contains graphic descriptions of violence ('skull', 'bloody scrap', 'wet plop'), profanity, and themes of child abuse and organized crime.\\\"\\n  }\\n}\\n```\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "c7d1507a-97bb-445e-ad8f-4065b2d0e3c1",
        "latencyMs": 13241,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a heros origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldnt.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. McAngus Fish & Brewis painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the buildings back door, his huge frame silhouetted against the interiors light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of Faith by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, Faith playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! Cmon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. Shes wearing a Tim Hortons uniform, her hair is a mess, and theres blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: THE MARINER\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHes built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with Dad in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at mas.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! Im taking you home. Its my fault they went after you. I never thought theyd--\n\nROSE  \n(laughing)  \nYou think theyre after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWeve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariners OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWell take the stairs up. They wont expect that.\n\nMARINER  \nBecause its stupid\\!\n\nRose raises an eyebrow at Mariners crazy outfit.\n\nMARINER  \nIts functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his Dad TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows whats a hero? Es the one whats brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! Ill buy you a new bloody purse.\n\nROSE  \nIt aint the purse. Its... a blockchain password to my life savings. I hid it on a chip in the lining. Its all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hells a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! Its, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatoris gonna kill ya, Rosie.\n\nRose nods yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe aint gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. Its gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shits a scam. You gotta get into PonziCoin. My cousins in it. He says its legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWere leaving. Now. I dont steal, Rose. Its against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariners code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We dont wanna hurt ya. Mr. Salvatori just wants his password. Thats all. Then maybe, if youre reeeaal nice, maybe you can be my booty call some more.\n\nRoses eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariners back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIES screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos back. BOSUN is carved into the wood. Rose gives Vinnies body a kick.\n\nROSE  \nPrick. Oh shit\\! Youre bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariners leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnies unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. Cmon.\n\nINT. 15TH FLOOR\n\nThis floor isnt destroyed like the others. Its CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariners opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist youre strong, Billy. Thats gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariners dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, dont never run from a fight. Not again, ya hears me? Its not what a man does. Its not what a MacAngus does. Lets do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin tin, sis. Just like dad taught me.\n\nROSE  \nYoure serious about this dad shit? You talking about the summer he took you to buddys place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONTD)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, hes living up in  Chimney Bay with some skank. He was on the pogey that summer at buddys\\! He was supposed to be taking care of you. Instead hed ditch you in his deadbeat friends yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma woulda said.\n\nROSE  \nYou were too young, Will. She didnt want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew youd be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. Hes WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariners dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Dont never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like youre trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, by? Its got two thumbs and e looks like this\\! Ha\\! Now fetch me anudder. An dont gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONTD)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariners OAR and kick the back of his legs so hes kneeling at their feet. Mariner doesnt resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHes no hero. Hes a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they dont deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHes a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Roses head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariners face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "a298f8e59d0e5184b43a0be484524cae03335a41d5ae89811f617d91fa39c887",
        "promptIdx": 7,
        "provider": {
          "id": "google:gemini-3-flash-preview",
          "label": "Gemini 3 Flash"
        },
        "response": {
          "output": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The title is explicitly stated at the beginning of the screenplay and on a superimposed title card within the text.\"\n  },\n  \"format\": {\n    \"value\": \"short film\",\n    \"confidence\": 0.85,\n    \"rationale\": \"The script is approximately 8-10 pages long and follows a self-contained thematic arc regarding the protagonist's origin story, suggesting a short film or a proof-of-concept.\"\n  },\n  \"genre\": {\n    \"value\": [\n      \"action\",\n      \"crime\",\n      \"drama\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"The script features heavy combat and weapons (action), a plot involving gang money and blockchain theft (crime), and a central conflict about family trauma and a broken father-son relationship (drama).\"\n  },\n  \"tone\": {\n    \"value\": [\n      \"gritty\",\n      \"dark\",\n      \"stylized\",\n      \"emotional\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"The setting is a ruined, post-collapse city with graphic violence ('wet cracking sounds', 'skull'). The 'Mariner' persona adds a stylized/superhero element, while the flashbacks provide an emotional, somber counterpoint.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 9,\n    \"confidence\": 0.8,\n    \"rationale\": \"Based on the standard industry rule of one minute per page, the script's length and density of action sequences suggest a runtime of approximately 8 to 10 minutes.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\n      \"The Mariner (Billy/Will)\",\n      \"Rose\",\n      \"Salvatori\"\n    ],\n    \"confidence\": 1.0,\n    \"rationale\": \"Billy (The Mariner) and Rose are the central protagonists present throughout the narrative; Salvatori is the primary antagonist introduced in the climax.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\n      \"Dad\",\n      \"Vinnie\",\n      \"Mikey\",\n      \"Carlos\",\n      \"Rosco\",\n      \"Thugs\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"Dad appears in pivotal flashbacks. Vinnie, Mikey, Carlos, and Rosco are named antagonists/thugs who interact with the leads before being neutralized.\"\n  },\n  \"location_count\": {\n    \"value\": 10,\n    \"confidence\": 0.85,\n    \"rationale\": \"Distinct locations identified by sluglines include: City Centre, Ruddy & Greene Building (Front, Rear, Elevator, 11th Floor, 12th Floor Stairwell, 13th Floor, 15th Floor Office), Coastline (Flashback), and Backyard (Flashback).\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A dystopian, ruined city center; various levels of a dilapidated yet partially luxurious office building (hallways, elevator, stairwells, and a high-end office); and two outdoor flashback locations (a coastline and a backyard).\",\n    \"confidence\": 0.95,\n    \"rationale\": \"The script moves from the exterior ruined city into a vertical progression through the Ruddy & Greene building, interspersed with memory-based outdoor settings.\"\n  },\n  \"target_audience\": {\n    \"value\": \"Mature Adults (R-rated)\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The script contains graphic descriptions of violence ('skull', 'bloody scrap', 'wet plop'), profanity, and themes of child abuse and organized crime.\"\n  }\n}\n```",
          "tokenUsage": {
            "prompt": 4883,
            "completion": 874,
            "total": 6879,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 1122,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cost": 0.0084295,
          "raw": {
            "candidates": [
              {
                "content": {
                  "parts": [
                    {
                      "text": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The title is explicitly stated at the beginning of the screenplay and on a superimposed title card within the text.\"\n  },\n  \"format\": {\n    \"value\": \"short film\",\n    \"confidence\": 0.85,\n    \"rationale\": \"The script is approximately 8-10 pages long and follows a self-contained thematic arc regarding the protagonist's origin story, suggesting a short film or a proof-of-concept.\"\n  },\n  \"genre\": {\n    \"value\": [\n      \"action\",\n      \"crime\",\n      \"drama\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"The script features heavy combat and weapons (action), a plot involving gang money and blockchain theft (crime), and a central conflict about family trauma and a broken father-son relationship (drama).\"\n  },\n  \"tone\": {\n    \"value\": [\n      \"gritty\",\n      \"dark\",\n      \"stylized\",\n      \"emotional\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"The setting is a ruined, post-collapse city with graphic violence ('wet cracking sounds', 'skull'). The 'Mariner' persona adds a stylized/superhero element, while the flashbacks provide an emotional, somber counterpoint.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 9,\n    \"confidence\": 0.8,\n    \"rationale\": \"Based on the standard industry rule of one minute per page, the script's length and density of action sequences suggest a runtime of approximately 8 to 10 minutes.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\n      \"The Mariner (Billy/Will)\",\n      \"Rose\",\n      \"Salvatori\"\n    ],\n    \"confidence\": 1.0,\n    \"rationale\": \"Billy (The Mariner) and Rose are the central protagonists present throughout the narrative; Salvatori is the primary antagonist introduced in the climax.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\n      \"Dad\",\n      \"Vinnie\",\n      \"Mikey\",\n      \"Carlos\",\n      \"Rosco\",\n      \"Thugs\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"Dad appears in pivotal flashbacks. Vinnie, Mikey, Carlos, and Rosco are named antagonists/thugs who interact with the leads before being neutralized.\"\n  },\n  \"location_count\": {\n    \"value\": 10,\n    \"confidence\": 0.85,\n    \"rationale\": \"Distinct locations identified by sluglines include: City Centre, Ruddy & Greene Building (Front, Rear, Elevator, 11th Floor, 12th Floor Stairwell, 13th Floor, 15th Floor Office), Coastline (Flashback), and Backyard (Flashback).\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A dystopian, ruined city center; various levels of a dilapidated yet partially luxurious office building (hallways, elevator, stairwells, and a high-end office); and two outdoor flashback locations (a coastline and a backyard).\",\n    \"confidence\": 0.95,\n    \"rationale\": \"The script moves from the exterior ruined city into a vertical progression through the Ruddy & Greene building, interspersed with memory-based outdoor settings.\"\n  },\n  \"target_audience\": {\n    \"value\": \"Mature Adults (R-rated)\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The script contains graphic descriptions of violence ('skull', 'bloody scrap', 'wet plop'), profanity, and themes of child abuse and organized crime.\"\n  }\n}\n```",
                      "thoughtSignature": "EoUeCoIeAb4+9vsfKkJiI/r/Xtt4U0tsjORcs7Q55gT08noyZyVA165l0jDenQmo4TByNnw1N2ZArqQJMbMya9Cf2KA+4MhEuA/haQajoLu+Ga5SITuGiacWh0VZqom/uDpzKVi1bzlVRfvvmT34zkToCwK6R99MBL7Qto+NCCRsoXHZxG4qa8v6GqZe7K5sMRnlB4BBC46L9RknxS7GSRHTJZdBhDZVuNGZB0KBQrhxEn9g4ldDox+6Rm0WboysWlsrGFpF3af8zttkVn+rc9ytwACMlKBlPBKTx13DWrhvo4ThfQlYp81LtCVs+VFb9Q5KFUlmvQnRkjvrzgr1xMV2NY0kqH9Kn1a61ThN9CKCfSjiJGmDwMrjsW/dOmmKhRFIRLUtpYjbPvI3dORhsK1VbOJEh7C9WCntdxTKfJgQGDzbwx8pSER0r4A+oleSvA8D9RDOPwtsUOUFMAFaoW9r9OC7LRZ0fSw0ppWf/Oi4CZN6MDhiAf2rSrw8CxnD1+Tl3on/PjK6Qs700qEdA89IRqb7uARWeJTwiSX3pE/pUTGhVhEjNZgUgKNzDrdRLmsdbSVwTjJn9QMDcpKGyJpoa33jSpJ8OMnrPuZ3esUC92WaTXbCywJOGDDYkb4GRzL6xYB2Z8CdbZ3XzM8Gt4M839A1h6LGS20USWhFPbjUL6/DbJgOJpcHnKYtbwk/uMNN0so33LIr/HT18CNSqONcTqwieFNURBHqZiRj3JEMxupXX0UiNxq7I2VLvC1wNlK5XP3fGgNeP2yf6qniEpsBuesG8z+qicFf7hxjHMB/D6O5mzlQYn/Ji1UbEG4WSYOEw7yESMRdbIPna517l2hUqTme9Tmk3BVLNIjwyh9wC48ptgIWEkJ4889eMFNLeYE4UGnWdTXh972s1CI4vmKtovUbFMl3ALPObRIBoZP7fQ7qzyb0G7RyV2cKj4/hoVnaaEj2N/J782d29vfikzwzi2NhnrTWkPUPTkOS+2E7GP7jZ5+6ZlSImlhvz+s38h1OaPCgW6tGp7LzOr/Cqgg7vtlObuoOHqxDZ4AQ7l/AIGOG4S6vPBFsaQsuO+JhBak53p8ncESf2M0D5IL7xbHmbLie24gsEX1PCW3BdV49l6dVIzpEPbi1Qutx5aPauDu0Vo8Bz2SAe/BfR6OhJ4UyevSSRa0YtPzIeTR0g+cakmLnbzqchcdhBR4gaiPWOPK3WHc4u+dVx/NfIWuqyDNLHjA48vJu5yfJDVsIshI/L0kGDLcvWW/TFFwhxA6QhguWjxoTxM5goyGcojPg7wB/8n2mWnNbvdL91qTsdpmt4rVDpvQO3avRmlNdKkYh50WuzRTEv6dxVEzh7fy/volN8sif0feu3xME3qfZ+NS3dzjzWLTb0GFUn3I+phQf1CSY6wboScM3yfBcu8LjGH3Znz1hQx58p4y0eCpGdhSZfn687nLD9b0Gc+EOVEvs8rrhX3DqSN0EgswxpcggQy5c2jhRjdl1185mofBs7MlXzMcdSVAl9JJi68ND5oF6o2BeE0lXFQMJ+lWttJK6UwwQZTZsRPNEeM7l0vVEqfWJdG+L8q6cSlQSIMXPgAsUwMOA3SMndOLW13clNZIN3JJt4WnO1zyKOfRSazXR0e6Fylr+FEFlRXwSr1kKlEWJ6dNIshWva4Ctgffp9fQE9CnwZW73c4XxY/jW1kLKGzXLLaXtCeS7DpiLcufkiwpKZR8JufcocHomxDLtaZMMHa8WksFJnRsjh6oOf/jWp5ynPG287V0HxQpn7O2jN921CVvSiGMXbjvg5aF9QC7pOkkTt4LFiewo66cRV7JIamGz5YfO5oRiMOW4Yh2NkGhzlu3ByB2uy4z4llwJGvlQX7fQ1A/Silk7H6yP/6fqRO8DoHh+fAnBTiOOXzjlDMck08xjXbgnFoLAD2nUaxjGog+h+ZOEUy959mXy0dN7W7J8TSKhSOmxIOwz0EhFsflvG+wDlNKk1b97Xo4kVEEnWqVAHQ6iGBdVLrl3uJxNSk3GsxBrmOP890b1Khm6tukTcv/Z68ccQEllieI2a7DXSQt6S+GD8T6fhIKDGJ9mA8LJaIrE0NhGw7VEGwVAZ2ADZeDQlsAi/OpMZmLpDyiHGpIHi0RPWv+Ibtz030i3iiJEs7UKC4kSkmYbVAvWVSIqL0lhxYAOfjKEvVwYc1fbLjQkUQfDM/10SJIu4TDBNVDLHPsUiUXw/jYeS18c2k2lbVR8bjU7Qt7wMDQkep7npkdjuAUoIC+CuhHCXqsdBZZm6sKSDXPQvpx1bOMeamfDb+1uwxBwFrnYz5iLGDKJpnQUC50GpsDi6YoYtOu5OCvr7XkZpUhit3w7j0/17npNujfIJLbzUKMwA4ZvUOM62SekqA8auDNmg2DWJIPva8J78LfqoPqSylOGkAhRH2MGMQ0KY/aHPcFRWXMkW0GEnRTS/18sVHrT5cMFvOPysydsokUHoNf5ik2Oj1ktF+BUrP+BgDnVUEOoOam7NARDHGGUwgN8WAJbnrLS6m76V+PBhHFbk2v3leVtD9iBh01yt/+fDOuohV1/CkFPHu+rumvrIg+ehq4ylLdIxIHlntA+hmxOqJ3ixyx3Y7l9jCdom7OMxklnpXcrgzS0dILqIMP71hsAc56SCxeSkhIUqPKo94/yMwTLNXV2L/tr6VLwTOHRW/n73O/P5i6IEfwsLJDDNx/ETOK5PcnOoOTfoOsBiowbtiHVan9Xh7Vfpup2bmHbUpAslr2Q2BJJbMI1qWTM3cwqzEUy6aMTtHVIIFBk455grg+cqaR/9Y5T6IK/aXEqN9bk5jdhtVpjr+evG6XvXSkQ1bkYq8+YJoALlrPLN07WCVE+sEHYk2iFqFILq4HRzPRImDCdNdDHsKYa3F0szYqvLypuwZ8RXuYjpNUWHr2WPg2EeanNIiPpn/VL8i3Bb9jQrZ7EChn/Zge8+NLEvDXOtAhB1Ccgm1LcFOtIxa9ViayhoYLMLcHmsuGFUXEZCxw5i+0Ie/T6Z7Aikrs/4bdkyVdc9kywlHhilo/FNjPgCTGPqaG/Mu55043J66odfkly3Fz2yR9piAZ09+P2SUmCwYBBNlefEuOovNfAMMflf8uwlXhm0ssWJ6mg9rWL4QH5tAR2bfEaLk9oaPzrMcE9Xh41ubKAy9pogRFZxlNlN1SQGgq8EoPC+slq76L1H4SGodwqQbgXsamHiaVP0yenKi7nlmuCQGOxmtwf4wcUvWOHHiZVGdl4yrDOokOOmObLvwBDJqcPRihbRyOge4T8RLt0+E7Y9nelFli+GHHC6PhJxXz2xJn67S43Y2vOxAZHc26Eu4GqUE77vBch/ZqzfFz22fq5YV9aW9jeao4OqXSXhjnQkgPf9R9lwD9Mcj4KY+pWxOnZVgO09nsUNQMArOv5wAOO9TpRYK4gJ+CpFBKZdISuXGTA3q91kQ2mi3+BujLclw/KY8GcoI287vooN8bOMWCM7kwdtlA7YEeKPKBWQm3C5fHPvHbOTDpcWj6kM0suvx0x/Cq3ARqsurhgcSjC/3YQ9IqGwlMFEos4MC+xkBM5p1a7dtYy4QYOz9TcHksO3C+jRbbfZ7iZHQHJHC+Z44Aff8vrfEBfH+S0H9B8E4Gu3k+fRo2qxVIP7J8q4Hc80QxGr1qJQdTc9WElmD2NiaLs7FsDi2soVKV6TZOsxCH8kZfHyep9Suo3VIDU0FeFDrBVIDoDvnRNHbgk4MULOFy07IWmFi1A173hrkySg0hc28kjXtfFpXwim5VbI3TEKREfU1FOtkSqnU/ezM90Ydat3W2y5NbN1RaKFrwTHcuzY0Ke+Ut5ziOYScHOeU9d4l8yJMGmMas/W2I01M2AfC9XyjVtRMl/L2vngk1pJOZGkfqiW8cXAfsADI8gAYN603ZMns4xHVbefidtdAjldQ1/gR/wjXyyUllvo5z+u4NAzzTjib4oh3toAbUP7BSzMSA1MdQ1giq0IOVJ36OjB77crgBIzRM6+9l8CoV5q07U0nLrY+NmSeynH6v90mXegvMTGT/Q8RtHCAARkwONNzuQskVS9OgPfwKC30QPrtF1exnrz4nci1kWlnyBcIMie8hbab9XoDhtT3xpXIkwY2ECAwglmUhFcwisDc9gPcdACIuWE0zQ15lIr15hrEVWCHwABGmSgqO/tCa/0P3WmcNjxzewV5I1Rfa1t6ujYdyqJKG1f854eIP8AQtr42SB9oX5VkKnkoPPrjsSD05VmzyzE1W5XB9ixbkgekEnGW3BVwlrD/aHIdVCTDYfYHGTfDiwLW6xiiHD9IYK0KtVgX8V92G8z8AzvpEIjzoi9wuLmEUhgPGxx549j0PnIN3nsWjjSE2n7tcfgjoomhvqwca0ar6wF1C39fpk3nHZpuEMF8O5M5YrYEHmNyri+KHj10gMNM4/B4Xcdbbl+4fiI5rL1xdgdUchmr3aD7Sm650NS9dhvasdFm4tg2dzU30tVejxuNw3zGMUWpsmdHlhm7xdNGc8nWalpNW3v3avOpfyTrbmAIkjRiP9Es3Fhkh42J+z9GuzfPJTNjWp0cgK1YsUYHf4rIcm222+wXzXXCwqBVsv4BltlDoDtt4KZO7MiW0LPmo0+o0ecRjD61w0LKuyyJZH1JG5WMb0WrOQnbjZJzIIzIuqfFPKXj03oN56EyTiTwbC7z1894Wyyv0Rm4nse89u0o790VVmqlt+8HwwPdsELqKZ45iHbHlfWEXwKbILkM9I8TVuwuZF0VS/Cq667ZpnzHp4FYfxdftDod8qorOxH2o5W7x8hSK48G3qMnzn8aH3sd7Sg+DxnIdFi5AKj1rxnFds0Rtpl/pT/T/RlFI3oK7qTbj8YWGvWODIavkrrNuYB67kWfaY0w0nObboTcENqRkl2V9dUAywnYcJ+AA9P2+DqpumdYWatT2W0ZuE18o5OeG0LR538lEMQbL4Qvgs8JIra0DVaBijwGaYQKXxYPybu+kQEel8/wGvdnHXNQ2X1UURBOs9g20HUvF2ffLbGuLkBCUgxR90S3/v1C1/7nEPfWNZ+AUdQWb3zp/IwD4jskH6TY/zGe4TX0gg8QhadAgTgbtQLEJy01q0/h2uomcU8m8YPfdexfo="
                    }
                  ],
                  "role": "model"
                },
                "finishReason": "STOP",
                "index": 0
              }
            ],
            "usageMetadata": {
              "promptTokenCount": 4883,
              "candidatesTokenCount": 874,
              "totalTokenCount": 6879,
              "promptTokensDetails": [
                {
                  "modality": "TEXT",
                  "tokenCount": 4883
                }
              ],
              "thoughtsTokenCount": 1122
            },
            "modelVersion": "gemini-3-flash-preview",
            "responseId": "4XOSaYmIDZyKqtsP08fzsQI"
          },
          "cached": false,
          "metadata": {}
        },
        "score": 0.60545,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.013042400000000001,
        "error": "Let me evaluate each field:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. \n\n2. **Format**: Identified as 'pilot' with confidence 0.85. The rubric says it should be identified as a 'feature film screenplay.' The model chose 'pilot' based on 10-page length and cliffhanger ending. However, the rubric explicitly states this is a feature film screenplay (~430 lines). This is a significant error. \n\n3. **Genre**: Identified as action, crime, drama. The rubric accepts action, crime, and/or thriller. The model got action and crime correct. Drama is reasonable too. \n\n4. **Tone**: Dark, gritty, violent, dystopian - captures the key qualities well. \n\n5. **Duration**: Estimated at 10 minutes. The rubric says 85-130 minutes for a ~430-line screenplay. The model estimated based on '10 pages' but the actual screenplay is ~430 lines, which would be much longer. This is a major error - off by an order of magnitude. \n\n6. **Primary characters**: Identified The Mariner, Rose, and Salvatori. The rubric says Mariner and Rose as leads. Salvatori is listed as supporting in the rubric. Having Salvatori as primary is debatable but not terrible. Partially correct. \n\n7. **Supporting characters**: Lists Dad, Vinnie, Rosco, Mikey, Carlos. The rubric mentions Dad, Salvatori, Vinnie. Salvatori is misplaced as primary instead of supporting. Dad and Vinnie are correctly listed. \n\n8. **Location count**: 9 locations. The rubric says 5-20 is reasonable. \n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as primary setting. \n\n10. **Target audience**: Correctly identified as mature/adult (17+). \n\n11. **Confidence calibration**: The format confidence of 0.85 for an incorrect answer is poorly calibrated. Duration confidence of 0.95 for a wildly incorrect estimate is very poorly calibrated. Other confidences seem reasonable.\n\n12. **Rationale quality**: Rationales are generally grounded in screenplay evidence, but the format and duration rationales are based on a misunderstanding of the screenplay's actual length (treating it as 10 pages when it's ~430 lines/much longer).\n\nThe two critical errors are format (pilot vs. feature film) and duration (10 min vs. 85-130 min), both stemming from the same misunderstanding of the screenplay's length. These are significant metadata errors. The character classification has minor issues with Salvatori's placement. Most other fields are accurate.",
        "gradingResult": {
          "pass": false,
          "score": 0.5909,
          "reason": "Let me evaluate each field:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. \n\n2. **Format**: Identified as 'pilot' with confidence 0.85. The rubric says it should be identified as a 'feature film screenplay.' The model chose 'pilot' based on 10-page length and cliffhanger ending. However, the rubric explicitly states this is a feature film screenplay (~430 lines). This is a significant error. \n\n3. **Genre**: Identified as action, crime, drama. The rubric accepts action, crime, and/or thriller. The model got action and crime correct. Drama is reasonable too. \n\n4. **Tone**: Dark, gritty, violent, dystopian - captures the key qualities well. \n\n5. **Duration**: Estimated at 10 minutes. The rubric says 85-130 minutes for a ~430-line screenplay. The model estimated based on '10 pages' but the actual screenplay is ~430 lines, which would be much longer. This is a major error - off by an order of magnitude. \n\n6. **Primary characters**: Identified The Mariner, Rose, and Salvatori. The rubric says Mariner and Rose as leads. Salvatori is listed as supporting in the rubric. Having Salvatori as primary is debatable but not terrible. Partially correct. \n\n7. **Supporting characters**: Lists Dad, Vinnie, Rosco, Mikey, Carlos. The rubric mentions Dad, Salvatori, Vinnie. Salvatori is misplaced as primary instead of supporting. Dad and Vinnie are correctly listed. \n\n8. **Location count**: 9 locations. The rubric says 5-20 is reasonable. \n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as primary setting. \n\n10. **Target audience**: Correctly identified as mature/adult (17+). \n\n11. **Confidence calibration**: The format confidence of 0.85 for an incorrect answer is poorly calibrated. Duration confidence of 0.95 for a wildly incorrect estimate is very poorly calibrated. Other confidences seem reasonable.\n\n12. **Rationale quality**: Rationales are generally grounded in screenplay evidence, but the format and duration rationales are based on a misunderstanding of the screenplay's actual length (treating it as 10 pages when it's ~430 lines/much longer).\n\nThe two critical errors are format (pilot vs. feature film) and duration (10 min vs. 85-130 min), both stemming from the same misunderstanding of the screenplay's length. These are significant metadata errors. The character classification has minor issues with Salvatori's placement. Most other fields are accurate.",
          "namedScores": {},
          "tokensUsed": {
            "total": 2227,
            "prompt": 1522,
            "completion": 705,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.7318,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=0.09, format_accuracy=0.30, genre_accuracy=0.75, json_valid=0.90, location_accuracy=0.80, title_accuracy=1.00, tone_accuracy=0.60",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": false,
              "score": 0.45,
              "reason": "Let me evaluate each field:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. \n\n2. **Format**: Identified as 'pilot' with confidence 0.85. The rubric says it should be identified as a 'feature film screenplay.' The model chose 'pilot' based on 10-page length and cliffhanger ending. However, the rubric explicitly states this is a feature film screenplay (~430 lines). This is a significant error. \n\n3. **Genre**: Identified as action, crime, drama. The rubric accepts action, crime, and/or thriller. The model got action and crime correct. Drama is reasonable too. \n\n4. **Tone**: Dark, gritty, violent, dystopian - captures the key qualities well. \n\n5. **Duration**: Estimated at 10 minutes. The rubric says 85-130 minutes for a ~430-line screenplay. The model estimated based on '10 pages' but the actual screenplay is ~430 lines, which would be much longer. This is a major error - off by an order of magnitude. \n\n6. **Primary characters**: Identified The Mariner, Rose, and Salvatori. The rubric says Mariner and Rose as leads. Salvatori is listed as supporting in the rubric. Having Salvatori as primary is debatable but not terrible. Partially correct. \n\n7. **Supporting characters**: Lists Dad, Vinnie, Rosco, Mikey, Carlos. The rubric mentions Dad, Salvatori, Vinnie. Salvatori is misplaced as primary instead of supporting. Dad and Vinnie are correctly listed. \n\n8. **Location count**: 9 locations. The rubric says 5-20 is reasonable. \n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as primary setting. \n\n10. **Target audience**: Correctly identified as mature/adult (17+). \n\n11. **Confidence calibration**: The format confidence of 0.85 for an incorrect answer is poorly calibrated. Duration confidence of 0.95 for a wildly incorrect estimate is very poorly calibrated. Other confidences seem reasonable.\n\n12. **Rationale quality**: Rationales are generally grounded in screenplay evidence, but the format and duration rationales are based on a misunderstanding of the screenplay's actual length (treating it as 10 pages when it's ~430 lines/much longer).\n\nThe two critical errors are format (pilot vs. feature film) and duration (10 min vs. 85-130 min), both stemming from the same misunderstanding of the screenplay's length. These are significant metadata errors. The character classification has minor issues with Salvatori's placement. Most other fields are accurate.",
              "tokensUsed": {
                "total": 2227,
                "prompt": 1522,
                "completion": 705,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n```json\\n{\\n  \\\"title\\\": {\\n    \\\"value\\\": \\\"The Mariner\\\",\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"The title is explicitly stated at the beginning of the screenplay and confirmed by a 'FULL-SCREEN SUPERIMPOSED TITLE CARD: THE MARINER'.\\\"\\n  },\\n  \\\"format\\\": {\\n    \\\"value\\\": \\\"pilot\\\",\\n    \\\"confidence\\\": 0.85,\\n    \\\"rationale\\\": \\\"The 10-page length, extensive world-building (dystopian future, vigilantes), introduction of complex character backstories, and an abrupt cliffhanger ending suggest an introductory episode for a potential series, rather than a self-contained short film.\\\"\\n  },\\n  \\\"genre\\\": {\\n    \\\"value\\\": [\\n      \\\"action\\\",\\n      \\\"crime\\\",\\n      \\\"drama\\\"\\n    ],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"The screenplay features extensive fight sequences, gun violence, and a vigilante protagonist ('action'). The plot revolves around stealing gang money from a crime boss ('crime'). The central theme of a hero's crumbling origin story and character development provides a strong dramatic core ('drama').\\\"\\n  },\\n  \\\"tone\\\": {\\n    \\\"value\\\": [\\n      \\\"dark\\\",\\n      \\\"gritty\\\",\\n      \\\"violent\\\",\\n      \\\"dystopian\\\"\\n    ],\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"The setting is a 'ruined city' with 'no-go zones,' constant violence, and explicit descriptions of blood and gore, creating a 'dark' and 'gritty' atmosphere. The world itself is 'dystopian' due to the post-pandemic collapse.\\\"\\n  },\\n  \\\"estimated_duration_minutes\\\": {\\n    \\\"value\\\": 10,\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"Based on the industry standard of approximately one minute of screen time per page of screenplay (10 pages).\\\"\\n  },\\n  \\\"primary_characters\\\": {\\n    \\\"value\\\": [\\n      \\\"The Mariner\\\",\\n      \\\"Rose\\\",\\n      \\\"Salvatori\\\"\\n    ],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"The Mariner is the titular protagonist. Rose is his sister, a co-protagonist, and central to the immediate conflict. Salvatori is the clear antagonist, driving the main conflict.\\\"\\n  },\\n  \\\"supporting_characters\\\": {\\n    \\\"value\\\": [\\n      \\\"Dad\\\",\\n      \\\"Vinnie\\\",\\n      \\\"Rosco\\\",\\n      \\\"Mikey\\\",\\n      \\\"Carlos\\\"\\n    ],\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"Dad is a crucial figure in Mariner's flashbacks, shaping his character. Vinnie, Rosco, Mikey, and Carlos are named thugs who interact directly with the protagonists and advance the plot, even if briefly.\\\"\\n  },\\n  \\\"location_count\\\": {\\n    \\\"value\\\": 9,\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"The screenplay features 9 distinct physical settings: City Centre exterior, Ruddy & Greene Building exterior, Ruddy & Greene Building interior (elevator, 11th floor, stairwell, 13th floor, 15th floor/office), a coastline (flashback), and a backyard (flashback).\\\"\\n  },\\n  \\\"locations_summary\\\": {\\n    \\\"value\\\": \\\"A ruined, dystopian city center; a dilapidated 15-story building with various interior floors including a luxurious top-floor office; and flashback locations of an idyllic coastline and a neglected backyard.\\\",\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"Summarizes the primary present-day setting (ruined city, specific building with varied interiors) and the key flashback settings (coastline, backyard).\\\"\\n  },\\n  \\\"target_audience\\\": {\\n    \\\"value\\\": \\\"Mature audience (17+)\\\",\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"The screenplay contains graphic violence ('bloody scrap of something with hair on it', 'wet cracking sounds', 'cracks their heads together'), strong language ('Shit!', 'assholes', 'Fer fuck sakes!'), and mature themes (crime, vigilantism, family trauma, abandonment), making it unsuitable for younger audiences.\\\"\\n  }\\n}\\n```\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "c21ee940-ff5c-4378-98ff-4ae3b3cbe547",
        "latencyMs": 19093,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a heros origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldnt.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. McAngus Fish & Brewis painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the buildings back door, his huge frame silhouetted against the interiors light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of Faith by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, Faith playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! Cmon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. Shes wearing a Tim Hortons uniform, her hair is a mess, and theres blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: THE MARINER\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHes built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with Dad in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at mas.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! Im taking you home. Its my fault they went after you. I never thought theyd--\n\nROSE  \n(laughing)  \nYou think theyre after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWeve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariners OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWell take the stairs up. They wont expect that.\n\nMARINER  \nBecause its stupid\\!\n\nRose raises an eyebrow at Mariners crazy outfit.\n\nMARINER  \nIts functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his Dad TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows whats a hero? Es the one whats brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! Ill buy you a new bloody purse.\n\nROSE  \nIt aint the purse. Its... a blockchain password to my life savings. I hid it on a chip in the lining. Its all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hells a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! Its, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatoris gonna kill ya, Rosie.\n\nRose nods yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe aint gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. Its gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shits a scam. You gotta get into PonziCoin. My cousins in it. He says its legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWere leaving. Now. I dont steal, Rose. Its against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariners code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We dont wanna hurt ya. Mr. Salvatori just wants his password. Thats all. Then maybe, if youre reeeaal nice, maybe you can be my booty call some more.\n\nRoses eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariners back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIES screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos back. BOSUN is carved into the wood. Rose gives Vinnies body a kick.\n\nROSE  \nPrick. Oh shit\\! Youre bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariners leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnies unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. Cmon.\n\nINT. 15TH FLOOR\n\nThis floor isnt destroyed like the others. Its CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariners opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist youre strong, Billy. Thats gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariners dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, dont never run from a fight. Not again, ya hears me? Its not what a man does. Its not what a MacAngus does. Lets do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin tin, sis. Just like dad taught me.\n\nROSE  \nYoure serious about this dad shit? You talking about the summer he took you to buddys place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONTD)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, hes living up in  Chimney Bay with some skank. He was on the pogey that summer at buddys\\! He was supposed to be taking care of you. Instead hed ditch you in his deadbeat friends yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma woulda said.\n\nROSE  \nYou were too young, Will. She didnt want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew youd be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. Hes WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariners dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Dont never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like youre trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, by? Its got two thumbs and e looks like this\\! Ha\\! Now fetch me anudder. An dont gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONTD)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariners OAR and kick the back of his legs so hes kneeling at their feet. Mariner doesnt resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHes no hero. Hes a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they dont deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHes a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Roses head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariners face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "a298f8e59d0e5184b43a0be484524cae03335a41d5ae89811f617d91fa39c887",
        "promptIdx": 6,
        "provider": {
          "id": "google:gemini-2.5-flash",
          "label": "Gemini 2.5 Flash"
        },
        "response": {
          "output": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The title is explicitly stated at the beginning of the screenplay and confirmed by a 'FULL-SCREEN SUPERIMPOSED TITLE CARD: THE MARINER'.\"\n  },\n  \"format\": {\n    \"value\": \"pilot\",\n    \"confidence\": 0.85,\n    \"rationale\": \"The 10-page length, extensive world-building (dystopian future, vigilantes), introduction of complex character backstories, and an abrupt cliffhanger ending suggest an introductory episode for a potential series, rather than a self-contained short film.\"\n  },\n  \"genre\": {\n    \"value\": [\n      \"action\",\n      \"crime\",\n      \"drama\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"The screenplay features extensive fight sequences, gun violence, and a vigilante protagonist ('action'). The plot revolves around stealing gang money from a crime boss ('crime'). The central theme of a hero's crumbling origin story and character development provides a strong dramatic core ('drama').\"\n  },\n  \"tone\": {\n    \"value\": [\n      \"dark\",\n      \"gritty\",\n      \"violent\",\n      \"dystopian\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"The setting is a 'ruined city' with 'no-go zones,' constant violence, and explicit descriptions of blood and gore, creating a 'dark' and 'gritty' atmosphere. The world itself is 'dystopian' due to the post-pandemic collapse.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 10,\n    \"confidence\": 0.95,\n    \"rationale\": \"Based on the industry standard of approximately one minute of screen time per page of screenplay (10 pages).\"\n  },\n  \"primary_characters\": {\n    \"value\": [\n      \"The Mariner\",\n      \"Rose\",\n      \"Salvatori\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"The Mariner is the titular protagonist. Rose is his sister, a co-protagonist, and central to the immediate conflict. Salvatori is the clear antagonist, driving the main conflict.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\n      \"Dad\",\n      \"Vinnie\",\n      \"Rosco\",\n      \"Mikey\",\n      \"Carlos\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"Dad is a crucial figure in Mariner's flashbacks, shaping his character. Vinnie, Rosco, Mikey, and Carlos are named thugs who interact directly with the protagonists and advance the plot, even if briefly.\"\n  },\n  \"location_count\": {\n    \"value\": 9,\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay features 9 distinct physical settings: City Centre exterior, Ruddy & Greene Building exterior, Ruddy & Greene Building interior (elevator, 11th floor, stairwell, 13th floor, 15th floor/office), a coastline (flashback), and a backyard (flashback).\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A ruined, dystopian city center; a dilapidated 15-story building with various interior floors including a luxurious top-floor office; and flashback locations of an idyllic coastline and a neglected backyard.\",\n    \"confidence\": 0.95,\n    \"rationale\": \"Summarizes the primary present-day setting (ruined city, specific building with varied interiors) and the key flashback settings (coastline, backyard).\"\n  },\n  \"target_audience\": {\n    \"value\": \"Mature audience (17+)\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay contains graphic violence ('bloody scrap of something with hair on it', 'wet cracking sounds', 'cracks their heads together'), strong language ('Shit!', 'assholes', 'Fer fuck sakes!'), and mature themes (crime, vigilantism, family trauma, abandonment), making it unsuitable for younger audiences.\"\n  }\n}\n```",
          "tokenUsage": {
            "prompt": 4883,
            "completion": 954,
            "total": 9514,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 3677,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cost": 0.013042400000000001,
          "raw": {
            "candidates": [
              {
                "content": {
                  "parts": [
                    {
                      "text": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The title is explicitly stated at the beginning of the screenplay and confirmed by a 'FULL-SCREEN SUPERIMPOSED TITLE CARD: THE MARINER'.\"\n  },\n  \"format\": {\n    \"value\": \"pilot\",\n    \"confidence\": 0.85,\n    \"rationale\": \"The 10-page length, extensive world-building (dystopian future, vigilantes), introduction of complex character backstories, and an abrupt cliffhanger ending suggest an introductory episode for a potential series, rather than a self-contained short film.\"\n  },\n  \"genre\": {\n    \"value\": [\n      \"action\",\n      \"crime\",\n      \"drama\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"The screenplay features extensive fight sequences, gun violence, and a vigilante protagonist ('action'). The plot revolves around stealing gang money from a crime boss ('crime'). The central theme of a hero's crumbling origin story and character development provides a strong dramatic core ('drama').\"\n  },\n  \"tone\": {\n    \"value\": [\n      \"dark\",\n      \"gritty\",\n      \"violent\",\n      \"dystopian\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"The setting is a 'ruined city' with 'no-go zones,' constant violence, and explicit descriptions of blood and gore, creating a 'dark' and 'gritty' atmosphere. The world itself is 'dystopian' due to the post-pandemic collapse.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 10,\n    \"confidence\": 0.95,\n    \"rationale\": \"Based on the industry standard of approximately one minute of screen time per page of screenplay (10 pages).\"\n  },\n  \"primary_characters\": {\n    \"value\": [\n      \"The Mariner\",\n      \"Rose\",\n      \"Salvatori\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"The Mariner is the titular protagonist. Rose is his sister, a co-protagonist, and central to the immediate conflict. Salvatori is the clear antagonist, driving the main conflict.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\n      \"Dad\",\n      \"Vinnie\",\n      \"Rosco\",\n      \"Mikey\",\n      \"Carlos\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"Dad is a crucial figure in Mariner's flashbacks, shaping his character. Vinnie, Rosco, Mikey, and Carlos are named thugs who interact directly with the protagonists and advance the plot, even if briefly.\"\n  },\n  \"location_count\": {\n    \"value\": 9,\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay features 9 distinct physical settings: City Centre exterior, Ruddy & Greene Building exterior, Ruddy & Greene Building interior (elevator, 11th floor, stairwell, 13th floor, 15th floor/office), a coastline (flashback), and a backyard (flashback).\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A ruined, dystopian city center; a dilapidated 15-story building with various interior floors including a luxurious top-floor office; and flashback locations of an idyllic coastline and a neglected backyard.\",\n    \"confidence\": 0.95,\n    \"rationale\": \"Summarizes the primary present-day setting (ruined city, specific building with varied interiors) and the key flashback settings (coastline, backyard).\"\n  },\n  \"target_audience\": {\n    \"value\": \"Mature audience (17+)\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay contains graphic violence ('bloody scrap of something with hair on it', 'wet cracking sounds', 'cracks their heads together'), strong language ('Shit!', 'assholes', 'Fer fuck sakes!'), and mature themes (crime, vigilantism, family trauma, abandonment), making it unsuitable for younger audiences.\"\n  }\n}\n```"
                    }
                  ],
                  "role": "model"
                },
                "finishReason": "STOP",
                "index": 0
              }
            ],
            "usageMetadata": {
              "promptTokenCount": 4883,
              "candidatesTokenCount": 954,
              "totalTokenCount": 9514,
              "promptTokensDetails": [
                {
                  "modality": "TEXT",
                  "tokenCount": 4883
                }
              ],
              "thoughtsTokenCount": 3677
            },
            "modelVersion": "gemini-2.5-flash",
            "responseId": "5XOSaeS9OpOuqtsP9-mUgQc"
          },
          "cached": false,
          "metadata": {}
        },
        "score": 0.5909,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.0193865,
        "error": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with 0.99 confidence. \n\n2. **Format**: Identified as 'short film' with 0.6 confidence. The rubric says it should be a 'feature film screenplay' (~430 lines). This is incorrect. The low confidence is somewhat appropriate given uncertainty, but the answer is wrong. \n\n3. **Genre**: Identified as action, crime, drama. The rubric mentions action, crime, and/or thriller. Action and crime are correct. Drama is reasonable. Missing 'thriller' but the rubric says 'and/or' so this is acceptable. \n\n4. **Tone**: Identified as gritty, violent, dark, irreverent. Captures dark, gritty, violent qualities well. The 'irreverent' addition is also well-justified. \n\n5. **Duration**: Estimated at 15 minutes with 0.35 confidence. The rubric says 85-130 minutes is reasonable for a ~430-line screenplay. 15 minutes is drastically wrong. The low confidence (0.35) acknowledges uncertainty but the estimate is still far off. \n\n6. **Primary characters**: Identifies The Mariner (Billy/Will MacAngus), Rose, and Salvatori. The rubric says Mariner and Rose as leads. Salvatori being listed as primary rather than supporting is debatable but not terrible. \n\n7. **Supporting characters**: Lists Dad, Salvatori (though placed in primary), Vinnie, Rosco, Mikey, Carlos, and various thugs. The rubric asks for Dad, Salvatori, Vinnie among supporting. Dad and Vinnie are listed. Salvatori is in primary but acknowledged.  (mostly)\n\n8. **Location count**: Estimated at 8 with 0.75 confidence. The rubric says 5-20 is reasonable. 8 falls within range. \n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, along with the post-collapse city, multiple floors, flashback locations. \n\n10. **Target audience**: Correctly identified as Adults (R/18+) with appropriate reasoning. \n\n11. **Confidence calibration**: Most confidences are reasonable. The 0.35 for duration acknowledges uncertainty. The 0.6 for format is appropriately lower but still led to the wrong answer. The title at 0.99 is well-calibrated. Generally reasonable but the format/duration errors are significant.\n\n12. **Rationale quality**: Rationales are grounded in screenplay evidence (title cards, character actions, settings, language). Well-written and specific. \n\nMajor errors: Format (short film vs feature film) and duration (15 min vs 85-130 min) are significantly wrong. These are related errors - misidentifying the format led to the wrong duration. The rest of the fields are accurate and well-supported.\n\nOut of 12 criteria, roughly 8-9 are met well, with 2 significant failures (format and duration) and minor issues on character categorization. I'd score this around 0.65-0.7.",
        "gradingResult": {
          "pass": false,
          "score": 0.70825,
          "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with 0.99 confidence. \n\n2. **Format**: Identified as 'short film' with 0.6 confidence. The rubric says it should be a 'feature film screenplay' (~430 lines). This is incorrect. The low confidence is somewhat appropriate given uncertainty, but the answer is wrong. \n\n3. **Genre**: Identified as action, crime, drama. The rubric mentions action, crime, and/or thriller. Action and crime are correct. Drama is reasonable. Missing 'thriller' but the rubric says 'and/or' so this is acceptable. \n\n4. **Tone**: Identified as gritty, violent, dark, irreverent. Captures dark, gritty, violent qualities well. The 'irreverent' addition is also well-justified. \n\n5. **Duration**: Estimated at 15 minutes with 0.35 confidence. The rubric says 85-130 minutes is reasonable for a ~430-line screenplay. 15 minutes is drastically wrong. The low confidence (0.35) acknowledges uncertainty but the estimate is still far off. \n\n6. **Primary characters**: Identifies The Mariner (Billy/Will MacAngus), Rose, and Salvatori. The rubric says Mariner and Rose as leads. Salvatori being listed as primary rather than supporting is debatable but not terrible. \n\n7. **Supporting characters**: Lists Dad, Salvatori (though placed in primary), Vinnie, Rosco, Mikey, Carlos, and various thugs. The rubric asks for Dad, Salvatori, Vinnie among supporting. Dad and Vinnie are listed. Salvatori is in primary but acknowledged.  (mostly)\n\n8. **Location count**: Estimated at 8 with 0.75 confidence. The rubric says 5-20 is reasonable. 8 falls within range. \n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, along with the post-collapse city, multiple floors, flashback locations. \n\n10. **Target audience**: Correctly identified as Adults (R/18+) with appropriate reasoning. \n\n11. **Confidence calibration**: Most confidences are reasonable. The 0.35 for duration acknowledges uncertainty. The 0.6 for format is appropriately lower but still led to the wrong answer. The title at 0.99 is well-calibrated. Generally reasonable but the format/duration errors are significant.\n\n12. **Rationale quality**: Rationales are grounded in screenplay evidence (title cards, character actions, settings, language). Well-written and specific. \n\nMajor errors: Format (short film vs feature film) and duration (15 min vs 85-130 min) are significantly wrong. These are related errors - misidentifying the format led to the wrong duration. The rest of the fields are accurate and well-supported.\n\nOut of 12 criteria, roughly 8-9 are met well, with 2 significant failures (format and duration) and minor issues on character categorization. I'd score this around 0.65-0.7.",
          "namedScores": {},
          "tokensUsed": {
            "total": 2042,
            "prompt": 1234,
            "completion": 808,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.7665,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=0.14, format_accuracy=0.30, genre_accuracy=0.75, json_valid=1.00, location_accuracy=1.00, title_accuracy=1.00, tone_accuracy=0.60",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": false,
              "score": 0.65,
              "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with 0.99 confidence. \n\n2. **Format**: Identified as 'short film' with 0.6 confidence. The rubric says it should be a 'feature film screenplay' (~430 lines). This is incorrect. The low confidence is somewhat appropriate given uncertainty, but the answer is wrong. \n\n3. **Genre**: Identified as action, crime, drama. The rubric mentions action, crime, and/or thriller. Action and crime are correct. Drama is reasonable. Missing 'thriller' but the rubric says 'and/or' so this is acceptable. \n\n4. **Tone**: Identified as gritty, violent, dark, irreverent. Captures dark, gritty, violent qualities well. The 'irreverent' addition is also well-justified. \n\n5. **Duration**: Estimated at 15 minutes with 0.35 confidence. The rubric says 85-130 minutes is reasonable for a ~430-line screenplay. 15 minutes is drastically wrong. The low confidence (0.35) acknowledges uncertainty but the estimate is still far off. \n\n6. **Primary characters**: Identifies The Mariner (Billy/Will MacAngus), Rose, and Salvatori. The rubric says Mariner and Rose as leads. Salvatori being listed as primary rather than supporting is debatable but not terrible. \n\n7. **Supporting characters**: Lists Dad, Salvatori (though placed in primary), Vinnie, Rosco, Mikey, Carlos, and various thugs. The rubric asks for Dad, Salvatori, Vinnie among supporting. Dad and Vinnie are listed. Salvatori is in primary but acknowledged.  (mostly)\n\n8. **Location count**: Estimated at 8 with 0.75 confidence. The rubric says 5-20 is reasonable. 8 falls within range. \n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, along with the post-collapse city, multiple floors, flashback locations. \n\n10. **Target audience**: Correctly identified as Adults (R/18+) with appropriate reasoning. \n\n11. **Confidence calibration**: Most confidences are reasonable. The 0.35 for duration acknowledges uncertainty. The 0.6 for format is appropriately lower but still led to the wrong answer. The title at 0.99 is well-calibrated. Generally reasonable but the format/duration errors are significant.\n\n12. **Rationale quality**: Rationales are grounded in screenplay evidence (title cards, character actions, settings, language). Well-written and specific. \n\nMajor errors: Format (short film vs feature film) and duration (15 min vs 85-130 min) are significantly wrong. These are related errors - misidentifying the format led to the wrong duration. The rest of the fields are accurate and well-supported.\n\nOut of 12 criteria, roughly 8-9 are met well, with 2 significant failures (format and duration) and minor issues on character categorization. I'd score this around 0.65-0.7.",
              "tokensUsed": {
                "total": 2042,
                "prompt": 1234,
                "completion": 808,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n{\\\"title\\\":{\\\"value\\\":\\\"The Mariner\\\",\\\"confidence\\\":0.99,\\\"rationale\\\":\\\"The screenplay begins with the title line 'The Mariner' and later includes a full-screen title card 'THE MARINER'.\\\"},\\\"format\\\":{\\\"value\\\":\\\"short film\\\",\\\"confidence\\\":0.6,\\\"rationale\\\":\\\"Only an opening sequence and a single extended set-piece are shown, ending on a cliffhanger ('CUT TO BLACK') without full feature structure. Length/pages are not provided, so this is an inferred best-fit.\\\"},\\\"genre\\\":{\\\"value\\\":[\\\"action\\\",\\\"crime\\\",\\\"drama\\\"],\\\"confidence\\\":0.85,\\\"rationale\\\":\\\"Action: repeated fights/shootouts; Crime: gang money, thugs, mob boss; Drama: family trauma/hero identity reveal and emotional confrontation.\\\"},\\\"tone\\\":{\\\"value\\\":[\\\"gritty\\\",\\\"violent\\\",\\\"dark\\\",\\\"irreverent\\\"],\\\"confidence\\\":0.82,\\\"rationale\\\":\\\"Post-collapse no-go-zone setting with blood, shootings, brutality (gritty/dark/violent) plus comedic banter and absurd hero gear (irreverent).\\\"},\\\"estimated_duration_minutes\\\":{\\\"value\\\":15,\\\"confidence\\\":0.35,\\\"rationale\\\":\\\"No page count is given; based on the amount of material (one main building sequence with several floors and multiple short flashbacks), a short-film length estimate is most plausible but uncertain.\\\"},\\\"primary_characters\\\":{\\\"value\\\":[\\\"The Mariner (Billy/Will MacAngus)\\\",\\\"Rose\\\",\\\"Salvatori\\\"],\\\"confidence\\\":0.9,\\\"rationale\\\":\\\"Mariner and Rose drive nearly all scenes and dialogue; Salvatori is the named central antagonist who confronts them at the climax.\\\"},\\\"supporting_characters\\\":{\\\"value\\\":[\\\"Rosco\\\",\\\"Vinnie\\\",\\\"Mikey\\\",\\\"Carlos\\\",\\\"Dad\\\",\\\"Thug 1\\\",\\\"Thug 2\\\",\\\"Thug 3\\\",\\\"Two thugs (Salvatori's guards)\\\"],\\\"confidence\\\":0.85,\\\"rationale\\\":\\\"These characters appear as named or functionally distinct roles in the action (patrolling, stairwell encounter, guards) and in flashbacks (Dad).\\\"},\\\"location_count\\\":{\\\"value\\\":8,\\\"confidence\\\":0.75,\\\"rationale\\\":\\\"Distinct headings/places include: city centre; Ruddy & Greene building front; rear alley; elevator; 11th floor corridor/room; stairwell; 13th floor corridor; 15th floor luxury office. Flashbacks show coastline and backyard, which may add more depending on counting approach.\\\"},\\\"locations_summary\\\":{\\\"value\\\":\\\"A ruined post-collapse city at night, centered on the Ruddy & Greene office building (front/rear alley entry, elevator, multiple floors, stairwell, and a luxurious 15th-floor office/nightclub-like suite). Flashbacks occur on a sunny coastline in a small boat and in a backyard with makeshift weights/bench press.\\\",\\\"confidence\\\":0.86,\\\"rationale\\\":\\\"Summarizes the major scene headings and clearly described environments, including the repeated flashback settings.\\\"},\\\"target_audience\\\":{\\\"value\\\":\\\"Adults (likely R / 18+)\\\",\\\"confidence\\\":0.7,\\\"rationale\\\":\\\"Frequent strong language, graphic violence, shootings, and sexual crudity suggest an adult rating rather than teen/family.\\\"}}\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "ef62e5f8-e860-41f0-8cfc-39099a631475",
        "latencyMs": 15883,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a heros origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldnt.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. McAngus Fish & Brewis painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the buildings back door, his huge frame silhouetted against the interiors light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of Faith by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, Faith playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! Cmon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. Shes wearing a Tim Hortons uniform, her hair is a mess, and theres blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: THE MARINER\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHes built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with Dad in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at mas.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! Im taking you home. Its my fault they went after you. I never thought theyd--\n\nROSE  \n(laughing)  \nYou think theyre after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWeve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariners OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWell take the stairs up. They wont expect that.\n\nMARINER  \nBecause its stupid\\!\n\nRose raises an eyebrow at Mariners crazy outfit.\n\nMARINER  \nIts functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his Dad TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows whats a hero? Es the one whats brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! Ill buy you a new bloody purse.\n\nROSE  \nIt aint the purse. Its... a blockchain password to my life savings. I hid it on a chip in the lining. Its all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hells a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! Its, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatoris gonna kill ya, Rosie.\n\nRose nods yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe aint gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. Its gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shits a scam. You gotta get into PonziCoin. My cousins in it. He says its legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWere leaving. Now. I dont steal, Rose. Its against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariners code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We dont wanna hurt ya. Mr. Salvatori just wants his password. Thats all. Then maybe, if youre reeeaal nice, maybe you can be my booty call some more.\n\nRoses eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariners back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIES screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos back. BOSUN is carved into the wood. Rose gives Vinnies body a kick.\n\nROSE  \nPrick. Oh shit\\! Youre bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariners leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnies unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. Cmon.\n\nINT. 15TH FLOOR\n\nThis floor isnt destroyed like the others. Its CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariners opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist youre strong, Billy. Thats gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariners dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, dont never run from a fight. Not again, ya hears me? Its not what a man does. Its not what a MacAngus does. Lets do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin tin, sis. Just like dad taught me.\n\nROSE  \nYoure serious about this dad shit? You talking about the summer he took you to buddys place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONTD)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, hes living up in  Chimney Bay with some skank. He was on the pogey that summer at buddys\\! He was supposed to be taking care of you. Instead hed ditch you in his deadbeat friends yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma woulda said.\n\nROSE  \nYou were too young, Will. She didnt want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew youd be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. Hes WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariners dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Dont never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like youre trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, by? Its got two thumbs and e looks like this\\! Ha\\! Now fetch me anudder. An dont gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONTD)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariners OAR and kick the back of his legs so hes kneeling at their feet. Mariner doesnt resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHes no hero. Hes a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they dont deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHes a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Roses head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariners face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "a298f8e59d0e5184b43a0be484524cae03335a41d5ae89811f617d91fa39c887",
        "promptIdx": 8,
        "provider": {
          "id": "openai:gpt-5.2",
          "label": "GPT-5.2"
        },
        "response": {
          "output": "{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 0.99,\n    \"rationale\": \"The screenplay begins with the title line 'The Mariner' and later includes a full-screen title card 'THE MARINER'.\"\n  },\n  \"format\": {\n    \"value\": \"short film\",\n    \"confidence\": 0.6,\n    \"rationale\": \"Only an opening sequence and a single extended set-piece are shown, ending on a cliffhanger ('CUT TO BLACK') without full feature structure. Length/pages are not provided, so this is an inferred best-fit.\"\n  },\n  \"genre\": {\n    \"value\": [\"action\", \"crime\", \"drama\"],\n    \"confidence\": 0.85,\n    \"rationale\": \"Action: repeated fights/shootouts; Crime: gang money, thugs, mob boss; Drama: family trauma/hero identity reveal and emotional confrontation.\"\n  },\n  \"tone\": {\n    \"value\": [\"gritty\", \"violent\", \"dark\", \"irreverent\"],\n    \"confidence\": 0.82,\n    \"rationale\": \"Post-collapse no-go-zone setting with blood, shootings, brutality (gritty/dark/violent) plus comedic banter and absurd hero gear (irreverent).\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 15,\n    \"confidence\": 0.35,\n    \"rationale\": \"No page count is given; based on the amount of material (one main building sequence with several floors and multiple short flashbacks), a short-film length estimate is most plausible but uncertain.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\"The Mariner (Billy/Will MacAngus)\", \"Rose\", \"Salvatori\"],\n    \"confidence\": 0.9,\n    \"rationale\": \"Mariner and Rose drive nearly all scenes and dialogue; Salvatori is the named central antagonist who confronts them at the climax.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\"Rosco\", \"Vinnie\", \"Mikey\", \"Carlos\", \"Dad\", \"Thug 1\", \"Thug 2\", \"Thug 3\", \"Two thugs (Salvatori's guards)\"],\n    \"confidence\": 0.85,\n    \"rationale\": \"These characters appear as named or functionally distinct roles in the action (patrolling, stairwell encounter, guards) and in flashbacks (Dad).\"\n  },\n  \"location_count\": {\n    \"value\": 8,\n    \"confidence\": 0.75,\n    \"rationale\": \"Distinct headings/places include: city centre; Ruddy & Greene building front; rear alley; elevator; 11th floor corridor/room; stairwell; 13th floor corridor; 15th floor luxury office. Flashbacks show coastline and backyard, which may add more depending on counting approach.\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A ruined post-collapse city at night, centered on the Ruddy & Greene office building (front/rear alley entry, elevator, multiple floors, stairwell, and a luxurious 15th-floor office/nightclub-like suite). Flashbacks occur on a sunny coastline in a small boat and in a backyard with makeshift weights/bench press.\",\n    \"confidence\": 0.86,\n    \"rationale\": \"Summarizes the major scene headings and clearly described environments, including the repeated flashback settings.\"\n  },\n  \"target_audience\": {\n    \"value\": \"Adults (likely R / 18+)\",\n    \"confidence\": 0.7,\n    \"rationale\": \"Frequent strong language, graphic violence, shootings, and sexual crudity suggest an adult rating rather than teen/family.\"\n  }\n}",
          "tokenUsage": {
            "total": 5513,
            "prompt": 4718,
            "completion": 795,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 15883,
          "finishReason": "stop",
          "cost": 0.0193865,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9ce94bd23a0e58e5-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Mon, 16 Feb 2026 01:33:34 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "15656",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=F7BmncW02LpFXR9oSlhUagH0fKhFkpnEuOUEDcMzRUI-1771205599.0735567-1.0.1.1-h1Kkw_1.Ti3_RaXJJygyBqfeJdj.Ivb1V70BwD5grFMFPGPq4KigULrGqG_JyS6n6w4cHL3c9F0_Oykbe4X09xoVvsCYKETnQXA4ws4eQLs07Lkp3yobR7UudTRFPCHA; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Mon, 16 Feb 2026 02:03:34 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "4000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "3995538",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "66ms",
                "x-request-id": "req_4ad935f6812f44d288432b2a0213e430"
              }
            }
          }
        },
        "score": 0.70825,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9ce94bd23a0e58e5-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Mon, 16 Feb 2026 01:33:34 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "15656",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=F7BmncW02LpFXR9oSlhUagH0fKhFkpnEuOUEDcMzRUI-1771205599.0735567-1.0.1.1-h1Kkw_1.Ti3_RaXJJygyBqfeJdj.Ivb1V70BwD5grFMFPGPq4KigULrGqG_JyS6n6w4cHL3c9F0_Oykbe4X09xoVvsCYKETnQXA4ws4eQLs07Lkp3yobR7UudTRFPCHA; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Mon, 16 Feb 2026 02:03:34 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "4000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "3995538",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "66ms",
              "x-request-id": "req_4ad935f6812f44d288432b2a0213e430"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.05654000000000001,
        "error": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with high confidence (0.99). \n\n2. **Format**: Identified as 'short film' rather than 'feature film'. The rubric states this is a feature film screenplay (~430 lines), and the model estimated only 15 minutes. This is a significant miss. The model's confidence was appropriately lower (0.75), but the answer is wrong. \n\n3. **Genre**: Identified action, crime, and drama. The rubric mentions action, crime, and/or thriller. Action and crime are correct. Drama is reasonable given the flashback emotional content. Missing 'thriller' but captured the core genres.  (mostly)\n\n4. **Tone**: Captured dark, gritty, darkly comedic, and emotional. This aligns well with the rubric's criteria for dark, gritty, violent qualities. \n\n5. **Duration**: Estimated 15 minutes, but the rubric says 85-130 minutes for a ~430-line screenplay. This is drastically wrong and directly tied to the format misidentification. \n\n6. **Primary characters**: Identified Mariner (Billy/Will MacAngus), Rose, and Salvatori. The rubric says Mariner and Rose as leads. Including Salvatori as primary is debatable but reasonable. \n\n7. **Supporting characters**: Listed Dad, Rosco, Vinnie, Mikey, Carlos, and Thugs 1-3. The rubric mentions Dad, Salvatori, and Vinnie. Salvatori was placed as primary rather than supporting, which is a reasonable choice. Dad and Vinnie are correctly listed as supporting. \n\n8. **Location count**: Estimated 9 distinct locations, which falls within the 5-20 range. \n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, with good detail about multiple floors, exterior locations, and flashback locations. \n\n10. **Target audience**: Correctly identified as R-rated/adults 18+ with solid rationale. \n\n11. **Confidence calibration**: Most confidence scores are reasonable, but the format confidence of 0.75 for an incorrect answer and duration confidence of 0.6 for a wildly incorrect estimate show poor calibration. The model should have been less confident or recognized the screenplay was longer.\n\n12. **Rationale quality**: Rationales are generally well-grounded in screenplay evidence. The format rationale acknowledges uncertainty but reaches the wrong conclusion. The duration rationale significantly underestimates page count.\n\nThe two major failures are format (short film vs. feature film) and duration (15 min vs. 85-130 min). These are significant errors that would meaningfully impact project planning. However, 8 out of 10 fields are reasonably accurate, and rationales are generally evidence-based.",
        "gradingResult": {
          "pass": false,
          "score": 0.6432500000000001,
          "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with high confidence (0.99). \n\n2. **Format**: Identified as 'short film' rather than 'feature film'. The rubric states this is a feature film screenplay (~430 lines), and the model estimated only 15 minutes. This is a significant miss. The model's confidence was appropriately lower (0.75), but the answer is wrong. \n\n3. **Genre**: Identified action, crime, and drama. The rubric mentions action, crime, and/or thriller. Action and crime are correct. Drama is reasonable given the flashback emotional content. Missing 'thriller' but captured the core genres.  (mostly)\n\n4. **Tone**: Captured dark, gritty, darkly comedic, and emotional. This aligns well with the rubric's criteria for dark, gritty, violent qualities. \n\n5. **Duration**: Estimated 15 minutes, but the rubric says 85-130 minutes for a ~430-line screenplay. This is drastically wrong and directly tied to the format misidentification. \n\n6. **Primary characters**: Identified Mariner (Billy/Will MacAngus), Rose, and Salvatori. The rubric says Mariner and Rose as leads. Including Salvatori as primary is debatable but reasonable. \n\n7. **Supporting characters**: Listed Dad, Rosco, Vinnie, Mikey, Carlos, and Thugs 1-3. The rubric mentions Dad, Salvatori, and Vinnie. Salvatori was placed as primary rather than supporting, which is a reasonable choice. Dad and Vinnie are correctly listed as supporting. \n\n8. **Location count**: Estimated 9 distinct locations, which falls within the 5-20 range. \n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, with good detail about multiple floors, exterior locations, and flashback locations. \n\n10. **Target audience**: Correctly identified as R-rated/adults 18+ with solid rationale. \n\n11. **Confidence calibration**: Most confidence scores are reasonable, but the format confidence of 0.75 for an incorrect answer and duration confidence of 0.6 for a wildly incorrect estimate show poor calibration. The model should have been less confident or recognized the screenplay was longer.\n\n12. **Rationale quality**: Rationales are generally well-grounded in screenplay evidence. The format rationale acknowledges uncertainty but reaches the wrong conclusion. The duration rationale significantly underestimates page count.\n\nThe two major failures are format (short film vs. feature film) and duration (15 min vs. 85-130 min). These are significant errors that would meaningfully impact project planning. However, 8 out of 10 fields are reasonably accurate, and rationales are generally evidence-based.",
          "namedScores": {},
          "tokensUsed": {
            "total": 2409,
            "prompt": 1682,
            "completion": 727,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.7365,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=0.14, format_accuracy=0.30, genre_accuracy=0.75, json_valid=0.90, location_accuracy=1.00, title_accuracy=1.00, tone_accuracy=0.40",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": false,
              "score": 0.55,
              "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with high confidence (0.99). \n\n2. **Format**: Identified as 'short film' rather than 'feature film'. The rubric states this is a feature film screenplay (~430 lines), and the model estimated only 15 minutes. This is a significant miss. The model's confidence was appropriately lower (0.75), but the answer is wrong. \n\n3. **Genre**: Identified action, crime, and drama. The rubric mentions action, crime, and/or thriller. Action and crime are correct. Drama is reasonable given the flashback emotional content. Missing 'thriller' but captured the core genres.  (mostly)\n\n4. **Tone**: Captured dark, gritty, darkly comedic, and emotional. This aligns well with the rubric's criteria for dark, gritty, violent qualities. \n\n5. **Duration**: Estimated 15 minutes, but the rubric says 85-130 minutes for a ~430-line screenplay. This is drastically wrong and directly tied to the format misidentification. \n\n6. **Primary characters**: Identified Mariner (Billy/Will MacAngus), Rose, and Salvatori. The rubric says Mariner and Rose as leads. Including Salvatori as primary is debatable but reasonable. \n\n7. **Supporting characters**: Listed Dad, Rosco, Vinnie, Mikey, Carlos, and Thugs 1-3. The rubric mentions Dad, Salvatori, and Vinnie. Salvatori was placed as primary rather than supporting, which is a reasonable choice. Dad and Vinnie are correctly listed as supporting. \n\n8. **Location count**: Estimated 9 distinct locations, which falls within the 5-20 range. \n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, with good detail about multiple floors, exterior locations, and flashback locations. \n\n10. **Target audience**: Correctly identified as R-rated/adults 18+ with solid rationale. \n\n11. **Confidence calibration**: Most confidence scores are reasonable, but the format confidence of 0.75 for an incorrect answer and duration confidence of 0.6 for a wildly incorrect estimate show poor calibration. The model should have been less confident or recognized the screenplay was longer.\n\n12. **Rationale quality**: Rationales are generally well-grounded in screenplay evidence. The format rationale acknowledges uncertainty but reaches the wrong conclusion. The duration rationale significantly underestimates page count.\n\nThe two major failures are format (short film vs. feature film) and duration (15 min vs. 85-130 min). These are significant errors that would meaningfully impact project planning. However, 8 out of 10 fields are reasonably accurate, and rationales are generally evidence-based.",
              "tokensUsed": {
                "total": 2409,
                "prompt": 1682,
                "completion": 727,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n```json\\n{\\n  \\\"title\\\": {\\n    \\\"value\\\": \\\"The Mariner\\\",\\n    \\\"confidence\\\": 0.99,\\n    \\\"rationale\\\": \\\"The title is explicitly stated at the top of the screenplay and as a full-screen superimposed title card during the elevator scene.\\\"\\n  },\\n  \\\"format\\\": {\\n    \\\"value\\\": \\\"short film\\\",\\n    \\\"confidence\\\": 0.75,\\n    \\\"rationale\\\": \\\"The screenplay is relatively short  roughly 10-15 pages based on the content, which would translate to approximately 10-20 minutes of screen time. It has a single continuous narrative arc with no act breaks suggesting episodic or feature-length structure. However, it could also be the opening act of a feature film given the unresolved ending (cut to black). Short film is the most conservative estimate.\\\"\\n  },\\n  \\\"genre\\\": {\\n    \\\"value\\\": [\\\"action\\\", \\\"crime\\\", \\\"drama\\\"],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"The screenplay features extensive action/fight sequences (action), a gang/organized crime plot involving stolen cryptocurrency and a crime boss (crime), and deep emotional character exploration through flashbacks about an abusive father and family trauma (drama).\\\"\\n  },\\n  \\\"tone\\\": {\\n    \\\"value\\\": [\\\"dark\\\", \\\"gritty\\\", \\\"darkly comedic\\\", \\\"emotional\\\"],\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"The dystopian urban setting, graphic violence, and themes of abuse are dark and gritty. There is dark humor throughout (the skull bit in the elevator, muzak playing during violence, the flare gun scene, PonziCoin/WaldoCoin banter). The flashback revelations about the father add a deeply emotional and tragic undercurrent.\\\"\\n  },\\n  \\\"estimated_duration_minutes\\\": {\\n    \\\"value\\\": 15,\\n    \\\"confidence\\\": 0.6,\\n    \\\"rationale\\\": \\\"Using the ~1 page per minute rule, the screenplay appears to be roughly 12-18 pages. However, action-heavy sequences with sound-only descriptions (the opening assault) may play faster than written, while dialogue scenes play at standard pace. Estimating approximately 15 minutes.\\\"\\n  },\\n  \\\"primary_characters\\\": {\\n    \\\"value\\\": [\\\"Mariner (Billy/Will MacAngus)\\\", \\\"Rose\\\", \\\"Salvatori\\\"],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"Mariner is the protagonist, present throughout and the focus of the character arc. Rose is his sister and co-lead who drives the plot. Salvatori is the antagonist/crime boss who appears in the climax as the primary threat.\\\"\\n  },\\n  \\\"supporting_characters\\\": {\\n    \\\"value\\\": [\\\"Dad\\\", \\\"Rosco\\\", \\\"Vinnie\\\", \\\"Mikey\\\", \\\"Carlos\\\", \\\"Thug 1\\\", \\\"Thug 2\\\", \\\"Thug 3\\\"],\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"Dad appears only in flashbacks but is crucial to the thematic arc. Rosco, Vinnie, Mikey, and Carlos are named thugs with brief dialogue. Thugs 1-3 appear in the elevator encounter. Salvatori's two unnamed thugs in the final scene are very minor.\\\"\\n  },\\n  \\\"location_count\\\": {\\n    \\\"value\\\": 9,\\n    \\\"confidence\\\": 0.8,\\n    \\\"rationale\\\": \\\"Distinct locations: (1) City Centre exterior, (2) Ruddy & Greene Building front exterior, (3) Ruddy & Greene Building rear alley, (4) Elevator interior, (5) 11th floor corridors, (6) 12th floor stairwell, (7) 13th floor corridor, (8) 15th floor office/corridor, and flashback locations: (9) Coastline/boat and (10) Backyard. The coastline and backyard are revisited but represent the same locations in different contexts. Counting approximately 9 distinct locations.\\\"\\n  },\\n  \\\"locations_summary\\\": {\\n    \\\"value\\\": \\\"Primarily set inside the Ruddy & Greene Building, a once-elegant 15-story sandstone building now occupied by a criminal gang, spanning multiple floors (elevator, 11th-15th floors, stairwells, and a luxurious top-floor office). Exterior locations include a dystopian ruined city centre and the building's front and rear. Flashback locations include an idyllic-turned-grim coastal shoreline with a sailboat and a deteriorating backyard with makeshift weightlifting equipment.\\\",\\n    \\\"confidence\\\": 0.92,\\n    \\\"rationale\\\": \\\"All locations are explicitly described in the screenplay's scene headings and action lines.\\\"\\n  },\\n  \\\"target_audience\\\": {\\n    \\\"value\\\": \\\"R-rated / adults 18+\\\",\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"The screenplay contains extensive graphic violence (bloody oar, skull fragments, cracking sounds), strong profanity throughout, themes of child abuse, references to sexual relationships ('booty call'), drug/alcohol references, and a generally dark and violent tone. This clearly targets a mature adult audience.\\\"\\n  }\\n}\\n```\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "b149a548-fa41-424f-b327-71183f4cd12b",
        "latencyMs": 27278,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a heros origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldnt.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. McAngus Fish & Brewis painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the buildings back door, his huge frame silhouetted against the interiors light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of Faith by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, Faith playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! Cmon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. Shes wearing a Tim Hortons uniform, her hair is a mess, and theres blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: THE MARINER\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHes built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with Dad in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at mas.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! Im taking you home. Its my fault they went after you. I never thought theyd--\n\nROSE  \n(laughing)  \nYou think theyre after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWeve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariners OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWell take the stairs up. They wont expect that.\n\nMARINER  \nBecause its stupid\\!\n\nRose raises an eyebrow at Mariners crazy outfit.\n\nMARINER  \nIts functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his Dad TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows whats a hero? Es the one whats brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! Ill buy you a new bloody purse.\n\nROSE  \nIt aint the purse. Its... a blockchain password to my life savings. I hid it on a chip in the lining. Its all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hells a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! Its, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatoris gonna kill ya, Rosie.\n\nRose nods yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe aint gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. Its gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shits a scam. You gotta get into PonziCoin. My cousins in it. He says its legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWere leaving. Now. I dont steal, Rose. Its against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariners code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We dont wanna hurt ya. Mr. Salvatori just wants his password. Thats all. Then maybe, if youre reeeaal nice, maybe you can be my booty call some more.\n\nRoses eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariners back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIES screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos back. BOSUN is carved into the wood. Rose gives Vinnies body a kick.\n\nROSE  \nPrick. Oh shit\\! Youre bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariners leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnies unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. Cmon.\n\nINT. 15TH FLOOR\n\nThis floor isnt destroyed like the others. Its CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariners opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist youre strong, Billy. Thats gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariners dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, dont never run from a fight. Not again, ya hears me? Its not what a man does. Its not what a MacAngus does. Lets do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin tin, sis. Just like dad taught me.\n\nROSE  \nYoure serious about this dad shit? You talking about the summer he took you to buddys place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONTD)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, hes living up in  Chimney Bay with some skank. He was on the pogey that summer at buddys\\! He was supposed to be taking care of you. Instead hed ditch you in his deadbeat friends yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma woulda said.\n\nROSE  \nYou were too young, Will. She didnt want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew youd be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. Hes WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariners dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Dont never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like youre trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, by? Its got two thumbs and e looks like this\\! Ha\\! Now fetch me anudder. An dont gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONTD)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariners OAR and kick the back of his legs so hes kneeling at their feet. Mariner doesnt resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHes no hero. Hes a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they dont deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHes a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Roses head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariners face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "a298f8e59d0e5184b43a0be484524cae03335a41d5ae89811f617d91fa39c887",
        "promptIdx": 9,
        "provider": {
          "id": "anthropic:messages:claude-opus-4-6",
          "label": "Claude Opus 4.6"
        },
        "response": {
          "output": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 0.99,\n    \"rationale\": \"The title is explicitly stated at the top of the screenplay and as a full-screen superimposed title card during the elevator scene.\"\n  },\n  \"format\": {\n    \"value\": \"short film\",\n    \"confidence\": 0.75,\n    \"rationale\": \"The screenplay is relatively short  roughly 10-15 pages based on the content, which would translate to approximately 10-20 minutes of screen time. It has a single continuous narrative arc with no act breaks suggesting episodic or feature-length structure. However, it could also be the opening act of a feature film given the unresolved ending (cut to black). Short film is the most conservative estimate.\"\n  },\n  \"genre\": {\n    \"value\": [\"action\", \"crime\", \"drama\"],\n    \"confidence\": 0.95,\n    \"rationale\": \"The screenplay features extensive action/fight sequences (action), a gang/organized crime plot involving stolen cryptocurrency and a crime boss (crime), and deep emotional character exploration through flashbacks about an abusive father and family trauma (drama).\"\n  },\n  \"tone\": {\n    \"value\": [\"dark\", \"gritty\", \"darkly comedic\", \"emotional\"],\n    \"confidence\": 0.9,\n    \"rationale\": \"The dystopian urban setting, graphic violence, and themes of abuse are dark and gritty. There is dark humor throughout (the skull bit in the elevator, muzak playing during violence, the flare gun scene, PonziCoin/WaldoCoin banter). The flashback revelations about the father add a deeply emotional and tragic undercurrent.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 15,\n    \"confidence\": 0.6,\n    \"rationale\": \"Using the ~1 page per minute rule, the screenplay appears to be roughly 12-18 pages. However, action-heavy sequences with sound-only descriptions (the opening assault) may play faster than written, while dialogue scenes play at standard pace. Estimating approximately 15 minutes.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\"Mariner (Billy/Will MacAngus)\", \"Rose\", \"Salvatori\"],\n    \"confidence\": 0.95,\n    \"rationale\": \"Mariner is the protagonist, present throughout and the focus of the character arc. Rose is his sister and co-lead who drives the plot. Salvatori is the antagonist/crime boss who appears in the climax as the primary threat.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\"Dad\", \"Rosco\", \"Vinnie\", \"Mikey\", \"Carlos\", \"Thug 1\", \"Thug 2\", \"Thug 3\"],\n    \"confidence\": 0.9,\n    \"rationale\": \"Dad appears only in flashbacks but is crucial to the thematic arc. Rosco, Vinnie, Mikey, and Carlos are named thugs with brief dialogue. Thugs 1-3 appear in the elevator encounter. Salvatori's two unnamed thugs in the final scene are very minor.\"\n  },\n  \"location_count\": {\n    \"value\": 9,\n    \"confidence\": 0.8,\n    \"rationale\": \"Distinct locations: (1) City Centre exterior, (2) Ruddy & Greene Building front exterior, (3) Ruddy & Greene Building rear alley, (4) Elevator interior, (5) 11th floor corridors, (6) 12th floor stairwell, (7) 13th floor corridor, (8) 15th floor office/corridor, and flashback locations: (9) Coastline/boat and (10) Backyard. The coastline and backyard are revisited but represent the same locations in different contexts. Counting approximately 9 distinct locations.\"\n  },\n  \"locations_summary\": {\n    \"value\": \"Primarily set inside the Ruddy & Greene Building, a once-elegant 15-story sandstone building now occupied by a criminal gang, spanning multiple floors (elevator, 11th-15th floors, stairwells, and a luxurious top-floor office). Exterior locations include a dystopian ruined city centre and the building's front and rear. Flashback locations include an idyllic-turned-grim coastal shoreline with a sailboat and a deteriorating backyard with makeshift weightlifting equipment.\",\n    \"confidence\": 0.92,\n    \"rationale\": \"All locations are explicitly described in the screenplay's scene headings and action lines.\"\n  },\n  \"target_audience\": {\n    \"value\": \"R-rated / adults 18+\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay contains extensive graphic violence (bloody oar, skull fragments, cracking sounds), strong profanity throughout, themes of child abuse, references to sexual relationships ('booty call'), drug/alcohol references, and a generally dark and violent tone. This clearly targets a mature adult audience.\"\n  }\n}\n```",
          "tokenUsage": {
            "total": 6556,
            "prompt": 5368,
            "completion": 1188
          },
          "finishReason": "stop",
          "cost": 0.05654000000000001
        },
        "score": 0.6432500000000001,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.041563750000000003,
        "error": "Let me evaluate each field:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. \n\n2. **Format**: Identified as 'pilot' with confidence 0.7. The rubric says it should be a 'feature film screenplay.' This is incorrect. The model's rationale about cliffhanger structure is reasonable but wrong. \n\n3. **Genre**: Identified as action, crime, drama. The rubric mentions action, crime, and/or thriller. Action and crime are correct. Drama is reasonable though thriller might be more apt. Mostly correct. \n\n4. **Tone**: Gritty, dark, suspenseful - this captures the dark, gritty, violent qualities well. \n\n5. **Duration**: Estimated at 12 minutes. The rubric says 85-130 minutes for a ~430-line screenplay. 12 minutes is wildly off - the model seems to have miscounted pages or misunderstood the screenplay length. This is a major error. \n\n6. **Primary characters**: Lists Mariner, Rose, and Salvatori. The rubric says Mariner and Rose as leads. Salvatori is listed as primary but the rubric suggests he's supporting. Partially correct - the two main leads are identified. \n\n7. **Supporting characters**: Lists Dad, Rosco, Vinnie, Mikey, Carlos. The rubric mentions Dad, Salvatori, Vinnie. Salvatori is misplaced as primary instead of supporting. Dad and Vinnie are correctly listed. \n\n8. **Location count**: 12 locations. The rubric says 5-20 is reasonable. \n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, plus flashback locations. \n\n10. **Target audience**: Correctly identified as mature audiences with good evidence. \n\n11. **Confidence calibration**: The format confidence of 0.7 is appropriately hedged but still wrong. The duration confidence of 0.85 is overconfident given the massive error. Other confidences seem reasonable.\n\n12. **Rationale quality**: Generally well-grounded in screenplay evidence, with specific quotes and references.\n\nMajor errors: Format (pilot vs feature film) and duration (12 min vs 85-130 min) are significant misses. The character classification has Salvatori misplaced. Most other fields are accurate and well-supported.",
        "gradingResult": {
          "pass": false,
          "score": 0.61685,
          "reason": "Let me evaluate each field:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. \n\n2. **Format**: Identified as 'pilot' with confidence 0.7. The rubric says it should be a 'feature film screenplay.' This is incorrect. The model's rationale about cliffhanger structure is reasonable but wrong. \n\n3. **Genre**: Identified as action, crime, drama. The rubric mentions action, crime, and/or thriller. Action and crime are correct. Drama is reasonable though thriller might be more apt. Mostly correct. \n\n4. **Tone**: Gritty, dark, suspenseful - this captures the dark, gritty, violent qualities well. \n\n5. **Duration**: Estimated at 12 minutes. The rubric says 85-130 minutes for a ~430-line screenplay. 12 minutes is wildly off - the model seems to have miscounted pages or misunderstood the screenplay length. This is a major error. \n\n6. **Primary characters**: Lists Mariner, Rose, and Salvatori. The rubric says Mariner and Rose as leads. Salvatori is listed as primary but the rubric suggests he's supporting. Partially correct - the two main leads are identified. \n\n7. **Supporting characters**: Lists Dad, Rosco, Vinnie, Mikey, Carlos. The rubric mentions Dad, Salvatori, Vinnie. Salvatori is misplaced as primary instead of supporting. Dad and Vinnie are correctly listed. \n\n8. **Location count**: 12 locations. The rubric says 5-20 is reasonable. \n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, plus flashback locations. \n\n10. **Target audience**: Correctly identified as mature audiences with good evidence. \n\n11. **Confidence calibration**: The format confidence of 0.7 is appropriately hedged but still wrong. The duration confidence of 0.85 is overconfident given the massive error. Other confidences seem reasonable.\n\n12. **Rationale quality**: Generally well-grounded in screenplay evidence, with specific quotes and references.\n\nMajor errors: Format (pilot vs feature film) and duration (12 min vs 85-130 min) are significant misses. The character classification has Salvatori misplaced. Most other fields are accurate and well-supported.",
          "namedScores": {},
          "tokensUsed": {
            "total": 2135,
            "prompt": 1504,
            "completion": 631,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.7337,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=0.11, format_accuracy=0.30, genre_accuracy=0.75, json_valid=0.90, location_accuracy=1.00, title_accuracy=1.00, tone_accuracy=0.40",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": false,
              "score": 0.5,
              "reason": "Let me evaluate each field:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. \n\n2. **Format**: Identified as 'pilot' with confidence 0.7. The rubric says it should be a 'feature film screenplay.' This is incorrect. The model's rationale about cliffhanger structure is reasonable but wrong. \n\n3. **Genre**: Identified as action, crime, drama. The rubric mentions action, crime, and/or thriller. Action and crime are correct. Drama is reasonable though thriller might be more apt. Mostly correct. \n\n4. **Tone**: Gritty, dark, suspenseful - this captures the dark, gritty, violent qualities well. \n\n5. **Duration**: Estimated at 12 minutes. The rubric says 85-130 minutes for a ~430-line screenplay. 12 minutes is wildly off - the model seems to have miscounted pages or misunderstood the screenplay length. This is a major error. \n\n6. **Primary characters**: Lists Mariner, Rose, and Salvatori. The rubric says Mariner and Rose as leads. Salvatori is listed as primary but the rubric suggests he's supporting. Partially correct - the two main leads are identified. \n\n7. **Supporting characters**: Lists Dad, Rosco, Vinnie, Mikey, Carlos. The rubric mentions Dad, Salvatori, Vinnie. Salvatori is misplaced as primary instead of supporting. Dad and Vinnie are correctly listed. \n\n8. **Location count**: 12 locations. The rubric says 5-20 is reasonable. \n\n9. **Locations summary**: Mentions the Ruddy & Greene Building as the primary setting, plus flashback locations. \n\n10. **Target audience**: Correctly identified as mature audiences with good evidence. \n\n11. **Confidence calibration**: The format confidence of 0.7 is appropriately hedged but still wrong. The duration confidence of 0.85 is overconfident given the massive error. Other confidences seem reasonable.\n\n12. **Rationale quality**: Generally well-grounded in screenplay evidence, with specific quotes and references.\n\nMajor errors: Format (pilot vs feature film) and duration (12 min vs 85-130 min) are significant misses. The character classification has Salvatori misplaced. Most other fields are accurate and well-supported.",
              "tokensUsed": {
                "total": 2135,
                "prompt": 1504,
                "completion": 631,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n```json\\n{\\n  \\\"title\\\": {\\n    \\\"value\\\": \\\"The Mariner\\\",\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"The title is explicitly stated on the first line of the screenplay.\\\"\\n  },\\n  \\\"format\\\": {\\n    \\\"value\\\": \\\"pilot\\\",\\n    \\\"confidence\\\": 0.7,\\n    \\\"rationale\\\": \\\"The screenplay establishes a detailed world, introduces a central conflict, and ends on a significant cliffhanger. This structure is characteristic of a pilot episode for a series, designed to hook the audience for future installments.\\\"\\n  },\\n  \\\"genre\\\": {\\n    \\\"value\\\": [\\n      \\\"action\\\",\\n      \\\"crime\\\",\\n      \\\"drama\\\"\\n    ],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"The screenplay contains numerous fight sequences and gunplay ('Action'), revolves around stolen gang money and criminal antagonists ('Crime'), and the central conflict is rooted in the protagonist's family history and emotional disillusionment ('Drama').\\\"\\n  },\\n  \\\"tone\\\": {\\n    \\\"value\\\": [\\n      \\\"gritty\\\",\\n      \\\"dark\\\",\\n      \\\"suspenseful\\\"\\n    ],\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"The setting is a post-collapse, crime-ridden city. The violence is described explicitly and brutally ('wet cracking sounds', 'bloody scrap'). The narrative builds tension through chases and confrontations, making it 'Suspenseful'. The overall mood is bleak and serious, qualifying it as 'Dark' and 'Gritty'.\\\"\\n  },\\n  \\\"estimated_duration_minutes\\\": {\\n    \\\"value\\\": 12,\\n    \\\"confidence\\\": 0.85,\\n    \\\"rationale\\\": \\\"The screenplay text spans approximately 12 pages in standard format. Using the industry-standard estimation of one minute of screen time per page, the estimated duration is 12 minutes.\\\"\\n  },\\n  \\\"primary_characters\\\": {\\n    \\\"value\\\": [\\n      \\\"Mariner\\\",\\n      \\\"Rose\\\",\\n      \\\"Salvatori\\\"\\n    ],\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"The story follows the protagonist (Mariner) and deuteragonist (Rose) exclusively, and their primary conflict is with the antagonist (Salvatori), who they confront in the final scene.\\\"\\n  },\\n  \\\"supporting_characters\\\": {\\n    \\\"value\\\": [\\n      \\\"Dad\\\",\\n      \\\"Rosco\\\",\\n      \\\"Vinnie\\\",\\n      \\\"Mikey\\\",\\n      \\\"Carlos\\\"\\n    ],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"These characters are all named and have specific dialogue or actions that support the plot and the development of the main characters, including the 'Dad' character who is central to the flashbacks.\\\"\\n  },\\n  \\\"location_count\\\": {\\n    \\\"value\\\": 12,\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"A direct count of unique locations specified in the scene headings (e.g., 'EXT. CITY CENTRE', 'INT. RUDDY & GREEN BUILDING - ELEVATOR', 'EXT. COASTLINE - DAY - PAST') results in 12 distinct settings.\\\"\\n  },\\n  \\\"locations_summary\\\": {\\n    \\\"value\\\": \\\"The primary setting is a multi-story, dilapidated office building in a ruined city at night. Key interiors include an elevator, derelict office floors, a stairwell, and a luxurious top-floor office. Flashbacks take place in seemingly idyllic but troubled outdoor settings: a coastline and a suburban backyard.\\\",\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"This summary accurately describes the main settings where the action occurs, contrasting the gritty, present-day urban decay of the Ruddy & Greene Building with the deceptive settings of the past flashbacks.\\\"\\n  },\\n  \\\"target_audience\\\": {\\n    \\\"value\\\": \\\"Mature audiences\\\",\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"The screenplay contains graphic violence (e.g., 'wet cracking sounds', a man burning from a flare), strong language ('fucking', 'assholes'), and mature themes, making it suitable for an adult audience and likely to receive a restricted rating (e.g., R, TV-MA).\\\"\\n  }\\n}\\n```\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "d77c9ff4-be97-4354-834b-af55163677fd",
        "latencyMs": 31194,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a heros origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldnt.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. McAngus Fish & Brewis painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the buildings back door, his huge frame silhouetted against the interiors light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of Faith by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, Faith playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! Cmon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. Shes wearing a Tim Hortons uniform, her hair is a mess, and theres blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: THE MARINER\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHes built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with Dad in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at mas.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! Im taking you home. Its my fault they went after you. I never thought theyd--\n\nROSE  \n(laughing)  \nYou think theyre after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWeve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariners OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWell take the stairs up. They wont expect that.\n\nMARINER  \nBecause its stupid\\!\n\nRose raises an eyebrow at Mariners crazy outfit.\n\nMARINER  \nIts functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his Dad TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows whats a hero? Es the one whats brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! Ill buy you a new bloody purse.\n\nROSE  \nIt aint the purse. Its... a blockchain password to my life savings. I hid it on a chip in the lining. Its all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hells a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! Its, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatoris gonna kill ya, Rosie.\n\nRose nods yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe aint gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. Its gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shits a scam. You gotta get into PonziCoin. My cousins in it. He says its legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWere leaving. Now. I dont steal, Rose. Its against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariners code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We dont wanna hurt ya. Mr. Salvatori just wants his password. Thats all. Then maybe, if youre reeeaal nice, maybe you can be my booty call some more.\n\nRoses eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariners back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIES screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos back. BOSUN is carved into the wood. Rose gives Vinnies body a kick.\n\nROSE  \nPrick. Oh shit\\! Youre bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariners leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnies unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. Cmon.\n\nINT. 15TH FLOOR\n\nThis floor isnt destroyed like the others. Its CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariners opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist youre strong, Billy. Thats gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariners dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, dont never run from a fight. Not again, ya hears me? Its not what a man does. Its not what a MacAngus does. Lets do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin tin, sis. Just like dad taught me.\n\nROSE  \nYoure serious about this dad shit? You talking about the summer he took you to buddys place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONTD)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, hes living up in  Chimney Bay with some skank. He was on the pogey that summer at buddys\\! He was supposed to be taking care of you. Instead hed ditch you in his deadbeat friends yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma woulda said.\n\nROSE  \nYou were too young, Will. She didnt want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew youd be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. Hes WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariners dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Dont never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like youre trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, by? Its got two thumbs and e looks like this\\! Ha\\! Now fetch me anudder. An dont gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONTD)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariners OAR and kick the back of his legs so hes kneeling at their feet. Mariner doesnt resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHes no hero. Hes a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they dont deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHes a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Roses head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariners face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "a298f8e59d0e5184b43a0be484524cae03335a41d5ae89811f617d91fa39c887",
        "promptIdx": 10,
        "provider": {
          "id": "google:gemini-2.5-pro",
          "label": "Gemini 2.5 Pro"
        },
        "response": {
          "output": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The title is explicitly stated on the first line of the screenplay.\"\n  },\n  \"format\": {\n    \"value\": \"pilot\",\n    \"confidence\": 0.7,\n    \"rationale\": \"The screenplay establishes a detailed world, introduces a central conflict, and ends on a significant cliffhanger. This structure is characteristic of a pilot episode for a series, designed to hook the audience for future installments.\"\n  },\n  \"genre\": {\n    \"value\": [\n      \"action\",\n      \"crime\",\n      \"drama\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"The screenplay contains numerous fight sequences and gunplay ('Action'), revolves around stolen gang money and criminal antagonists ('Crime'), and the central conflict is rooted in the protagonist's family history and emotional disillusionment ('Drama').\"\n  },\n  \"tone\": {\n    \"value\": [\n      \"gritty\",\n      \"dark\",\n      \"suspenseful\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"The setting is a post-collapse, crime-ridden city. The violence is described explicitly and brutally ('wet cracking sounds', 'bloody scrap'). The narrative builds tension through chases and confrontations, making it 'Suspenseful'. The overall mood is bleak and serious, qualifying it as 'Dark' and 'Gritty'.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 12,\n    \"confidence\": 0.85,\n    \"rationale\": \"The screenplay text spans approximately 12 pages in standard format. Using the industry-standard estimation of one minute of screen time per page, the estimated duration is 12 minutes.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\n      \"Mariner\",\n      \"Rose\",\n      \"Salvatori\"\n    ],\n    \"confidence\": 1.0,\n    \"rationale\": \"The story follows the protagonist (Mariner) and deuteragonist (Rose) exclusively, and their primary conflict is with the antagonist (Salvatori), who they confront in the final scene.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\n      \"Dad\",\n      \"Rosco\",\n      \"Vinnie\",\n      \"Mikey\",\n      \"Carlos\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"These characters are all named and have specific dialogue or actions that support the plot and the development of the main characters, including the 'Dad' character who is central to the flashbacks.\"\n  },\n  \"location_count\": {\n    \"value\": 12,\n    \"confidence\": 0.9,\n    \"rationale\": \"A direct count of unique locations specified in the scene headings (e.g., 'EXT. CITY CENTRE', 'INT. RUDDY & GREEN BUILDING - ELEVATOR', 'EXT. COASTLINE - DAY - PAST') results in 12 distinct settings.\"\n  },\n  \"locations_summary\": {\n    \"value\": \"The primary setting is a multi-story, dilapidated office building in a ruined city at night. Key interiors include an elevator, derelict office floors, a stairwell, and a luxurious top-floor office. Flashbacks take place in seemingly idyllic but troubled outdoor settings: a coastline and a suburban backyard.\",\n    \"confidence\": 0.95,\n    \"rationale\": \"This summary accurately describes the main settings where the action occurs, contrasting the gritty, present-day urban decay of the Ruddy & Greene Building with the deceptive settings of the past flashbacks.\"\n  },\n  \"target_audience\": {\n    \"value\": \"Mature audiences\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay contains graphic violence (e.g., 'wet cracking sounds', a man burning from a flare), strong language ('fucking', 'assholes'), and mature themes, making it suitable for an adult audience and likely to receive a restricted rating (e.g., R, TV-MA).\"\n  }\n}\n```",
          "tokenUsage": {
            "prompt": 4883,
            "completion": 935,
            "total": 8429,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 2611,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cost": 0.041563750000000003,
          "raw": {
            "candidates": [
              {
                "content": {
                  "parts": [
                    {
                      "text": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The title is explicitly stated on the first line of the screenplay.\"\n  },\n  \"format\": {\n    \"value\": \"pilot\",\n    \"confidence\": 0.7,\n    \"rationale\": \"The screenplay establishes a detailed world, introduces a central conflict, and ends on a significant cliffhanger. This structure is characteristic of a pilot episode for a series, designed to hook the audience for future installments.\"\n  },\n  \"genre\": {\n    \"value\": [\n      \"action\",\n      \"crime\",\n      \"drama\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"The screenplay contains numerous fight sequences and gunplay ('Action'), revolves around stolen gang money and criminal antagonists ('Crime'), and the central conflict is rooted in the protagonist's family history and emotional disillusionment ('Drama').\"\n  },\n  \"tone\": {\n    \"value\": [\n      \"gritty\",\n      \"dark\",\n      \"suspenseful\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"The setting is a post-collapse, crime-ridden city. The violence is described explicitly and brutally ('wet cracking sounds', 'bloody scrap'). The narrative builds tension through chases and confrontations, making it 'Suspenseful'. The overall mood is bleak and serious, qualifying it as 'Dark' and 'Gritty'.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 12,\n    \"confidence\": 0.85,\n    \"rationale\": \"The screenplay text spans approximately 12 pages in standard format. Using the industry-standard estimation of one minute of screen time per page, the estimated duration is 12 minutes.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\n      \"Mariner\",\n      \"Rose\",\n      \"Salvatori\"\n    ],\n    \"confidence\": 1.0,\n    \"rationale\": \"The story follows the protagonist (Mariner) and deuteragonist (Rose) exclusively, and their primary conflict is with the antagonist (Salvatori), who they confront in the final scene.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\n      \"Dad\",\n      \"Rosco\",\n      \"Vinnie\",\n      \"Mikey\",\n      \"Carlos\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"These characters are all named and have specific dialogue or actions that support the plot and the development of the main characters, including the 'Dad' character who is central to the flashbacks.\"\n  },\n  \"location_count\": {\n    \"value\": 12,\n    \"confidence\": 0.9,\n    \"rationale\": \"A direct count of unique locations specified in the scene headings (e.g., 'EXT. CITY CENTRE', 'INT. RUDDY & GREEN BUILDING - ELEVATOR', 'EXT. COASTLINE - DAY - PAST') results in 12 distinct settings.\"\n  },\n  \"locations_summary\": {\n    \"value\": \"The primary setting is a multi-story, dilapidated office building in a ruined city at night. Key interiors include an elevator, derelict office floors, a stairwell, and a luxurious top-floor office. Flashbacks take place in seemingly idyllic but troubled outdoor settings: a coastline and a suburban backyard.\",\n    \"confidence\": 0.95,\n    \"rationale\": \"This summary accurately describes the main settings where the action occurs, contrasting the gritty, present-day urban decay of the Ruddy & Greene Building with the deceptive settings of the past flashbacks.\"\n  },\n  \"target_audience\": {\n    \"value\": \"Mature audiences\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay contains graphic violence (e.g., 'wet cracking sounds', a man burning from a flare), strong language ('fucking', 'assholes'), and mature themes, making it suitable for an adult audience and likely to receive a restricted rating (e.g., R, TV-MA).\"\n  }\n}\n```"
                    }
                  ],
                  "role": "model"
                },
                "finishReason": "STOP",
                "index": 0
              }
            ],
            "usageMetadata": {
              "promptTokenCount": 4883,
              "candidatesTokenCount": 935,
              "totalTokenCount": 8429,
              "promptTokensDetails": [
                {
                  "modality": "TEXT",
                  "tokenCount": 4883
                }
              ],
              "thoughtsTokenCount": 2611
            },
            "modelVersion": "gemini-2.5-pro",
            "responseId": "EnSSaf33J8enqtsPtpDGiAI"
          },
          "cached": false,
          "metadata": {}
        },
        "score": 0.61685,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.04226200000000001,
        "error": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. \n\n2. **Format**: Identified as 'Short Film' rather than a feature film screenplay. The rubric states it should be identified as a feature film screenplay (~430 lines, 85-130 minutes). This is a significant error. \n\n3. **Genre**: Includes Action, Crime, Drama, Superhero. Action and Crime are correct per the rubric. The inclusion of Superhero and Drama is reasonable given the vigilante/costumed protagonist and emotional flashbacks. \n\n4. **Tone**: Captures Gritty, Violent, Dark Humor, Emotional - this aligns well with the rubric's expectation of dark, gritty, violent qualities. \n\n5. **Duration**: Estimated at 8 minutes, which is drastically off from the expected 85-130 minutes. The model incorrectly estimated word count at ~1,400 words when the screenplay is ~430 lines (likely much longer). This is a major error directly tied to the format misidentification. \n\n6. **Primary characters**: Identifies The Mariner (Billy) and Rose as leads, plus Salvatori. The rubric confirms The Mariner and Rose should be leads. \n\n7. **Supporting characters**: Lists Dad, Vinnie, Mikey, Carlos, Rosco. The rubric mentions Dad, Salvatori, and Vinnie should be among supporting cast. However, the model placed Salvatori as a primary character rather than supporting - this is a reasonable judgment call given Salvatori's role as antagonist.  (mostly)\n\n8. **Location count**: Estimated at 7, which falls within the reasonable range of 5-20. \n\n9. **Locations summary**: Mentions a sandstone office building with elevator, stairwells, hallways, and penthouse office, but does NOT specifically name the 'Ruddy & Greene Building' as the primary setting. The rubric specifically asks about this. Partial credit. \n\n10. **Target audience**: Correctly identified as Adult/Mature with appropriate reasoning about violence, language, and themes. \n\n11. **Confidence calibration**: The confidence scores are problematic. Format is at 0.85 but is wrong. Duration at 0.85 is also wrong. These should have been lower if the model was uncertain. Poor calibration. \n\n12. **Rationale quality**: Rationales are generally grounded in screenplay evidence, but the word count estimate (~1,400 words) appears fabricated/incorrect for a 430-line screenplay, leading to cascading errors in format and duration. Mixed quality. \n\nThe two most critical errors are the format (Short Film vs Feature Film) and duration (8 min vs 85-130 min), which are fundamental mischaracterizations of the project. These are not minor issues - they would significantly mislead anyone using this metadata. The remaining fields are mostly accurate. Overall, roughly 6-7 out of 12 criteria are met well, with 2 major failures and 2-3 partial issues.",
        "gradingResult": {
          "pass": false,
          "score": 0.5649500000000001,
          "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. \n\n2. **Format**: Identified as 'Short Film' rather than a feature film screenplay. The rubric states it should be identified as a feature film screenplay (~430 lines, 85-130 minutes). This is a significant error. \n\n3. **Genre**: Includes Action, Crime, Drama, Superhero. Action and Crime are correct per the rubric. The inclusion of Superhero and Drama is reasonable given the vigilante/costumed protagonist and emotional flashbacks. \n\n4. **Tone**: Captures Gritty, Violent, Dark Humor, Emotional - this aligns well with the rubric's expectation of dark, gritty, violent qualities. \n\n5. **Duration**: Estimated at 8 minutes, which is drastically off from the expected 85-130 minutes. The model incorrectly estimated word count at ~1,400 words when the screenplay is ~430 lines (likely much longer). This is a major error directly tied to the format misidentification. \n\n6. **Primary characters**: Identifies The Mariner (Billy) and Rose as leads, plus Salvatori. The rubric confirms The Mariner and Rose should be leads. \n\n7. **Supporting characters**: Lists Dad, Vinnie, Mikey, Carlos, Rosco. The rubric mentions Dad, Salvatori, and Vinnie should be among supporting cast. However, the model placed Salvatori as a primary character rather than supporting - this is a reasonable judgment call given Salvatori's role as antagonist.  (mostly)\n\n8. **Location count**: Estimated at 7, which falls within the reasonable range of 5-20. \n\n9. **Locations summary**: Mentions a sandstone office building with elevator, stairwells, hallways, and penthouse office, but does NOT specifically name the 'Ruddy & Greene Building' as the primary setting. The rubric specifically asks about this. Partial credit. \n\n10. **Target audience**: Correctly identified as Adult/Mature with appropriate reasoning about violence, language, and themes. \n\n11. **Confidence calibration**: The confidence scores are problematic. Format is at 0.85 but is wrong. Duration at 0.85 is also wrong. These should have been lower if the model was uncertain. Poor calibration. \n\n12. **Rationale quality**: Rationales are generally grounded in screenplay evidence, but the word count estimate (~1,400 words) appears fabricated/incorrect for a 430-line screenplay, leading to cascading errors in format and duration. Mixed quality. \n\nThe two most critical errors are the format (Short Film vs Feature Film) and duration (8 min vs 85-130 min), which are fundamental mischaracterizations of the project. These are not minor issues - they would significantly mislead anyone using this metadata. The remaining fields are mostly accurate. Overall, roughly 6-7 out of 12 criteria are met well, with 2 major failures and 2-3 partial issues.",
          "namedScores": {},
          "tokensUsed": {
            "total": 2248,
            "prompt": 1458,
            "completion": 790,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.7299,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=0.07, format_accuracy=0.30, genre_accuracy=0.75, json_valid=0.90, location_accuracy=0.80, title_accuracy=1.00, tone_accuracy=0.60",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": false,
              "score": 0.4,
              "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. \n\n2. **Format**: Identified as 'Short Film' rather than a feature film screenplay. The rubric states it should be identified as a feature film screenplay (~430 lines, 85-130 minutes). This is a significant error. \n\n3. **Genre**: Includes Action, Crime, Drama, Superhero. Action and Crime are correct per the rubric. The inclusion of Superhero and Drama is reasonable given the vigilante/costumed protagonist and emotional flashbacks. \n\n4. **Tone**: Captures Gritty, Violent, Dark Humor, Emotional - this aligns well with the rubric's expectation of dark, gritty, violent qualities. \n\n5. **Duration**: Estimated at 8 minutes, which is drastically off from the expected 85-130 minutes. The model incorrectly estimated word count at ~1,400 words when the screenplay is ~430 lines (likely much longer). This is a major error directly tied to the format misidentification. \n\n6. **Primary characters**: Identifies The Mariner (Billy) and Rose as leads, plus Salvatori. The rubric confirms The Mariner and Rose should be leads. \n\n7. **Supporting characters**: Lists Dad, Vinnie, Mikey, Carlos, Rosco. The rubric mentions Dad, Salvatori, and Vinnie should be among supporting cast. However, the model placed Salvatori as a primary character rather than supporting - this is a reasonable judgment call given Salvatori's role as antagonist.  (mostly)\n\n8. **Location count**: Estimated at 7, which falls within the reasonable range of 5-20. \n\n9. **Locations summary**: Mentions a sandstone office building with elevator, stairwells, hallways, and penthouse office, but does NOT specifically name the 'Ruddy & Greene Building' as the primary setting. The rubric specifically asks about this. Partial credit. \n\n10. **Target audience**: Correctly identified as Adult/Mature with appropriate reasoning about violence, language, and themes. \n\n11. **Confidence calibration**: The confidence scores are problematic. Format is at 0.85 but is wrong. Duration at 0.85 is also wrong. These should have been lower if the model was uncertain. Poor calibration. \n\n12. **Rationale quality**: Rationales are generally grounded in screenplay evidence, but the word count estimate (~1,400 words) appears fabricated/incorrect for a 430-line screenplay, leading to cascading errors in format and duration. Mixed quality. \n\nThe two most critical errors are the format (Short Film vs Feature Film) and duration (8 min vs 85-130 min), which are fundamental mischaracterizations of the project. These are not minor issues - they would significantly mislead anyone using this metadata. The remaining fields are mostly accurate. Overall, roughly 6-7 out of 12 criteria are met well, with 2 major failures and 2-3 partial issues.",
              "tokensUsed": {
                "total": 2248,
                "prompt": 1458,
                "completion": 790,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n```json\\n{\\n  \\\"title\\\": {\\n    \\\"value\\\": \\\"The Mariner\\\",\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"Explicitly stated in the text header and as a 'FULL-SCREEN SUPERIMPOSED TITLE CARD' within the script.\\\"\\n  },\\n  \\\"format\\\": {\\n    \\\"value\\\": \\\"Short Film\\\",\\n    \\\"confidence\\\": 0.85,\\n    \\\"rationale\\\": \\\"The narrative structure contains a complete arc (rescue mission, confrontation, character realization) within a relatively short page count (approx. 7-10 pages based on word count), ending on a thematic cliffhanger typical of short films.\\\"\\n  },\\n  \\\"genre\\\": {\\n    \\\"value\\\": [\\n      \\\"Action\\\",\\n      \\\"Crime\\\",\\n      \\\"Drama\\\",\\n      \\\"Superhero\\\"\\n    ],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"Contains clear elements of action (fighting, gunplay), crime (gangs, heist, blockchain theft), drama (family trauma, flashbacks), and superhero tropes (costumed vigilante, origin story).\\\"\\n  },\\n  \\\"tone\\\": {\\n    \\\"value\\\": [\\n      \\\"Gritty\\\",\\n      \\\"Violent\\\",\\n      \\\"Dark Humor\\\",\\n      \\\"Emotional\\\"\\n    ],\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"The setting is a 'ruined city' with graphic violence ('wet cracking sounds'), contrasted with the absurdity of the protagonist's fish-themed costume and muzak, anchored by emotional flashbacks of childhood abuse.\\\"\\n  },\\n  \\\"estimated_duration_minutes\\\": {\\n    \\\"value\\\": 8,\\n    \\\"confidence\\\": 0.85,\\n    \\\"rationale\\\": \\\"The text is approximately 1,400 words. At a standard screenplay conversion rate (approx. 200 words per page/minute) and accounting for action-heavy sequences which take longer to film than read, the runtime is estimated at 7-9 minutes.\\\"\\n  },\\n  \\\"primary_characters\\\": {\\n    \\\"value\\\": [\\n      \\\"The Mariner (Billy)\\\",\\n      \\\"Rose\\\",\\n      \\\"Salvatori\\\"\\n    ],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"The Mariner is the protagonist, Rose is the catalyst/companion, and Salvatori is the primary antagonist driving the climax.\\\"\\n  },\\n  \\\"supporting_characters\\\": {\\n    \\\"value\\\": [\\n      \\\"Dad\\\",\\n      \\\"Vinnie\\\",\\n      \\\"Mikey\\\",\\n      \\\"Carlos\\\",\\n      \\\"Rosco\\\"\\n    ],\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"Dad appears in significant flashbacks affecting the protagonist's arc; Vinnie, Mikey, Carlos, and Rosco are named henchmen with dialogue.\\\"\\n  },\\n  \\\"location_count\\\": {\\n    \\\"value\\\": 7,\\n    \\\"confidence\\\": 0.85,\\n    \\\"rationale\\\": \\\"Distinct settings identified: 1. City Centre (Ext), 2. Building Exterior, 3. Elevator, 4. Hallways/Stairwells (Int), 5. Penthouse Office (Int), 6. Coastline (Flashback), 7. Backyard (Flashback).\\\"\\n  },\\n  \\\"locations_summary\\\": {\\n    \\\"value\\\": \\\"A dystopian, ruined city centre; a dilapidated 15-story sandstone office building (featuring an elevator, stairwells, hallways, and a luxurious penthouse office); and flashback locations including a coastal boat setting and a suburban backyard.\\\",\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"Derived from scene headings (SLUGLINES) and descriptive text within the screenplay.\\\"\\n  },\\n  \\\"target_audience\\\": {\\n    \\\"value\\\": \\\"Adult / Mature\\\",\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"The script features graphic violence (breaking necks, gunshots, blood), strong language, and themes of child abuse and organized crime, indicating an R-rated or mature audience demographic.\\\"\\n  }\\n}\\n```\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "88aacdf7-6c5b-40af-9252-839818a6160e",
        "latencyMs": 27151,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a heros origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldnt.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. McAngus Fish & Brewis painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the buildings back door, his huge frame silhouetted against the interiors light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of Faith by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, Faith playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! Cmon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. Shes wearing a Tim Hortons uniform, her hair is a mess, and theres blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: THE MARINER\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHes built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with Dad in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at mas.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! Im taking you home. Its my fault they went after you. I never thought theyd--\n\nROSE  \n(laughing)  \nYou think theyre after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWeve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariners OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWell take the stairs up. They wont expect that.\n\nMARINER  \nBecause its stupid\\!\n\nRose raises an eyebrow at Mariners crazy outfit.\n\nMARINER  \nIts functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his Dad TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows whats a hero? Es the one whats brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! Ill buy you a new bloody purse.\n\nROSE  \nIt aint the purse. Its... a blockchain password to my life savings. I hid it on a chip in the lining. Its all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hells a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! Its, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatoris gonna kill ya, Rosie.\n\nRose nods yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe aint gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. Its gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shits a scam. You gotta get into PonziCoin. My cousins in it. He says its legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWere leaving. Now. I dont steal, Rose. Its against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariners code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We dont wanna hurt ya. Mr. Salvatori just wants his password. Thats all. Then maybe, if youre reeeaal nice, maybe you can be my booty call some more.\n\nRoses eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariners back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIES screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos back. BOSUN is carved into the wood. Rose gives Vinnies body a kick.\n\nROSE  \nPrick. Oh shit\\! Youre bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariners leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnies unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. Cmon.\n\nINT. 15TH FLOOR\n\nThis floor isnt destroyed like the others. Its CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariners opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist youre strong, Billy. Thats gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariners dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, dont never run from a fight. Not again, ya hears me? Its not what a man does. Its not what a MacAngus does. Lets do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin tin, sis. Just like dad taught me.\n\nROSE  \nYoure serious about this dad shit? You talking about the summer he took you to buddys place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONTD)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, hes living up in  Chimney Bay with some skank. He was on the pogey that summer at buddys\\! He was supposed to be taking care of you. Instead hed ditch you in his deadbeat friends yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma woulda said.\n\nROSE  \nYou were too young, Will. She didnt want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew youd be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. Hes WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariners dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Dont never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like youre trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, by? Its got two thumbs and e looks like this\\! Ha\\! Now fetch me anudder. An dont gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONTD)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariners OAR and kick the back of his legs so hes kneeling at their feet. Mariner doesnt resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHes no hero. Hes a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they dont deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHes a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Roses head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariners face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "a298f8e59d0e5184b43a0be484524cae03335a41d5ae89811f617d91fa39c887",
        "promptIdx": 11,
        "provider": {
          "id": "google:gemini-3-pro-preview",
          "label": "Gemini 3 Pro"
        },
        "response": {
          "output": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"Explicitly stated in the text header and as a 'FULL-SCREEN SUPERIMPOSED TITLE CARD' within the script.\"\n  },\n  \"format\": {\n    \"value\": \"Short Film\",\n    \"confidence\": 0.85,\n    \"rationale\": \"The narrative structure contains a complete arc (rescue mission, confrontation, character realization) within a relatively short page count (approx. 7-10 pages based on word count), ending on a thematic cliffhanger typical of short films.\"\n  },\n  \"genre\": {\n    \"value\": [\n      \"Action\",\n      \"Crime\",\n      \"Drama\",\n      \"Superhero\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"Contains clear elements of action (fighting, gunplay), crime (gangs, heist, blockchain theft), drama (family trauma, flashbacks), and superhero tropes (costumed vigilante, origin story).\"\n  },\n  \"tone\": {\n    \"value\": [\n      \"Gritty\",\n      \"Violent\",\n      \"Dark Humor\",\n      \"Emotional\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"The setting is a 'ruined city' with graphic violence ('wet cracking sounds'), contrasted with the absurdity of the protagonist's fish-themed costume and muzak, anchored by emotional flashbacks of childhood abuse.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 8,\n    \"confidence\": 0.85,\n    \"rationale\": \"The text is approximately 1,400 words. At a standard screenplay conversion rate (approx. 200 words per page/minute) and accounting for action-heavy sequences which take longer to film than read, the runtime is estimated at 7-9 minutes.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\n      \"The Mariner (Billy)\",\n      \"Rose\",\n      \"Salvatori\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"The Mariner is the protagonist, Rose is the catalyst/companion, and Salvatori is the primary antagonist driving the climax.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\n      \"Dad\",\n      \"Vinnie\",\n      \"Mikey\",\n      \"Carlos\",\n      \"Rosco\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"Dad appears in significant flashbacks affecting the protagonist's arc; Vinnie, Mikey, Carlos, and Rosco are named henchmen with dialogue.\"\n  },\n  \"location_count\": {\n    \"value\": 7,\n    \"confidence\": 0.85,\n    \"rationale\": \"Distinct settings identified: 1. City Centre (Ext), 2. Building Exterior, 3. Elevator, 4. Hallways/Stairwells (Int), 5. Penthouse Office (Int), 6. Coastline (Flashback), 7. Backyard (Flashback).\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A dystopian, ruined city centre; a dilapidated 15-story sandstone office building (featuring an elevator, stairwells, hallways, and a luxurious penthouse office); and flashback locations including a coastal boat setting and a suburban backyard.\",\n    \"confidence\": 0.95,\n    \"rationale\": \"Derived from scene headings (SLUGLINES) and descriptive text within the screenplay.\"\n  },\n  \"target_audience\": {\n    \"value\": \"Adult / Mature\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The script features graphic violence (breaking necks, gunshots, blood), strong language, and themes of child abuse and organized crime, indicating an R-rated or mature audience demographic.\"\n  }\n}\n```",
          "tokenUsage": {
            "prompt": 4883,
            "completion": 888,
            "total": 7591,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 1820,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cost": 0.04226200000000001,
          "raw": {
            "candidates": [
              {
                "content": {
                  "parts": [
                    {
                      "text": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"Explicitly stated in the text header and as a 'FULL-SCREEN SUPERIMPOSED TITLE CARD' within the script.\"\n  },\n  \"format\": {\n    \"value\": \"Short Film\",\n    \"confidence\": 0.85,\n    \"rationale\": \"The narrative structure contains a complete arc (rescue mission, confrontation, character realization) within a relatively short page count (approx. 7-10 pages based on word count), ending on a thematic cliffhanger typical of short films.\"\n  },\n  \"genre\": {\n    \"value\": [\n      \"Action\",\n      \"Crime\",\n      \"Drama\",\n      \"Superhero\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"Contains clear elements of action (fighting, gunplay), crime (gangs, heist, blockchain theft), drama (family trauma, flashbacks), and superhero tropes (costumed vigilante, origin story).\"\n  },\n  \"tone\": {\n    \"value\": [\n      \"Gritty\",\n      \"Violent\",\n      \"Dark Humor\",\n      \"Emotional\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"The setting is a 'ruined city' with graphic violence ('wet cracking sounds'), contrasted with the absurdity of the protagonist's fish-themed costume and muzak, anchored by emotional flashbacks of childhood abuse.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 8,\n    \"confidence\": 0.85,\n    \"rationale\": \"The text is approximately 1,400 words. At a standard screenplay conversion rate (approx. 200 words per page/minute) and accounting for action-heavy sequences which take longer to film than read, the runtime is estimated at 7-9 minutes.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\n      \"The Mariner (Billy)\",\n      \"Rose\",\n      \"Salvatori\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"The Mariner is the protagonist, Rose is the catalyst/companion, and Salvatori is the primary antagonist driving the climax.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\n      \"Dad\",\n      \"Vinnie\",\n      \"Mikey\",\n      \"Carlos\",\n      \"Rosco\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"Dad appears in significant flashbacks affecting the protagonist's arc; Vinnie, Mikey, Carlos, and Rosco are named henchmen with dialogue.\"\n  },\n  \"location_count\": {\n    \"value\": 7,\n    \"confidence\": 0.85,\n    \"rationale\": \"Distinct settings identified: 1. City Centre (Ext), 2. Building Exterior, 3. Elevator, 4. Hallways/Stairwells (Int), 5. Penthouse Office (Int), 6. Coastline (Flashback), 7. Backyard (Flashback).\"\n  },\n  \"locations_summary\": {\n    \"value\": \"A dystopian, ruined city centre; a dilapidated 15-story sandstone office building (featuring an elevator, stairwells, hallways, and a luxurious penthouse office); and flashback locations including a coastal boat setting and a suburban backyard.\",\n    \"confidence\": 0.95,\n    \"rationale\": \"Derived from scene headings (SLUGLINES) and descriptive text within the screenplay.\"\n  },\n  \"target_audience\": {\n    \"value\": \"Adult / Mature\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The script features graphic violence (breaking necks, gunshots, blood), strong language, and themes of child abuse and organized crime, indicating an R-rated or mature audience demographic.\"\n  }\n}\n```",
                      "thoughtSignature": "Es4zCsszAb4+9vtRohsCknI3h9AxvqoDEw85L7UdL1pvP8l6CfKr3XcHujqeSIDohjWF+5UBsAjEJ/U6UxG0HhmZ3PNdZAfglgqCEL97ZyqiO28+9EqHIdQMTZ57kZOJrKGicNwKnks/n7pfsuW5tscrf6OELcg02fxkGpjLFerIJfUlNTeP+IcO60UFE9Nq+nmu5kDZBn9b5ZIlcnCj7ebJB1fnfS/STzpKiJpv2/00Q7RjVjUBojVpU6uHHDsv/K1awCVjJEu/CC6N81KHpuPqK8kE7AEoqifgAbCSR+aCWdNmfDc9rSFzMdR3Rsqu0CJgQFHJ5HblOyg/3ElY6i5j6gVS8NwwpLxSzl4/IhaqNSF++dyGybgEIGFusxU6JsXlmbHLwMyzJiIjY1QVT6skhjVLS8dtcYzGavBwftO7iTvkUoAOAyqiaOKDh/50vU4BjdTsIg4Wg9ChX+Sij+i3dHA6u3Q/ryXpA2t8bMizS3SpQAHwot2XJZHrypi/xS91aayNWuRLTFqiuvRT9sP/0BmbsqWAaGIbgx0MDRmD/bLObWV8pv+M4zYdkQfA1gEC3TfOhiaVO3F7KbRB4qxi97qAJbjbWSrU1qlIkVGq1BOrMLdkUAVAv93kK9M6Rtp+CLW5Y58Rgs9Hf+/+2ejuds8LWkzqPOgSADio7vH3RN6Nl7s9wzLE+nQeZVFWVyzRaLaMFN1yfr7Btk/TV1kiikVz6xlvIhjXIWZTfj44O/wD8iR2B+8xu+PXD7SNi6CXnCyrmFrWbFWs4sq2iWlJwSK/1OzWWHzqA7kRyh6HPE/czL3zayZXZBQP99WFa6Rp0b+1fjNQVGanvGllJiJedfVatQEsKtITxmTUvnTAwjMkrs9fE4K3cDluL6/9w0pBIxGh1KMJrhHMgZgeMFYu++LBn/C+jJpB69zNvTfnzrkwv44+0kXB/JSGHsOqNdyz2al7IgPhHnD/BlFj/B5dleOjKttuMzlRBijx83L8qTjyd/SsUFU/McJU4pb011khiSPO1hkATxxOwwY/DA7E5+YH7LdWtW/2ZpiR+Kee87JFxp1kIKBum4popdzuSHGqDjrfsHhEJMS9Y/s6Hlgs6+qdGz7iKaHBSAnnt0ZP9AZzvoVhiiTdCJ2dqGxFKNXW9XJwlpjUKyc9aLIKbCVBas26C+wUCo96YlmCqK87NKN3hhrtqTpzmdxp+7hYL1TqLgF4aMExmKdIbIELpxnbPFn/7kLzxFiDNwGskjD2BiaDJURPwM/QFGL9fby5wi/3aFbXCf+UW2O8nrDTpZnUimxESjZrfuHIWpLywxay39gBlgZCOZj4t9dflIfV2JyPaocKcqmrQ+Flty+RjxiW2xRChDrQ+3+YJzyAugLIrwR2Ze/UeOvXX3QWk2qimvpqEcheg4wwKlhPjKTc+h5gOcIncyqeUvus3qsXStF5Yk2LQQzy79KgPw2HbWM7krlFlUjY3BMvzigFIzdlx38WrlnFO+5S+iGuLdUColKyZvMrDlcZF7JIZ08IMea1ZNE26v4lUVcx/UN7LYLmPEJc0Mzklflx8PnQKQDATy3aUYfpf5VmRHBZDcWwltTpEUK3lBcmBHeMnOVphnIArLnghAFhha1qyf+NuS1vQgzD9bZyHvP/ncUkVe9YFFOJDjB3r6/kcfllxle6o4q8LPDV3qjbXqf4To9pLzDR7onj8A+y+BC4PNrK0P0pzPhOuBndAtRQH19xo6rzOufs7t4I1/3xb9o/sgJncEBN3LiKAaRx3IL9pOFdJQz8lLeWSCVGfVrMrvP6WS1cL9sAkoeiS9RCLqwRE7l4NpSYHeT25HsMzyb+sUx3XbJz5p0KAvajvO07iQjXGbTK90bWTgFT8lAaaz+prizE7JnBSSWDvCJgEa7c8ppX2gFBdpiZaIscia7o0bJMUKx2wr7cZD5FCmONzTdp8F4Y832071VIj874yuMWeK28B+wsYWQX8ceEFYoBXQV09JXSfsfw4pnHzSIjDyjB6q7GG4TOTXoSShZIewpproORo9LCpBuTvDhqBRECSYcjRrJhgdQf/IVQYK+UIRWnX7pKEut0P+Rh6rgEhTGSyN2uMhfk0UFZlMxapJasHUPB+7Vfs+QyFrAL5iTSrRhqc30pdVbXM4N7TgsshE5ymH4L+WZK7R3Gth+EtqnIPyt7CathIQ5fyqz6/He5a+TLT+y+JMhC0AS2JbuHy7s1LMK5ERtYlPKpA4c1Aw8un5lFt8WlcY7X2BQwnWBLYgJpWQOrwXt2KnWRAdudik1hfxNokQJ3vttd4aWaK3vnA43CRbduuwpwqLD+LREob+X4jZokXzJ71FoKW1EGvLBECu23CnvMiJqYKqsHYM1dj8ATwMvkxhrhRuwnJpj4ZVaSZ198d0V5Pwnv2zKzMCiQuV5ADg/H7q3uidx6RViOtVZtRqHTxkHn/3YTzrtWZXSxXZ7a1KUAod4KA9sNXAV/S1zQoELjNUq6IQt7SRTnVz9ie5A5rUTGLrkQxM027uVK2tiI5u9zcvRkz8kHBqtXw+Z8MuwEQ7Qsr/FnJzbSDmNjC521LFrW+ec1jmvmFpRUlXUFQysLhYsZzb+/x1a4D0jVFEMa3OsRITaUblNMhPn6n2aOy0Jaoj00AWXV1kKWkmig6374eSs09YPJ6FF0JGxN6Q9CZYiiiAv3tpjzilGMuKqyP0+td5XJ+qhLaT7v0Q8xTbTC3ThPZUxIIjx+jvSIA9sZaKvQQVdI0rZ3vLmvfzQYXaDNyl/viU9D63A3iR7RA2d9R9CN2XzFPkIudqcQ3RPnZUkKeEQptxL2x47DkXkTiRjWziGDEPq1zgca0VMrAifHrNXriPCvBlz5nWQBLnyzq9To4BICiHEPn6+7ZzAXwbLnCKZ5PApJFU9V1zODEZt8wI41XRck8M4w8d3zfJAXmAbNKXoyE6R8y+2evPfPE7JTi0b2gQ0pRFukvIRQccZvrJjZtjksm/B9i29HSy4n5qJGQO7ujdjAhPbhet2953UmPm+HUKg94pBuc5KKSBiQwrj6PQ23dpbiYdfnJUVeit6UWaEh+Hf3KwtV1BcP7ZgcdDci5eruwUDNGbVxkcqOfDkRDVxWil4M9G8vvQt639uuImXvBoJ07k3Zb9vD6XTqWNXXPTzhPSBZUZ3JqxqwpHVG8vE87fmHLEsEY5GWwcGPDO1QACDLbytHbmb6TjcUtb/Juie4/zMja7Hj8CaNV5TEopLoopez3gwVseQHjECHC+WHh+KTOZjzYOkBPhjufOsLXT4VL6f4tE95kmrdweqBAt3xgjriQAPNff212MnG3RoP5aM34+WLd7Zrpi7z4F0rn45jqfwJoPU3siUYFJE0DgSmcsvBsmczNAQfzTtpX5mNAgKQeI7e8YjqQvPC/JTHLgK4WFUddJEdwN8x2YewdCZJHomf2rDeI61f+ALMandB2KETqNscFf3pL5zNYQoZQY66KGhTRc5ptbR2lFIXnEtNJkClEhoGbG9d5A67mLnDyOeCXQyz1P/+mUzSTfdLddVgO87xYXPzf4eRzUvIaq9S+UC+9dV/D3Jf13+H2ZdVS4tEk55Asy2JU2+GX7FrZvhhPBrMxFt23EvyENt+b5BW84X6cKmuKzqfsCtWzeJXJf+2+X8lAqP6YnSC1bZ5zSTLbDiuDssbhNO5xOI6v758yViu38hkKQ4UAkZBkBBxApjnjNj8e5gcve1lGHFhTos3nS3p+qSHttyhWzYhzZCSxM+5+SnFTH1juFhsTZfxUZPg+/Z8qylMtQve9uOGOwiSk0BK7yH9vuCRz0gYynVz700Jpjh0JWvX8HLxftQnqQu0moh4XUIOyYnN6jqiRDRaNVRdlMAlPYSJnIM5ya28919XIEwTS3m+3atfq5wksRlM25FXQpsJBk7xlk1EZqZyRapsx3CIedOm9QYl6jdf7mnDGjIQfNdb2MsUKsdwS8yLjEpQMl5llLruqYF5tV/cOKNAU8ZN+5uIBrJH7FMsQRCggjXfhUkkKPTLGH45reoC/yFjz4gi1JPm62+g8VpnVlqWyOzfPe066DE17qPOs7IzCK+Tb0N9vQZMJqJul2RV9e88+U7u35oB91XPX0ZAImtP1X7DiFthVzdiiNnQLVYi0wb3VN0PdPlvJgCA6VHYOmXjzSKhHw4dQGZ33V3tv55DXI09g/CC3enqF/BZA3YuFyovIm4W8d5BSA+kqv3HfDwPhGZSv1G3rcVkCKDqFKr0+sv6JKJ3d9pRg+EH2k65pMUeAh4cJlyJ1kiPcSPgfARS/kicjEtp/whaIDy4/JYBttjV8pTmoZSyT3nwQWFhB44b8AKjZXTicubfL+KPRJct4He7z2tcyjCiUMHdugBzKA+NOpxZ3PCIa1nw/6+iHQULUlcKnNDetkoJbA5+8mA7W+VX9X9ixy9hlnMQxu1B4z+tPKvK9EnZkjVjHf4CD4Xq3dCT5A6Nm2Xn66YgfcbZPRyS9542b23Lhgr9MKwDmR8PtBkIn/vpBaWxSPT8nSOFTFkTiGJnz8vMwSkBHRgkHxbL1NzMZH8sfUajX3C3VZOHi2FpRxwPLP4aPi5FCsHrLDZY88P4JoYO0sT5bQ974JJ7JEuLqESyWugt/ZaC4nRvxH8DR9EGdD+u2bPJFbzzCFBumoGq8MqfFwu9nrWUlQpNO39anhxN8MSyoyap3Mk/0CDnx/W2E8GAihpIP7wHXpET/pw2PPjkaA5SZA98mh9VQoELrJKeBjLjtKWyZfi4QSEBhyK3ZJThB4zwEx4ntpf72qdyx2D/CyFlq9lDTUrjRUA9zgT7A1k6yMegAZQPoyELpYYf6j3fOEe3kvRjCIY5PHR4u6EqWOg4JYd1RhfoB+hOQCWSGJ791iyklpcnO/vsmdplG+xeJmcszGqDqoJRNkSXOPSC5p7uLF0bec00+MbN5sVoEdieHkaSvtdX2wtiJZyUJNZ4mTCwWEDSJOO3gZv4RAnrvvA/Z7+fTwoD2gWWwfpz/Q3msfusuEB2XzXdQoOYHacYOLzmJvTqDC6TJJ0fSkfG4J8cdDX11v/NpXg/qaZt5pbJb6K8BQr0hGu84sS1ErbumfjIysdrbny4oVrqta63D8v+D/R9YzHGnoFf3sFeazxw7IS+taeay/ISa1/oTEvgKPa8/eCGHB4p6uKeeO/RaD/FZUM8y3wUUWm+oCilW5NMaU72oisnwbepDfcYf8Y/hTcUWuDd2Utac98N6YpKfnuj/5O0fh4yD2BSt0BBR7ahZ6QScP+/p6Qdhe7IsG1VIjiMihptuHI3PtMA8M3G351as5fObPWJcFgvnfTTClekbKMRArI1AsfeAM2RbPhdv0CQLCg6cDVxF4H/mv1HhwwGNgOft3KeM8NeMthUM/Vie7rTyAxw0zE5QjEheA5UHKZSHpcFKCdbJIxo6e5jq0cw+K40tSXuFNb5gxz3lwmXMOvqAdv+QN2RFkFQ5ZsdrPBBdWqko2aR9AVsU2gPzJm+HJ3LU+xigfJSVJWQCBuQVfudzudv+FETM+MI0ZYKiHF6is8c2kB3ZvE0V691FTMvyvbvAKabVBvtpaszgyHytsXBq0+lCh4LEQrqPYLMHQz8F3KSbZE29G+BQVku7vhZ/HyiS4lYrvI/jOM5lqSMLlItkB7Sc+7PnxsuSXmtjk16Dgv/eUl2FOVp/tLugAXorhrYcQeJhZsGuh76lZoe3yp8Le5CgY/badA4yFk5vFELy7y/a7SWBZkrFoYvQ0apPvkLv9a/TIeQx9tpN3tANdIGxJJDlBtqEfRFOQLq1YQpP2VMOdzEJgqnY55AY1LH3eRLoaedIYJ19GQ0q1LLJyt4rcsg315wamy4AYC9XqVn55KIJ5FHu2K5jf5jGEQpN0oXhaXtZUcoifqLqnwzD6vU7HzJCcIRGfXyS68FkcXHb8g/q0dwRt1cScvQxh/v4pLXUZ6UvqXcCYx0HfBnVwo99ooDcGr49h5h1B73HOBOc+iEnTxnR5pI9t7r4e4E5YxiM7yX6RJwSWAkHikMoy8vnlHK8ZR4oJ4EclF436eiOwhFVx+ZjXgC1r7QiL4DeOcWNDtQMCTSspoXRzy/vHJPJphoJIhUgoVKeFdOnwMkd0kRJ0OgkALi0S3IeLZeiOaIJhgTtVATG+vuehEYy5vUGgtY7zgqmVwRq2sMEW0tw5j/4sKmGCClUk5XM1M5L8QUQAca30qwZ2UqTP5kJ1qs/1120cBFLziQIus0PPZSaaDz8IB7LLvsNCWGHAl2vixBFUlVQ0VMjo2aKCS9GbaHWDl4TTGwmU1e86jH90cG2HjGNVocpx7L1hWMAtFWBbnOPw6Rcg3GajEmGzAsQF4fyC6OZNaFG9ih/KVrW7zEoOj2C3z7BcKOq8kU4W4JsrzR+78LmqxOEWWMoxSsqJ60ANCWt1MY7c1U9cbLdMxrMgJMmuyM7z9qYU2Mxc1A/Gtcqzrf4Wiv+hW8tYVCvZkNEJL5ZpueoCiOw7IWR34IR2I+I54OCAEi77fOHR84s2om86JRo4R/znO+BDL1o6qQnMkLZyPDTAB7vSjiNwnDUhmbWldT0X5DN29NK1sS4YV9CXFwLmTj4jdRfZ5oDk9H2DhDRbg/jCP0JIMhBjLl858EoAmlNC6GwddYxokVXrL5lO2txnmno6ZQG1vIJYPXp+KWPMUUihZKm1FN9NPcE5ae6nUFsj0w75thzAefbAKHtqQJ+ZaimrjBPI//2XtYQMKqVvByZibtoobNzt1JXIKs8DzEvrOZVm89B3jKGC+fcDu+Uqxg7qAXaJORQ+MJmuWM1a1XgaBrgY8ttGpGyJRrs0ZYPdmK4fU9+IyGyN+tJKNRaFu+2u0V8VoHWXG3NaBCisAiW9TfpStJ0h84dHtyAk0kbTmGXy8rakNH0CJlKmUj5uta7zvLN5buiqk1FQOYNiZQ0PMamusvISjz86I4drIYfzQyTL1d7dunWhE3+TkcLQYIuYIipcPBmmcoM5VauvQgLe2+r96PdcjArL2Edy/tbbOxBl4yXiFZab9dNfl+FU+mitTLqGf53hlSV7lQDgwxLr7BGoY1Eq10hHq0iUnGyRwwX1FDOu6OvTyE4jxhTshzskCMIdMA5r9keGnIiXKsa8eSgq/j1xtn78GhSiubG3nHtTHanyehMcr4trXCPyd/nMOkhqNPXJKZ5yMqbBLkUPV9V9McyWMTb/H+EnnjVdAKb0fMQ+Y1pzD+0rILmSkMCwDORNEXumqhK4pfS0dhrzVZcbZyT/HIeRGt1rS0NsvBZhK3txyDTqvnymvZN+dXwd/wYWC2ojx8Adxky2rYjrh0AfB80LiGNUf7QsXGg98HvHPO82RAXgWu0T3uTaSdwv8KBQKiWz/VUbctHxNnsBk2SrJNHBnZgSAEFbLufpOiF8U6Y+rikNywPVS1NApJ1iv6xYuDapxSp1l7jtNZkoQDeBnnyt7deznWcpb5UZwDidfRnwhugC+r32FAWSiZ4ewRrvzMznKlv3Z0obnDx11k36id9xfmHxn63f+j8zjSvHoalLWywUw5egTbwCIdgbVPJPQLwSA4dBh0RX+tBoLnlLGUiG1DjuP0tux/BKP5a/pcyyTY8YCvRr3oyledAsMZjpwLiieD5IdDvElFS4r5zAKGPtng1hwT/kgw1TCDlDq7cJJysdglLmVfN/ZD8B2eVArzbTI8MLR8YkHXWfFMGE1yv6ONtRqzh79vLxuoVMpCb2M9hD0nMUp1I9LPuE27+eLPf/Epf0Uh1cVwRUc8q0vKnjhNu8BCgv7HBKp+zGN3oEZWAWhnVhff6b65PKmySUkg/GIFtr3od8Vl1DcrvOGNrG+xFImzVg2UVlGrBmp2UI9PIfZd1eNl2SP+FQM8JfodKwIc88L5P3HrdG6G2gCaTAagDUCbQzl6kfvwnUruxFCT5zcKoI0QJyYrfvo6PYWMCVViJrysXHqc22/J0AH6rriMEDYb3WLmATlXDb4d/8zsLRfrGZE/l4R89k4wNorCzoqfoJjrLW1aVHYABTlFpBfIt1Ypc+9ADQlcspHu/7t1AprF7Z01tt4+Eh7xaeAzAgvJtjcYMAxnaXdNmCmCLo9HUPF339fqUffYTur5tZkMDtALyD1UZun5cxZJYku4JcUQc6borwiAPIfw8kRMpB8VztlzVHCeaKnoL0ivK+KIasj7cA8EnG1Q6QphJU0opxM4eal0Dh5grXww1lwlgTN9Lhw5PT3hQDD9TznZvC5YMLqU6X1eC6GUKUJlWo6gJt2E2rOErvTDZtKMyUOtB1wl8rIDoALyhvnRq7iqbVC4v+aVsC3QQtZ3HSF0tSWQ4NZSpaRN2JlvFQgjZCtgFw2tNGkO5pJNkuZsrFeAUf/hPHuWi5toE9G74+3TPsDCx9SaMeCh/qEoUMqphzBc7E9dUF+9YfkYj2hYniB/zUhQB7OIiFJoZ/ftOB5bqAOmzlycRN3wZ3UcAIvztPRJ3STukrnVenqabMkNJ03+O6KjeYNwdH/onZ+thw7RwvSuutkeOAJf9wQH/mJxCuWfe1hRjHFu9mCV3LjKD0tMuw7Q1p2NDrZTK80rJjwvOMCorak8/rtvF6qsMlnC/HidGjOup+ZXkCM94w0jO8B/R3uKkaE7tWAmlhouxqjPO3RRjkO5Nk2CDDuwWRcjzUAYpfLVChTZ01aCzWAOPzPW8y7NuICPuarlHw7CJuWDcTwovUaF6o1rTum7UGgtFARtSj/iOG8U3jUmwMKH0XKt9J+u233m3CQvk4h2WN5C+WtzfOrhGFl4d6bvTGxg"
                    }
                  ],
                  "role": "model"
                },
                "finishReason": "STOP",
                "index": 0
              }
            ],
            "usageMetadata": {
              "promptTokenCount": 4883,
              "candidatesTokenCount": 888,
              "totalTokenCount": 7591,
              "promptTokensDetails": [
                {
                  "modality": "TEXT",
                  "tokenCount": 4883
                }
              ],
              "thoughtsTokenCount": 1820
            },
            "modelVersion": "gemini-3-pro-preview",
            "responseId": "GXSSafD4IMenqtsPtpDGiAI"
          },
          "cached": false,
          "metadata": {}
        },
        "score": 0.5649500000000001,
        "success": false,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 1
      },
      {
        "cost": 0.0008699000000000001,
        "gradingResult": {
          "pass": true,
          "score": 0.88125,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 2273,
            "prompt": 1504,
            "completion": 769,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.9125,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=1.00, format_accuracy=1.00, genre_accuracy=0.75, json_valid=0.90, location_accuracy=1.00, title_accuracy=1.00, tone_accuracy=0.60",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": true,
              "score": 0.85,
              "reason": "Let me evaluate each of the 12 criteria:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. \n\n2. **Format**: Correctly identified as 'feature film' with reasonable confidence 0.8. \n\n3. **Genre**: Includes action, crime, and drama. While 'thriller' isn't explicitly listed, 'crime' and 'action' are present, which captures the vigilante crime-action nature. \n\n4. **Tone**: Dark, gritty, violent, suspenseful  all appropriate descriptors well-supported by evidence. \n\n5. **Duration**: Estimated at 100 minutes. The rubric says 85-130 minutes is reasonable for a ~430-line screenplay. 100 minutes falls within this range. The rationale mentions '~100 pages' which may be an assumption, but the estimate is reasonable. \n\n6. **Primary characters**: Identifies The Mariner (Billy) and Rose as leads, plus Salvatori. The rubric asks for Mariner and Rose specifically. Salvatori is listed as primary rather than supporting, which is debatable but defensible as the main antagonist. \n\n7. **Supporting characters**: Lists Dad, Rosco, Vinnie, Mikey, Carlos, and Thugs. The rubric mentions Dad, Salvatori, and Vinnie. Salvatori is listed as primary instead of supporting, but Dad and Vinnie are correctly in supporting. This is a minor issue  Salvatori could reasonably be either primary or supporting. Mostly \n\n8. **Location count**: Estimated at 7 with confidence 0.9. The rubric says 5-20 is reasonable. 7 falls within range. \n\n9. **Locations summary**: Correctly mentions the Ruddy & Greene Building as the primary setting, along with its various floors, exterior, elevator, and the flashback locations (coastline, backyard). \n\n10. **Target audience**: Value is null but the rationale discusses adult/R-rated content. The confidence is 0.5, acknowledging uncertainty. The rubric asks if it 'correctly identifies this as mature/adult content'  the rationale does mention this but the value is null, which is a partial miss. \n\n11. **Confidence calibration**: Scores seem well-calibrated. Title at 1.0, tone at 0.95, genre at 0.9, format at 0.8, target audience at 0.5 (reflecting genuine uncertainty). These are reasonable. \n\n12. **Rationale quality**: All rationales cite specific screenplay evidence (ruined city, bullet holes, graffiti, character names, building name, flashback settings). They are grounded and evidence-based. \n\nOverall, the output is strong across nearly all criteria. The main weakness is the null value for target audience (though the rationale acknowledges the mature content), and the placement of Salvatori as primary rather than supporting (though this is defensible). The metadata is accurate and evidence-based throughout.",
              "tokensUsed": {
                "total": 2273,
                "prompt": 1504,
                "completion": 769,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n```json\\n{\\n  \\\"title\\\": {\\n    \\\"value\\\": \\\"The Mariner\\\",\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"The title 'The Mariner' is explicitly stated at the beginning of the screenplay and is also used as a full-screen superimposed title card.\\\"\\n  },\\n  \\\"format\\\": {\\n    \\\"value\\\": \\\"feature film\\\",\\n    \\\"confidence\\\": 0.8,\\n    \\\"rationale\\\": \\\"The screenplay presents a self-contained narrative with a clear beginning, rising action, climax, and resolution, typical of a feature film. The length suggests a feature rather than a short.\\\"\\n  },\\n  \\\"genre\\\": {\\n    \\\"value\\\": [\\n      \\\"action\\\",\\n      \\\"crime\\\",\\n      \\\"drama\\\"\\n    ],\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"The screenplay features significant action sequences (fighting, gunshots, chases), a criminal element (gang money, Salvatori), and dramatic character development and emotional stakes (Mariner's past, Rose's situation).\\\"\\n  },\\n  \\\"tone\\\": {\\n    \\\"value\\\": [\\n      \\\"dark\\\",\\n      \\\"gritty\\\",\\n      \\\"violent\\\",\\n      \\\"suspenseful\\\"\\n    ],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"The descriptions of a ruined city, bullet holes, graffiti, violent fighting, blood, and the presence of criminals establish a dark and gritty tone. The action sequences and the confrontation with Salvatori create suspense.\\\"\\n  },\\n  \\\"estimated_duration_minutes\\\": {\\n    \\\"value\\\": 100,\\n    \\\"confidence\\\": 0.8,\\n    \\\"rationale\\\": \\\"The screenplay is approximately 100 pages long. Using the standard industry rule of ~1 page per minute, this suggests an estimated runtime of around 100 minutes, fitting for a feature film.\\\"\\n  },\\n  \\\"primary_characters\\\": {\\n    \\\"value\\\": [\\n      \\\"The Mariner (Billy)\\\",\\n      \\\"Rose\\\",\\n      \\\"Salvatori\\\"\\n    ],\\n    \\\"confidence\\\": 1.0,\\n    \\\"rationale\\\": \\\"The Mariner is the titular character and protagonist. Rose is a central figure with significant dialogue and plot involvement. Salvatori is the primary antagonist, driving the conflict in the latter half of the script.\\\"\\n  },\\n  \\\"supporting_characters\\\": {\\n    \\\"value\\\": [\\n      \\\"Dad (Mariner's Father)\\\",\\n      \\\"Thugs (Thug 1, Thug 2, Thug 3)\\\",\\n      \\\"Rosco\\\",\\n      \\\"Vinnie\\\",\\n      \\\"Mikey\\\",\\n      \\\"Carlos\\\"\\n    ],\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"Dad is a significant character in flashbacks, shaping Mariner's motivations. Rosco, Vinnie, Mikey, and Carlos are antagonists encountered during the plot. The unnamed thugs also play a role.\\\"\\n  },\\n  \\\"location_count\\\": {\\n    \\\"value\\\": 7,\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"The screenplay explicitly lists the following distinct locations: City Centre, Ruddy & Greene Building (Exterior Front/Rear), Elevator, 11th Floor, Stairwell, 12th Floor Stairwell, 13th Floor, 15th Floor. The flashbacks also introduce distinct settings (Coastline, Backyard) but are presented as temporal shifts within the main narrative's locations.\\\"\\n  },\\n  \\\"locations_summary\\\": {\\n    \\\"value\\\": \\\"The story primarily takes place in a ruined urban environment, specifically within the Ruddy & Greene Building, including its exterior, alley, elevator, and various floors (11th, 12th, 13th, 15th). Flashbacks occur on a coastline and in a backyard.\\\",\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"This summarizes the key settings described in the screenplay, highlighting the contrast between the present-day ruined city and the idyllic flashback locations.\\\"\\n  },\\n  \\\"target_audience\\\": {\\n    \\\"value\\\": null,\\n    \\\"confidence\\\": 0.5,\\n    \\\"rationale\\\": \\\"While the violence and mature themes suggest an adult audience (likely R-rated), there is no explicit rating or demographic information provided in the screenplay text to definitively determine the target audience.\\\"\\n  }\\n}\\n```\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "451b0f7e-078e-4c7c-b623-b5acc913e973",
        "latencyMs": 4276,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a heros origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldnt.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. McAngus Fish & Brewis painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the buildings back door, his huge frame silhouetted against the interiors light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of Faith by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, Faith playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! Cmon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. Shes wearing a Tim Hortons uniform, her hair is a mess, and theres blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: THE MARINER\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHes built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with Dad in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at mas.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! Im taking you home. Its my fault they went after you. I never thought theyd--\n\nROSE  \n(laughing)  \nYou think theyre after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWeve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariners OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWell take the stairs up. They wont expect that.\n\nMARINER  \nBecause its stupid\\!\n\nRose raises an eyebrow at Mariners crazy outfit.\n\nMARINER  \nIts functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his Dad TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows whats a hero? Es the one whats brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! Ill buy you a new bloody purse.\n\nROSE  \nIt aint the purse. Its... a blockchain password to my life savings. I hid it on a chip in the lining. Its all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hells a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! Its, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatoris gonna kill ya, Rosie.\n\nRose nods yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe aint gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. Its gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shits a scam. You gotta get into PonziCoin. My cousins in it. He says its legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWere leaving. Now. I dont steal, Rose. Its against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariners code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We dont wanna hurt ya. Mr. Salvatori just wants his password. Thats all. Then maybe, if youre reeeaal nice, maybe you can be my booty call some more.\n\nRoses eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariners back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIES screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos back. BOSUN is carved into the wood. Rose gives Vinnies body a kick.\n\nROSE  \nPrick. Oh shit\\! Youre bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariners leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnies unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. Cmon.\n\nINT. 15TH FLOOR\n\nThis floor isnt destroyed like the others. Its CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariners opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist youre strong, Billy. Thats gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariners dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, dont never run from a fight. Not again, ya hears me? Its not what a man does. Its not what a MacAngus does. Lets do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin tin, sis. Just like dad taught me.\n\nROSE  \nYoure serious about this dad shit? You talking about the summer he took you to buddys place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONTD)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, hes living up in  Chimney Bay with some skank. He was on the pogey that summer at buddys\\! He was supposed to be taking care of you. Instead hed ditch you in his deadbeat friends yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma woulda said.\n\nROSE  \nYou were too young, Will. She didnt want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew youd be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. Hes WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariners dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Dont never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like youre trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, by? Its got two thumbs and e looks like this\\! Ha\\! Now fetch me anudder. An dont gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONTD)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariners OAR and kick the back of his legs so hes kneeling at their feet. Mariner doesnt resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHes no hero. Hes a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they dont deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHes a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Roses head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariners face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "a298f8e59d0e5184b43a0be484524cae03335a41d5ae89811f617d91fa39c887",
        "promptIdx": 2,
        "provider": {
          "id": "google:gemini-2.5-flash-lite",
          "label": "Gemini 2.5 Flash Lite"
        },
        "response": {
          "output": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The title 'The Mariner' is explicitly stated at the beginning of the screenplay and is also used as a full-screen superimposed title card.\"\n  },\n  \"format\": {\n    \"value\": \"feature film\",\n    \"confidence\": 0.8,\n    \"rationale\": \"The screenplay presents a self-contained narrative with a clear beginning, rising action, climax, and resolution, typical of a feature film. The length suggests a feature rather than a short.\"\n  },\n  \"genre\": {\n    \"value\": [\n      \"action\",\n      \"crime\",\n      \"drama\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay features significant action sequences (fighting, gunshots, chases), a criminal element (gang money, Salvatori), and dramatic character development and emotional stakes (Mariner's past, Rose's situation).\"\n  },\n  \"tone\": {\n    \"value\": [\n      \"dark\",\n      \"gritty\",\n      \"violent\",\n      \"suspenseful\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"The descriptions of a ruined city, bullet holes, graffiti, violent fighting, blood, and the presence of criminals establish a dark and gritty tone. The action sequences and the confrontation with Salvatori create suspense.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 100,\n    \"confidence\": 0.8,\n    \"rationale\": \"The screenplay is approximately 100 pages long. Using the standard industry rule of ~1 page per minute, this suggests an estimated runtime of around 100 minutes, fitting for a feature film.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\n      \"The Mariner (Billy)\",\n      \"Rose\",\n      \"Salvatori\"\n    ],\n    \"confidence\": 1.0,\n    \"rationale\": \"The Mariner is the titular character and protagonist. Rose is a central figure with significant dialogue and plot involvement. Salvatori is the primary antagonist, driving the conflict in the latter half of the script.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\n      \"Dad (Mariner's Father)\",\n      \"Thugs (Thug 1, Thug 2, Thug 3)\",\n      \"Rosco\",\n      \"Vinnie\",\n      \"Mikey\",\n      \"Carlos\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"Dad is a significant character in flashbacks, shaping Mariner's motivations. Rosco, Vinnie, Mikey, and Carlos are antagonists encountered during the plot. The unnamed thugs also play a role.\"\n  },\n  \"location_count\": {\n    \"value\": 7,\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay explicitly lists the following distinct locations: City Centre, Ruddy & Greene Building (Exterior Front/Rear), Elevator, 11th Floor, Stairwell, 12th Floor Stairwell, 13th Floor, 15th Floor. The flashbacks also introduce distinct settings (Coastline, Backyard) but are presented as temporal shifts within the main narrative's locations.\"\n  },\n  \"locations_summary\": {\n    \"value\": \"The story primarily takes place in a ruined urban environment, specifically within the Ruddy & Greene Building, including its exterior, alley, elevator, and various floors (11th, 12th, 13th, 15th). Flashbacks occur on a coastline and in a backyard.\",\n    \"confidence\": 0.95,\n    \"rationale\": \"This summarizes the key settings described in the screenplay, highlighting the contrast between the present-day ruined city and the idyllic flashback locations.\"\n  },\n  \"target_audience\": {\n    \"value\": null,\n    \"confidence\": 0.5,\n    \"rationale\": \"While the violence and mature themes suggest an adult audience (likely R-rated), there is no explicit rating or demographic information provided in the screenplay text to definitively determine the target audience.\"\n  }\n}\n```",
          "tokenUsage": {
            "prompt": 4883,
            "completion": 954,
            "total": 5837,
            "numRequests": 1
          },
          "cost": 0.0008699000000000001,
          "raw": {
            "candidates": [
              {
                "content": {
                  "parts": [
                    {
                      "text": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The title 'The Mariner' is explicitly stated at the beginning of the screenplay and is also used as a full-screen superimposed title card.\"\n  },\n  \"format\": {\n    \"value\": \"feature film\",\n    \"confidence\": 0.8,\n    \"rationale\": \"The screenplay presents a self-contained narrative with a clear beginning, rising action, climax, and resolution, typical of a feature film. The length suggests a feature rather than a short.\"\n  },\n  \"genre\": {\n    \"value\": [\n      \"action\",\n      \"crime\",\n      \"drama\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay features significant action sequences (fighting, gunshots, chases), a criminal element (gang money, Salvatori), and dramatic character development and emotional stakes (Mariner's past, Rose's situation).\"\n  },\n  \"tone\": {\n    \"value\": [\n      \"dark\",\n      \"gritty\",\n      \"violent\",\n      \"suspenseful\"\n    ],\n    \"confidence\": 0.95,\n    \"rationale\": \"The descriptions of a ruined city, bullet holes, graffiti, violent fighting, blood, and the presence of criminals establish a dark and gritty tone. The action sequences and the confrontation with Salvatori create suspense.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 100,\n    \"confidence\": 0.8,\n    \"rationale\": \"The screenplay is approximately 100 pages long. Using the standard industry rule of ~1 page per minute, this suggests an estimated runtime of around 100 minutes, fitting for a feature film.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\n      \"The Mariner (Billy)\",\n      \"Rose\",\n      \"Salvatori\"\n    ],\n    \"confidence\": 1.0,\n    \"rationale\": \"The Mariner is the titular character and protagonist. Rose is a central figure with significant dialogue and plot involvement. Salvatori is the primary antagonist, driving the conflict in the latter half of the script.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\n      \"Dad (Mariner's Father)\",\n      \"Thugs (Thug 1, Thug 2, Thug 3)\",\n      \"Rosco\",\n      \"Vinnie\",\n      \"Mikey\",\n      \"Carlos\"\n    ],\n    \"confidence\": 0.9,\n    \"rationale\": \"Dad is a significant character in flashbacks, shaping Mariner's motivations. Rosco, Vinnie, Mikey, and Carlos are antagonists encountered during the plot. The unnamed thugs also play a role.\"\n  },\n  \"location_count\": {\n    \"value\": 7,\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay explicitly lists the following distinct locations: City Centre, Ruddy & Greene Building (Exterior Front/Rear), Elevator, 11th Floor, Stairwell, 12th Floor Stairwell, 13th Floor, 15th Floor. The flashbacks also introduce distinct settings (Coastline, Backyard) but are presented as temporal shifts within the main narrative's locations.\"\n  },\n  \"locations_summary\": {\n    \"value\": \"The story primarily takes place in a ruined urban environment, specifically within the Ruddy & Greene Building, including its exterior, alley, elevator, and various floors (11th, 12th, 13th, 15th). Flashbacks occur on a coastline and in a backyard.\",\n    \"confidence\": 0.95,\n    \"rationale\": \"This summarizes the key settings described in the screenplay, highlighting the contrast between the present-day ruined city and the idyllic flashback locations.\"\n  },\n  \"target_audience\": {\n    \"value\": null,\n    \"confidence\": 0.5,\n    \"rationale\": \"While the violence and mature themes suggest an adult audience (likely R-rated), there is no explicit rating or demographic information provided in the screenplay text to definitively determine the target audience.\"\n  }\n}\n```"
                    }
                  ],
                  "role": "model"
                },
                "finishReason": "STOP",
                "index": 0
              }
            ],
            "usageMetadata": {
              "promptTokenCount": 4883,
              "candidatesTokenCount": 954,
              "totalTokenCount": 5837,
              "promptTokensDetails": [
                {
                  "modality": "TEXT",
                  "tokenCount": 4883
                }
              ]
            },
            "modelVersion": "gemini-2.5-flash-lite",
            "responseId": "q3OSafLbGOvDqtsPodCX-QY"
          },
          "cached": false,
          "metadata": {}
        },
        "score": 0.88125,
        "success": true,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0.0007223,
        "gradingResult": {
          "pass": true,
          "score": 0.78125,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 1754,
            "prompt": 1041,
            "completion": 713,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.8825,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=1.00, format_accuracy=1.00, genre_accuracy=0.75, json_valid=1.00, location_accuracy=0.60, title_accuracy=1.00, tone_accuracy=0.60",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": true,
              "score": 0.68,
              "reason": "Let me evaluate each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with confidence 1.0. \n\n2. **Format**: Identified as 'feature film' with 0.9 confidence. Reasonable. \n\n3. **Genre**: Lists action, drama, thriller. Missing 'crime' which is a key genre for a vigilante crime-action story. Drama is reasonable but crime would be more accurate. Partial \n\n4. **Tone**: Dark, gritty, intense - captures the qualities well. \n\n5. **Duration**: Estimated 90 minutes. The rubric says 85-130 minutes for a ~430-line screenplay. 90 is within range, though the rationale mentions '~90 pages' which may not match the actual screenplay length. The estimate is reasonable. \n\n6. **Primary characters**: Lists Mariner, Rose, and Salvatori. The rubric asks for Mariner and Rose as leads. Salvatori being listed as primary rather than supporting is debatable - the model itself says Salvatori is the 'main antagonist,' which could justify primary status. \n\n7. **Supporting characters**: Lists Vinnie, Mikey, Carlos, Thugs, Dad. The rubric asks for Dad, Salvatori, Vinnie. Since Salvatori is placed in primary, Dad and Vinnie are correctly in supporting. This is mostly correct. \n\n8. **Location count**: 8 locations, within the 5-20 range. \n\n9. **Locations summary**: Mentions 'Ruddy & Greene building' explicitly as a key location. \n\n10. **Target audience**: Value is null with 0.2 confidence, but the rationale mentions adult audience with violence and mature themes. The null value is problematic - it should have provided 'adult' or 'mature' as the value rather than null. \n\n11. **Confidence calibration**: Generally reasonable. Title at 1.0, format at 0.9, genre at 0.8 - these seem well-calibrated. Target audience at 0.2 with null is oddly calibrated but reflects genuine uncertainty about specifics. Mostly \n\n12. **Rationale quality**: Rationales reference specific screenplay elements (title card, post-apocalyptic setting, character roles, building names). Generally evidence-based. The 'post-apocalyptic' description in the tone rationale seems potentially inaccurate for what's described as a vigilante crime story - this may be a mischaracterization. Partial \n\nOverall: Most fields are accurate and evidence-based. Key weaknesses: missing 'crime' genre, null target audience value, and potentially inaccurate 'post-apocalyptic' characterization. The output is generally good but has notable gaps.",
              "tokensUsed": {
                "total": 1754,
                "prompt": 1041,
                "completion": 713,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n{\\\"title\\\":{\\\"value\\\":\\\"The Mariner\\\",\\\"confidence\\\":1,\\\"rationale\\\":\\\"The screenplay explicitly states the title as 'The Mariner' in the superimposed title card.\\\"},\\\"format\\\":{\\\"value\\\":\\\"feature film\\\",\\\"confidence\\\":0.9,\\\"rationale\\\":\\\"The screenplay's length, structure, and detailed scene descriptions suggest a full-length feature film rather than a short or series pilot.\\\"},\\\"genre\\\":{\\\"value\\\":[\\\"action\\\",\\\"drama\\\",\\\"thriller\\\"],\\\"confidence\\\":0.8,\\\"rationale\\\":\\\"The screenplay features intense action scenes, character-driven drama, and suspenseful moments, indicating a blend of action, drama, and thriller genres.\\\"},\\\"tone\\\":{\\\"value\\\":[\\\"dark\\\",\\\"gritty\\\",\\\"intense\\\"],\\\"confidence\\\":0.9,\\\"rationale\\\":\\\"The screenplay depicts a post-apocalyptic setting, violence, and emotional depth, contributing to a dark and gritty tone.\\\"},\\\"estimated_duration_minutes\\\":{\\\"value\\\":90,\\\"confidence\\\":0.8,\\\"rationale\\\":\\\"Based on typical screenplay length (~1 page per minute) and the screenplay's length (~90 pages), the estimated runtime is approximately 90 minutes.\\\"},\\\"primary_characters\\\":{\\\"value\\\":[\\\"Mariner\\\",\\\"Rose\\\",\\\"Salvatori\\\"],\\\"confidence\\\":1,\\\"rationale\\\":\\\"Mariner is the protagonist, Rose is a key supporting character, and Salvatori is the main antagonist, all prominently featured throughout the screenplay.\\\"},\\\"supporting_characters\\\":{\\\"value\\\":[\\\"Vinnie\\\",\\\"Mikey\\\",\\\"Carlos\\\",\\\"Thugs\\\",\\\"Dad\\\"],\\\"confidence\\\":1,\\\"rationale\\\":\\\"These characters appear in multiple scenes, providing support or opposition to the main characters, and are explicitly named or described.\\\"},\\\"location_count\\\":{\\\"value\\\":8,\\\"confidence\\\":0.9,\\\"rationale\\\":\\\"Distinct locations include city center, Ruddy & Greene building (front and rear), elevator, stairwells, various floors, backyard, and office, totaling approximately 8 key locations.\\\"},\\\"locations_summary\\\":{\\\"value\\\":\\\"Urban post-apocalyptic cityscape with ruined buildings, interior of a damaged office building, stairwells, and a backyard setting.\\\",\\\"confidence\\\":0.9,\\\"rationale\\\":\\\"The screenplay describes multiple urban and interior locations, emphasizing a ruined city environment and specific building interiors.\\\"},\\\"target_audience\\\":{\\\"value\\\":null,\\\"confidence\\\":0.2,\\\"rationale\\\":\\\"The screenplay contains violence, mature themes, and language, suggesting an adult audience, but no explicit rating or demographic is provided.\\\"}}\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "e178f514-cb4a-4d01-ac35-6f650cbe09bd",
        "latencyMs": 5678,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a heros origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldnt.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. McAngus Fish & Brewis painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the buildings back door, his huge frame silhouetted against the interiors light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of Faith by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, Faith playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! Cmon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. Shes wearing a Tim Hortons uniform, her hair is a mess, and theres blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: THE MARINER\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHes built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with Dad in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at mas.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! Im taking you home. Its my fault they went after you. I never thought theyd--\n\nROSE  \n(laughing)  \nYou think theyre after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWeve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariners OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWell take the stairs up. They wont expect that.\n\nMARINER  \nBecause its stupid\\!\n\nRose raises an eyebrow at Mariners crazy outfit.\n\nMARINER  \nIts functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his Dad TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows whats a hero? Es the one whats brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! Ill buy you a new bloody purse.\n\nROSE  \nIt aint the purse. Its... a blockchain password to my life savings. I hid it on a chip in the lining. Its all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hells a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! Its, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatoris gonna kill ya, Rosie.\n\nRose nods yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe aint gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. Its gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shits a scam. You gotta get into PonziCoin. My cousins in it. He says its legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWere leaving. Now. I dont steal, Rose. Its against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariners code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We dont wanna hurt ya. Mr. Salvatori just wants his password. Thats all. Then maybe, if youre reeeaal nice, maybe you can be my booty call some more.\n\nRoses eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariners back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIES screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos back. BOSUN is carved into the wood. Rose gives Vinnies body a kick.\n\nROSE  \nPrick. Oh shit\\! Youre bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariners leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnies unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. Cmon.\n\nINT. 15TH FLOOR\n\nThis floor isnt destroyed like the others. Its CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariners opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist youre strong, Billy. Thats gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariners dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, dont never run from a fight. Not again, ya hears me? Its not what a man does. Its not what a MacAngus does. Lets do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin tin, sis. Just like dad taught me.\n\nROSE  \nYoure serious about this dad shit? You talking about the summer he took you to buddys place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONTD)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, hes living up in  Chimney Bay with some skank. He was on the pogey that summer at buddys\\! He was supposed to be taking care of you. Instead hed ditch you in his deadbeat friends yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma woulda said.\n\nROSE  \nYou were too young, Will. She didnt want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew youd be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. Hes WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariners dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Dont never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like youre trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, by? Its got two thumbs and e looks like this\\! Ha\\! Now fetch me anudder. An dont gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONTD)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariners OAR and kick the back of his legs so hes kneeling at their feet. Mariner doesnt resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHes no hero. Hes a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they dont deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHes a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Roses head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariners face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "a298f8e59d0e5184b43a0be484524cae03335a41d5ae89811f617d91fa39c887",
        "promptIdx": 0,
        "provider": {
          "id": "openai:gpt-4.1-nano",
          "label": "GPT-4.1 Nano"
        },
        "response": {
          "output": "{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 1.0,\n    \"rationale\": \"The screenplay explicitly states the title as 'The Mariner' in the superimposed title card.\"\n  },\n  \"format\": {\n    \"value\": \"feature film\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay's length, structure, and detailed scene descriptions suggest a full-length feature film rather than a short or series pilot.\"\n  },\n  \"genre\": {\n    \"value\": [\"action\", \"drama\", \"thriller\"],\n    \"confidence\": 0.8,\n    \"rationale\": \"The screenplay features intense action scenes, character-driven drama, and suspenseful moments, indicating a blend of action, drama, and thriller genres.\"\n  },\n  \"tone\": {\n    \"value\": [\"dark\", \"gritty\", \"intense\"],\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay depicts a post-apocalyptic setting, violence, and emotional depth, contributing to a dark and gritty tone.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 90,\n    \"confidence\": 0.8,\n    \"rationale\": \"Based on typical screenplay length (~1 page per minute) and the screenplay's length (~90 pages), the estimated runtime is approximately 90 minutes.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\"Mariner\", \"Rose\", \"Salvatori\"],\n    \"confidence\": 1.0,\n    \"rationale\": \"Mariner is the protagonist, Rose is a key supporting character, and Salvatori is the main antagonist, all prominently featured throughout the screenplay.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\"Vinnie\", \"Mikey\", \"Carlos\", \"Thugs\", \"Dad\"],\n    \"confidence\": 1.0,\n    \"rationale\": \"These characters appear in multiple scenes, providing support or opposition to the main characters, and are explicitly named or described.\"\n  },\n  \"location_count\": {\n    \"value\": 8,\n    \"confidence\": 0.9,\n    \"rationale\": \"Distinct locations include city center, Ruddy & Greene building (front and rear), elevator, stairwells, various floors, backyard, and office, totaling approximately 8 key locations.\"\n  },\n  \"locations_summary\": {\n    \"value\": \"Urban post-apocalyptic cityscape with ruined buildings, interior of a damaged office building, stairwells, and a backyard setting.\",\n    \"confidence\": 0.9,\n    \"rationale\": \"The screenplay describes multiple urban and interior locations, emphasizing a ruined city environment and specific building interiors.\"\n  },\n  \"target_audience\": {\n    \"value\": null,\n    \"confidence\": 0.2,\n    \"rationale\": \"The screenplay contains violence, mature themes, and language, suggesting an adult audience, but no explicit rating or demographic is provided.\"\n  }\n}",
          "tokenUsage": {
            "total": 5345,
            "prompt": 4719,
            "completion": 626,
            "numRequests": 1,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            }
          },
          "cached": false,
          "latencyMs": 5678,
          "finishReason": "stop",
          "cost": 0.0007223,
          "guardrails": {
            "flagged": false
          },
          "metadata": {
            "http": {
              "status": 200,
              "statusText": "OK",
              "headers": {
                "access-control-expose-headers": "X-Request-ID",
                "alt-svc": "h3=\":443\"; ma=86400",
                "cf-cache-status": "DYNAMIC",
                "cf-ray": "9ce94a75d8f258e5-YVR",
                "connection": "keep-alive",
                "content-encoding": "br",
                "content-type": "application/json",
                "date": "Mon, 16 Feb 2026 01:32:28 GMT",
                "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
                "openai-processing-ms": "5445",
                "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
                "openai-version": "2020-10-01",
                "server": "cloudflare",
                "set-cookie": "__cf_bm=v8LHMg8L4Xo5vEJS7_XknItXWfv3zEMOB1G7DU3DX_4-1771205543.3383183-1.0.1.1-5vX0gIM3SbRGUkqDQuOY7EuhSLSIkakfMA3rZnBIJJN0qsVdqfc1eZ0yuY73KkMwlgdwWDx1ooci7MD3cgzafJWs5eZ_ngMD.0Xgepmd85KdsXE2Cu2kMYv0tmXRwfjw; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Mon, 16 Feb 2026 02:02:28 GMT",
                "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
                "transfer-encoding": "chunked",
                "x-content-type-options": "nosniff",
                "x-openai-proxy-wasm": "v0.1",
                "x-ratelimit-limit-requests": "10000",
                "x-ratelimit-limit-tokens": "10000000",
                "x-ratelimit-remaining-requests": "9999",
                "x-ratelimit-remaining-tokens": "9995538",
                "x-ratelimit-reset-requests": "6ms",
                "x-ratelimit-reset-tokens": "26ms",
                "x-request-id": "req_1c4e99f848de4d8e835fa7685aac58cc"
              }
            }
          }
        },
        "score": 0.78125,
        "success": true,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "http": {
            "status": 200,
            "statusText": "OK",
            "headers": {
              "access-control-expose-headers": "X-Request-ID",
              "alt-svc": "h3=\":443\"; ma=86400",
              "cf-cache-status": "DYNAMIC",
              "cf-ray": "9ce94a75d8f258e5-YVR",
              "connection": "keep-alive",
              "content-encoding": "br",
              "content-type": "application/json",
              "date": "Mon, 16 Feb 2026 01:32:28 GMT",
              "openai-organization": "user-oqdrq8y0bphopngnvkyuu5wr",
              "openai-processing-ms": "5445",
              "openai-project": "proj_ZRoLLwXcJok6Xg2t6eKhI1pn",
              "openai-version": "2020-10-01",
              "server": "cloudflare",
              "set-cookie": "__cf_bm=v8LHMg8L4Xo5vEJS7_XknItXWfv3zEMOB1G7DU3DX_4-1771205543.3383183-1.0.1.1-5vX0gIM3SbRGUkqDQuOY7EuhSLSIkakfMA3rZnBIJJN0qsVdqfc1eZ0yuY73KkMwlgdwWDx1ooci7MD3cgzafJWs5eZ_ngMD.0Xgepmd85KdsXE2Cu2kMYv0tmXRwfjw; HttpOnly; Secure; Path=/; Domain=api.openai.com; Expires=Mon, 16 Feb 2026 02:02:28 GMT",
              "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
              "transfer-encoding": "chunked",
              "x-content-type-options": "nosniff",
              "x-openai-proxy-wasm": "v0.1",
              "x-ratelimit-limit-requests": "10000",
              "x-ratelimit-limit-tokens": "10000000",
              "x-ratelimit-remaining-requests": "9999",
              "x-ratelimit-remaining-tokens": "9995538",
              "x-ratelimit-reset-requests": "6ms",
              "x-ratelimit-reset-tokens": "26ms",
              "x-request-id": "req_1c4e99f848de4d8e835fa7685aac58cc"
            }
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0.010277999999999999,
        "gradingResult": {
          "pass": true,
          "score": 0.88625,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 2165,
            "prompt": 1476,
            "completion": 689,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 0.8725,
              "reason": "character_accuracy=1.00, confidence_quality=1.00, duration_accuracy=1.00, format_accuracy=1.00, genre_accuracy=0.75, json_valid=0.90, location_accuracy=0.80, title_accuracy=1.00, tone_accuracy=0.40",
              "assertion": {
                "type": "python",
                "value": "file://../scorers/config_detection_scorer.py"
              }
            },
            {
              "assertion": {
                "type": "llm-rubric",
                "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
              },
              "pass": true,
              "score": 0.9,
              "reason": "Evaluating each criterion:\n\n1. **Title**: Correctly identified as 'The Mariner' with 0.99 confidence. \n\n2. **Format**: Correctly identified as 'feature film' with reasonable confidence (0.85). \n\n3. **Genre**: Includes action and crime, which are appropriate. Drama is also reasonable. Missing 'thriller' but the genres chosen are defensible. \n\n4. **Tone**: Captures dark, gritty, and tragic qualities well. 'Satirical' is a reasonable interpretation given the dark humor elements mentioned. \n\n5. **Duration**: Estimated at 95 minutes. The rubric says 85-130 minutes is reasonable for a ~430-line screenplay. 95 falls within this range. \n\n6. **Primary characters**: Identifies Mariner and Rose as leads. Also includes Salvatori as primary antagonist. The rubric asks for Mariner and Rose as leads - both are present. \n\n7. **Supporting characters**: Lists Mariner's Dad, various thugs, Rosco, Vinnie, Mikey, Carlos. The rubric mentions Dad, Salvatori, and Vinnie. Salvatori is listed as primary rather than supporting, which is a judgment call but defensible. Vinnie and Dad are correctly listed as supporting.  (minor quibble about Salvatori's placement)\n\n8. **Location count**: Estimated at 9, which falls within the 5-20 range. \n\n9. **Locations summary**: Clearly mentions the Ruddy & Greene Building as the primary setting, describes the floor-by-floor progression, mentions the post-collapse urban setting, and contrasting flashback locations. \n\n10. **Target audience**: Correctly identified as R-rated/mature content with appropriate justification citing graphic violence, strong language, and mature themes. \n\n11. **Confidence calibration**: Scores are generally well-calibrated - high confidence for clear facts (title at 0.99), moderate for interpretive fields (duration at 0.75, format at 0.85). Reasonable spread. \n\n12. **Rationale quality**: Rationales are grounded in specific screenplay evidence - mentions title cards, specific scenes (flare gun, cryptocurrency), character arcs, flashback locations, building description. Evidence-based rather than guessed. \n\nOverall, this is a strong, thorough, and well-evidenced analysis. All 10 fields are addressed with reasonable accuracy. The rationales cite specific screenplay elements. Minor issues: Salvatori could arguably be supporting rather than primary, and 'thriller' is missing from genre but 'crime' and 'action' cover the core. The output is well-structured and professional.",
              "tokensUsed": {
                "total": 2165,
                "prompt": 1476,
                "completion": 689,
                "cached": 0,
                "numRequests": 0,
                "completionDetails": {
                  "reasoning": 0,
                  "acceptedPrediction": 0,
                  "rejectedPrediction": 0
                }
              },
              "metadata": {
                "renderedGradingPrompt": "[{\"role\":\"system\",\"content\":\"You are grading output according to a user-specified rubric. If the statement in the rubric is true, then the output passes the test. You respond with a JSON object with this structure: {reason: string, pass: boolean, score: number}\\n\\nExamples:\\n\\n<Output>Hello world</Output>\\n<Rubric>Content contains a greeting</Rubric>\\n{\\\"reason\\\": \\\"the content contains the word 'Hello'\\\", \\\"pass\\\": true, \\\"score\\\": 1.0}\\n\\n<Output>Avast ye swabs, repel the invaders!</Output>\\n<Rubric>Does not speak like a pirate</Rubric>\\n{\\\"reason\\\": \\\"'avast ye' is a common pirate term\\\", \\\"pass\\\": false, \\\"score\\\": 0.0}\"},{\"role\":\"user\",\"content\":\"<Output>\\n```json\\n{\\n  \\\"title\\\": {\\n    \\\"value\\\": \\\"The Mariner\\\",\\n    \\\"confidence\\\": 0.99,\\n    \\\"rationale\\\": \\\"Explicitly stated as the opening title card and full-screen superimposed title in the screenplay.\\\"\\n  },\\n  \\\"format\\\": {\\n    \\\"value\\\": \\\"feature film\\\",\\n    \\\"confidence\\\": 0.85,\\n    \\\"rationale\\\": \\\"Standard screenplay structure with FADE IN, multiple locations, character development arcs, and climactic confrontation suggests feature-length narrative rather than short or episodic format.\\\"\\n  },\\n  \\\"genre\\\": {\\n    \\\"value\\\": [\\\"action\\\", \\\"crime\\\", \\\"drama\\\"],\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"Extensive fight sequences and combat (oar battles, gunfire), criminal underworld elements (gang money theft, Salvatori's operation), and emotional character backstory/family trauma indicate these three primary genres.\\\"\\n  },\\n  \\\"tone\\\": {\\n    \\\"value\\\": [\\\"dark\\\", \\\"gritty\\\", \\\"satirical\\\", \\\"tragic\\\"],\\n    \\\"confidence\\\": 0.85,\\n    \\\"rationale\\\": \\\"Ruined urban setting, graphic violence, cynical humor (flare gun, cryptocurrency references), and the subversion of hero mythology through Mariner's false origin story create a dark, gritty, satirical tone with tragic undertones.\\\"\\n  },\\n  \\\"estimated_duration_minutes\\\": {\\n    \\\"value\\\": 95,\\n    \\\"confidence\\\": 0.75,\\n    \\\"rationale\\\": \\\"Screenplay contains approximately 95 pages of formatted script (estimated from scene density, dialogue, and action sequences). Using the standard 1 page  1 minute rule yields ~95 minutes.\\\"\\n  },\\n  \\\"primary_characters\\\": {\\n    \\\"value\\\": [\\\"Mariner (Billy/Will)\\\", \\\"Rose\\\", \\\"Salvatori\\\"],\\n    \\\"confidence\\\": 0.95,\\n    \\\"rationale\\\": \\\"Mariner is the protagonist with extensive character development and flashbacks. Rose is the co-protagonist driving the plot. Salvatori is the primary antagonist introduced in the climax.\\\"\\n  },\\n  \\\"supporting_characters\\\": {\\n    \\\"value\\\": [\\\"Mariner's Dad\\\", \\\"Thug 1\\\", \\\"Thug 2\\\", \\\"Thug 3\\\", \\\"Rosco\\\", \\\"Vinnie\\\", \\\"Mikey\\\", \\\"Carlos\\\"],\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"Mariner's Dad appears in multiple flashbacks as a formative influence. Various thugs and gang members appear throughout but with minimal dialogue or development.\\\"\\n  },\\n  \\\"location_count\\\": {\\n    \\\"value\\\": 9,\\n    \\\"confidence\\\": 0.8,\\n    \\\"rationale\\\": \\\"Distinct locations: (1) City Centre exterior, (2) Ruddy & Greene Building front, (3) Ruddy & Greene Building rear/alley, (4) Elevator, (5) 11th floor corridor, (6) Stairwell, (7) 12th floor stairwell, (8) 13th floor, (9) 15th floor office. Flashback locations (coastline, backyard) are separate temporal settings.\\\"\\n  },\\n  \\\"locations_summary\\\": {\\n    \\\"value\\\": \\\"Primary setting is a ruined urban environment in a post-2025 collapsed city. Main action occurs within the Ruddy & Greene Building, a 15-story sandstone structure controlled by criminals. Flashbacks depict a coastal fishing location and a suburban backyard. The building progresses from destroyed lower floors to a luxurious criminal headquarters on the 15th floor.\\\",\\n    \\\"confidence\\\": 0.9,\\n    \\\"rationale\\\": \\\"Opening title card establishes the post-pandemic, post-financial-collapse setting. The building is the central location with clear progression through multiple floors. Flashbacks provide contrasting domestic/natural settings.\\\"\\n  },\\n  \\\"target_audience\\\": {\\n    \\\"value\\\": \\\"R-rated / 15+ (mature audiences)\\\",\\n    \\\"confidence\\\": 0.8,\\n    \\\"rationale\\\": \\\"Extensive graphic violence (skull fragments, blood, brutal combat), strong language throughout, criminal activity, and mature themes of parental abuse and abandonment suggest R-rating or equivalent mature audience classification. Not suitable for children.\\\"\\n  }\\n}\\n```\\n</Output>\\n<Rubric>\\nEvaluate the project config detection for \\\"The Mariner\\\" screenplay.\\n\\nThe model was asked to detect 10 project metadata fields from the screenplay text.\\n\\nKey quality criteria:\\n1. Title: Did it correctly identify \\\"The Mariner\\\" as the title?\\n2. Format: Did it identify this as a feature film screenplay?\\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\\n4. Tone: Does it capture the dark, gritty, violent qualities?\\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\\n6. Primary characters: Does it identify The Mariner and Rose as leads?\\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\\n10. Target audience: Does it correctly identify this as mature/adult content?\\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\\n\\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\\n\\n</Rubric>\"}]"
              }
            }
          ]
        },
        "id": "3abf9ce1-b278-4d2f-90dc-68764b68aa4c",
        "latencyMs": 10142,
        "namedScores": {},
        "prompt": {
          "raw": "You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\nThe Mariner\n\nWhat happens when a heros origin story crumbles?  \nFADE IN:\n\nEXT. CITY CENTRE \\- NIGHT\n\nA ruined city. Fires burn here and there, some from barrels with huddled homeless homeless warming themselves, others from destroyed buildings. A fallen skyscraper has carved away chunks of its neighbours, filling an intersection with rubble. Gunshots and screams are heard. Sirens are far in the distance.\n\nOPENING TITLE\n\nIn 2020 the pandemic swept the globe. Everyone who could work remotely did, hollowing out the skyscrapers. The cascading bank failures and commercial real estate collapse of 2025 turned these once pristine urban centres into sprawling no-go zones. Vigilanties arise to do what the police couldnt.\n\nEXT. RUDDY & GREENE BUILDING \\- FRONT \\- NIGHT\n\nClassic 15-story sandstone building. Once beautiful, now riddled with bullet holes and graffiti. Parked outside are rows of high-end European SUVs.\n\nEXT. RUDDY & GREENE BUILDING \\- REAR \\- NIGHT\n\nGrimy alley. A delivery van rolls up. McAngus Fish & Brewis painted on the side with a giant fake fish on top.\n\nTHE MARINER, hidden in shadow, gets out of the van and flings open the buildings back door, his huge frame silhouetted against the interiors light. He charges in. All we hear are the sounds: yells, violent fighting, silence. Heavy footsteps, DING, elevator doors open, muzak version of Faith by George Michael playing with Mariner humming along, elevator doors close.\n\nAs the elevator rises, one window lights up on each floor, all the way to the very top.\n\nMore sounds: DING, elevator opens, Faith playing, yelling, running, gunfire, screams, silence. Heavy footsteps. A door kicked in, more gunfire, fighting, wet cracking sounds, silence.\n\nROSE (O.S.)  \nBilly?\\!\n\nMARINER (O.S.)  \nNot today\\! Cmon, we gotta go.\n\nMore sounds: two people running down a hallway, a single gunshot, THWACK, nothing. DING, elevator doors.\n\nINT. RUDDY & GREEN BUILDING \\- ELEVATOR\n\nUB40's \"I Can't Help Falling in Love With You\" muzak.\n\nROSE (mid-30s) leans against the elevator wall, panting. Shes wearing a Tim Hortons uniform, her hair is a mess, and theres blood spattered on her face.\n\nShe looks right, pants a few more times, then squints in disgust. She gingerly picks up a bloody scrap of something with hair on it. She snorts and drops it.\n\nROSE  \nIs that skull??\n\nNext to her is Mariner, also panting, covered in far more blood. His face is broad, stoic, and frowning. He has gray-blue eyes and a thick, curly, beard barely streaked with gray. He wears a red knit cap and a small mask.\n\nFULL-SCREEN SUPERIMPOSED TITLE CARD: THE MARINER\n\nHe blinks a few times as a drop of blood falls from his eyebrow. He looks toward her, then spits out some blood.\n\nMARINER  \nYeaaaaah...\n\nHes built like a pro-wrestler. Moss green SWEATER stretched over his huge frame, sleeves rolled showing heavy leather BRACERS adorned with anchors. His inner forearm has a classic heart-and-arrow TATTOO with Dad in the centre. Across his chest is a BANDOLIER of bright red 12-gauge shells, FISH HOOKS hanging from the bottom edge. Heavy rubberized BOOTS go past his knees. A CAPE of heavy FISHING NET edged with WEIGHTS hangs from his shoulders.\n\nHe holds a STOUT WOODEN OAR in both hands, edged with METAL and dripping with BLOOD. He shakes it to dislodge another GRISLY BIT which hits the ground with a wet plop.\n\nROSE  \nHow the hell did you find me?\n\nMariner looks down and mumbles something.\n\nROSE  \n(annoyed)  \nWhat?\n\nMARINER  \nAirTag.\n\nROSE  \nWhat??\n\nMARINER  \nI stashed an AirTag in your purse. Last Thanksgiving at mas.\n\nROSE  \nShit\\! My purse\\!\n\nMARINER  \nJust in case\\! I worry about--\n\nROSE  \nShut it\\! We gotta go back for it.\n\nMARINER  \nWhat? No way\\! Im taking you home. Its my fault they went after you. I never thought theyd--\n\nROSE  \n(laughing)  \nYou think theyre after you?\n\nMariner looks confused. DING \\- elevator doors open on 12\\.\n\nThree THUGS are waiting for them. THUG 1 raises his GUN... Mariner SWINGS HIS OAR in an arc, catching the gun... BANG \\- shot goes high, GUN FLIES out of his hand... Mariner SIDE-KICKS him in the chest... Thug 1 FLIES back, knocking the others to the GROUND.\n\nRose has been frantically pressing the CLOSE DOOR button.\n\nThe thugs struggle to their feet.\n\nTHUG 2  \n(into radio)  \nWeve got them on twelve.\n\nTHUGS 2 & 3 DRAW GUNS. BLAM BLAM BLAM. Rose and Mariner LEAP to the side... DOORS begin to CLOSE... Thug 2 LUNGES at the elevator BUTTON... Mariners OAR flashes through the closing doors... Thug 2 SCREAMS and CURSES... Doors close.\n\nTHUG  \n(muffled)  \nGo\\! Go\\! Down to eight\\!\n\nRose presses 11\\.\n\nROSE  \nWell take the stairs up. They wont expect that.\n\nMARINER  \nBecause its stupid\\!\n\nRose raises an eyebrow at Mariners crazy outfit.\n\nMARINER  \nIts functional\\! ... And an homage.\n\nDING. Doors open. Rose peers out. Silence.\n\nMARINER  \n(whispering)  \nRose... No\\!\n\nRose quietly darts out of the elevator. Mariner tries to grab her but misses. He hesitates... Doors start closing. Mariner dashes out after her, grumbling.\n\nINT. 11TH FLOOR \\- CONTINUOUS\n\nThey hunt for a stairwell through the dim corridors. Lights flicker, papers and office furniture litter the hallway.\n\nROSE  \nWait. Did you mean an homage to... dad? Are you ser--\n\nMARINER  \nShh\\!\n\nHe PULLS her into an EMPTY ROOM. They hide behind a toppled FILING CABINET and listen, catching their breath. Someone slowly walks by. Mariner looks down at his Dad TATTOO.\n\nBEGIN FLASHBACK: EXT. COASTLINE \\- DAY \\- PAST\n\nYoung Mariner (8) and his dad (30s, fisherman) bob happily in a wooden sailboat near the shoreline. Golden light bathes them. Dad is behind Mariner, teaching him to cast. They laugh and smile, enjoying the day.\n\nDAD  \nOi, me bosun. Ya knows whats a hero? Es the one whats brave an true. You remembers that. Go on now an fetch yer pa anudder.\n\nYoung Mariner nods, fetching a beer with the seriousness of a young boy with a job to do.\n\nEND FLASHBACK.\n\nRose nudges him, breaking his reverie. He grabs her hand and leads her out of the room. They find a stairwell.\n\nINT. STAIRWELL \\- CONTINUOUS\n\nShe goes up, he goes down.\n\nMARINER  \nYou mad? We have to go\\! Ill buy you a new bloody purse.\n\nROSE  \nIt aint the purse. Its... a blockchain password to my life savings. I hid it on a chip in the lining. Its all I got, Billy\\!\n\nShe gives a pleading look and heads up stairs. Mariner follows, grumbling.\n\nINT. 12TH FLOOR STAIRWELL \\- CONTINUOUS\n\nMARINER  \nThe hells a blockchain?\n\nBOOM \\- A thug (ROSCO) opens the stairwell door, slamming Rose into Mariner. They stumble... Mariner YANKS Rosco into the stairwell... SMASHES his face into the wall... Rosco drops his GUN... Rose picks it up and points it at the back of his head as Mariner keeps him pressed into the wall.\n\nROSE  \nHey, Rosco. Explain blockchain.\n\nROSCO  \n(panicked, face smooshed)  \nWhat?\\!\n\nRose cocks the gun.\n\nROSCO  \nOkay, okay\\! Its, uh, a decentralized digital ledger detailing asset ownership. Untraceable. Oh man, Mr. Salvatoris gonna kill ya, Rosie.\n\nRose nods yes,\" maybe at both things. She motions for Mariner to do something to Rosco.\n\nROSCO  \nHe aint gonna let you walk with 20 mil--\n\nMariner cracks his head into the wall and Rosco crumples. Rose tucks the gun into her pants. Mariner stares at her.\n\nMARINER  \nWas he going to say 20 million? And how the hell do you know these assholes?\n\nRose starts up the stairs again. Mariner grabs her arm. She struggles. He lets her go. She scowls at him.\n\nROSE  \nI stole it, okay? From these assholes. Its gang money.\n\nMARINER  \nYou got me involved in stealing gang money?\n\nROSE  \nWho got you involved, Mr. Fucking AirTag?\n\nRose storms up the stairs and out of the door to the 13th floor. Mariner follows.\n\nINT. 13TH FLOOR\n\nVINNIE, MIKEY, and CARLOS patrol the ruined corridor.\n\nMIKEY  \nYou heard about WaldoCoin?\n\nVINNIE  \nMan, that shits a scam. You gotta get into PonziCoin. My cousins in it. He says its legit.\n\nThey hear the stairwell door slam open on the other side of the floor and angry voices. Vinnie puts a finger to his lips and motions Mikey and Carlos to follow.\n\nMARINER (O.S.)  \nWere leaving. Now. I dont steal, Rose. Its against my code.\n\nThe thugs creep down the hallway toward the voices.\n\nROSE (O.S.)  \n(laughing but angry)  \nFrom criminals? We take it, their gang collapses. And what code??\n\nVinnie motions the others to stop at the corner, gun ready.\n\nMARINER (O.S.)  \nI live by the Mariners code: honesty, bravery, and grit. A true hero never backs down from a fight.\n\nROSE (O.S.)  \nYou know who you sound like...\n\nThe thugs appear at the end of the hallway, guns raised.\n\nCARLOS  \nFreeze, assholes\\! On the ground\\!\n\nVINNIE  \nRosey, baby. We dont wanna hurt ya. Mr. Salvatori just wants his password. Thats all. Then maybe, if youre reeeaal nice, maybe you can be my booty call some more.\n\nRoses eyes narrow. Mariner scowls and steps in front.\n\nMIKEY  \nHey, Finding Nemo, drop the piece.\n\nVINNIE cackles. Mainer slowly unholsters his weapon \\- a fat, bright-orange pistol.\n\nMIKEY  \nIs that a... flare gun?\n\nThe thugs all start laughing. POP \\- Blinding red flare streaks out... Mariner spins, broad back protecting Rose... Flare hits VINNIE in the chest. He SCREAMS and drops, still screaming. BLAM-BLAM-BLAM \\- Thugs fire... One shot hits Mariners back... He shoves Rose through an open door...\n\nRose sees the stark red light of the flare and hears VINNIES screams as it continues to burn. Mariner lunges toward the other thugs. BLAM-BLAM. THUMP. GRUNT. CRACK. SCREAM. BLAM. Rose peeks out. Mariner is holding Mikey and Carlos by the necks, a foot off the ground. CRUNCH \\- he cracks their heads together and they drop.\n\nRose joins Mariner as he wipes his BLOODY OAR on Carlos back. BOSUN is carved into the wood. Rose gives Vinnies body a kick.\n\nROSE  \nPrick. Oh shit\\! Youre bleeding.\n\nShe rips off a strip of her uniform and wraps it around Mariners leg. She eyes the holes in his sweater.\n\nMARINER  \nI hate your boyfriend.\n\nROSE  \nEx boyfriend. Yeah I know. Vinnies unique... charm convinced me that robbing these jackasses was the right move.\n\nMARINER  \nHe convinced me, too. Cmon.\n\nINT. 15TH FLOOR\n\nThis floor isnt destroyed like the others. Its CLEAN, LUXURIOUS, and DIMLY LIT, like an old nightclub. Mariners opening fight is evident: pooled blood and gouged walls.\n\nThe stairwell door opens. Mariner and Rose edge into the corridor. They pass a number of ROOMS: pool table, cigar lounge, a smashed door with a chair and ropes on the floor.\n\nAt the end of the hallway they stop at a sturdy closed door. Rose nods. Mariner checks the handle. Locked.\n\nMariner shoves his OAR into the doorframe and strains. CREAK. He bears down harder, veins rising on his neck, muscles bulging. CREAK. CRACK. CRASH \\- It splinters open.\n\nThey survey the room: huge wooden DESK atop a thick Persian RUG, BOOKSHELVES of leather-bound books, fine BOOZE fills a glass case, mismatched PAINTINGS of different periods, and a bowl of MINTS on the desk. Next to that, a PURSE.\n\nRose tiptoes in and picks up her PURSE as Mariner moves to check two SIDE DOORS.\n\nROSE  \nChrist youre strong, Billy. Thats gotta be juice, right?\n\nBEGIN FLASHBACK: EXT. BACKYARD \\- DAY \\- PAST\n\nThe warm sun dapples through trees in the idyllic yard, a trim house with a homemade pie in the window. Young Mariners dad patiently explains the basics of weightlifting. Mariner struggles to bench press, dad encouraging and helping him. He makes it. They laugh. Dad puts his arm around him and tousles his hair.\n\nDAD  \nYer gonna be a scrapper, ya knows that? Jus remember, me bosun, dont never run from a fight. Not again, ya hears me? Its not what a man does. Its not what a MacAngus does. Lets do a round.\n\nMariner nods, lips pursed in resolve. He has a black eye.\n\nEND FLASHBACK.\n\nMARINER  \nJust hours of pumpin tin, sis. Just like dad taught me.\n\nROSE  \nYoure serious about this dad shit? You talking about the summer he took you to buddys place?\n\nMARINER  \n(through gritted teeth)  \nDad taught me everything. Sailing, fishing, fighting. How to get strong and be brave. How to be a man. Everything. It broke me when he died.\n\nROSE  \nDied\\!?\n\nRose turns to Mariner.\n\nROSE (CONTD)  \nSeriously? All these years you thought he was dead? Is that what you told yourself? Is that why you thought he never came to see you? \n\nMARINER  \nWhat are you saying?\n\nROSE  \nChrist, Billy, hes living up in  Chimney Bay with some skank. He was on the pogey that summer at buddys\\! He was supposed to be taking care of you. Instead hed ditch you in his deadbeat friends yard all summer while they got shit faced.\n\nMARINER  \n(quietly)  \nBullshit. Ma woulda said.\n\nROSE  \nYou were too young, Will. She didnt want to break your heart.\n\nMariner looks lost; a hulking bearded man with the eyes of a wounded child.\n\nTINKLE \\- ICE in a TUMBLER of scotch melts. As they look at the desk, they notice a STILL-BURNING CIGAR.\n\nA VOICE booms from the door they entered through.\n\nSALVATORI (O.S.)  \n(Russian accent)  \nRosey\\! Somehow I just knew youd be back.\n\nTwo THUGS burst in through the office doors, GUNS raised. Rose retreats behind the desk. Mariner stares vacantly.\n\nSALVATORI enters, holding a SUBMACHINE GUN. Hes WHITE FROM HEAD TO TOE: white silk suit, tie, shirt, shoes. White hair pulled back into a small ponytail, and a finely groomed white MOUSTACHE. His red-tinted glasses stand out in contrast. He wears a thick hoop earring, gold rings on each finger, and has a single GOLDEN TOOTH.\n\nSalvatori strides confidently up to Rose, submachine gun levelled at her gut. He never breaks eye contact with her.\n\nSALVATORI  \nYou brought a big man with you.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nThe yard is overgrown with WEEDS, DISCARDED BOTTLES, some RUSTY WEIGHTS, and a BENCH PRESS repaired with peeling duct-tape. Young Mariners dad PUNCHES him in the face.\n\nDAD  \nJeeeeezuz,  b'y, ya gots to stand up fer yerself, bosun\\! No wonders ya got yer ass whupped. Hands up, now\\! Dont never run from a fight again, ya hear?\n\nMariner nods, lips pursed in resolve. Dad PUNCHES him again.\n\nDAD  \nFer fuck sakes\\! Yer a bag a sad. Go lift some tin till yer a man.\n\nDad heads into the house in DISGUST, kicking a BOTTLE which SMASHES against the stucco. Mariner, wiping a split lip, goes to the BENCH PRESS and struggles to add some weights.\n\nINT. STAIRWELL \\- (BACK TO PRESENT)\n\nSALVATORI  \nWho are you, big man?\n\nMARINER  \n(quietly)  \nNobody.\n\nSALVATORI  \nYou certainly look like youre trying to be somebody. Like a big fucking hero.\n\nEXT. COASTLINE \\- DAY \\- (FLASHBACK)\n\nYoung Mariner in a boat, the bottom littered with empty beer bottles. Dad is pissing off the side. Mariner is under-dressed and shivering.\n\nDAD  \nYa know whats a hero, by? Its got two thumbs and e looks like this\\! Ha\\! Now fetch me anudder. An dont gimme no sass abouts it like yer mudder.\n\nEXT. BACKYARD \\- DAY \\- (FLASHBACK)\n\nSALVATORI (CONTD)  \nSo? Are you a big fucking hero?\n\nMARINER  \n(quietly)  \nNo.\n\nThe thugs take Mariners OAR and kick the back of his legs so hes kneeling at their feet. Mariner doesnt resist.\n\nBLAM. Salvatori fires a SHOT into the bookcase behind Rose. Mariner flinches and Rose stifles a scream.\n\nSALVATORI  \nMemory stick, Rosey.\n\nRose swallows.\n\nROSE  \nHes no hero. Hes a gullible ass who spent his entire life in the shadow of a loser.\n\nMariner closes his eyes and hangs his head. Salvatori smirks at this.\n\nROSE  \nI know a hero, though. He sees the best in people even if they dont deserve it. He grew up in a shitty home with a shitty father who kicked the crap out of him and then abandoned him for some junkie. And instead of following that path, he forged his own.\n\nMariner looks up at Rose, eyes moist.\n\nSALVATORI  \nOkay, okay, shut up now.\n\nROSE  \nHes a model of honesty and bravery and grit. He somehow turned a deadbeat father into a superhero. Then became a real one.\n\nSalvatori points his GUN at Roses head.\n\nSALVATORI  \n(screaming)  \nPASSWORD, ROSE. NOW\\!\n\nROSE  \nAnd he never backs down from a fight.\n\nA smile crosses Mariners face as he clenches his hands into fists.\n\nCUT TO BLACK.\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "label": "prompts/config-detection.txt: You are configuring a film project from a screenplay. Analyze the following screenplay and detect project metadata.\n\n==========\nSCREENPLAY:\n\n{{screenplay}}\n\n==========\nTASK:\n\nDetect the following 10 project configuration fields. For each field, provide:\n- value: the detected value\n- confidence: 0.0-1.0 confidence score\n- rationale: brief explanation of how you determined the value\n\nReturn a JSON object with these fields:\n\n1. title (string): The title of the screenplay/film\n2. format (string): The format type (e.g., \"feature film\", \"short film\", \"pilot\", \"limited series\")\n3. genre (array of strings): Primary genres (e.g., [\"action\", \"crime\", \"drama\"])\n4. tone (array of strings): Tonal qualities (e.g., [\"dark\", \"gritty\", \"suspenseful\"])\n5. estimated_duration_minutes (integer): Estimated runtime in minutes (use ~1 page per minute rule)\n6. primary_characters (array of strings): Main characters (protagonists/antagonists)\n7. supporting_characters (array of strings): Supporting and minor characters\n8. location_count (integer): Number of distinct locations\n9. locations_summary (string): Brief description of the key locations\n10. target_audience (string or null): Target audience rating/demographic, null if uncertain\n\nBe conservative. Avoid fabricated detail. Base all answers on evidence in the screenplay text.\n\nExample structure:\n{\n  \"title\": {\"value\": \"...\", \"confidence\": 0.95, \"rationale\": \"...\"},\n  \"format\": {\"value\": \"...\", \"confidence\": 0.9, \"rationale\": \"...\"},\n  ...\n}",
          "config": {
            "provider": "anthropic:messages:claude-opus-4-6"
          }
        },
        "promptId": "a298f8e59d0e5184b43a0be484524cae03335a41d5ae89811f617d91fa39c887",
        "promptIdx": 4,
        "provider": {
          "id": "anthropic:messages:claude-haiku-4-5-20251001",
          "label": "Claude Haiku 4.5"
        },
        "response": {
          "output": "```json\n{\n  \"title\": {\n    \"value\": \"The Mariner\",\n    \"confidence\": 0.99,\n    \"rationale\": \"Explicitly stated as the opening title card and full-screen superimposed title in the screenplay.\"\n  },\n  \"format\": {\n    \"value\": \"feature film\",\n    \"confidence\": 0.85,\n    \"rationale\": \"Standard screenplay structure with FADE IN, multiple locations, character development arcs, and climactic confrontation suggests feature-length narrative rather than short or episodic format.\"\n  },\n  \"genre\": {\n    \"value\": [\"action\", \"crime\", \"drama\"],\n    \"confidence\": 0.9,\n    \"rationale\": \"Extensive fight sequences and combat (oar battles, gunfire), criminal underworld elements (gang money theft, Salvatori's operation), and emotional character backstory/family trauma indicate these three primary genres.\"\n  },\n  \"tone\": {\n    \"value\": [\"dark\", \"gritty\", \"satirical\", \"tragic\"],\n    \"confidence\": 0.85,\n    \"rationale\": \"Ruined urban setting, graphic violence, cynical humor (flare gun, cryptocurrency references), and the subversion of hero mythology through Mariner's false origin story create a dark, gritty, satirical tone with tragic undertones.\"\n  },\n  \"estimated_duration_minutes\": {\n    \"value\": 95,\n    \"confidence\": 0.75,\n    \"rationale\": \"Screenplay contains approximately 95 pages of formatted script (estimated from scene density, dialogue, and action sequences). Using the standard 1 page  1 minute rule yields ~95 minutes.\"\n  },\n  \"primary_characters\": {\n    \"value\": [\"Mariner (Billy/Will)\", \"Rose\", \"Salvatori\"],\n    \"confidence\": 0.95,\n    \"rationale\": \"Mariner is the protagonist with extensive character development and flashbacks. Rose is the co-protagonist driving the plot. Salvatori is the primary antagonist introduced in the climax.\"\n  },\n  \"supporting_characters\": {\n    \"value\": [\"Mariner's Dad\", \"Thug 1\", \"Thug 2\", \"Thug 3\", \"Rosco\", \"Vinnie\", \"Mikey\", \"Carlos\"],\n    \"confidence\": 0.9,\n    \"rationale\": \"Mariner's Dad appears in multiple flashbacks as a formative influence. Various thugs and gang members appear throughout but with minimal dialogue or development.\"\n  },\n  \"location_count\": {\n    \"value\": 9,\n    \"confidence\": 0.8,\n    \"rationale\": \"Distinct locations: (1) City Centre exterior, (2) Ruddy & Greene Building front, (3) Ruddy & Greene Building rear/alley, (4) Elevator, (5) 11th floor corridor, (6) Stairwell, (7) 12th floor stairwell, (8) 13th floor, (9) 15th floor office. Flashback locations (coastline, backyard) are separate temporal settings.\"\n  },\n  \"locations_summary\": {\n    \"value\": \"Primary setting is a ruined urban environment in a post-2025 collapsed city. Main action occurs within the Ruddy & Greene Building, a 15-story sandstone structure controlled by criminals. Flashbacks depict a coastal fishing location and a suburban backyard. The building progresses from destroyed lower floors to a luxurious criminal headquarters on the 15th floor.\",\n    \"confidence\": 0.9,\n    \"rationale\": \"Opening title card establishes the post-pandemic, post-financial-collapse setting. The building is the central location with clear progression through multiple floors. Flashbacks provide contrasting domestic/natural settings.\"\n  },\n  \"target_audience\": {\n    \"value\": \"R-rated / 15+ (mature audiences)\",\n    \"confidence\": 0.8,\n    \"rationale\": \"Extensive graphic violence (skull fragments, blood, brutal combat), strong language throughout, criminal activity, and mature themes of parental abuse and abandonment suggest R-rating or equivalent mature audience classification. Not suitable for children.\"\n  }\n}\n```",
          "tokenUsage": {
            "total": 6350,
            "prompt": 5368,
            "completion": 982
          },
          "finishReason": "stop",
          "cost": 0.010277999999999999
        },
        "score": 0.88625,
        "success": true,
        "testCase": {
          "vars": {
            "screenplay": "file://../input/the-mariner.md",
            "golden_path": "golden/the-mariner-config.json"
          },
          "assert": [
            {
              "type": "python",
              "value": "file://../scorers/config_detection_scorer.py"
            },
            {
              "type": "llm-rubric",
              "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
            }
          ],
          "options": {
            "provider": "anthropic:messages:claude-opus-4-6"
          },
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      }
    ],
    "stats": {
      "successes": 3,
      "failures": 9,
      "errors": 0,
      "tokenUsage": {
        "prompt": 59394,
        "completion": 10639,
        "cached": 0,
        "total": 79263,
        "numRequests": 12,
        "completionDetails": {
          "reasoning": 9230,
          "acceptedPrediction": 0,
          "rejectedPrediction": 0
        },
        "assertions": {
          "total": 25130,
          "prompt": 16619,
          "completion": 8511,
          "cached": 0,
          "numRequests": 0,
          "completionDetails": {
            "reasoning": 0,
            "acceptedPrediction": 0,
            "rejectedPrediction": 0
          }
        }
      },
      "durationMs": 130393
    }
  },
  "config": {
    "tags": {},
    "description": "Project config detection from screenplay  The Mariner",
    "prompts": [
      "file:///Users/cam/Documents/Projects/cine-forge-sidequests/benchmarks/prompts/config-detection.txt"
    ],
    "providers": [
      {
        "id": "openai:gpt-4.1-nano",
        "label": "GPT-4.1 Nano",
        "config": {
          "temperature": 0,
          "max_tokens": 4096,
          "response_format": {
            "type": "json_object"
          }
        }
      },
      {
        "id": "openai:gpt-4.1-mini",
        "label": "GPT-4.1 Mini",
        "config": {
          "temperature": 0,
          "max_tokens": 4096,
          "response_format": {
            "type": "json_object"
          }
        }
      },
      {
        "id": "google:gemini-2.5-flash-lite",
        "label": "Gemini 2.5 Flash Lite",
        "config": {
          "temperature": 0,
          "maxOutputTokens": 16384
        }
      },
      {
        "id": "openai:gpt-4.1",
        "label": "GPT-4.1",
        "config": {
          "temperature": 0,
          "max_tokens": 4096,
          "response_format": {
            "type": "json_object"
          }
        }
      },
      {
        "id": "anthropic:messages:claude-haiku-4-5-20251001",
        "label": "Claude Haiku 4.5",
        "config": {
          "temperature": 0,
          "max_tokens": 4096
        }
      },
      {
        "id": "anthropic:messages:claude-sonnet-4-5-20250929",
        "label": "Claude Sonnet 4.5",
        "config": {
          "temperature": 0,
          "max_tokens": 4096
        }
      },
      {
        "id": "google:gemini-2.5-flash",
        "label": "Gemini 2.5 Flash",
        "config": {
          "temperature": 0,
          "maxOutputTokens": 16384
        }
      },
      {
        "id": "google:gemini-3-flash-preview",
        "label": "Gemini 3 Flash",
        "config": {
          "temperature": 0,
          "maxOutputTokens": 16384
        }
      },
      {
        "id": "openai:gpt-5.2",
        "label": "GPT-5.2",
        "config": {
          "temperature": 0,
          "max_tokens": 4096,
          "response_format": {
            "type": "json_object"
          }
        }
      },
      {
        "id": "anthropic:messages:claude-opus-4-6",
        "label": "Claude Opus 4.6",
        "config": {
          "temperature": 0,
          "max_tokens": 4096
        }
      },
      {
        "id": "google:gemini-2.5-pro",
        "label": "Gemini 2.5 Pro",
        "config": {
          "temperature": 0,
          "maxOutputTokens": 16384
        }
      },
      {
        "id": "google:gemini-3-pro-preview",
        "label": "Gemini 3 Pro",
        "config": {
          "temperature": 0,
          "maxOutputTokens": 16384
        }
      }
    ],
    "tests": [
      {
        "vars": {
          "screenplay": "file://../input/the-mariner.md",
          "golden_path": "golden/the-mariner-config.json"
        },
        "assert": [
          {
            "type": "python",
            "value": "file://../scorers/config_detection_scorer.py"
          },
          {
            "type": "llm-rubric",
            "value": "Evaluate the project config detection for \"The Mariner\" screenplay.\n\nThe model was asked to detect 10 project metadata fields from the screenplay text.\n\nKey quality criteria:\n1. Title: Did it correctly identify \"The Mariner\" as the title?\n2. Format: Did it identify this as a feature film screenplay?\n3. Genre: Does it include action, crime, and/or thriller? (It's a vigilante crime-action story)\n4. Tone: Does it capture the dark, gritty, violent qualities?\n5. Duration: Is the estimate reasonable (85-130 minutes for a ~430-line screenplay)?\n6. Primary characters: Does it identify The Mariner and Rose as leads?\n7. Supporting characters: Does it list Dad, Salvatori, Vinnie among supporting cast?\n8. Location count: Is the estimate reasonable (5-20 distinct locations)?\n9. Locations summary: Does it mention the Ruddy & Greene Building as the primary setting?\n10. Target audience: Does it correctly identify this as mature/adult content?\n11. Confidence calibration: Are confidence scores reasonable and well-calibrated?\n12. Rationale quality: Are rationales grounded in actual screenplay evidence?\n\nScore strictly: the metadata should be accurate and evidence-based, not guessed.\n"
          }
        ]
      }
    ],
    "scenarios": [],
    "env": {},
    "defaultTest": {
      "options": {
        "provider": "anthropic:messages:claude-opus-4-6"
      },
      "vars": {},
      "assert": [],
      "metadata": {}
    },
    "outputPath": [
      "results/config-detection-run1.json"
    ],
    "extensions": [],
    "metadata": {},
    "evaluateOptions": {}
  },
  "shareableUrl": null,
  "metadata": {
    "promptfooVersion": "0.120.24",
    "nodeVersion": "v24.13.1",
    "platform": "darwin",
    "arch": "arm64",
    "exportedAt": "2026-02-16T01:34:34.623Z",
    "evaluationCreatedAt": "2026-02-16T01:32:23.108Z"
  }
}