recipe_id: mvp_ingest
description: "Full MVP ingestion pipeline: raw input -> canonical script -> scenes -> project config."
project: {}
stages:
  - id: ingest
    module: story_ingest_v1
    params:
      input_file: ${input_file}
    needs: []
  - id: normalize
    module: script_normalize_v1
    params:
      model: ${utility_model}
      work_model: ${utility_model}
      verify_model: ${utility_model}
      escalate_model: ${sota_model}
      max_retries: 1
      skip_qa: ${skip_qa}
    needs:
      - ingest
  - id: extract_scenes
    module: scene_extract_v1
    params:
      model: ${utility_model}
      work_model: ${utility_model}
      verify_model: ${utility_model}
      escalate_model: ${sota_model}
      max_retries: 1
      skip_qa: ${skip_qa}
    needs:
      - normalize
  - id: project_config
    module: project_config_v1
    params:
      model: ${utility_model}
      qa_model: ${utility_model}
      accept_config: ${accept_config}
    needs:
      - normalize
      - extract_scenes
